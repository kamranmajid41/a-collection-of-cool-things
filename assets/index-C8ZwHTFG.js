var hV=Object.defineProperty;var cO=i=>{throw TypeError(i)};var fV=(i,e,t)=>e in i?hV(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var bn=(i,e,t)=>fV(i,typeof e!="symbol"?e+"":e,t),aD=(i,e,t)=>e.has(i)||cO("Cannot "+t);var S=(i,e,t)=>(aD(i,e,"read from private field"),t?t.call(i):e.get(i)),te=(i,e,t)=>e.has(i)?cO("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Y=(i,e,t,n)=>(aD(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),Z=(i,e,t)=>(aD(i,e,"access private method"),t);var Ja=(i,e,t,n)=>({set _(s){Y(i,e,s,t)},get _(){return S(i,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function PE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var oD={exports:{}},Ob={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uO;function dV(){if(uO)return Ob;uO=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var o in s)o!=="key"&&(r[o]=s[o])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:a,ref:s!==void 0?s:null,props:r}}return Ob.Fragment=e,Ob.jsx=t,Ob.jsxs=t,Ob}var hO;function pV(){return hO||(hO=1,oD.exports=dV()),oD.exports}var q=pV(),lD={exports:{}},Un={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fO;function mV(){if(fO)return Un;fO=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function v(W){return W===null||typeof W!="object"?null:(W=m&&W[m]||W["@@iterator"],typeof W=="function"?W:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function M(W,he,xe){this.props=W,this.context=he,this.refs=E,this.updater=xe||y}M.prototype.isReactComponent={},M.prototype.setState=function(W,he){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,he,"setState")},M.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function x(){}x.prototype=M.prototype;function w(W,he,xe){this.props=W,this.context=he,this.refs=E,this.updater=xe||y}var R=w.prototype=new x;R.constructor=w,A(R,M.prototype),R.isPureReactComponent=!0;var D=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function H(W,he,xe,ye,fe,De){return xe=De.ref,{$$typeof:i,type:W,key:he,ref:xe!==void 0?xe:null,props:De}}function U(W,he){return H(W.type,he,void 0,void 0,void 0,W.props)}function N(W){return typeof W=="object"&&W!==null&&W.$$typeof===i}function O(W){var he={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(xe){return he[xe]})}var G=/\/+/g;function oe(W,he){return typeof W=="object"&&W!==null&&W.key!=null?O(""+W.key):he.toString(36)}function se(){}function le(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(se,se):(W.status="pending",W.then(function(he){W.status==="pending"&&(W.status="fulfilled",W.value=he)},function(he){W.status==="pending"&&(W.status="rejected",W.reason=he)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function ue(W,he,xe,ye,fe){var De=typeof W;(De==="undefined"||De==="boolean")&&(W=null);var Ce=!1;if(W===null)Ce=!0;else switch(De){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(W.$$typeof){case i:case e:Ce=!0;break;case d:return Ce=W._init,ue(Ce(W._payload),he,xe,ye,fe)}}if(Ce)return fe=fe(W),Ce=ye===""?"."+oe(W,0):ye,D(fe)?(xe="",Ce!=null&&(xe=Ce.replace(G,"$&/")+"/"),ue(fe,he,xe,"",function(xt){return xt})):fe!=null&&(N(fe)&&(fe=U(fe,xe+(fe.key==null||W&&W.key===fe.key?"":(""+fe.key).replace(G,"$&/")+"/")+Ce)),he.push(fe)),1;Ce=0;var Ue=ye===""?".":ye+":";if(D(W))for(var Qe=0;Qe<W.length;Qe++)ye=W[Qe],De=Ue+oe(ye,Qe),Ce+=ue(ye,he,xe,De,fe);else if(Qe=v(W),typeof Qe=="function")for(W=Qe.call(W),Qe=0;!(ye=W.next()).done;)ye=ye.value,De=Ue+oe(ye,Qe++),Ce+=ue(ye,he,xe,De,fe);else if(De==="object"){if(typeof W.then=="function")return ue(le(W),he,xe,ye,fe);throw he=String(W),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function z(W,he,xe){if(W==null)return W;var ye=[],fe=0;return ue(W,ye,"","",function(De){return he.call(xe,De,fe++)}),ye}function K(W){if(W._status===-1){var he=W._result;he=he(),he.then(function(xe){(W._status===0||W._status===-1)&&(W._status=1,W._result=xe)},function(xe){(W._status===0||W._status===-1)&&(W._status=2,W._result=xe)}),W._status===-1&&(W._status=0,W._result=he)}if(W._status===1)return W._result.default;throw W._result}var Q=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var he=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(he))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function de(){}return Un.Children={map:z,forEach:function(W,he,xe){z(W,function(){he.apply(this,arguments)},xe)},count:function(W){var he=0;return z(W,function(){he++}),he},toArray:function(W){return z(W,function(he){return he})||[]},only:function(W){if(!N(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Un.Component=M,Un.Fragment=t,Un.Profiler=s,Un.PureComponent=w,Un.StrictMode=n,Un.Suspense=c,Un.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Un.__COMPILER_RUNTIME={__proto__:null,c:function(W){return P.H.useMemoCache(W)}},Un.cache=function(W){return function(){return W.apply(null,arguments)}},Un.cloneElement=function(W,he,xe){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var ye=A({},W.props),fe=W.key,De=void 0;if(he!=null)for(Ce in he.ref!==void 0&&(De=void 0),he.key!==void 0&&(fe=""+he.key),he)!I.call(he,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&he.ref===void 0||(ye[Ce]=he[Ce]);var Ce=arguments.length-2;if(Ce===1)ye.children=xe;else if(1<Ce){for(var Ue=Array(Ce),Qe=0;Qe<Ce;Qe++)Ue[Qe]=arguments[Qe+2];ye.children=Ue}return H(W.type,fe,void 0,void 0,De,ye)},Un.createContext=function(W){return W={$$typeof:a,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:r,_context:W},W},Un.createElement=function(W,he,xe){var ye,fe={},De=null;if(he!=null)for(ye in he.key!==void 0&&(De=""+he.key),he)I.call(he,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(fe[ye]=he[ye]);var Ce=arguments.length-2;if(Ce===1)fe.children=xe;else if(1<Ce){for(var Ue=Array(Ce),Qe=0;Qe<Ce;Qe++)Ue[Qe]=arguments[Qe+2];fe.children=Ue}if(W&&W.defaultProps)for(ye in Ce=W.defaultProps,Ce)fe[ye]===void 0&&(fe[ye]=Ce[ye]);return H(W,De,void 0,void 0,null,fe)},Un.createRef=function(){return{current:null}},Un.forwardRef=function(W){return{$$typeof:o,render:W}},Un.isValidElement=N,Un.lazy=function(W){return{$$typeof:d,_payload:{_status:-1,_result:W},_init:K}},Un.memo=function(W,he){return{$$typeof:h,type:W,compare:he===void 0?null:he}},Un.startTransition=function(W){var he=P.T,xe={};P.T=xe;try{var ye=W(),fe=P.S;fe!==null&&fe(xe,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(de,Q)}catch(De){Q(De)}finally{P.T=he}},Un.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Un.use=function(W){return P.H.use(W)},Un.useActionState=function(W,he,xe){return P.H.useActionState(W,he,xe)},Un.useCallback=function(W,he){return P.H.useCallback(W,he)},Un.useContext=function(W){return P.H.useContext(W)},Un.useDebugValue=function(){},Un.useDeferredValue=function(W,he){return P.H.useDeferredValue(W,he)},Un.useEffect=function(W,he,xe){var ye=P.H;if(typeof xe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ye.useEffect(W,he)},Un.useId=function(){return P.H.useId()},Un.useImperativeHandle=function(W,he,xe){return P.H.useImperativeHandle(W,he,xe)},Un.useInsertionEffect=function(W,he){return P.H.useInsertionEffect(W,he)},Un.useLayoutEffect=function(W,he){return P.H.useLayoutEffect(W,he)},Un.useMemo=function(W,he){return P.H.useMemo(W,he)},Un.useOptimistic=function(W,he){return P.H.useOptimistic(W,he)},Un.useReducer=function(W,he,xe){return P.H.useReducer(W,he,xe)},Un.useRef=function(W){return P.H.useRef(W)},Un.useState=function(W){return P.H.useState(W)},Un.useSyncExternalStore=function(W,he,xe){return P.H.useSyncExternalStore(W,he,xe)},Un.useTransition=function(){return P.H.useTransition()},Un.version="19.1.0",Un}var dO;function lA(){return dO||(dO=1,lD.exports=mV()),lD.exports}var V=lA();const hI=PE(V);var cD={exports:{}},Ub={},uD={exports:{}},hD={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pO;function gV(){return pO||(pO=1,function(i){function e(z,K){var Q=z.length;z.push(K);e:for(;0<Q;){var de=Q-1>>>1,W=z[de];if(0<s(W,K))z[de]=K,z[Q]=W,Q=de;else break e}}function t(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var K=z[0],Q=z.pop();if(Q!==K){z[0]=Q;e:for(var de=0,W=z.length,he=W>>>1;de<he;){var xe=2*(de+1)-1,ye=z[xe],fe=xe+1,De=z[fe];if(0>s(ye,Q))fe<W&&0>s(De,ye)?(z[de]=De,z[fe]=Q,de=fe):(z[de]=ye,z[xe]=Q,de=xe);else if(fe<W&&0>s(De,Q))z[de]=De,z[fe]=Q,de=fe;else break e}}return K}function s(z,K){var Q=z.sortIndex-K.sortIndex;return Q!==0?Q:z.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var c=[],h=[],d=1,m=null,v=3,y=!1,A=!1,E=!1,M=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D(z){for(var K=t(h);K!==null;){if(K.callback===null)n(h);else if(K.startTime<=z)n(h),K.sortIndex=K.expirationTime,e(c,K);else break;K=t(h)}}function P(z){if(E=!1,D(z),!A)if(t(c)!==null)A=!0,I||(I=!0,oe());else{var K=t(h);K!==null&&ue(P,K.startTime-z)}}var I=!1,H=-1,U=5,N=-1;function O(){return M?!0:!(i.unstable_now()-N<U)}function G(){if(M=!1,I){var z=i.unstable_now();N=z;var K=!0;try{e:{A=!1,E&&(E=!1,w(H),H=-1),y=!0;var Q=v;try{t:{for(D(z),m=t(c);m!==null&&!(m.expirationTime>z&&O());){var de=m.callback;if(typeof de=="function"){m.callback=null,v=m.priorityLevel;var W=de(m.expirationTime<=z);if(z=i.unstable_now(),typeof W=="function"){m.callback=W,D(z),K=!0;break t}m===t(c)&&n(c),D(z)}else n(c);m=t(c)}if(m!==null)K=!0;else{var he=t(h);he!==null&&ue(P,he.startTime-z),K=!1}}break e}finally{m=null,v=Q,y=!1}K=void 0}}finally{K?oe():I=!1}}}var oe;if(typeof R=="function")oe=function(){R(G)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,le=se.port2;se.port1.onmessage=G,oe=function(){le.postMessage(null)}}else oe=function(){x(G,0)};function ue(z,K){H=x(function(){z(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(z){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var Q=v;v=K;try{return z()}finally{v=Q}},i.unstable_requestPaint=function(){M=!0},i.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=v;v=z;try{return K()}finally{v=Q}},i.unstable_scheduleCallback=function(z,K,Q){var de=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?de+Q:de):Q=de,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Q+W,z={id:d++,callback:K,priorityLevel:z,startTime:Q,expirationTime:W,sortIndex:-1},Q>de?(z.sortIndex=Q,e(h,z),t(c)===null&&z===t(h)&&(E?(w(H),H=-1):E=!0,ue(P,Q-de))):(z.sortIndex=W,e(c,z),A||y||(A=!0,I||(I=!0,oe()))),z},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(z){var K=v;return function(){var Q=v;v=K;try{return z.apply(this,arguments)}finally{v=Q}}}}(hD)),hD}var mO;function vV(){return mO||(mO=1,uD.exports=gV()),uD.exports}var fD={exports:{}},_a={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gO;function yV(){if(gO)return _a;gO=1;var i=lA();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(c,h,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:c,containerInfo:h,implementation:d}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return _a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,_a.createPortal=function(c,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return r(c,h,null,d)},_a.flushSync=function(c){var h=a.T,d=n.p;try{if(a.T=null,n.p=2,c)return c()}finally{a.T=h,n.p=d,n.d.f()}},_a.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(c,h))},_a.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},_a.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var d=h.as,m=o(d,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?n.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:y}):d==="script"&&n.d.X(c,{crossOrigin:m,integrity:v,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},_a.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=o(h.as,h.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(c)},_a.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,m=o(d,h.crossOrigin);n.d.L(c,d,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},_a.preloadModule=function(c,h){if(typeof c=="string")if(h){var d=o(h.as,h.crossOrigin);n.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(c)},_a.requestFormReset=function(c){n.d.r(c)},_a.unstable_batchedUpdates=function(c,h){return c(h)},_a.useFormState=function(c,h,d){return a.H.useFormState(c,h,d)},_a.useFormStatus=function(){return a.H.useHostTransitionStatus()},_a.version="19.1.0",_a}var vO;function dz(){if(vO)return fD.exports;vO=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),fD.exports=yV(),fD.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yO;function _V(){if(yO)return Ub;yO=1;var i=vV(),e=lA(),t=dz();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function r(l){var u=l,g=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(g=u.return),l=u.return;while(l)}return u.tag===3?g:null}function a(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function o(l){if(r(l)!==l)throw Error(n(188))}function c(l){var u=l.alternate;if(!u){if(u=r(l),u===null)throw Error(n(188));return u!==l?null:l}for(var g=l,_=u;;){var T=g.return;if(T===null)break;var B=T.alternate;if(B===null){if(_=T.return,_!==null){g=_;continue}break}if(T.child===B.child){for(B=T.child;B;){if(B===g)return o(T),l;if(B===_)return o(T),u;B=B.sibling}throw Error(n(188))}if(g.return!==_.return)g=T,_=B;else{for(var k=!1,ee=T.child;ee;){if(ee===g){k=!0,g=T,_=B;break}if(ee===_){k=!0,_=T,g=B;break}ee=ee.sibling}if(!k){for(ee=B.child;ee;){if(ee===g){k=!0,g=B,_=T;break}if(ee===_){k=!0,_=B,g=T;break}ee=ee.sibling}if(!k)throw Error(n(189))}}if(g.alternate!==_)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?l:u}function h(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=h(l),u!==null)return u;l=l.sibling}return null}var d=Object.assign,m=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),R=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function oe(l){return l===null||typeof l!="object"?null:(l=G&&l[G]||l["@@iterator"],typeof l=="function"?l:null)}var se=Symbol.for("react.client.reference");function le(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===se?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case A:return"Fragment";case M:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case I:return"SuspenseList";case N:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case R:return(l.displayName||"Context")+".Provider";case w:return(l._context.displayName||"Context")+".Consumer";case D:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case H:return u=l.displayName||null,u!==null?u:le(l.type)||"Memo";case U:u=l._payload,l=l._init;try{return le(l(u))}catch{}}return null}var ue=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},de=[],W=-1;function he(l){return{current:l}}function xe(l){0>W||(l.current=de[W],de[W]=null,W--)}function ye(l,u){W++,de[W]=l.current,l.current=u}var fe=he(null),De=he(null),Ce=he(null),Ue=he(null);function Qe(l,u){switch(ye(Ce,u),ye(De,l),ye(fe,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?UP(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=UP(u),l=FP(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}xe(fe),ye(fe,l)}function xt(){xe(fe),xe(De),xe(Ce)}function lt(l){l.memoizedState!==null&&ye(Ue,l);var u=fe.current,g=FP(u,l.type);u!==g&&(ye(De,l),ye(fe,g))}function mt(l){De.current===l&&(xe(fe),xe(De)),Ue.current===l&&(xe(Ue),Bb._currentValue=Q)}var it=Object.prototype.hasOwnProperty,et=i.unstable_scheduleCallback,$=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ie=i.unstable_requestPaint,ke=i.unstable_now,We=i.unstable_getCurrentPriorityLevel,St=i.unstable_ImmediatePriority,nt=i.unstable_UserBlockingPriority,re=i.unstable_NormalPriority,J=i.unstable_LowPriority,Te=i.unstable_IdlePriority,Ye=i.log,st=i.unstable_setDisableYieldValue,je=null,pt=null;function vt(l){if(typeof Ye=="function"&&st(l),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(je,l)}catch{}}var Mt=Math.clz32?Math.clz32:Dt,kt=Math.log,dt=Math.LN2;function Dt(l){return l>>>=0,l===0?32:31-(kt(l)/dt|0)|0}var Ot=256,Lt=4194304;function Et(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ae(l,u,g){var _=l.pendingLanes;if(_===0)return 0;var T=0,B=l.suspendedLanes,k=l.pingedLanes;l=l.warmLanes;var ee=_&134217727;return ee!==0?(_=ee&~B,_!==0?T=Et(_):(k&=ee,k!==0?T=Et(k):g||(g=ee&~l,g!==0&&(T=Et(g))))):(ee=_&~B,ee!==0?T=Et(ee):k!==0?T=Et(k):g||(g=_&~l,g!==0&&(T=Et(g)))),T===0?0:u!==0&&u!==T&&(u&B)===0&&(B=T&-T,g=u&-u,B>=g||B===32&&(g&4194048)!==0)?u:T}function qe(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function gt(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _e(){var l=Ot;return Ot<<=1,(Ot&4194048)===0&&(Ot=256),l}function Be(){var l=Lt;return Lt<<=1,(Lt&62914560)===0&&(Lt=4194304),l}function He(l){for(var u=[],g=0;31>g;g++)u.push(l);return u}function tt(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function wt(l,u,g,_,T,B){var k=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var ee=l.entanglements,pe=l.expirationTimes,Pe=l.hiddenUpdates;for(g=k&~g;0<g;){var ot=31-Mt(g),ut=1<<ot;ee[ot]=0,pe[ot]=-1;var Ge=Pe[ot];if(Ge!==null)for(Pe[ot]=null,ot=0;ot<Ge.length;ot++){var Ve=Ge[ot];Ve!==null&&(Ve.lane&=-536870913)}g&=~ut}_!==0&&Tt(l,_,0),B!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=B&~(k&~u))}function Tt(l,u,g){l.pendingLanes|=u,l.suspendedLanes&=~u;var _=31-Mt(u);l.entangledLanes|=u,l.entanglements[_]=l.entanglements[_]|1073741824|g&4194090}function Wt(l,u){var g=l.entangledLanes|=u;for(l=l.entanglements;g;){var _=31-Mt(g),T=1<<_;T&u|l[_]&u&&(l[_]|=u),g&=~T}}function vn(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function $n(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function yn(){var l=K.p;return l!==0?l:(l=window.event,l===void 0?32:iO(l.type))}function os(l,u){var g=K.p;try{return K.p=l,u()}finally{K.p=g}}var Ui=Math.random().toString(36).slice(2),ls="__reactFiber$"+Ui,ys="__reactProps$"+Ui,_s="__reactContainer$"+Ui,Tr="__reactEvents$"+Ui,Lo="__reactListeners$"+Ui,ar="__reactHandles$"+Ui,rn="__reactResources$"+Ui,ua="__reactMarker$"+Ui;function pi(l){delete l[ls],delete l[ys],delete l[Tr],delete l[Lo],delete l[ar]}function j(l){var u=l[ls];if(u)return u;for(var g=l.parentNode;g;){if(u=g[_s]||g[ls]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(l=kP(l);l!==null;){if(g=l[ls])return g;l=kP(l)}return u}l=g,g=l.parentNode}return null}function ie(l){if(l=l[ls]||l[_s]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function be(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function Oe(l){var u=l[rn];return u||(u=l[rn]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function ze(l){l[ua]=!0}var Je=new Set,_t={};function ft(l,u){X(l,u),X(l+"Capture",u)}function X(l,u){for(_t[l]=u,l=0;l<u.length;l++)Je.add(u[l])}var ce=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),me={},ge={};function Ee(l){return it.call(ge,l)?!0:it.call(me,l)?!1:ce.test(l)?ge[l]=!0:(me[l]=!0,!1)}function Ne(l,u,g){if(Ee(u))if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var _=u.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+g)}}function Ze(l,u,g){if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+g)}}function rt(l,u,g,_){if(_===null)l.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(u,g,""+_)}}var ht,Nt;function Ct(l){if(ht===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);ht=u&&u[1]||"",Nt=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ht+l+Nt}var It=!1;function en(l,u){if(!l||It)return"";It=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(u){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(Ve){var Ge=Ve}Reflect.construct(l,[],ut)}else{try{ut.call()}catch(Ve){Ge=Ve}l.call(ut.prototype)}}else{try{throw Error()}catch(Ve){Ge=Ve}(ut=l())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(Ve){if(Ve&&Ge&&typeof Ve.stack=="string")return[Ve.stack,Ge.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var B=_.DetermineComponentFrameRoot(),k=B[0],ee=B[1];if(k&&ee){var pe=k.split(`
`),Pe=ee.split(`
`);for(T=_=0;_<pe.length&&!pe[_].includes("DetermineComponentFrameRoot");)_++;for(;T<Pe.length&&!Pe[T].includes("DetermineComponentFrameRoot");)T++;if(_===pe.length||T===Pe.length)for(_=pe.length-1,T=Pe.length-1;1<=_&&0<=T&&pe[_]!==Pe[T];)T--;for(;1<=_&&0<=T;_--,T--)if(pe[_]!==Pe[T]){if(_!==1||T!==1)do if(_--,T--,0>T||pe[_]!==Pe[T]){var ot=`
`+pe[_].replace(" at new "," at ");return l.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",l.displayName)),ot}while(1<=_&&0<=T);break}}}finally{It=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?Ct(g):""}function Kt(l){switch(l.tag){case 26:case 27:case 5:return Ct(l.type);case 16:return Ct("Lazy");case 13:return Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 15:return en(l.type,!1);case 11:return en(l.type.render,!1);case 1:return en(l.type,!0);case 31:return Ct("Activity");default:return""}}function Kn(l){try{var u="";do u+=Kt(l),l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function Vt(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Qt(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function jt(l){var u=Qt(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),_=""+l[u];if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var T=g.get,B=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return T.call(this)},set:function(k){_=""+k,B.call(this,k)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return _},setValue:function(k){_=""+k},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function bi(l){l._valueTracker||(l._valueTracker=jt(l))}function fn(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var g=u.getValue(),_="";return l&&(_=Qt(l)?l.checked?"true":"false":l.value),l=_,l!==g?(u.setValue(l),!0):!1}function gn(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Ci=/[\n"\\]/g;function nn(l){return l.replace(Ci,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Nn(l,u,g,_,T,B,k,ee){l.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?l.type=k:l.removeAttribute("type"),u!=null?k==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Vt(u)):l.value!==""+Vt(u)&&(l.value=""+Vt(u)):k!=="submit"&&k!=="reset"||l.removeAttribute("value"),u!=null?qi(l,k,Vt(u)):g!=null?qi(l,k,Vt(g)):_!=null&&l.removeAttribute("value"),T==null&&B!=null&&(l.defaultChecked=!!B),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?l.name=""+Vt(ee):l.removeAttribute("name")}function Dn(l,u,g,_,T,B,k,ee){if(B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(l.type=B),u!=null||g!=null){if(!(B!=="submit"&&B!=="reset"||u!=null))return;g=g!=null?""+Vt(g):"",u=u!=null?""+Vt(u):g,ee||u===l.value||(l.value=u),l.defaultValue=u}_=_??T,_=typeof _!="function"&&typeof _!="symbol"&&!!_,l.checked=ee?l.checked:!!_,l.defaultChecked=!!_,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(l.name=k)}function qi(l,u,g){u==="number"&&gn(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function ei(l,u,g,_){if(l=l.options,u){u={};for(var T=0;T<g.length;T++)u["$"+g[T]]=!0;for(g=0;g<l.length;g++)T=u.hasOwnProperty("$"+l[g].value),l[g].selected!==T&&(l[g].selected=T),T&&_&&(l[g].defaultSelected=!0)}else{for(g=""+Vt(g),u=null,T=0;T<l.length;T++){if(l[T].value===g){l[T].selected=!0,_&&(l[T].defaultSelected=!0);return}u!==null||l[T].disabled||(u=l[T])}u!==null&&(u.selected=!0)}}function wi(l,u,g){if(u!=null&&(u=""+Vt(u),u!==l.value&&(l.value=u),g==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=g!=null?""+Vt(g):""}function Ks(l,u,g,_){if(u==null){if(_!=null){if(g!=null)throw Error(n(92));if(ue(_)){if(1<_.length)throw Error(n(93));_=_[0]}g=_}g==null&&(g=""),u=g}g=Vt(u),l.defaultValue=g,_=l.textContent,_===g&&_!==""&&_!==null&&(l.value=_)}function jr(l,u){if(u){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=u;return}}l.textContent=u}var hl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yp(l,u,g){var _=u.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?_?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":_?l.setProperty(u,g):typeof g!="number"||g===0||hl.has(u)?u==="float"?l.cssFloat=g:l[u]=(""+g).trim():l[u]=g+"px"}function Wp(l,u,g){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,g!=null){for(var _ in g)!g.hasOwnProperty(_)||u!=null&&u.hasOwnProperty(_)||(_.indexOf("--")===0?l.setProperty(_,""):_==="float"?l.cssFloat="":l[_]="");for(var T in u)_=u[T],u.hasOwnProperty(T)&&g[T]!==_&&Yp(l,T,_)}else for(var B in u)u.hasOwnProperty(B)&&Yp(l,B,u[B])}function Wv(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),h1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kp(l){return h1.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Kv=null;function Jv(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var cu=null,yh=null;function EA(l){var u=ie(l);if(u&&(l=u.stateNode)){var g=l[ys]||null;e:switch(l=u.stateNode,u.type){case"input":if(Nn(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),u=g.name,g.type==="radio"&&u!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+nn(""+u)+'"][type="radio"]'),u=0;u<g.length;u++){var _=g[u];if(_!==l&&_.form===l.form){var T=_[ys]||null;if(!T)throw Error(n(90));Nn(_,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(u=0;u<g.length;u++)_=g[u],_.form===l.form&&fn(_)}break e;case"textarea":wi(l,g.value,g.defaultValue);break e;case"select":u=g.value,u!=null&&ei(l,!!g.multiple,u,!1)}}}var Jp=!1;function MA(l,u,g){if(Jp)return l(u,g);Jp=!0;try{var _=l(u);return _}finally{if(Jp=!1,(cu!==null||yh!==null)&&(Cl(),cu&&(u=cu,l=yh,yh=cu=null,EA(u),l)))for(u=0;u<l.length;u++)EA(l[u])}}function Xf(l,u){var g=l.stateNode;if(g===null)return null;var _=g[ys]||null;if(_===null)return null;g=_[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(l=l.type,_=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!_;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(n(231,u,typeof g));return g}var fl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zp=!1;if(fl)try{var qf={};Object.defineProperty(qf,"passive",{get:function(){Zp=!0}}),window.addEventListener("test",qf,qf),window.removeEventListener("test",qf,qf)}catch{Zp=!1}var $l=null,TA=null,Zv=null;function CA(){if(Zv)return Zv;var l,u=TA,g=u.length,_,T="value"in $l?$l.value:$l.textContent,B=T.length;for(l=0;l<g&&u[l]===T[l];l++);var k=g-l;for(_=1;_<=k&&u[g-_]===T[B-_];_++);return Zv=T.slice(l,1<_?1-_:void 0)}function uu(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Yf(){return!0}function Qp(){return!1}function Xr(l){function u(g,_,T,B,k){this._reactName=g,this._targetInst=T,this.type=_,this.nativeEvent=B,this.target=k,this.currentTarget=null;for(var ee in l)l.hasOwnProperty(ee)&&(g=l[ee],this[ee]=g?g(B):B[ee]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?Yf:Qp,this.isPropagationStopped=Qp,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Yf)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Yf)},persist:function(){},isPersistent:Yf}),u}var hu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wf=Xr(hu),Kf=d({},hu,{view:0,detail:0}),f1=Xr(Kf),ec,Jf,Zf,Qf=d({},Kf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:em,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Zf&&(Zf&&l.type==="mousemove"?(ec=l.screenX-Zf.screenX,Jf=l.screenY-Zf.screenY):Jf=ec=0,Zf=l),ec)},movementY:function(l){return"movementY"in l?l.movementY:Jf}}),wA=Xr(Qf),d1=d({},Qf,{dataTransfer:0}),E2=Xr(d1),or=d({},Kf,{relatedTarget:0}),Qv=Xr(or),p1=d({},hu,{animationName:0,elapsedTime:0,pseudoElement:0}),m1=Xr(p1),g1=d({},hu,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),v1=Xr(g1),$p=d({},hu,{data:0}),$v=Xr($p),y1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RA(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=A1[l])?!!u[l]:!1}function em(){return RA}var b1=d({},Kf,{key:function(l){if(l.key){var u=y1[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=uu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?_1[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:em,charCode:function(l){return l.type==="keypress"?uu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?uu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),DA=Xr(b1),BA=d({},Qf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e0=Xr(BA),x1=d({},Kf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:em}),LA=Xr(x1),S1=d({},hu,{propertyName:0,elapsedTime:0,pseudoElement:0}),tc=Xr(S1),NA=d({},Qf,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),M2=Xr(NA),E1=d({},hu,{newState:0,oldState:0}),fu=Xr(E1),nc=[9,13,27,32],tm=fl&&"CompositionEvent"in window,_h=null;fl&&"documentMode"in document&&(_h=document.documentMode);var nm=fl&&"TextEvent"in window&&!_h,im=fl&&(!tm||_h&&8<_h&&11>=_h),du=" ",lr=!1;function sm(l,u){switch(l){case"keyup":return nc.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IA(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var pu=!1;function rm(l,u){switch(l){case"compositionend":return IA(u);case"keypress":return u.which!==32?null:(lr=!0,du);case"textInput":return l=u.data,l===du&&lr?null:l;default:return null}}function PA(l,u){if(pu)return l==="compositionend"||!tm&&sm(l,u)?(l=CA(),Zv=TA=$l=null,pu=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return im&&u.locale!=="ko"?null:u.data;default:return null}}var t0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OA(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!t0[l.type]:u==="textarea"}function ha(l,u,g,_){cu?yh?yh.push(_):yh=[_]:cu=_,u=SM(u,"onChange"),0<u.length&&(g=new Wf("onChange","change",null,g,_),l.push({event:g,listeners:u}))}var $f=null,Ah=null;function M1(l){LP(l,0)}function am(l){var u=be(l);if(fn(u))return l}function n0(l,u){if(l==="change")return u}var i0=!1;if(fl){var s0;if(fl){var ed="oninput"in document;if(!ed){var td=document.createElement("div");td.setAttribute("oninput","return;"),ed=typeof td.oninput=="function"}s0=ed}else s0=!1;i0=s0&&(!document.documentMode||9<document.documentMode)}function Qi(){$f&&($f.detachEvent("onpropertychange",T1),Ah=$f=null)}function T1(l){if(l.propertyName==="value"&&am(Ah)){var u=[];ha(u,Ah,l,Jv(l)),MA(M1,u)}}function T2(l,u,g){l==="focusin"?(Qi(),$f=u,Ah=g,$f.attachEvent("onpropertychange",T1)):l==="focusout"&&Qi()}function C1(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return am(Ah)}function om(l,u){if(l==="click")return am(u)}function mu(l,u){if(l==="input"||l==="change")return am(u)}function w1(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var fa=typeof Object.is=="function"?Object.is:w1;function No(l,u){if(fa(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var g=Object.keys(l),_=Object.keys(u);if(g.length!==_.length)return!1;for(_=0;_<g.length;_++){var T=g[_];if(!it.call(u,T)||!fa(l[T],u[T]))return!1}return!0}function da(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function UA(l,u){var g=da(l);l=0;for(var _;g;){if(g.nodeType===3){if(_=l+g.textContent.length,l<=u&&_>=u)return{node:g,offset:u-l};l=_}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=da(g)}}function FA(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?FA(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function HA(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=gn(l.document);u instanceof l.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)l=u.contentWindow;else break;u=gn(l.document)}return u}function lm(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var zA=fl&&"documentMode"in document&&11>=document.documentMode,ic=null,r0=null,cm=null,a0=!1;function GA(l,u,g){var _=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;a0||ic==null||ic!==gn(_)||(_=ic,"selectionStart"in _&&lm(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),cm&&No(cm,_)||(cm=_,_=SM(r0,"onSelect"),0<_.length&&(u=new Wf("onSelect","select",null,u,g),l.push({event:u,listeners:_}),u.target=ic)))}function cr(l,u){var g={};return g[l.toLowerCase()]=u.toLowerCase(),g["Webkit"+l]="webkit"+u,g["Moz"+l]="moz"+u,g}var gu={animationend:cr("Animation","AnimationEnd"),animationiteration:cr("Animation","AnimationIteration"),animationstart:cr("Animation","AnimationStart"),transitionrun:cr("Transition","TransitionRun"),transitionstart:cr("Transition","TransitionStart"),transitioncancel:cr("Transition","TransitionCancel"),transitionend:cr("Transition","TransitionEnd")},o0={},R1={};fl&&(R1=document.createElement("div").style,"AnimationEvent"in window||(delete gu.animationend.animation,delete gu.animationiteration.animation,delete gu.animationstart.animation),"TransitionEvent"in window||delete gu.transitionend.transition);function sc(l){if(o0[l])return o0[l];if(!gu[l])return l;var u=gu[l],g;for(g in u)if(u.hasOwnProperty(g)&&g in R1)return o0[l]=u[g];return l}var qr=sc("animationend"),kA=sc("animationiteration"),pa=sc("animationstart"),D1=sc("transitionrun"),rc=sc("transitionstart"),nd=sc("transitioncancel"),ac=sc("transitionend"),l0=new Map,um="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");um.push("scrollEnd");function Js(l,u){l0.set(l,u),ft(u,[l])}var VA=new WeakMap;function ur(l,u){if(typeof l=="object"&&l!==null){var g=VA.get(l);return g!==void 0?g:(u={value:l,source:u,stack:Kn(u)},VA.set(l,u),u)}return{value:l,source:u,stack:Kn(u)}}var Cr=[],oo=0,c0=0;function hm(){for(var l=oo,u=c0=oo=0;u<l;){var g=Cr[u];Cr[u++]=null;var _=Cr[u];Cr[u++]=null;var T=Cr[u];Cr[u++]=null;var B=Cr[u];if(Cr[u++]=null,_!==null&&T!==null){var k=_.pending;k===null?T.next=T:(T.next=k.next,k.next=T),_.pending=T}B!==0&&jA(g,T,B)}}function vu(l,u,g,_){Cr[oo++]=l,Cr[oo++]=u,Cr[oo++]=g,Cr[oo++]=_,c0|=_,l.lanes|=_,l=l.alternate,l!==null&&(l.lanes|=_)}function u0(l,u,g,_){return vu(l,u,g,_),id(l)}function oc(l,u){return vu(l,null,null,u),id(l)}function jA(l,u,g){l.lanes|=g;var _=l.alternate;_!==null&&(_.lanes|=g);for(var T=!1,B=l.return;B!==null;)B.childLanes|=g,_=B.alternate,_!==null&&(_.childLanes|=g),B.tag===22&&(l=B.stateNode,l===null||l._visibility&1||(T=!0)),l=B,B=B.return;return l.tag===3?(B=l.stateNode,T&&u!==null&&(T=31-Mt(g),l=B.hiddenUpdates,_=l[T],_===null?l[T]=[u]:_.push(u),u.lane=g|536870912),B):null}function id(l){if(50<Tl)throw Tl=0,Fh=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var yu={};function XA(l,u,g,_){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ma(l,u,g,_){return new XA(l,u,g,_)}function fm(l){return l=l.prototype,!(!l||!l.isReactComponent)}function As(l,u){var g=l.alternate;return g===null?(g=ma(l.tag,u,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=u,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,u=l.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function qA(l,u){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,u=g.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Zs(l,u,g,_,T,B){var k=0;if(_=l,typeof l=="function")fm(l)&&(k=1);else if(typeof l=="string")k=Q9(l,g,fe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case N:return l=ma(31,g,u,T),l.elementType=N,l.lanes=B,l;case A:return _u(g.children,T,B,u);case E:k=8,T|=24;break;case M:return l=ma(12,g,u,T|2),l.elementType=M,l.lanes=B,l;case P:return l=ma(13,g,u,T),l.elementType=P,l.lanes=B,l;case I:return l=ma(19,g,u,T),l.elementType=I,l.lanes=B,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case x:case R:k=10;break e;case w:k=9;break e;case D:k=11;break e;case H:k=14;break e;case U:k=16,_=null;break e}k=29,g=Error(n(130,l===null?"null":typeof l,"")),_=null}return u=ma(k,g,u,T),u.elementType=l,u.type=_,u.lanes=B,u}function _u(l,u,g,_){return l=ma(7,l,_,u),l.lanes=g,l}function dm(l,u,g){return l=ma(6,l,null,u),l.lanes=g,l}function h0(l,u,g){return u=ma(4,l.children!==null?l.children:[],l.key,u),u.lanes=g,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var sd=[],ga=0,pm=null,rd=0,hr=[],Pa=0,Au=null,dl=1,pl="";function lc(l,u){sd[ga++]=rd,sd[ga++]=pm,pm=l,rd=u}function f0(l,u,g){hr[Pa++]=dl,hr[Pa++]=pl,hr[Pa++]=Au,Au=l;var _=dl;l=pl;var T=32-Mt(_)-1;_&=~(1<<T),g+=1;var B=32-Mt(u)+T;if(30<B){var k=T-T%5;B=(_&(1<<k)-1).toString(32),_>>=k,T-=k,dl=1<<32-Mt(u)+T|g<<T|_,pl=B+l}else dl=1<<B|g<<T|_,pl=l}function YA(l){l.return!==null&&(lc(l,1),f0(l,1,0))}function WA(l){for(;l===pm;)pm=sd[--ga],sd[ga]=null,rd=sd[--ga],sd[ga]=null;for(;l===Au;)Au=hr[--Pa],hr[Pa]=null,pl=hr[--Pa],hr[Pa]=null,dl=hr[--Pa],hr[Pa]=null}var Yr=null,ns=null,hi=!1,lo=null,Oa=!1,d0=Error(n(519));function bu(l){var u=Error(n(418,""));throw bh(ur(u,l)),d0}function B1(l){var u=l.stateNode,g=l.type,_=l.memoizedProps;switch(u[ls]=l,u[ys]=_,g){case"dialog":Jn("cancel",u),Jn("close",u);break;case"iframe":case"object":case"embed":Jn("load",u);break;case"video":case"audio":for(g=0;g<Mb.length;g++)Jn(Mb[g],u);break;case"source":Jn("error",u);break;case"img":case"image":case"link":Jn("error",u),Jn("load",u);break;case"details":Jn("toggle",u);break;case"input":Jn("invalid",u),Dn(u,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),bi(u);break;case"select":Jn("invalid",u);break;case"textarea":Jn("invalid",u),Ks(u,_.value,_.defaultValue,_.children),bi(u)}g=_.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||u.textContent===""+g||_.suppressHydrationWarning===!0||OP(u.textContent,g)?(_.popover!=null&&(Jn("beforetoggle",u),Jn("toggle",u)),_.onScroll!=null&&Jn("scroll",u),_.onScrollEnd!=null&&Jn("scrollend",u),_.onClick!=null&&(u.onclick=EM),u=!0):u=!1,u||bu(l)}function KA(l){for(Yr=l.return;Yr;)switch(Yr.tag){case 5:case 13:Oa=!1;return;case 27:case 3:Oa=!0;return;default:Yr=Yr.return}}function Io(l){if(l!==Yr)return!1;if(!hi)return KA(l),hi=!0,!1;var u=l.tag,g;if((g=u!==3&&u!==27)&&((g=u===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||q2(l.type,l.memoizedProps)),g=!g),g&&ns&&bu(l),KA(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(g=l.data,g==="/$"){if(u===0){ns=xc(l.nextSibling);break e}u--}else g!=="$"&&g!=="$!"&&g!=="$?"||u++;l=l.nextSibling}ns=null}}else u===27?(u=ns,Dd(l.type)?(l=J2,J2=null,ns=l):ns=u):ns=Yr?xc(l.stateNode.nextSibling):null;return!0}function ad(){ns=Yr=null,hi=!1}function mi(){var l=lo;return l!==null&&(ln===null?ln=l:ln.push.apply(ln,l),lo=null),l}function bh(l){lo===null?lo=[l]:lo.push(l)}var JA=he(null),xu=null,cc=null;function Su(l,u,g){ye(JA,u._currentValue),u._currentValue=g}function uc(l){l._currentValue=JA.current,xe(JA)}function ZA(l,u,g){for(;l!==null;){var _=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,_!==null&&(_.childLanes|=u)):_!==null&&(_.childLanes&u)!==u&&(_.childLanes|=u),l===g)break;l=l.return}}function mm(l,u,g,_){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var B=T.dependencies;if(B!==null){var k=T.child;B=B.firstContext;e:for(;B!==null;){var ee=B;B=T;for(var pe=0;pe<u.length;pe++)if(ee.context===u[pe]){B.lanes|=g,ee=B.alternate,ee!==null&&(ee.lanes|=g),ZA(B.return,g,l),_||(k=null);break e}B=ee.next}}else if(T.tag===18){if(k=T.return,k===null)throw Error(n(341));k.lanes|=g,B=k.alternate,B!==null&&(B.lanes|=g),ZA(k,g,l),k=null}else k=T.child;if(k!==null)k.return=T;else for(k=T;k!==null;){if(k===l){k=null;break}if(T=k.sibling,T!==null){T.return=k.return,k=T;break}k=k.return}T=k}}function co(l,u,g,_){l=null;for(var T=u,B=!1;T!==null;){if(!B){if((T.flags&524288)!==0)B=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var k=T.alternate;if(k===null)throw Error(n(387));if(k=k.memoizedProps,k!==null){var ee=T.type;fa(T.pendingProps.value,k.value)||(l!==null?l.push(ee):l=[ee])}}else if(T===Ue.current){if(k=T.alternate,k===null)throw Error(n(387));k.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(Bb):l=[Bb])}T=T.return}l!==null&&mm(u,l,g,_),u.flags|=262144}function gm(l){for(l=l.firstContext;l!==null;){if(!fa(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function ml(l){xu=l,cc=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function cs(l){return p0(xu,l)}function vm(l,u){return xu===null&&ml(l),p0(l,u)}function p0(l,u){var g=u._currentValue;if(u={context:u,memoizedValue:g,next:null},cc===null){if(l===null)throw Error(n(308));cc=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else cc=cc.next=u;return g}var QA=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(g,_){l.push(_)}};this.abort=function(){u.aborted=!0,l.forEach(function(g){return g()})}},C2=i.unstable_scheduleCallback,L1=i.unstable_NormalPriority,Bs={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function m0(){return{controller:new QA,data:new Map,refCount:0}}function od(l){l.refCount--,l.refCount===0&&C2(L1,function(){l.controller.abort()})}var ld=null,ym=0,Mn=0,cd=null;function Ua(l,u){if(ld===null){var g=ld=[];ym=0,Mn=U2(),cd={status:"pending",value:void 0,then:function(_){g.push(_)}}}return ym++,u.then(g0,g0),u}function g0(){if(--ym===0&&ld!==null){cd!==null&&(cd.status="fulfilled");var l=ld;ld=null,Mn=0,cd=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function w2(l,u){var g=[],_={status:"pending",value:null,reason:null,then:function(T){g.push(T)}};return l.then(function(){_.status="fulfilled",_.value=u;for(var T=0;T<g.length;T++)(0,g[T])(u)},function(T){for(_.status="rejected",_.reason=T,T=0;T<g.length;T++)(0,g[T])(void 0)}),_}var _m=z.S;z.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&Ua(l,u),_m!==null&&_m(l,u)};var uo=he(null);function Eu(){var l=uo.current;return l!==null?l:_n.pooledCache}function Am(l,u){u===null?ye(uo,uo.current):ye(uo,u.pool)}function v0(){var l=Eu();return l===null?null:{parent:Bs._currentValue,pool:l}}var bm=Error(n(460)),$A=Error(n(474)),Po=Error(n(542)),xm={then:function(){}};function y0(l){return l=l.status,l==="fulfilled"||l==="rejected"}function ud(){}function _0(l,u,g){switch(g=l[g],g===void 0?l.push(u):g!==u&&(u.then(ud,ud),u=g),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,N1(l),l;default:if(typeof u.status=="string")u.then(ud,ud);else{if(l=_n,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(_){if(u.status==="pending"){var T=u;T.status="fulfilled",T.value=_}},function(_){if(u.status==="pending"){var T=u;T.status="rejected",T.reason=_}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,N1(l),l}throw ho=u,bm}}var ho=null;function eb(){if(ho===null)throw Error(n(459));var l=ho;return ho=null,l}function N1(l){if(l===bm||l===Po)throw Error(n(483))}var hc=!1;function tb(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dn(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function gl(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function fc(l,u,g){var _=l.updateQueue;if(_===null)return null;if(_=_.shared,(gi&2)!==0){var T=_.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),_.pending=u,u=id(l),jA(l,null,g),u}return vu(l,_,u,g),id(l)}function xh(l,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194048)!==0)){var _=u.lanes;_&=l.pendingLanes,g|=_,u.lanes=g,Wt(l,g)}}function hd(l,u){var g=l.updateQueue,_=l.alternate;if(_!==null&&(_=_.updateQueue,g===_)){var T=null,B=null;if(g=g.firstBaseUpdate,g!==null){do{var k={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};B===null?T=B=k:B=B.next=k,g=g.next}while(g!==null);B===null?T=B=u:B=B.next=u}else T=B=u;g={baseState:_.baseState,firstBaseUpdate:T,lastBaseUpdate:B,shared:_.shared,callbacks:_.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=u}var nb=!1;function Sm(){if(nb){var l=cd;if(l!==null)throw l}}function fd(l,u,g,_){nb=!1;var T=l.updateQueue;hc=!1;var B=T.firstBaseUpdate,k=T.lastBaseUpdate,ee=T.shared.pending;if(ee!==null){T.shared.pending=null;var pe=ee,Pe=pe.next;pe.next=null,k===null?B=Pe:k.next=Pe,k=pe;var ot=l.alternate;ot!==null&&(ot=ot.updateQueue,ee=ot.lastBaseUpdate,ee!==k&&(ee===null?ot.firstBaseUpdate=Pe:ee.next=Pe,ot.lastBaseUpdate=pe))}if(B!==null){var ut=T.baseState;k=0,ot=Pe=pe=null,ee=B;do{var Ge=ee.lane&-536870913,Ve=Ge!==ee.lane;if(Ve?(tn&Ge)===Ge:(_&Ge)===Ge){Ge!==0&&Ge===Mn&&(nb=!0),ot!==null&&(ot=ot.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var mn=l,un=ee;Ge=u;var ki=g;switch(un.tag){case 1:if(mn=un.payload,typeof mn=="function"){ut=mn.call(ki,ut,Ge);break e}ut=mn;break e;case 3:mn.flags=mn.flags&-65537|128;case 0:if(mn=un.payload,Ge=typeof mn=="function"?mn.call(ki,ut,Ge):mn,Ge==null)break e;ut=d({},ut,Ge);break e;case 2:hc=!0}}Ge=ee.callback,Ge!==null&&(l.flags|=64,Ve&&(l.flags|=8192),Ve=T.callbacks,Ve===null?T.callbacks=[Ge]:Ve.push(Ge))}else Ve={lane:Ge,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},ot===null?(Pe=ot=Ve,pe=ut):ot=ot.next=Ve,k|=Ge;if(ee=ee.next,ee===null){if(ee=T.shared.pending,ee===null)break;Ve=ee,ee=Ve.next,Ve.next=null,T.lastBaseUpdate=Ve,T.shared.pending=null}}while(!0);ot===null&&(pe=ut),T.baseState=pe,T.firstBaseUpdate=Pe,T.lastBaseUpdate=ot,B===null&&(T.shared.lanes=0),Vo|=k,l.lanes=k,l.memoizedState=ut}}function dd(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function I1(l,u){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)dd(g[l],u)}var pd=he(null),A0=he(0);function P1(l,u){l=yo,ye(A0,l),ye(pd,u),yo=l|u.baseLanes}function ib(){ye(A0,yo),ye(pd,pd.current)}function Em(){yo=A0.current,xe(pd),xe(A0)}var dc=0,Tn=null,xi=null,Ls=null,b0=!1,Mu=!1,Wr=!1,Fs=0,fo=0,fr=null,O1=0;function bs(){throw Error(n(321))}function wr(l,u){if(u===null)return!1;for(var g=0;g<u.length&&g<l.length;g++)if(!fa(l[g],u[g]))return!1;return!0}function pc(l,u,g,_,T,B){return dc=B,Tn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,z.H=l===null||l.memoizedState===null?D0:_b,Wr=!1,B=g(_,T),Wr=!1,Mu&&(B=F1(u,g,_,T)),U1(l),B}function U1(l){z.H=Cm;var u=xi!==null&&xi.next!==null;if(dc=0,Ls=xi=Tn=null,b0=!1,fo=0,fr=null,u)throw Error(n(300));l===null||Qs||(l=l.dependencies,l!==null&&gm(l)&&(Qs=!0))}function F1(l,u,g,_){Tn=l;var T=0;do{if(Mu&&(fr=null),fo=0,Mu=!1,25<=T)throw Error(n(301));if(T+=1,Ls=xi=null,l.updateQueue!=null){var B=l.updateQueue;B.lastEffect=null,B.events=null,B.stores=null,B.memoCache!=null&&(B.memoCache.index=0)}z.H=uM,B=u(g,_)}while(Mu);return B}function R2(){var l=z.H,u=l.useState()[0];return u=typeof u.then=="function"?Oo(u):u,l=l.useState()[0],(xi!==null?xi.memoizedState:null)!==l&&(Tn.flags|=1024),u}function sb(){var l=Fs!==0;return Fs=0,l}function x0(l,u,g){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~g}function rb(l){if(b0){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}b0=!1}dc=0,Ls=xi=Tn=null,Mu=!1,fo=Fs=0,fr=null}function Kr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ls===null?Tn.memoizedState=Ls=l:Ls=Ls.next=l,Ls}function Ns(){if(xi===null){var l=Tn.alternate;l=l!==null?l.memoizedState:null}else l=xi.next;var u=Ls===null?Tn.memoizedState:Ls.next;if(u!==null)Ls=u,xi=l;else{if(l===null)throw Tn.alternate===null?Error(n(467)):Error(n(310));xi=l,l={memoizedState:xi.memoizedState,baseState:xi.baseState,baseQueue:xi.baseQueue,queue:xi.queue,next:null},Ls===null?Tn.memoizedState=Ls=l:Ls=Ls.next=l}return Ls}function Tu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oo(l){var u=fo;return fo+=1,fr===null&&(fr=[]),l=_0(fr,l,u),u=Tn,(Ls===null?u.memoizedState:Ls.next)===null&&(u=u.alternate,z.H=u===null||u.memoizedState===null?D0:_b),l}function S0(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Oo(l);if(l.$$typeof===R)return cs(l)}throw Error(n(438,String(l)))}function ab(l){var u=null,g=Tn.updateQueue;if(g!==null&&(u=g.memoCache),u==null){var _=Tn.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(u={data:_.data.map(function(T){return T.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),g===null&&(g=Tu(),Tn.updateQueue=g),g.memoCache=u,g=u.data[u.index],g===void 0)for(g=u.data[u.index]=Array(l),_=0;_<l;_++)g[_]=O;return u.index++,g}function mc(l,u){return typeof u=="function"?u(l):u}function Cu(l){var u=Ns();return ob(u,xi,l)}function ob(l,u,g){var _=l.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=g;var T=l.baseQueue,B=_.pending;if(B!==null){if(T!==null){var k=T.next;T.next=B.next,B.next=k}u.baseQueue=T=B,_.pending=null}if(B=l.baseState,T===null)l.memoizedState=B;else{u=T.next;var ee=k=null,pe=null,Pe=u,ot=!1;do{var ut=Pe.lane&-536870913;if(ut!==Pe.lane?(tn&ut)===ut:(dc&ut)===ut){var Ge=Pe.revertLane;if(Ge===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),ut===Mn&&(ot=!0);else if((dc&Ge)===Ge){Pe=Pe.next,Ge===Mn&&(ot=!0);continue}else ut={lane:0,revertLane:Pe.revertLane,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},pe===null?(ee=pe=ut,k=B):pe=pe.next=ut,Tn.lanes|=Ge,Vo|=Ge;ut=Pe.action,Wr&&g(B,ut),B=Pe.hasEagerState?Pe.eagerState:g(B,ut)}else Ge={lane:ut,revertLane:Pe.revertLane,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null},pe===null?(ee=pe=Ge,k=B):pe=pe.next=Ge,Tn.lanes|=ut,Vo|=ut;Pe=Pe.next}while(Pe!==null&&Pe!==u);if(pe===null?k=B:pe.next=ee,!fa(B,l.memoizedState)&&(Qs=!0,ot&&(g=cd,g!==null)))throw g;l.memoizedState=B,l.baseState=k,l.baseQueue=pe,_.lastRenderedState=B}return T===null&&(_.lanes=0),[l.memoizedState,_.dispatch]}function lb(l){var u=Ns(),g=u.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=l;var _=g.dispatch,T=g.pending,B=u.memoizedState;if(T!==null){g.pending=null;var k=T=T.next;do B=l(B,k.action),k=k.next;while(k!==T);fa(B,u.memoizedState)||(Qs=!0),u.memoizedState=B,u.baseQueue===null&&(u.baseState=B),g.lastRenderedState=B}return[B,_]}function H1(l,u,g){var _=Tn,T=Ns(),B=hi;if(B){if(g===void 0)throw Error(n(407));g=g()}else g=u();var k=!fa((xi||T).memoizedState,g);k&&(T.memoizedState=g,Qs=!0),T=T.queue;var ee=G1.bind(null,_,T,l);if(vd(2048,8,ee,[l]),T.getSnapshot!==u||k||Ls!==null&&Ls.memoizedState.tag&1){if(_.flags|=2048,gd(9,Mm(),z1.bind(null,_,T,g,u),null),_n===null)throw Error(n(349));B||(dc&124)!==0||md(_,u,g)}return g}function md(l,u,g){l.flags|=16384,l={getSnapshot:u,value:g},u=Tn.updateQueue,u===null?(u=Tu(),Tn.updateQueue=u,u.stores=[l]):(g=u.stores,g===null?u.stores=[l]:g.push(l))}function z1(l,u,g,_){u.value=g,u.getSnapshot=_,k1(u)&&V1(l)}function G1(l,u,g){return g(function(){k1(u)&&V1(l)})}function k1(l){var u=l.getSnapshot;l=l.value;try{var g=u();return!fa(l,g)}catch{return!0}}function V1(l){var u=oc(l,2);u!==null&&Qr(u,l,2)}function cb(l){var u=Kr();if(typeof l=="function"){var g=l;if(l=g(),Wr){vt(!0);try{g()}finally{vt(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mc,lastRenderedState:l},u}function j1(l,u,g,_){return l.baseState=g,ob(l,xi,typeof _=="function"?_:mc)}function D2(l,u,g,_,T){if(R0(l))throw Error(n(485));if(l=u.action,l!==null){var B={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){B.listeners.push(k)}};z.T!==null?g(!0):B.isTransition=!1,_(B),g=u.pending,g===null?(B.next=u.pending=B,X1(u,B)):(B.next=g.next,u.pending=g.next=B)}}function X1(l,u){var g=u.action,_=u.payload,T=l.state;if(u.isTransition){var B=z.T,k={};z.T=k;try{var ee=g(T,_),pe=z.S;pe!==null&&pe(k,ee),q1(l,u,ee)}catch(Pe){ub(l,u,Pe)}finally{z.T=B}}else try{B=g(T,_),q1(l,u,B)}catch(Pe){ub(l,u,Pe)}}function q1(l,u,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(_){Y1(l,u,_)},function(_){return ub(l,u,_)}):Y1(l,u,g)}function Y1(l,u,g){u.status="fulfilled",u.value=g,W1(u),l.state=g,u=l.pending,u!==null&&(g=u.next,g===u?l.pending=null:(g=g.next,u.next=g,X1(l,g)))}function ub(l,u,g){var _=l.pending;if(l.pending=null,_!==null){_=_.next;do u.status="rejected",u.reason=g,W1(u),u=u.next;while(u!==_)}l.action=null}function W1(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function hb(l,u){return u}function K1(l,u){if(hi){var g=_n.formState;if(g!==null){e:{var _=Tn;if(hi){if(ns){t:{for(var T=ns,B=Oa;T.nodeType!==8;){if(!B){T=null;break t}if(T=xc(T.nextSibling),T===null){T=null;break t}}B=T.data,T=B==="F!"||B==="F"?T:null}if(T){ns=xc(T.nextSibling),_=T.data==="F!";break e}}bu(_)}_=!1}_&&(u=g[0])}}return g=Kr(),g.memoizedState=g.baseState=u,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hb,lastRenderedState:u},g.queue=_,g=lM.bind(null,Tn,_),_.dispatch=g,_=cb(!1),B=w0.bind(null,Tn,!1,_.queue),_=Kr(),T={state:u,dispatch:null,action:l,pending:null},_.queue=T,g=D2.bind(null,Tn,T,B,g),T.dispatch=g,_.memoizedState=l,[u,g,!1]}function J1(l){var u=Ns();return Z1(u,xi,l)}function Z1(l,u,g){if(u=ob(l,u,hb)[0],l=Cu(mc)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var _=Oo(u)}catch(k){throw k===bm?Po:k}else _=u;u=Ns();var T=u.queue,B=T.dispatch;return g!==u.memoizedState&&(Tn.flags|=2048,gd(9,Mm(),B2.bind(null,T,g),null)),[_,B,l]}function B2(l,u){l.action=u}function Q1(l){var u=Ns(),g=xi;if(g!==null)return Z1(u,g,l);Ns(),u=u.memoizedState,g=Ns();var _=g.queue.dispatch;return g.memoizedState=l,[u,_,!1]}function gd(l,u,g,_){return l={tag:l,create:g,deps:_,inst:u,next:null},u=Tn.updateQueue,u===null&&(u=Tu(),Tn.updateQueue=u),g=u.lastEffect,g===null?u.lastEffect=l.next=l:(_=g.next,g.next=l,l.next=_,u.lastEffect=l),l}function Mm(){return{destroy:void 0,resource:void 0}}function fb(){return Ns().memoizedState}function E0(l,u,g,_){var T=Kr();_=_===void 0?null:_,Tn.flags|=l,T.memoizedState=gd(1|u,Mm(),g,_)}function vd(l,u,g,_){var T=Ns();_=_===void 0?null:_;var B=T.memoizedState.inst;xi!==null&&_!==null&&wr(_,xi.memoizedState.deps)?T.memoizedState=gd(u,B,g,_):(Tn.flags|=l,T.memoizedState=gd(1|u,B,g,_))}function db(l,u){E0(8390656,8,l,u)}function pb(l,u){vd(2048,8,l,u)}function M0(l,u){return vd(4,2,l,u)}function T0(l,u){return vd(4,4,l,u)}function $1(l,u){if(typeof u=="function"){l=l();var g=u(l);return function(){typeof g=="function"?g():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function eM(l,u,g){g=g!=null?g.concat([l]):null,vd(4,4,$1.bind(null,u,l),g)}function mb(){}function tM(l,u){var g=Ns();u=u===void 0?null:u;var _=g.memoizedState;return u!==null&&wr(u,_[1])?_[0]:(g.memoizedState=[l,u],l)}function gb(l,u){var g=Ns();u=u===void 0?null:u;var _=g.memoizedState;if(u!==null&&wr(u,_[1]))return _[0];if(_=l(),Wr){vt(!0);try{l()}finally{vt(!1)}}return g.memoizedState=[_,u],_}function C0(l,u,g){return g===void 0||(dc&1073741824)!==0?l.memoizedState=u:(l.memoizedState=g,l=G0(),Tn.lanes|=l,Vo|=l,g)}function nM(l,u,g,_){return fa(g,u)?g:pd.current!==null?(l=C0(l,g,_),fa(l,u)||(Qs=!0),l):(dc&42)===0?(Qs=!0,l.memoizedState=g):(l=G0(),Tn.lanes|=l,Vo|=l,u)}function iM(l,u,g,_,T){var B=K.p;K.p=B!==0&&8>B?B:8;var k=z.T,ee={};z.T=ee,w0(l,!1,u,g);try{var pe=T(),Pe=z.S;if(Pe!==null&&Pe(ee,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var ot=w2(pe,_);Tm(l,u,ot,fs(l))}else Tm(l,u,_,fs(l))}catch(ut){Tm(l,u,{then:function(){},status:"rejected",reason:ut},fs())}finally{K.p=B,z.T=k}}function L2(){}function vb(l,u,g,_){if(l.tag!==5)throw Error(n(476));var T=sM(l).queue;iM(l,T,u,Q,g===null?L2:function(){return rM(l),g(_)})}function sM(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mc,lastRenderedState:Q},next:null};var g={};return u.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mc,lastRenderedState:g},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function rM(l){var u=sM(l).next.queue;Tm(l,u,{},fs())}function yb(){return cs(Bb)}function aM(){return Ns().memoizedState}function oM(){return Ns().memoizedState}function N2(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var g=fs();l=gl(g);var _=fc(u,l,g);_!==null&&(Qr(_,u,g),xh(_,u,g)),u={cache:m0()},l.payload=u;return}u=u.return}}function I2(l,u,g){var _=fs();g={lane:_,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},R0(l)?cM(u,g):(g=u0(l,u,g,_),g!==null&&(Qr(g,l,_),Fa(g,u,_)))}function lM(l,u,g){var _=fs();Tm(l,u,g,_)}function Tm(l,u,g,_){var T={lane:_,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(R0(l))cM(u,T);else{var B=l.alternate;if(l.lanes===0&&(B===null||B.lanes===0)&&(B=u.lastRenderedReducer,B!==null))try{var k=u.lastRenderedState,ee=B(k,g);if(T.hasEagerState=!0,T.eagerState=ee,fa(ee,k))return vu(l,u,T,0),_n===null&&hm(),!1}catch{}finally{}if(g=u0(l,u,T,_),g!==null)return Qr(g,l,_),Fa(g,u,_),!0}return!1}function w0(l,u,g,_){if(_={lane:2,revertLane:U2(),action:_,hasEagerState:!1,eagerState:null,next:null},R0(l)){if(u)throw Error(n(479))}else u=u0(l,g,_,2),u!==null&&Qr(u,l,2)}function R0(l){var u=l.alternate;return l===Tn||u!==null&&u===Tn}function cM(l,u){Mu=b0=!0;var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}function Fa(l,u,g){if((g&4194048)!==0){var _=u.lanes;_&=l.pendingLanes,g|=_,u.lanes=g,Wt(l,g)}}var Cm={readContext:cs,use:S0,useCallback:bs,useContext:bs,useEffect:bs,useImperativeHandle:bs,useLayoutEffect:bs,useInsertionEffect:bs,useMemo:bs,useReducer:bs,useRef:bs,useState:bs,useDebugValue:bs,useDeferredValue:bs,useTransition:bs,useSyncExternalStore:bs,useId:bs,useHostTransitionStatus:bs,useFormState:bs,useActionState:bs,useOptimistic:bs,useMemoCache:bs,useCacheRefresh:bs},D0={readContext:cs,use:S0,useCallback:function(l,u){return Kr().memoizedState=[l,u===void 0?null:u],l},useContext:cs,useEffect:db,useImperativeHandle:function(l,u,g){g=g!=null?g.concat([l]):null,E0(4194308,4,$1.bind(null,u,l),g)},useLayoutEffect:function(l,u){return E0(4194308,4,l,u)},useInsertionEffect:function(l,u){E0(4,2,l,u)},useMemo:function(l,u){var g=Kr();u=u===void 0?null:u;var _=l();if(Wr){vt(!0);try{l()}finally{vt(!1)}}return g.memoizedState=[_,u],_},useReducer:function(l,u,g){var _=Kr();if(g!==void 0){var T=g(u);if(Wr){vt(!0);try{g(u)}finally{vt(!1)}}}else T=u;return _.memoizedState=_.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},_.queue=l,l=l.dispatch=I2.bind(null,Tn,l),[_.memoizedState,l]},useRef:function(l){var u=Kr();return l={current:l},u.memoizedState=l},useState:function(l){l=cb(l);var u=l.queue,g=lM.bind(null,Tn,u);return u.dispatch=g,[l.memoizedState,g]},useDebugValue:mb,useDeferredValue:function(l,u){var g=Kr();return C0(g,l,u)},useTransition:function(){var l=cb(!1);return l=iM.bind(null,Tn,l.queue,!0,!1),Kr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,g){var _=Tn,T=Kr();if(hi){if(g===void 0)throw Error(n(407));g=g()}else{if(g=u(),_n===null)throw Error(n(349));(tn&124)!==0||md(_,u,g)}T.memoizedState=g;var B={value:g,getSnapshot:u};return T.queue=B,db(G1.bind(null,_,B,l),[l]),_.flags|=2048,gd(9,Mm(),z1.bind(null,_,B,g,u),null),g},useId:function(){var l=Kr(),u=_n.identifierPrefix;if(hi){var g=pl,_=dl;g=(_&~(1<<32-Mt(_)-1)).toString(32)+g,u=""+u+"R"+g,g=Fs++,0<g&&(u+="H"+g.toString(32)),u+=""}else g=O1++,u=""+u+"r"+g.toString(32)+"";return l.memoizedState=u},useHostTransitionStatus:yb,useFormState:K1,useActionState:K1,useOptimistic:function(l){var u=Kr();u.memoizedState=u.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=g,u=w0.bind(null,Tn,!0,g),g.dispatch=u,[l,u]},useMemoCache:ab,useCacheRefresh:function(){return Kr().memoizedState=N2.bind(null,Tn)}},_b={readContext:cs,use:S0,useCallback:tM,useContext:cs,useEffect:pb,useImperativeHandle:eM,useInsertionEffect:M0,useLayoutEffect:T0,useMemo:gb,useReducer:Cu,useRef:fb,useState:function(){return Cu(mc)},useDebugValue:mb,useDeferredValue:function(l,u){var g=Ns();return nM(g,xi.memoizedState,l,u)},useTransition:function(){var l=Cu(mc)[0],u=Ns().memoizedState;return[typeof l=="boolean"?l:Oo(l),u]},useSyncExternalStore:H1,useId:aM,useHostTransitionStatus:yb,useFormState:J1,useActionState:J1,useOptimistic:function(l,u){var g=Ns();return j1(g,xi,l,u)},useMemoCache:ab,useCacheRefresh:oM},uM={readContext:cs,use:S0,useCallback:tM,useContext:cs,useEffect:pb,useImperativeHandle:eM,useInsertionEffect:M0,useLayoutEffect:T0,useMemo:gb,useReducer:lb,useRef:fb,useState:function(){return lb(mc)},useDebugValue:mb,useDeferredValue:function(l,u){var g=Ns();return xi===null?C0(g,l,u):nM(g,xi.memoizedState,l,u)},useTransition:function(){var l=lb(mc)[0],u=Ns().memoizedState;return[typeof l=="boolean"?l:Oo(l),u]},useSyncExternalStore:H1,useId:aM,useHostTransitionStatus:yb,useFormState:Q1,useActionState:Q1,useOptimistic:function(l,u){var g=Ns();return xi!==null?j1(g,xi,l,u):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:ab,useCacheRefresh:oM},Sh=null,wm=0;function Rm(l){var u=wm;return wm+=1,Sh===null&&(Sh=[]),_0(Sh,l,u)}function yd(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function B0(l,u){throw u.$$typeof===m?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function hM(l){var u=l._init;return u(l._payload)}function fM(l){function u(we,Me){if(l){var Le=we.deletions;Le===null?(we.deletions=[Me],we.flags|=16):Le.push(Me)}}function g(we,Me){if(!l)return null;for(;Me!==null;)u(we,Me),Me=Me.sibling;return null}function _(we){for(var Me=new Map;we!==null;)we.key!==null?Me.set(we.key,we):Me.set(we.index,we),we=we.sibling;return Me}function T(we,Me){return we=As(we,Me),we.index=0,we.sibling=null,we}function B(we,Me,Le){return we.index=Le,l?(Le=we.alternate,Le!==null?(Le=Le.index,Le<Me?(we.flags|=67108866,Me):Le):(we.flags|=67108866,Me)):(we.flags|=1048576,Me)}function k(we){return l&&we.alternate===null&&(we.flags|=67108866),we}function ee(we,Me,Le,ct){return Me===null||Me.tag!==6?(Me=dm(Le,we.mode,ct),Me.return=we,Me):(Me=T(Me,Le),Me.return=we,Me)}function pe(we,Me,Le,ct){var Xt=Le.type;return Xt===A?ot(we,Me,Le.props.children,ct,Le.key):Me!==null&&(Me.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===U&&hM(Xt)===Me.type)?(Me=T(Me,Le.props),yd(Me,Le),Me.return=we,Me):(Me=Zs(Le.type,Le.key,Le.props,null,we.mode,ct),yd(Me,Le),Me.return=we,Me)}function Pe(we,Me,Le,ct){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==Le.containerInfo||Me.stateNode.implementation!==Le.implementation?(Me=h0(Le,we.mode,ct),Me.return=we,Me):(Me=T(Me,Le.children||[]),Me.return=we,Me)}function ot(we,Me,Le,ct,Xt){return Me===null||Me.tag!==7?(Me=_u(Le,we.mode,ct,Xt),Me.return=we,Me):(Me=T(Me,Le),Me.return=we,Me)}function ut(we,Me,Le){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Me=dm(""+Me,we.mode,Le),Me.return=we,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case v:return Le=Zs(Me.type,Me.key,Me.props,null,we.mode,Le),yd(Le,Me),Le.return=we,Le;case y:return Me=h0(Me,we.mode,Le),Me.return=we,Me;case U:var ct=Me._init;return Me=ct(Me._payload),ut(we,Me,Le)}if(ue(Me)||oe(Me))return Me=_u(Me,we.mode,Le,null),Me.return=we,Me;if(typeof Me.then=="function")return ut(we,Rm(Me),Le);if(Me.$$typeof===R)return ut(we,vm(we,Me),Le);B0(we,Me)}return null}function Ge(we,Me,Le,ct){var Xt=Me!==null?Me.key:null;if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return Xt!==null?null:ee(we,Me,""+Le,ct);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case v:return Le.key===Xt?pe(we,Me,Le,ct):null;case y:return Le.key===Xt?Pe(we,Me,Le,ct):null;case U:return Xt=Le._init,Le=Xt(Le._payload),Ge(we,Me,Le,ct)}if(ue(Le)||oe(Le))return Xt!==null?null:ot(we,Me,Le,ct,null);if(typeof Le.then=="function")return Ge(we,Me,Rm(Le),ct);if(Le.$$typeof===R)return Ge(we,Me,vm(we,Le),ct);B0(we,Le)}return null}function Ve(we,Me,Le,ct,Xt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return we=we.get(Le)||null,ee(Me,we,""+ct,Xt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case v:return we=we.get(ct.key===null?Le:ct.key)||null,pe(Me,we,ct,Xt);case y:return we=we.get(ct.key===null?Le:ct.key)||null,Pe(Me,we,ct,Xt);case U:var Xn=ct._init;return ct=Xn(ct._payload),Ve(we,Me,Le,ct,Xt)}if(ue(ct)||oe(ct))return we=we.get(Le)||null,ot(Me,we,ct,Xt,null);if(typeof ct.then=="function")return Ve(we,Me,Le,Rm(ct),Xt);if(ct.$$typeof===R)return Ve(we,Me,Le,vm(Me,ct),Xt);B0(Me,ct)}return null}function mn(we,Me,Le,ct){for(var Xt=null,Xn=null,$t=Me,hn=Me=0,Br=null;$t!==null&&hn<Le.length;hn++){$t.index>hn?(Br=$t,$t=null):Br=$t.sibling;var yi=Ge(we,$t,Le[hn],ct);if(yi===null){$t===null&&($t=Br);break}l&&$t&&yi.alternate===null&&u(we,$t),Me=B(yi,Me,hn),Xn===null?Xt=yi:Xn.sibling=yi,Xn=yi,$t=Br}if(hn===Le.length)return g(we,$t),hi&&lc(we,hn),Xt;if($t===null){for(;hn<Le.length;hn++)$t=ut(we,Le[hn],ct),$t!==null&&(Me=B($t,Me,hn),Xn===null?Xt=$t:Xn.sibling=$t,Xn=$t);return hi&&lc(we,hn),Xt}for($t=_($t);hn<Le.length;hn++)Br=Ve($t,we,hn,Le[hn],ct),Br!==null&&(l&&Br.alternate!==null&&$t.delete(Br.key===null?hn:Br.key),Me=B(Br,Me,hn),Xn===null?Xt=Br:Xn.sibling=Br,Xn=Br);return l&&$t.forEach(function(Pd){return u(we,Pd)}),hi&&lc(we,hn),Xt}function un(we,Me,Le,ct){if(Le==null)throw Error(n(151));for(var Xt=null,Xn=null,$t=Me,hn=Me=0,Br=null,yi=Le.next();$t!==null&&!yi.done;hn++,yi=Le.next()){$t.index>hn?(Br=$t,$t=null):Br=$t.sibling;var Pd=Ge(we,$t,yi.value,ct);if(Pd===null){$t===null&&($t=Br);break}l&&$t&&Pd.alternate===null&&u(we,$t),Me=B(Pd,Me,hn),Xn===null?Xt=Pd:Xn.sibling=Pd,Xn=Pd,$t=Br}if(yi.done)return g(we,$t),hi&&lc(we,hn),Xt;if($t===null){for(;!yi.done;hn++,yi=Le.next())yi=ut(we,yi.value,ct),yi!==null&&(Me=B(yi,Me,hn),Xn===null?Xt=yi:Xn.sibling=yi,Xn=yi);return hi&&lc(we,hn),Xt}for($t=_($t);!yi.done;hn++,yi=Le.next())yi=Ve($t,we,hn,yi.value,ct),yi!==null&&(l&&yi.alternate!==null&&$t.delete(yi.key===null?hn:yi.key),Me=B(yi,Me,hn),Xn===null?Xt=yi:Xn.sibling=yi,Xn=yi);return l&&$t.forEach(function(uV){return u(we,uV)}),hi&&lc(we,hn),Xt}function ki(we,Me,Le,ct){if(typeof Le=="object"&&Le!==null&&Le.type===A&&Le.key===null&&(Le=Le.props.children),typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case v:e:{for(var Xt=Le.key;Me!==null;){if(Me.key===Xt){if(Xt=Le.type,Xt===A){if(Me.tag===7){g(we,Me.sibling),ct=T(Me,Le.props.children),ct.return=we,we=ct;break e}}else if(Me.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===U&&hM(Xt)===Me.type){g(we,Me.sibling),ct=T(Me,Le.props),yd(ct,Le),ct.return=we,we=ct;break e}g(we,Me);break}else u(we,Me);Me=Me.sibling}Le.type===A?(ct=_u(Le.props.children,we.mode,ct,Le.key),ct.return=we,we=ct):(ct=Zs(Le.type,Le.key,Le.props,null,we.mode,ct),yd(ct,Le),ct.return=we,we=ct)}return k(we);case y:e:{for(Xt=Le.key;Me!==null;){if(Me.key===Xt)if(Me.tag===4&&Me.stateNode.containerInfo===Le.containerInfo&&Me.stateNode.implementation===Le.implementation){g(we,Me.sibling),ct=T(Me,Le.children||[]),ct.return=we,we=ct;break e}else{g(we,Me);break}else u(we,Me);Me=Me.sibling}ct=h0(Le,we.mode,ct),ct.return=we,we=ct}return k(we);case U:return Xt=Le._init,Le=Xt(Le._payload),ki(we,Me,Le,ct)}if(ue(Le))return mn(we,Me,Le,ct);if(oe(Le)){if(Xt=oe(Le),typeof Xt!="function")throw Error(n(150));return Le=Xt.call(Le),un(we,Me,Le,ct)}if(typeof Le.then=="function")return ki(we,Me,Rm(Le),ct);if(Le.$$typeof===R)return ki(we,Me,vm(we,Le),ct);B0(we,Le)}return typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint"?(Le=""+Le,Me!==null&&Me.tag===6?(g(we,Me.sibling),ct=T(Me,Le),ct.return=we,we=ct):(g(we,Me),ct=dm(Le,we.mode,ct),ct.return=we,we=ct),k(we)):g(we,Me)}return function(we,Me,Le,ct){try{wm=0;var Xt=ki(we,Me,Le,ct);return Sh=null,Xt}catch($t){if($t===bm||$t===Po)throw $t;var Xn=ma(29,$t,null,we.mode);return Xn.lanes=ct,Xn.return=we,Xn}finally{}}}var Eh=fM(!0),dM=fM(!1),Ri=he(null),Uo=null;function wu(l){var u=l.alternate;ye(xs,xs.current&1),ye(Ri,l),Uo===null&&(u===null||pd.current!==null||u.memoizedState!==null)&&(Uo=l)}function pM(l){if(l.tag===22){if(ye(xs,xs.current),ye(Ri,l),Uo===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(Uo=l)}}else Ru()}function Ru(){ye(xs,xs.current),ye(Ri,Ri.current)}function vl(l){xe(Ri),Uo===l&&(Uo=null),xe(xs)}var xs=he(0);function gc(l){for(var u=l;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||K2(g)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function Du(l,u,g,_){u=l.memoizedState,g=g(_,u),g=g==null?u:d({},u,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var Jr={enqueueSetState:function(l,u,g){l=l._reactInternals;var _=fs(),T=gl(_);T.payload=u,g!=null&&(T.callback=g),u=fc(l,T,_),u!==null&&(Qr(u,l,_),xh(u,l,_))},enqueueReplaceState:function(l,u,g){l=l._reactInternals;var _=fs(),T=gl(_);T.tag=1,T.payload=u,g!=null&&(T.callback=g),u=fc(l,T,_),u!==null&&(Qr(u,l,_),xh(u,l,_))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var g=fs(),_=gl(g);_.tag=2,u!=null&&(_.callback=u),u=fc(l,_,g),u!==null&&(Qr(u,l,g),xh(u,l,g))}};function mM(l,u,g,_,T,B,k){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(_,B,k):u.prototype&&u.prototype.isPureReactComponent?!No(g,_)||!No(T,B):!0}function gM(l,u,g,_){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,_),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,_),u.state!==l&&Jr.enqueueReplaceState(u,u.state,null)}function yl(l,u){var g=u;if("ref"in u){g={};for(var _ in u)_!=="ref"&&(g[_]=u[_])}if(l=l.defaultProps){g===u&&(g=d({},g));for(var T in l)g[T]===void 0&&(g[T]=l[T])}return g}var Mh=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function Dm(l){Mh(l)}function L0(l){console.error(l)}function vM(l){Mh(l)}function N0(l,u){try{var g=l.onUncaughtError;g(u.value,{componentStack:u.stack})}catch(_){setTimeout(function(){throw _})}}function po(l,u,g){try{var _=l.onCaughtError;_(g.value,{componentStack:g.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function I0(l,u,g){return g=gl(g),g.tag=3,g.payload={element:null},g.callback=function(){N0(l,u)},g}function yM(l){return l=gl(l),l.tag=3,l}function P0(l,u,g,_){var T=g.type.getDerivedStateFromError;if(typeof T=="function"){var B=_.value;l.payload=function(){return T(B)},l.callback=function(){po(u,g,_)}}var k=g.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(l.callback=function(){po(u,g,_),typeof T!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var ee=_.stack;this.componentDidCatch(_.value,{componentStack:ee!==null?ee:""})})}function P2(l,u,g,_,T){if(g.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(u=g.alternate,u!==null&&co(u,g,T,!0),g=Ri.current,g!==null){switch(g.tag){case 13:return Uo===null?f():g.alternate===null&&Yi===0&&(Yi=3),g.flags&=-257,g.flags|=65536,g.lanes=T,_===xm?g.flags|=16384:(u=g.updateQueue,u===null?g.updateQueue=new Set([_]):u.add(_),Xe(l,_,T)),!1;case 22:return g.flags|=65536,_===xm?g.flags|=16384:(u=g.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([_])},g.updateQueue=u):(g=u.retryQueue,g===null?u.retryQueue=new Set([_]):g.add(_)),Xe(l,_,T)),!1}throw Error(n(435,g.tag))}return Xe(l,_,T),f(),!1}if(hi)return u=Ri.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=T,_!==d0&&(l=Error(n(422),{cause:_}),bh(ur(l,g)))):(_!==d0&&(u=Error(n(423),{cause:_}),bh(ur(u,g))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,_=ur(_,g),T=I0(l.stateNode,_,T),hd(l,T),Yi!==4&&(Yi=2)),!1;var B=Error(n(520),{cause:_});if(B=ur(B,g),vi===null?vi=[B]:vi.push(B),Yi!==4&&(Yi=2),u===null)return!0;_=ur(_,g),g=u;do{switch(g.tag){case 3:return g.flags|=65536,l=T&-T,g.lanes|=l,l=I0(g.stateNode,_,l),hd(g,l),!1;case 1:if(u=g.type,B=g.stateNode,(g.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(qa===null||!qa.has(B))))return g.flags|=65536,T&=-T,g.lanes|=T,T=yM(T),P0(T,l,g,_),hd(g,T),!1}g=g.return}while(g!==null);return!1}var _M=Error(n(461)),Qs=!1;function Ss(l,u,g,_){u.child=l===null?dM(u,null,g,_):Eh(u,l.child,g,_)}function va(l,u,g,_,T){g=g.render;var B=u.ref;if("ref"in _){var k={};for(var ee in _)ee!=="ref"&&(k[ee]=_[ee])}else k=_;return ml(u),_=pc(l,u,g,k,B,T),ee=sb(),l!==null&&!Qs?(x0(l,u,T),$s(l,u,T)):(hi&&ee&&YA(u),u.flags|=1,Ss(l,u,_,T),u.child)}function ya(l,u,g,_,T){if(l===null){var B=g.type;return typeof B=="function"&&!fm(B)&&B.defaultProps===void 0&&g.compare===null?(u.tag=15,u.type=B,Ab(l,u,B,_,T)):(l=Zs(g.type,null,_,u,u.mode,T),l.ref=u.ref,l.return=u,u.child=l)}if(B=l.child,!Bm(l,T)){var k=B.memoizedProps;if(g=g.compare,g=g!==null?g:No,g(k,_)&&l.ref===u.ref)return $s(l,u,T)}return u.flags|=1,l=As(B,_),l.ref=u.ref,l.return=u,u.child=l}function Ab(l,u,g,_,T){if(l!==null){var B=l.memoizedProps;if(No(B,_)&&l.ref===u.ref)if(Qs=!1,u.pendingProps=_=B,Bm(l,T))(l.flags&131072)!==0&&(Qs=!0);else return u.lanes=l.lanes,$s(l,u,T)}return _d(l,u,g,_,T)}function Th(l,u,g){var _=u.pendingProps,T=_.children,B=l!==null?l.memoizedState:null;if(_.mode==="hidden"){if((u.flags&128)!==0){if(_=B!==null?B.baseLanes|g:g,l!==null){for(T=u.child=l.child,B=0;T!==null;)B=B|T.lanes|T.childLanes,T=T.sibling;u.childLanes=B&~_}else u.childLanes=0,u.child=null;return Ch(l,u,_,g)}if((g&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Am(u,B!==null?B.cachePool:null),B!==null?P1(u,B):ib(),pM(u);else return u.lanes=u.childLanes=536870912,Ch(l,u,B!==null?B.baseLanes|g:g,g)}else B!==null?(Am(u,B.cachePool),P1(u,B),Ru(),u.memoizedState=null):(l!==null&&Am(u,null),ib(),Ru());return Ss(l,u,T,g),u.child}function Ch(l,u,g,_){var T=Eu();return T=T===null?null:{parent:Bs._currentValue,pool:T},u.memoizedState={baseLanes:g,cachePool:T},l!==null&&Am(u,null),ib(),pM(u),l!==null&&co(l,u,_,!0),null}function wh(l,u){var g=u.ref;if(g===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(n(284));(l===null||l.ref!==g)&&(u.flags|=4194816)}}function _d(l,u,g,_,T){return ml(u),g=pc(l,u,g,_,void 0,T),_=sb(),l!==null&&!Qs?(x0(l,u,T),$s(l,u,T)):(hi&&_&&YA(u),u.flags|=1,Ss(l,u,g,T),u.child)}function Ha(l,u,g,_,T,B){return ml(u),u.updateQueue=null,g=F1(u,_,g,T),U1(l),_=sb(),l!==null&&!Qs?(x0(l,u,B),$s(l,u,B)):(hi&&_&&YA(u),u.flags|=1,Ss(l,u,g,B),u.child)}function za(l,u,g,_,T){if(ml(u),u.stateNode===null){var B=yu,k=g.contextType;typeof k=="object"&&k!==null&&(B=cs(k)),B=new g(_,B),u.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,B.updater=Jr,u.stateNode=B,B._reactInternals=u,B=u.stateNode,B.props=_,B.state=u.memoizedState,B.refs={},tb(u),k=g.contextType,B.context=typeof k=="object"&&k!==null?cs(k):yu,B.state=u.memoizedState,k=g.getDerivedStateFromProps,typeof k=="function"&&(Du(u,g,k,_),B.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(k=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),k!==B.state&&Jr.enqueueReplaceState(B,B.state,null),fd(u,_,B,T),Sm(),B.state=u.memoizedState),typeof B.componentDidMount=="function"&&(u.flags|=4194308),_=!0}else if(l===null){B=u.stateNode;var ee=u.memoizedProps,pe=yl(g,ee);B.props=pe;var Pe=B.context,ot=g.contextType;k=yu,typeof ot=="object"&&ot!==null&&(k=cs(ot));var ut=g.getDerivedStateFromProps;ot=typeof ut=="function"||typeof B.getSnapshotBeforeUpdate=="function",ee=u.pendingProps!==ee,ot||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(ee||Pe!==k)&&gM(u,B,_,k),hc=!1;var Ge=u.memoizedState;B.state=Ge,fd(u,_,B,T),Sm(),Pe=u.memoizedState,ee||Ge!==Pe||hc?(typeof ut=="function"&&(Du(u,g,ut,_),Pe=u.memoizedState),(pe=hc||mM(u,g,pe,_,Ge,Pe,k))?(ot||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(u.flags|=4194308)):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=_,u.memoizedState=Pe),B.props=_,B.state=Pe,B.context=k,_=pe):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),_=!1)}else{B=u.stateNode,dn(l,u),k=u.memoizedProps,ot=yl(g,k),B.props=ot,ut=u.pendingProps,Ge=B.context,Pe=g.contextType,pe=yu,typeof Pe=="object"&&Pe!==null&&(pe=cs(Pe)),ee=g.getDerivedStateFromProps,(Pe=typeof ee=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(k!==ut||Ge!==pe)&&gM(u,B,_,pe),hc=!1,Ge=u.memoizedState,B.state=Ge,fd(u,_,B,T),Sm();var Ve=u.memoizedState;k!==ut||Ge!==Ve||hc||l!==null&&l.dependencies!==null&&gm(l.dependencies)?(typeof ee=="function"&&(Du(u,g,ee,_),Ve=u.memoizedState),(ot=hc||mM(u,g,ot,_,Ge,Ve,pe)||l!==null&&l.dependencies!==null&&gm(l.dependencies))?(Pe||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(_,Ve,pe),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(_,Ve,pe)),typeof B.componentDidUpdate=="function"&&(u.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof B.componentDidUpdate!="function"||k===l.memoizedProps&&Ge===l.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||k===l.memoizedProps&&Ge===l.memoizedState||(u.flags|=1024),u.memoizedProps=_,u.memoizedState=Ve),B.props=_,B.state=Ve,B.context=pe,_=ot):(typeof B.componentDidUpdate!="function"||k===l.memoizedProps&&Ge===l.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||k===l.memoizedProps&&Ge===l.memoizedState||(u.flags|=1024),_=!1)}return B=_,wh(l,u),_=(u.flags&128)!==0,B||_?(B=u.stateNode,g=_&&typeof g.getDerivedStateFromError!="function"?null:B.render(),u.flags|=1,l!==null&&_?(u.child=Eh(u,l.child,null,T),u.child=Eh(u,null,g,T)):Ss(l,u,g,T),u.memoizedState=B.state,l=u.child):l=$s(l,u,T),l}function Bu(l,u,g,_){return ad(),u.flags|=256,Ss(l,u,g,_),u.child}var Fo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ho(l){return{baseLanes:l,cachePool:v0()}}function Hs(l,u,g){return l=l!==null?l.childLanes&~g:0,u&&(l|=_o),l}function Ad(l,u,g){var _=u.pendingProps,T=!1,B=(u.flags&128)!==0,k;if((k=B)||(k=l!==null&&l.memoizedState===null?!1:(xs.current&2)!==0),k&&(T=!0,u.flags&=-129),k=(u.flags&32)!==0,u.flags&=-33,l===null){if(hi){if(T?wu(u):Ru(),hi){var ee=ns,pe;if(pe=ee){e:{for(pe=ee,ee=Oa;pe.nodeType!==8;){if(!ee){ee=null;break e}if(pe=xc(pe.nextSibling),pe===null){ee=null;break e}}ee=pe}ee!==null?(u.memoizedState={dehydrated:ee,treeContext:Au!==null?{id:dl,overflow:pl}:null,retryLane:536870912,hydrationErrors:null},pe=ma(18,null,null,0),pe.stateNode=ee,pe.return=u,u.child=pe,Yr=u,ns=null,pe=!0):pe=!1}pe||bu(u)}if(ee=u.memoizedState,ee!==null&&(ee=ee.dehydrated,ee!==null))return K2(ee)?u.lanes=32:u.lanes=536870912,null;vl(u)}return ee=_.children,_=_.fallback,T?(Ru(),T=u.mode,ee=Rh({mode:"hidden",children:ee},T),_=_u(_,T,g,null),ee.return=u,_.return=u,ee.sibling=_,u.child=ee,T=u.child,T.memoizedState=Ho(g),T.childLanes=Hs(l,k,g),u.memoizedState=Fo,_):(wu(u),_l(u,ee))}if(pe=l.memoizedState,pe!==null&&(ee=pe.dehydrated,ee!==null)){if(B)u.flags&256?(wu(u),u.flags&=-257,u=dr(l,u,g)):u.memoizedState!==null?(Ru(),u.child=l.child,u.flags|=128,u=null):(Ru(),T=_.fallback,ee=u.mode,_=Rh({mode:"visible",children:_.children},ee),T=_u(T,ee,g,null),T.flags|=2,_.return=u,T.return=u,_.sibling=T,u.child=_,Eh(u,l.child,null,g),_=u.child,_.memoizedState=Ho(g),_.childLanes=Hs(l,k,g),u.memoizedState=Fo,u=T);else if(wu(u),K2(ee)){if(k=ee.nextSibling&&ee.nextSibling.dataset,k)var Pe=k.dgst;k=Pe,_=Error(n(419)),_.stack="",_.digest=k,bh({value:_,source:null,stack:null}),u=dr(l,u,g)}else if(Qs||co(l,u,g,!1),k=(g&l.childLanes)!==0,Qs||k){if(k=_n,k!==null&&(_=g&-g,_=(_&42)!==0?1:vn(_),_=(_&(k.suspendedLanes|g))!==0?0:_,_!==0&&_!==pe.retryLane))throw pe.retryLane=_,oc(l,_),Qr(k,l,_),_M;ee.data==="$?"||f(),u=dr(l,u,g)}else ee.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=pe.treeContext,ns=xc(ee.nextSibling),Yr=u,hi=!0,lo=null,Oa=!1,l!==null&&(hr[Pa++]=dl,hr[Pa++]=pl,hr[Pa++]=Au,dl=l.id,pl=l.overflow,Au=u),u=_l(u,_.children),u.flags|=4096);return u}return T?(Ru(),T=_.fallback,ee=u.mode,pe=l.child,Pe=pe.sibling,_=As(pe,{mode:"hidden",children:_.children}),_.subtreeFlags=pe.subtreeFlags&65011712,Pe!==null?T=As(Pe,T):(T=_u(T,ee,g,null),T.flags|=2),T.return=u,_.return=u,_.sibling=T,u.child=_,_=T,T=u.child,ee=l.child.memoizedState,ee===null?ee=Ho(g):(pe=ee.cachePool,pe!==null?(Pe=Bs._currentValue,pe=pe.parent!==Pe?{parent:Pe,pool:Pe}:pe):pe=v0(),ee={baseLanes:ee.baseLanes|g,cachePool:pe}),T.memoizedState=ee,T.childLanes=Hs(l,k,g),u.memoizedState=Fo,_):(wu(u),g=l.child,l=g.sibling,g=As(g,{mode:"visible",children:_.children}),g.return=u,g.sibling=null,l!==null&&(k=u.deletions,k===null?(u.deletions=[l],u.flags|=16):k.push(l)),u.child=g,u.memoizedState=null,g)}function _l(l,u){return u=Rh({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Rh(l,u){return l=ma(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function dr(l,u,g){return Eh(u,l.child,null,g),l=_l(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function pr(l,u,g){l.lanes|=u;var _=l.alternate;_!==null&&(_.lanes|=u),ZA(l.return,u,g)}function ti(l,u,g,_,T){var B=l.memoizedState;B===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:_,tail:g,tailMode:T}:(B.isBackwards=u,B.rendering=null,B.renderingStartTime=0,B.last=_,B.tail=g,B.tailMode=T)}function mo(l,u,g){var _=u.pendingProps,T=_.revealOrder,B=_.tail;if(Ss(l,u,_.children,g),_=xs.current,(_&2)!==0)_=_&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&pr(l,g,u);else if(l.tag===19)pr(l,g,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}_&=1}switch(ye(xs,_),T){case"forwards":for(g=u.child,T=null;g!==null;)l=g.alternate,l!==null&&gc(l)===null&&(T=g),g=g.sibling;g=T,g===null?(T=u.child,u.child=null):(T=g.sibling,g.sibling=null),ti(u,!1,T,g,B);break;case"backwards":for(g=null,T=u.child,u.child=null;T!==null;){if(l=T.alternate,l!==null&&gc(l)===null){u.child=T;break}l=T.sibling,T.sibling=g,g=T,T=l}ti(u,!0,g,null,B);break;case"together":ti(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function $s(l,u,g){if(l!==null&&(u.dependencies=l.dependencies),Vo|=u.lanes,(g&u.childLanes)===0)if(l!==null){if(co(l,u,g,!1),(g&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,g=As(l,l.pendingProps),u.child=g,g.return=u;l.sibling!==null;)l=l.sibling,g=g.sibling=As(l,l.pendingProps),g.return=u;g.sibling=null}return u.child}function Bm(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&gm(l)))}function go(l,u,g){switch(u.tag){case 3:Qe(u,u.stateNode.containerInfo),Su(u,Bs,l.memoizedState.cache),ad();break;case 27:case 5:lt(u);break;case 4:Qe(u,u.stateNode.containerInfo);break;case 10:Su(u,u.type,u.memoizedProps.value);break;case 13:var _=u.memoizedState;if(_!==null)return _.dehydrated!==null?(wu(u),u.flags|=128,null):(g&u.child.childLanes)!==0?Ad(l,u,g):(wu(u),l=$s(l,u,g),l!==null?l.sibling:null);wu(u);break;case 19:var T=(l.flags&128)!==0;if(_=(g&u.childLanes)!==0,_||(co(l,u,g,!1),_=(g&u.childLanes)!==0),T){if(_)return mo(l,u,g);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ye(xs,xs.current),_)break;return null;case 22:case 23:return u.lanes=0,Th(l,u,g);case 24:Su(u,Bs,l.memoizedState.cache)}return $s(l,u,g)}function Dh(l,u,g){if(l!==null)if(l.memoizedProps!==u.pendingProps)Qs=!0;else{if(!Bm(l,g)&&(u.flags&128)===0)return Qs=!1,go(l,u,g);Qs=(l.flags&131072)!==0}else Qs=!1,hi&&(u.flags&1048576)!==0&&f0(u,rd,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var _=u.elementType,T=_._init;if(_=T(_._payload),u.type=_,typeof _=="function")fm(_)?(l=yl(_,l),u.tag=1,u=za(null,u,_,l,g)):(u.tag=0,u=_d(null,u,_,l,g));else{if(_!=null){if(T=_.$$typeof,T===D){u.tag=11,u=va(null,u,_,l,g);break e}else if(T===H){u.tag=14,u=ya(null,u,_,l,g);break e}}throw u=le(_)||_,Error(n(306,u,""))}}return u;case 0:return _d(l,u,u.type,u.pendingProps,g);case 1:return _=u.type,T=yl(_,u.pendingProps),za(l,u,_,T,g);case 3:e:{if(Qe(u,u.stateNode.containerInfo),l===null)throw Error(n(387));_=u.pendingProps;var B=u.memoizedState;T=B.element,dn(l,u),fd(u,_,null,g);var k=u.memoizedState;if(_=k.cache,Su(u,Bs,_),_!==B.cache&&mm(u,[Bs],g,!0),Sm(),_=k.element,B.isDehydrated)if(B={element:_,isDehydrated:!1,cache:k.cache},u.updateQueue.baseState=B,u.memoizedState=B,u.flags&256){u=Bu(l,u,_,g);break e}else if(_!==T){T=ur(Error(n(424)),u),bh(T),u=Bu(l,u,_,g);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(ns=xc(l.firstChild),Yr=u,hi=!0,lo=null,Oa=!0,g=dM(u,null,_,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(ad(),_===T){u=$s(l,u,g);break e}Ss(l,u,_,g)}u=u.child}return u;case 26:return wh(l,u),l===null?(g=qP(u.type,null,u.pendingProps,null))?u.memoizedState=g:hi||(g=u.type,l=u.pendingProps,_=MM(Ce.current).createElement(g),_[ls]=u,_[ys]=l,$r(_,g,l),ze(_),u.stateNode=_):u.memoizedState=qP(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return lt(u),l===null&&hi&&(_=u.stateNode=VP(u.type,u.pendingProps,Ce.current),Yr=u,Oa=!0,T=ns,Dd(u.type)?(J2=T,ns=xc(_.firstChild)):ns=T),Ss(l,u,u.pendingProps.children,g),wh(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&hi&&((T=_=ns)&&(_=H9(_,u.type,u.pendingProps,Oa),_!==null?(u.stateNode=_,Yr=u,ns=xc(_.firstChild),Oa=!1,T=!0):T=!1),T||bu(u)),lt(u),T=u.type,B=u.pendingProps,k=l!==null?l.memoizedProps:null,_=B.children,q2(T,B)?_=null:k!==null&&q2(T,k)&&(u.flags|=32),u.memoizedState!==null&&(T=pc(l,u,R2,null,null,g),Bb._currentValue=T),wh(l,u),Ss(l,u,_,g),u.child;case 6:return l===null&&hi&&((l=g=ns)&&(g=z9(g,u.pendingProps,Oa),g!==null?(u.stateNode=g,Yr=u,ns=null,l=!0):l=!1),l||bu(u)),null;case 13:return Ad(l,u,g);case 4:return Qe(u,u.stateNode.containerInfo),_=u.pendingProps,l===null?u.child=Eh(u,null,_,g):Ss(l,u,_,g),u.child;case 11:return va(l,u,u.type,u.pendingProps,g);case 7:return Ss(l,u,u.pendingProps,g),u.child;case 8:return Ss(l,u,u.pendingProps.children,g),u.child;case 12:return Ss(l,u,u.pendingProps.children,g),u.child;case 10:return _=u.pendingProps,Su(u,u.type,_.value),Ss(l,u,_.children,g),u.child;case 9:return T=u.type._context,_=u.pendingProps.children,ml(u),T=cs(T),_=_(T),u.flags|=1,Ss(l,u,_,g),u.child;case 14:return ya(l,u,u.type,u.pendingProps,g);case 15:return Ab(l,u,u.type,u.pendingProps,g);case 19:return mo(l,u,g);case 31:return _=u.pendingProps,g=u.mode,_={mode:_.mode,children:_.children},l===null?(g=Rh(_,g),g.ref=u.ref,u.child=g,g.return=u,u=g):(g=As(l.child,_),g.ref=u.ref,u.child=g,g.return=u,u=g),u;case 22:return Th(l,u,g);case 24:return ml(u),_=cs(Bs),l===null?(T=Eu(),T===null&&(T=_n,B=m0(),T.pooledCache=B,B.refCount++,B!==null&&(T.pooledCacheLanes|=g),T=B),u.memoizedState={parent:_,cache:T},tb(u),Su(u,Bs,T)):((l.lanes&g)!==0&&(dn(l,u),fd(u,null,null,g),Sm()),T=l.memoizedState,B=u.memoizedState,T.parent!==_?(T={parent:_,cache:_},u.memoizedState=T,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=T),Su(u,Bs,_)):(_=B.cache,Su(u,Bs,_),_!==T.cache&&mm(u,[Bs],g,!0))),Ss(l,u,u.pendingProps.children,g),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function zo(l){l.flags|=4}function Lm(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!ZP(u)){if(u=Ri.current,u!==null&&((tn&4194048)===tn?Uo!==null:(tn&62914560)!==tn&&(tn&536870912)===0||u!==Uo))throw ho=xm,$A;l.flags|=8192}}function vc(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Be():536870912,l.lanes|=u,si|=u)}function Bh(l,u){if(!hi)switch(l.tailMode){case"hidden":u=l.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:_.sibling=null}}function Fi(l){var u=l.alternate!==null&&l.alternate.child===l.child,g=0,_=0;if(u)for(var T=l.child;T!==null;)g|=T.lanes|T.childLanes,_|=T.subtreeFlags&65011712,_|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)g|=T.lanes|T.childLanes,_|=T.subtreeFlags,_|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=_,l.childLanes=g,u}function bb(l,u,g){var _=u.pendingProps;switch(WA(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fi(u),null;case 1:return Fi(u),null;case 3:return g=u.stateNode,_=null,l!==null&&(_=l.memoizedState.cache),u.memoizedState.cache!==_&&(u.flags|=2048),uc(Bs),xt(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(Io(u)?zo(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,mi())),Fi(u),null;case 26:return g=u.memoizedState,l===null?(zo(u),g!==null?(Fi(u),Lm(u,g)):(Fi(u),u.flags&=-16777217)):g?g!==l.memoizedState?(zo(u),Fi(u),Lm(u,g)):(Fi(u),u.flags&=-16777217):(l.memoizedProps!==_&&zo(u),Fi(u),u.flags&=-16777217),null;case 27:mt(u),g=Ce.current;var T=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==_&&zo(u);else{if(!_){if(u.stateNode===null)throw Error(n(166));return Fi(u),null}l=fe.current,Io(u)?B1(u):(l=VP(T,_,g),u.stateNode=l,zo(u))}return Fi(u),null;case 5:if(mt(u),g=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==_&&zo(u);else{if(!_){if(u.stateNode===null)throw Error(n(166));return Fi(u),null}if(l=fe.current,Io(u))B1(u);else{switch(T=MM(Ce.current),l){case 1:l=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:l=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":l=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":l=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":l=T.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof _.is=="string"?T.createElement("select",{is:_.is}):T.createElement("select"),_.multiple?l.multiple=!0:_.size&&(l.size=_.size);break;default:l=typeof _.is=="string"?T.createElement(g,{is:_.is}):T.createElement(g)}}l[ls]=u,l[ys]=_;e:for(T=u.child;T!==null;){if(T.tag===5||T.tag===6)l.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===u)break e;for(;T.sibling===null;){if(T.return===null||T.return===u)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}u.stateNode=l;e:switch($r(l,g,_),g){case"button":case"input":case"select":case"textarea":l=!!_.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&zo(u)}}return Fi(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==_&&zo(u);else{if(typeof _!="string"&&u.stateNode===null)throw Error(n(166));if(l=Ce.current,Io(u)){if(l=u.stateNode,g=u.memoizedProps,_=null,T=Yr,T!==null)switch(T.tag){case 27:case 5:_=T.memoizedProps}l[ls]=u,l=!!(l.nodeValue===g||_!==null&&_.suppressHydrationWarning===!0||OP(l.nodeValue,g)),l||bu(u)}else l=MM(l).createTextNode(_),l[ls]=u,u.stateNode=l}return Fi(u),null;case 13:if(_=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=Io(u),_!==null&&_.dehydrated!==null){if(l===null){if(!T)throw Error(n(318));if(T=u.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[ls]=u}else ad(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Fi(u),T=!1}else T=mi(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return u.flags&256?(vl(u),u):(vl(u),null)}if(vl(u),(u.flags&128)!==0)return u.lanes=g,u;if(g=_!==null,l=l!==null&&l.memoizedState!==null,g){_=u.child,T=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(T=_.alternate.memoizedState.cachePool.pool);var B=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(B=_.memoizedState.cachePool.pool),B!==T&&(_.flags|=2048)}return g!==l&&g&&(u.child.flags|=8192),vc(u,u.updateQueue),Fi(u),null;case 4:return xt(),l===null&&G2(u.stateNode.containerInfo),Fi(u),null;case 10:return uc(u.type),Fi(u),null;case 19:if(xe(xs),T=u.memoizedState,T===null)return Fi(u),null;if(_=(u.flags&128)!==0,B=T.rendering,B===null)if(_)Bh(T,!1);else{if(Yi!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(B=gc(l),B!==null){for(u.flags|=128,Bh(T,!1),l=B.updateQueue,u.updateQueue=l,vc(u,l),u.subtreeFlags=0,l=g,g=u.child;g!==null;)qA(g,l),g=g.sibling;return ye(xs,xs.current&1|2),u.child}l=l.sibling}T.tail!==null&&ke()>Rr&&(u.flags|=128,_=!0,Bh(T,!1),u.lanes=4194304)}else{if(!_)if(l=gc(B),l!==null){if(u.flags|=128,_=!0,l=l.updateQueue,u.updateQueue=l,vc(u,l),Bh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!B.alternate&&!hi)return Fi(u),null}else 2*ke()-T.renderingStartTime>Rr&&g!==536870912&&(u.flags|=128,_=!0,Bh(T,!1),u.lanes=4194304);T.isBackwards?(B.sibling=u.child,u.child=B):(l=T.last,l!==null?l.sibling=B:u.child=B,T.last=B)}return T.tail!==null?(u=T.tail,T.rendering=u,T.tail=u.sibling,T.renderingStartTime=ke(),u.sibling=null,l=xs.current,ye(xs,_?l&1|2:l&1),u):(Fi(u),null);case 22:case 23:return vl(u),Em(),_=u.memoizedState!==null,l!==null?l.memoizedState!==null!==_&&(u.flags|=8192):_&&(u.flags|=8192),_?(g&536870912)!==0&&(u.flags&128)===0&&(Fi(u),u.subtreeFlags&6&&(u.flags|=8192)):Fi(u),g=u.updateQueue,g!==null&&vc(u,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048),l!==null&&xe(uo),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),uc(Bs),Fi(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function bd(l,u){switch(WA(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return uc(Bs),xt(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return mt(u),null;case 13:if(vl(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));ad()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return xe(xs),null;case 4:return xt(),null;case 10:return uc(u.type),null;case 22:case 23:return vl(u),Em(),l!==null&&xe(uo),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return uc(Bs),null;case 25:return null;default:return null}}function xd(l,u){switch(WA(u),u.tag){case 3:uc(Bs),xt();break;case 26:case 27:case 5:mt(u);break;case 4:xt();break;case 13:vl(u);break;case 19:xe(xs);break;case 10:uc(u.type);break;case 22:case 23:vl(u),Em(),l!==null&&xe(uo);break;case 24:uc(Bs)}}function Lh(l,u){try{var g=u.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var T=_.next;g=T;do{if((g.tag&l)===l){_=void 0;var B=g.create,k=g.inst;_=B(),k.destroy=_}g=g.next}while(g!==T)}}catch(ee){Se(u,u.return,ee)}}function Ga(l,u,g){try{var _=u.updateQueue,T=_!==null?_.lastEffect:null;if(T!==null){var B=T.next;_=B;do{if((_.tag&l)===l){var k=_.inst,ee=k.destroy;if(ee!==void 0){k.destroy=void 0,T=u;var pe=g,Pe=ee;try{Pe()}catch(ot){Se(T,pe,ot)}}}_=_.next}while(_!==B)}}catch(ot){Se(u,u.return,ot)}}function Nh(l){var u=l.updateQueue;if(u!==null){var g=l.stateNode;try{I1(u,g)}catch(_){Se(l,l.return,_)}}}function yc(l,u,g){g.props=yl(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(_){Se(l,u,_)}}function Ih(l,u){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var _=l.stateNode;break;case 30:_=l.stateNode;break;default:_=l.stateNode}typeof g=="function"?l.refCleanup=g(_):g.current=_}}catch(T){Se(l,u,T)}}function Al(l,u){var g=l.ref,_=l.refCleanup;if(g!==null)if(typeof _=="function")try{_()}catch(T){Se(l,u,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(T){Se(l,u,T)}else g.current=null}function Sd(l){var u=l.type,g=l.memoizedProps,_=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":g.autoFocus&&_.focus();break e;case"img":g.src?_.src=g.src:g.srcSet&&(_.srcset=g.srcSet)}}catch(T){Se(l,l.return,T)}}function Nm(l,u,g){try{var _=l.stateNode;I9(_,l.type,g,u),_[ys]=u}catch(T){Se(l,l.return,T)}}function Im(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Dd(l.type)||l.tag===4}function Lu(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Im(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Dd(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Nu(l,u,g){var _=l.tag;if(_===5||_===6)l=l.stateNode,u?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,u):(u=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,u.appendChild(l),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=EM));else if(_!==4&&(_===27&&Dd(l.type)&&(g=l.stateNode,u=null),l=l.child,l!==null))for(Nu(l,u,g),l=l.sibling;l!==null;)Nu(l,u,g),l=l.sibling}function Iu(l,u,g){var _=l.tag;if(_===5||_===6)l=l.stateNode,u?g.insertBefore(l,u):g.appendChild(l);else if(_!==4&&(_===27&&Dd(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(Iu(l,u,g),l=l.sibling;l!==null;)Iu(l,u,g),l=l.sibling}function Pu(l){var u=l.stateNode,g=l.memoizedProps;try{for(var _=l.type,T=u.attributes;T.length;)u.removeAttributeNode(T[0]);$r(u,_,g),u[ls]=l,u[ys]=g}catch(B){Se(l,l.return,B)}}var bl=!1,Hi=!1,Ed=!1,ka=typeof WeakSet=="function"?WeakSet:Set,Di=null;function zs(l,u){if(l=l.containerInfo,j2=BM,l=HA(l),lm(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var _=g.getSelection&&g.getSelection();if(_&&_.rangeCount!==0){g=_.anchorNode;var T=_.anchorOffset,B=_.focusNode;_=_.focusOffset;try{g.nodeType,B.nodeType}catch{g=null;break e}var k=0,ee=-1,pe=-1,Pe=0,ot=0,ut=l,Ge=null;t:for(;;){for(var Ve;ut!==g||T!==0&&ut.nodeType!==3||(ee=k+T),ut!==B||_!==0&&ut.nodeType!==3||(pe=k+_),ut.nodeType===3&&(k+=ut.nodeValue.length),(Ve=ut.firstChild)!==null;)Ge=ut,ut=Ve;for(;;){if(ut===l)break t;if(Ge===g&&++Pe===T&&(ee=k),Ge===B&&++ot===_&&(pe=k),(Ve=ut.nextSibling)!==null)break;ut=Ge,Ge=ut.parentNode}ut=Ve}g=ee===-1||pe===-1?null:{start:ee,end:pe}}else g=null}g=g||{start:0,end:0}}else g=null;for(X2={focusedElem:l,selectionRange:g},BM=!1,Di=u;Di!==null;)if(u=Di,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Di=l;else for(;Di!==null;){switch(u=Di,B=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&B!==null){l=void 0,g=u,T=B.memoizedProps,B=B.memoizedState,_=g.stateNode;try{var mn=yl(g.type,T,g.elementType===g.type);l=_.getSnapshotBeforeUpdate(mn,B),_.__reactInternalSnapshotBeforeUpdate=l}catch(un){Se(g,g.return,un)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,g=l.nodeType,g===9)W2(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":W2(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,Di=l;break}Di=u.return}}function _c(l,u,g){var _=g.flags;switch(g.tag){case 0:case 11:case 15:Zr(l,g),_&4&&Lh(5,g);break;case 1:if(Zr(l,g),_&4)if(l=g.stateNode,u===null)try{l.componentDidMount()}catch(k){Se(g,g.return,k)}else{var T=yl(g.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(T,u,l.__reactInternalSnapshotBeforeUpdate)}catch(k){Se(g,g.return,k)}}_&64&&Nh(g),_&512&&Ih(g,g.return);break;case 3:if(Zr(l,g),_&64&&(l=g.updateQueue,l!==null)){if(u=null,g.child!==null)switch(g.child.tag){case 27:case 5:u=g.child.stateNode;break;case 1:u=g.child.stateNode}try{I1(l,u)}catch(k){Se(g,g.return,k)}}break;case 27:u===null&&_&4&&Pu(g);case 26:case 5:Zr(l,g),u===null&&_&4&&Sd(g),_&512&&Ih(g,g.return);break;case 12:Zr(l,g);break;case 13:Zr(l,g),_&4&&Ou(l,g),_&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=Wi.bind(null,g),G9(l,g))));break;case 22:if(_=g.memoizedState!==null||bl,!_){u=u!==null&&u.memoizedState!==null||Hi,T=bl;var B=Hi;bl=_,(Hi=u)&&!B?xl(l,g,(g.subtreeFlags&8772)!==0):Zr(l,g),bl=T,Hi=B}break;case 30:break;default:Zr(l,g)}}function In(l){var u=l.alternate;u!==null&&(l.alternate=null,In(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&pi(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var an=null,ii=!1;function vo(l,u,g){for(g=g.child;g!==null;)Ph(l,u,g),g=g.sibling}function Ph(l,u,g){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(je,g)}catch{}switch(g.tag){case 26:Hi||Al(g,u),vo(l,u,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Hi||Al(g,u);var _=an,T=ii;Dd(g.type)&&(an=g.stateNode,ii=!1),vo(l,u,g),Cb(g.stateNode),an=_,ii=T;break;case 5:Hi||Al(g,u);case 6:if(_=an,T=ii,an=null,vo(l,u,g),an=_,ii=T,an!==null)if(ii)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(g.stateNode)}catch(B){Se(g,u,B)}else try{an.removeChild(g.stateNode)}catch(B){Se(g,u,B)}break;case 18:an!==null&&(ii?(l=an,GP(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),Pb(l)):GP(an,g.stateNode));break;case 4:_=an,T=ii,an=g.stateNode.containerInfo,ii=!0,vo(l,u,g),an=_,ii=T;break;case 0:case 11:case 14:case 15:Hi||Ga(2,g,u),Hi||Ga(4,g,u),vo(l,u,g);break;case 1:Hi||(Al(g,u),_=g.stateNode,typeof _.componentWillUnmount=="function"&&yc(g,u,_)),vo(l,u,g);break;case 21:vo(l,u,g);break;case 22:Hi=(_=Hi)||g.memoizedState!==null,vo(l,u,g),Hi=_;break;default:vo(l,u,g)}}function Ou(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Pb(l)}catch(g){Se(u,u.return,g)}}function O0(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new ka),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new ka),u;default:throw Error(n(435,l.tag))}}function Oh(l,u){var g=O0(l);u.forEach(function(_){var T=pn.bind(null,l,_);g.has(_)||(g.add(_),_.then(T,T))})}function er(l,u){var g=u.deletions;if(g!==null)for(var _=0;_<g.length;_++){var T=g[_],B=l,k=u,ee=k;e:for(;ee!==null;){switch(ee.tag){case 27:if(Dd(ee.type)){an=ee.stateNode,ii=!1;break e}break;case 5:an=ee.stateNode,ii=!1;break e;case 3:case 4:an=ee.stateNode.containerInfo,ii=!0;break e}ee=ee.return}if(an===null)throw Error(n(160));Ph(B,k,T),an=null,ii=!1,B=T.alternate,B!==null&&(B.return=null),T.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)U0(u,l),u=u.sibling}var Go=null;function U0(l,u){var g=l.alternate,_=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:er(u,l),us(l),_&4&&(Ga(3,l,l.return),Lh(3,l),Ga(5,l,l.return));break;case 1:er(u,l),us(l),_&512&&(Hi||g===null||Al(g,g.return)),_&64&&bl&&(l=l.updateQueue,l!==null&&(_=l.callbacks,_!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?_:g.concat(_))));break;case 26:var T=Go;if(er(u,l),us(l),_&512&&(Hi||g===null||Al(g,g.return)),_&4){var B=g!==null?g.memoizedState:null;if(_=l.memoizedState,g===null)if(_===null)if(l.stateNode===null){e:{_=l.type,g=l.memoizedProps,T=T.ownerDocument||T;t:switch(_){case"title":B=T.getElementsByTagName("title")[0],(!B||B[ua]||B[ls]||B.namespaceURI==="http://www.w3.org/2000/svg"||B.hasAttribute("itemprop"))&&(B=T.createElement(_),T.head.insertBefore(B,T.querySelector("head > title"))),$r(B,_,g),B[ls]=l,ze(B),_=B;break e;case"link":var k=KP("link","href",T).get(_+(g.href||""));if(k){for(var ee=0;ee<k.length;ee++)if(B=k[ee],B.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&B.getAttribute("rel")===(g.rel==null?null:g.rel)&&B.getAttribute("title")===(g.title==null?null:g.title)&&B.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){k.splice(ee,1);break t}}B=T.createElement(_),$r(B,_,g),T.head.appendChild(B);break;case"meta":if(k=KP("meta","content",T).get(_+(g.content||""))){for(ee=0;ee<k.length;ee++)if(B=k[ee],B.getAttribute("content")===(g.content==null?null:""+g.content)&&B.getAttribute("name")===(g.name==null?null:g.name)&&B.getAttribute("property")===(g.property==null?null:g.property)&&B.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&B.getAttribute("charset")===(g.charSet==null?null:g.charSet)){k.splice(ee,1);break t}}B=T.createElement(_),$r(B,_,g),T.head.appendChild(B);break;default:throw Error(n(468,_))}B[ls]=l,ze(B),_=B}l.stateNode=_}else JP(T,l.type,l.stateNode);else l.stateNode=WP(T,_,l.memoizedProps);else B!==_?(B===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):B.count--,_===null?JP(T,l.type,l.stateNode):WP(T,_,l.memoizedProps)):_===null&&l.stateNode!==null&&Nm(l,l.memoizedProps,g.memoizedProps)}break;case 27:er(u,l),us(l),_&512&&(Hi||g===null||Al(g,g.return)),g!==null&&_&4&&Nm(l,l.memoizedProps,g.memoizedProps);break;case 5:if(er(u,l),us(l),_&512&&(Hi||g===null||Al(g,g.return)),l.flags&32){T=l.stateNode;try{jr(T,"")}catch(Ve){Se(l,l.return,Ve)}}_&4&&l.stateNode!=null&&(T=l.memoizedProps,Nm(l,T,g!==null?g.memoizedProps:T)),_&1024&&(Ed=!0);break;case 6:if(er(u,l),us(l),_&4){if(l.stateNode===null)throw Error(n(162));_=l.memoizedProps,g=l.stateNode;try{g.nodeValue=_}catch(Ve){Se(l,l.return,Ve)}}break;case 3:if(wM=null,T=Go,Go=TM(u.containerInfo),er(u,l),Go=T,us(l),_&4&&g!==null&&g.memoizedState.isDehydrated)try{Pb(u.containerInfo)}catch(Ve){Se(l,l.return,Ve)}Ed&&(Ed=!1,Uu(l));break;case 4:_=Go,Go=TM(l.stateNode.containerInfo),er(u,l),us(l),Go=_;break;case 12:er(u,l),us(l);break;case 13:er(u,l),us(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(Ei=ke()),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,Oh(l,_)));break;case 22:T=l.memoizedState!==null;var pe=g!==null&&g.memoizedState!==null,Pe=bl,ot=Hi;if(bl=Pe||T,Hi=ot||pe,er(u,l),Hi=ot,bl=Pe,us(l),_&8192)e:for(u=l.stateNode,u._visibility=T?u._visibility&-2:u._visibility|1,T&&(g===null||pe||bl||Hi||Va(l)),g=null,u=l;;){if(u.tag===5||u.tag===26){if(g===null){pe=g=u;try{if(B=pe.stateNode,T)k=B.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{ee=pe.stateNode;var ut=pe.memoizedProps.style,Ge=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;ee.style.display=Ge==null||typeof Ge=="boolean"?"":(""+Ge).trim()}}catch(Ve){Se(pe,pe.return,Ve)}}}else if(u.tag===6){if(g===null){pe=u;try{pe.stateNode.nodeValue=T?"":pe.memoizedProps}catch(Ve){Se(pe,pe.return,Ve)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}_&4&&(_=l.updateQueue,_!==null&&(g=_.retryQueue,g!==null&&(_.retryQueue=null,Oh(l,g))));break;case 19:er(u,l),us(l),_&4&&(_=l.updateQueue,_!==null&&(l.updateQueue=null,Oh(l,_)));break;case 30:break;case 21:break;default:er(u,l),us(l)}}function us(l){var u=l.flags;if(u&2){try{for(var g,_=l.return;_!==null;){if(Im(_)){g=_;break}_=_.return}if(g==null)throw Error(n(160));switch(g.tag){case 27:var T=g.stateNode,B=Lu(l);Iu(l,B,T);break;case 5:var k=g.stateNode;g.flags&32&&(jr(k,""),g.flags&=-33);var ee=Lu(l);Iu(l,ee,k);break;case 3:case 4:var pe=g.stateNode.containerInfo,Pe=Lu(l);Nu(l,Pe,pe);break;default:throw Error(n(161))}}catch(ot){Se(l,l.return,ot)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function Uu(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;Uu(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Zr(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)_c(l,u.alternate,u),u=u.sibling}function Va(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Ga(4,u,u.return),Va(u);break;case 1:Al(u,u.return);var g=u.stateNode;typeof g.componentWillUnmount=="function"&&yc(u,u.return,g),Va(u);break;case 27:Cb(u.stateNode);case 26:case 5:Al(u,u.return),Va(u);break;case 22:u.memoizedState===null&&Va(u);break;case 30:Va(u);break;default:Va(u)}l=l.sibling}}function xl(l,u,g){for(g=g&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var _=u.alternate,T=l,B=u,k=B.flags;switch(B.tag){case 0:case 11:case 15:xl(T,B,g),Lh(4,B);break;case 1:if(xl(T,B,g),_=B,T=_.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Pe){Se(_,_.return,Pe)}if(_=B,T=_.updateQueue,T!==null){var ee=_.stateNode;try{var pe=T.shared.hiddenCallbacks;if(pe!==null)for(T.shared.hiddenCallbacks=null,T=0;T<pe.length;T++)dd(pe[T],ee)}catch(Pe){Se(_,_.return,Pe)}}g&&k&64&&Nh(B),Ih(B,B.return);break;case 27:Pu(B);case 26:case 5:xl(T,B,g),g&&_===null&&k&4&&Sd(B),Ih(B,B.return);break;case 12:xl(T,B,g);break;case 13:xl(T,B,g),g&&k&4&&Ou(T,B);break;case 22:B.memoizedState===null&&xl(T,B,g),Ih(B,B.return);break;case 30:break;default:xl(T,B,g)}u=u.sibling}}function F0(l,u){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&od(g))}function H0(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&od(l))}function Bi(l,u,g,_){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)z0(l,u,g,_),u=u.sibling}function z0(l,u,g,_){var T=u.flags;switch(u.tag){case 0:case 11:case 15:Bi(l,u,g,_),T&2048&&Lh(9,u);break;case 1:Bi(l,u,g,_);break;case 3:Bi(l,u,g,_),T&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&od(l)));break;case 12:if(T&2048){Bi(l,u,g,_),l=u.stateNode;try{var B=u.memoizedProps,k=B.id,ee=B.onPostCommit;typeof ee=="function"&&ee(k,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(pe){Se(u,u.return,pe)}}else Bi(l,u,g,_);break;case 13:Bi(l,u,g,_);break;case 23:break;case 22:B=u.stateNode,k=u.alternate,u.memoizedState!==null?B._visibility&2?Bi(l,u,g,_):ko(l,u):B._visibility&2?Bi(l,u,g,_):(B._visibility|=2,Ac(l,u,g,_,(u.subtreeFlags&10256)!==0)),T&2048&&F0(k,u);break;case 24:Bi(l,u,g,_),T&2048&&H0(u.alternate,u);break;default:Bi(l,u,g,_)}}function Ac(l,u,g,_,T){for(T=T&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var B=l,k=u,ee=g,pe=_,Pe=k.flags;switch(k.tag){case 0:case 11:case 15:Ac(B,k,ee,pe,T),Lh(8,k);break;case 23:break;case 22:var ot=k.stateNode;k.memoizedState!==null?ot._visibility&2?Ac(B,k,ee,pe,T):ko(B,k):(ot._visibility|=2,Ac(B,k,ee,pe,T)),T&&Pe&2048&&F0(k.alternate,k);break;case 24:Ac(B,k,ee,pe,T),T&&Pe&2048&&H0(k.alternate,k);break;default:Ac(B,k,ee,pe,T)}u=u.sibling}}function ko(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var g=l,_=u,T=_.flags;switch(_.tag){case 22:ko(g,_),T&2048&&F0(_.alternate,_);break;case 24:ko(g,_),T&2048&&H0(_.alternate,_);break;default:ko(g,_)}u=u.sibling}}var ja=8192;function Md(l){if(l.subtreeFlags&ja)for(l=l.child;l!==null;)AM(l),l=l.sibling}function AM(l){switch(l.tag){case 26:Md(l),l.flags&ja&&l.memoizedState!==null&&eV(Go,l.memoizedState,l.memoizedProps);break;case 5:Md(l);break;case 3:case 4:var u=Go;Go=TM(l.stateNode.containerInfo),Md(l),Go=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=ja,ja=16777216,Md(l),ja=u):Md(l));break;default:Md(l)}}function bM(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function zi(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var _=u[g];Di=_,El(_,l)}bM(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)xb(l),l=l.sibling}function xb(l){switch(l.tag){case 0:case 11:case 15:zi(l),l.flags&2048&&Ga(9,l,l.return);break;case 3:zi(l);break;case 12:zi(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Sl(l)):zi(l);break;default:zi(l)}}function Sl(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var _=u[g];Di=_,El(_,l)}bM(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Ga(8,u,u.return),Sl(u);break;case 22:g=u.stateNode,g._visibility&2&&(g._visibility&=-3,Sl(u));break;default:Sl(u)}l=l.sibling}}function El(l,u){for(;Di!==null;){var g=Di;switch(g.tag){case 0:case 11:case 15:Ga(8,g,u);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var _=g.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:od(g.memoizedState.cache)}if(_=g.child,_!==null)_.return=g,Di=_;else e:for(g=l;Di!==null;){_=Di;var T=_.sibling,B=_.return;if(In(_),_===g){Di=null;break e}if(T!==null){T.return=B,Di=T;break e}Di=B}}}var hs={getCacheForType:function(l){var u=cs(Bs),g=u.data.get(l);return g===void 0&&(g=l(),u.data.set(l,g)),g}},Sb=typeof WeakMap=="function"?WeakMap:Map,gi=0,_n=null,zn=null,tn=0,Bn=0,is=null,Xa=!1,Td=!1,Cd=!1,yo=0,Yi=0,Vo=0,Ml=0,Uh=0,_o=0,si=0,vi=null,ln=null,jn=!1,Ei=0,Rr=1/0,Ao=null,qa=null,Gs=0,Dr=null,Li=null,Ya=0,bc=0,Pm=null,Wa=null,Tl=0,Fh=null;function fs(){if((gi&2)!==0&&tn!==0)return tn&-tn;if(z.T!==null){var l=Mn;return l!==0?l:U2()}return yn()}function G0(){_o===0&&(_o=(tn&536870912)===0||hi?_e():536870912);var l=Ri.current;return l!==null&&(l.flags|=32),_o}function Qr(l,u,g){(l===_n&&(Bn===2||Bn===9)||l.cancelPendingCommit!==null)&&(Hu(l,0),jo(l,tn,_o,!1)),tt(l,g),((gi&2)===0||l!==_n)&&(l===_n&&((gi&2)===0&&(Ml|=g),Yi===4&&jo(l,tn,_o,!1)),ku(l))}function wd(l,u,g){if((gi&6)!==0)throw Error(n(327));var _=!g&&(u&124)===0&&(u&l.expiredLanes)===0||qe(l,u),T=_?C(l,u):p(l,u,!0),B=_;do{if(T===0){Td&&!_&&jo(l,u,0,!1);break}else{if(g=l.current.alternate,B&&!Fu(g)){T=p(l,u,!1),B=!1;continue}if(T===2){if(B=u,l.errorRecoveryDisabledLanes&B)var k=0;else k=l.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){u=k;e:{var ee=l;T=vi;var pe=ee.current.memoizedState.isDehydrated;if(pe&&(Hu(ee,k).flags|=256),k=p(ee,k,!1),k!==2){if(Cd&&!pe){ee.errorRecoveryDisabledLanes|=B,Ml|=B,T=4;break e}B=ln,ln=T,B!==null&&(ln===null?ln=B:ln.push.apply(ln,B))}T=k}if(B=!1,T!==2)continue}}if(T===1){Hu(l,0),jo(l,u,0,!0);break}e:{switch(_=l,B=T,B){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:jo(_,u,_o,!Xa);break e;case 2:ln=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(T=Ei+300-ke(),10<T)){if(jo(_,u,_o,!Xa),Ae(_,0,!0)!==0)break e;_.timeoutHandle=HP(Om.bind(null,_,g,ln,Ao,jn,u,_o,Ml,si,Xa,B,2,-0,0),T);break e}Om(_,g,ln,Ao,jn,u,_o,Ml,si,Xa,B,0,-0,0)}}break}while(!0);ku(l)}function Om(l,u,g,_,T,B,k,ee,pe,Pe,ot,ut,Ge,Ve){if(l.timeoutHandle=-1,ut=u.subtreeFlags,(ut&8192||(ut&16785408)===16785408)&&(Db={stylesheets:null,count:0,unsuspend:$9},AM(u),ut=tV(),ut!==null)){l.cancelPendingCommit=ut(bt.bind(null,l,u,B,g,_,T,k,ee,pe,ot,1,Ge,Ve)),jo(l,B,k,!Pe);return}bt(l,u,B,g,_,T,k,ee,pe)}function Fu(l){for(var u=l;;){var g=u.tag;if((g===0||g===11||g===15)&&u.flags&16384&&(g=u.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var _=0;_<g.length;_++){var T=g[_],B=T.getSnapshot;T=T.value;try{if(!fa(B(),T))return!1}catch{return!1}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function jo(l,u,g,_){u&=~Uh,u&=~Ml,l.suspendedLanes|=u,l.pingedLanes&=~u,_&&(l.warmLanes|=u),_=l.expirationTimes;for(var T=u;0<T;){var B=31-Mt(T),k=1<<B;_[B]=-1,T&=~k}g!==0&&Tt(l,g,u)}function Cl(){return(gi&6)===0?(Eb(0),!1):!0}function Hh(){if(zn!==null){if(Bn===0)var l=zn.return;else l=zn,cc=xu=null,rb(l),Sh=null,wm=0,l=zn;for(;l!==null;)xd(l.alternate,l),l=l.return;zn=null}}function Hu(l,u){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,O9(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),Hh(),_n=l,zn=g=As(l.current,null),tn=u,Bn=0,is=null,Xa=!1,Td=qe(l,u),Cd=!1,si=_o=Uh=Ml=Vo=Yi=0,ln=vi=null,jn=!1,(u&8)!==0&&(u|=u&32);var _=l.entangledLanes;if(_!==0)for(l=l.entanglements,_&=u;0<_;){var T=31-Mt(_),B=1<<T;u|=l[T],_&=~B}return yo=u,hm(),g}function k0(l,u){Tn=null,z.H=Cm,u===bm||u===Po?(u=eb(),Bn=3):u===$A?(u=eb(),Bn=4):Bn=u===_M?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,is=u,zn===null&&(Yi=1,N0(l,ur(u,l.current)))}function Rd(){var l=z.H;return z.H=Cm,l===null?Cm:l}function V0(){var l=z.A;return z.A=hs,l}function f(){Yi=4,Xa||(tn&4194048)!==tn&&Ri.current!==null||(Td=!0),(Vo&134217727)===0&&(Ml&134217727)===0||_n===null||jo(_n,tn,_o,!1)}function p(l,u,g){var _=gi;gi|=2;var T=Rd(),B=V0();(_n!==l||tn!==u)&&(Ao=null,Hu(l,u)),u=!1;var k=Yi;e:do try{if(Bn!==0&&zn!==null){var ee=zn,pe=is;switch(Bn){case 8:Hh(),k=6;break e;case 3:case 2:case 9:case 6:Ri.current===null&&(u=!0);var Pe=Bn;if(Bn=0,is=null,ve(l,ee,pe,Pe),g&&Td){k=0;break e}break;default:Pe=Bn,Bn=0,is=null,ve(l,ee,pe,Pe)}}b(),k=Yi;break}catch(ot){k0(l,ot)}while(!0);return u&&l.shellSuspendCounter++,cc=xu=null,gi=_,z.H=T,z.A=B,zn===null&&(_n=null,tn=0,hm()),k}function b(){for(;zn!==null;)F(zn)}function C(l,u){var g=gi;gi|=2;var _=Rd(),T=V0();_n!==l||tn!==u?(Ao=null,Rr=ke()+500,Hu(l,u)):Td=qe(l,u);e:do try{if(Bn!==0&&zn!==null){u=zn;var B=is;t:switch(Bn){case 1:Bn=0,is=null,ve(l,u,B,1);break;case 2:case 9:if(y0(B)){Bn=0,is=null,ne(u);break}u=function(){Bn!==2&&Bn!==9||_n!==l||(Bn=7),ku(l)},B.then(u,u);break e;case 3:Bn=7;break e;case 4:Bn=5;break e;case 7:y0(B)?(Bn=0,is=null,ne(u)):(Bn=0,is=null,ve(l,u,B,7));break;case 5:var k=null;switch(zn.tag){case 26:k=zn.memoizedState;case 5:case 27:var ee=zn;if(!k||ZP(k)){Bn=0,is=null;var pe=ee.sibling;if(pe!==null)zn=pe;else{var Pe=ee.return;Pe!==null?(zn=Pe,Re(Pe)):zn=null}break t}}Bn=0,is=null,ve(l,u,B,5);break;case 6:Bn=0,is=null,ve(l,u,B,6);break;case 8:Hh(),Yi=6;break e;default:throw Error(n(462))}}L();break}catch(ot){k0(l,ot)}while(!0);return cc=xu=null,z.H=_,z.A=T,gi=g,zn!==null?0:(_n=null,tn=0,hm(),Yi)}function L(){for(;zn!==null&&!$e();)F(zn)}function F(l){var u=Dh(l.alternate,l,yo);l.memoizedProps=l.pendingProps,u===null?Re(l):zn=u}function ne(l){var u=l,g=u.alternate;switch(u.tag){case 15:case 0:u=Ha(g,u,u.pendingProps,u.type,void 0,tn);break;case 11:u=Ha(g,u,u.pendingProps,u.type.render,u.ref,tn);break;case 5:rb(u);default:xd(g,u),u=zn=qA(u,yo),u=Dh(g,u,yo)}l.memoizedProps=l.pendingProps,u===null?Re(l):zn=u}function ve(l,u,g,_){cc=xu=null,rb(u),Sh=null,wm=0;var T=u.return;try{if(P2(l,T,u,g,tn)){Yi=1,N0(l,ur(g,l.current)),zn=null;return}}catch(B){if(T!==null)throw zn=T,B;Yi=1,N0(l,ur(g,l.current)),zn=null;return}u.flags&32768?(hi||_===1?l=!0:Td||(tn&536870912)!==0?l=!1:(Xa=l=!0,(_===2||_===9||_===3||_===6)&&(_=Ri.current,_!==null&&_.tag===13&&(_.flags|=16384))),at(u,l)):Re(u)}function Re(l){var u=l;do{if((u.flags&32768)!==0){at(u,Xa);return}l=u.return;var g=bb(u.alternate,u,yo);if(g!==null){zn=g;return}if(u=u.sibling,u!==null){zn=u;return}zn=u=l}while(u!==null);Yi===0&&(Yi=5)}function at(l,u){do{var g=bd(l.alternate,l);if(g!==null){g.flags&=32767,zn=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!u&&(l=l.sibling,l!==null)){zn=l;return}zn=l=g}while(l!==null);Yi=6,zn=null}function bt(l,u,g,_,T,B,k,ee,pe){l.cancelPendingCommit=null;do zu();while(Gs!==0);if((gi&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(B=u.lanes|u.childLanes,B|=c0,wt(l,g,B,k,ee,pe),l===_n&&(zn=_n=null,tn=0),Li=u,Dr=l,Ya=g,bc=B,Pm=T,Wa=_,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,fi(re,function(){return Gu(),null})):(l.callbackNode=null,l.callbackPriority=0),_=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||_){_=z.T,z.T=null,T=K.p,K.p=2,k=gi,gi|=4;try{zs(l,u,g)}finally{gi=k,K.p=T,z.T=_}}Gs=1,Ut(),zt(),An()}}function Ut(){if(Gs===1){Gs=0;var l=Dr,u=Li,g=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||g){g=z.T,z.T=null;var _=K.p;K.p=2;var T=gi;gi|=4;try{U0(u,l);var B=X2,k=HA(l.containerInfo),ee=B.focusedElem,pe=B.selectionRange;if(k!==ee&&ee&&ee.ownerDocument&&FA(ee.ownerDocument.documentElement,ee)){if(pe!==null&&lm(ee)){var Pe=pe.start,ot=pe.end;if(ot===void 0&&(ot=Pe),"selectionStart"in ee)ee.selectionStart=Pe,ee.selectionEnd=Math.min(ot,ee.value.length);else{var ut=ee.ownerDocument||document,Ge=ut&&ut.defaultView||window;if(Ge.getSelection){var Ve=Ge.getSelection(),mn=ee.textContent.length,un=Math.min(pe.start,mn),ki=pe.end===void 0?un:Math.min(pe.end,mn);!Ve.extend&&un>ki&&(k=ki,ki=un,un=k);var we=UA(ee,un),Me=UA(ee,ki);if(we&&Me&&(Ve.rangeCount!==1||Ve.anchorNode!==we.node||Ve.anchorOffset!==we.offset||Ve.focusNode!==Me.node||Ve.focusOffset!==Me.offset)){var Le=ut.createRange();Le.setStart(we.node,we.offset),Ve.removeAllRanges(),un>ki?(Ve.addRange(Le),Ve.extend(Me.node,Me.offset)):(Le.setEnd(Me.node,Me.offset),Ve.addRange(Le))}}}}for(ut=[],Ve=ee;Ve=Ve.parentNode;)Ve.nodeType===1&&ut.push({element:Ve,left:Ve.scrollLeft,top:Ve.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<ut.length;ee++){var ct=ut[ee];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}BM=!!j2,X2=j2=null}finally{gi=T,K.p=_,z.T=g}}l.current=u,Gs=2}}function zt(){if(Gs===2){Gs=0;var l=Dr,u=Li,g=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||g){g=z.T,z.T=null;var _=K.p;K.p=2;var T=gi;gi|=4;try{_c(l,u.alternate,u)}finally{gi=T,K.p=_,z.T=g}}Gs=3}}function An(){if(Gs===4||Gs===3){Gs=0,Ie();var l=Dr,u=Li,g=Ya,_=Wa;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Gs=5:(Gs=0,Li=Dr=null,Ka(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(qa=null),$n(g),u=u.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(je,u,void 0,(u.current.flags&128)===128)}catch{}if(_!==null){u=z.T,T=K.p,K.p=2,z.T=null;try{for(var B=l.onRecoverableError,k=0;k<_.length;k++){var ee=_[k];B(ee.value,{componentStack:ee.stack})}}finally{z.T=u,K.p=T}}(Ya&3)!==0&&zu(),ku(l),T=l.pendingLanes,(g&4194090)!==0&&(T&42)!==0?l===Fh?Tl++:(Tl=0,Fh=l):Tl=0,Eb(0)}}function Ka(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,od(u)))}function zu(l){return Ut(),zt(),An(),Gu()}function Gu(){if(Gs!==5)return!1;var l=Dr,u=bc;bc=0;var g=$n(Ya),_=z.T,T=K.p;try{K.p=32>g?32:g,z.T=null,g=Pm,Pm=null;var B=Dr,k=Ya;if(Gs=0,Li=Dr=null,Ya=0,(gi&6)!==0)throw Error(n(331));var ee=gi;if(gi|=4,xb(B.current),z0(B,B.current,k,g),gi=ee,Eb(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(je,B)}catch{}return!0}finally{K.p=T,z.T=_,Ka(l,u)}}function Fe(l,u,g){u=ur(g,u),u=I0(l.stateNode,u,2),l=fc(l,u,2),l!==null&&(tt(l,2),ku(l))}function Se(l,u,g){if(l.tag===3)Fe(l,l,g);else for(;u!==null;){if(u.tag===3){Fe(u,l,g);break}else if(u.tag===1){var _=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(qa===null||!qa.has(_))){l=ur(g,l),g=yM(2),_=fc(u,g,2),_!==null&&(P0(g,_,u,l),tt(_,2),ku(_));break}}u=u.return}}function Xe(l,u,g){var _=l.pingCache;if(_===null){_=l.pingCache=new Sb;var T=new Set;_.set(u,T)}else T=_.get(u),T===void 0&&(T=new Set,_.set(u,T));T.has(g)||(Cd=!0,T.add(g),l=At.bind(null,l,u,g),u.then(l,l))}function At(l,u,g){var _=l.pingCache;_!==null&&_.delete(u),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,_n===l&&(tn&g)===g&&(Yi===4||Yi===3&&(tn&62914560)===tn&&300>ke()-Ei?(gi&2)===0&&Hu(l,0):Uh|=g,si===tn&&(si=0)),ku(l)}function Jt(l,u){u===0&&(u=Be()),l=oc(l,u),l!==null&&(tt(l,u),ku(l))}function Wi(l){var u=l.memoizedState,g=0;u!==null&&(g=u.retryLane),Jt(l,g)}function pn(l,u){var g=0;switch(l.tag){case 13:var _=l.stateNode,T=l.memoizedState;T!==null&&(g=T.retryLane);break;case 19:_=l.stateNode;break;case 22:_=l.stateNode._retryCache;break;default:throw Error(n(314))}_!==null&&_.delete(u),Jt(l,g)}function fi(l,u){return et(l,u)}var Es=null,kn=null,wl=!1,j0=!1,O2=!1,Um=0;function ku(l){l!==kn&&l.next===null&&(kn===null?Es=kn=l:kn=kn.next=l),j0=!0,wl||(wl=!0,C9())}function Eb(l,u){if(!O2&&j0){O2=!0;do for(var g=!1,_=Es;_!==null;){if(l!==0){var T=_.pendingLanes;if(T===0)var B=0;else{var k=_.suspendedLanes,ee=_.pingedLanes;B=(1<<31-Mt(42|l)+1)-1,B&=T&~(k&~ee),B=B&201326741?B&201326741|1:B?B|2:0}B!==0&&(g=!0,RP(_,B))}else B=tn,B=Ae(_,_===_n?B:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(B&3)===0||qe(_,B)||(g=!0,RP(_,B));_=_.next}while(g);O2=!1}}function T9(){TP()}function TP(){j0=wl=!1;var l=0;Um!==0&&(P9()&&(l=Um),Um=0);for(var u=ke(),g=null,_=Es;_!==null;){var T=_.next,B=CP(_,u);B===0?(_.next=null,g===null?Es=T:g.next=T,T===null&&(kn=g)):(g=_,(l!==0||(B&3)!==0)&&(j0=!0)),_=T}Eb(l)}function CP(l,u){for(var g=l.suspendedLanes,_=l.pingedLanes,T=l.expirationTimes,B=l.pendingLanes&-62914561;0<B;){var k=31-Mt(B),ee=1<<k,pe=T[k];pe===-1?((ee&g)===0||(ee&_)!==0)&&(T[k]=gt(ee,u)):pe<=u&&(l.expiredLanes|=ee),B&=~ee}if(u=_n,g=tn,g=Ae(l,l===u?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),_=l.callbackNode,g===0||l===u&&(Bn===2||Bn===9)||l.cancelPendingCommit!==null)return _!==null&&_!==null&&$(_),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||qe(l,g)){if(u=g&-g,u===l.callbackPriority)return u;switch(_!==null&&$(_),$n(g)){case 2:case 8:g=nt;break;case 32:g=re;break;case 268435456:g=Te;break;default:g=re}return _=wP.bind(null,l),g=et(g,_),l.callbackPriority=u,l.callbackNode=g,u}return _!==null&&_!==null&&$(_),l.callbackPriority=2,l.callbackNode=null,2}function wP(l,u){if(Gs!==0&&Gs!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(zu()&&l.callbackNode!==g)return null;var _=tn;return _=Ae(l,l===_n?_:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),_===0?null:(wd(l,_,u),CP(l,ke()),l.callbackNode!=null&&l.callbackNode===g?wP.bind(null,l):null)}function RP(l,u){if(zu())return null;wd(l,u,!0)}function C9(){U9(function(){(gi&6)!==0?et(St,T9):TP()})}function U2(){return Um===0&&(Um=_e()),Um}function DP(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Kp(""+l)}function BP(l,u){var g=u.ownerDocument.createElement("input");return g.name=u.name,g.value=u.value,l.id&&g.setAttribute("form",l.id),u.parentNode.insertBefore(g,u),l=new FormData(l),g.parentNode.removeChild(g),l}function w9(l,u,g,_,T){if(u==="submit"&&g&&g.stateNode===T){var B=DP((T[ys]||null).action),k=_.submitter;k&&(u=(u=k[ys]||null)?DP(u.formAction):k.getAttribute("formAction"),u!==null&&(B=u,k=null));var ee=new Wf("action","action",null,_,T);l.push({event:ee,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(Um!==0){var pe=k?BP(T,k):new FormData(T);vb(g,{pending:!0,data:pe,method:T.method,action:B},null,pe)}}else typeof B=="function"&&(ee.preventDefault(),pe=k?BP(T,k):new FormData(T),vb(g,{pending:!0,data:pe,method:T.method,action:B},B,pe))},currentTarget:T}]})}}for(var F2=0;F2<um.length;F2++){var H2=um[F2],R9=H2.toLowerCase(),D9=H2[0].toUpperCase()+H2.slice(1);Js(R9,"on"+D9)}Js(qr,"onAnimationEnd"),Js(kA,"onAnimationIteration"),Js(pa,"onAnimationStart"),Js("dblclick","onDoubleClick"),Js("focusin","onFocus"),Js("focusout","onBlur"),Js(D1,"onTransitionRun"),Js(rc,"onTransitionStart"),Js(nd,"onTransitionCancel"),Js(ac,"onTransitionEnd"),X("onMouseEnter",["mouseout","mouseover"]),X("onMouseLeave",["mouseout","mouseover"]),X("onPointerEnter",["pointerout","pointerover"]),X("onPointerLeave",["pointerout","pointerover"]),ft("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ft("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ft("onBeforeInput",["compositionend","keypress","textInput","paste"]),ft("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ft("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ft("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mb));function LP(l,u){u=(u&4)!==0;for(var g=0;g<l.length;g++){var _=l[g],T=_.event;_=_.listeners;e:{var B=void 0;if(u)for(var k=_.length-1;0<=k;k--){var ee=_[k],pe=ee.instance,Pe=ee.currentTarget;if(ee=ee.listener,pe!==B&&T.isPropagationStopped())break e;B=ee,T.currentTarget=Pe;try{B(T)}catch(ot){Mh(ot)}T.currentTarget=null,B=pe}else for(k=0;k<_.length;k++){if(ee=_[k],pe=ee.instance,Pe=ee.currentTarget,ee=ee.listener,pe!==B&&T.isPropagationStopped())break e;B=ee,T.currentTarget=Pe;try{B(T)}catch(ot){Mh(ot)}T.currentTarget=null,B=pe}}}}function Jn(l,u){var g=u[Tr];g===void 0&&(g=u[Tr]=new Set);var _=l+"__bubble";g.has(_)||(NP(u,l,2,!1),g.add(_))}function z2(l,u,g){var _=0;u&&(_|=4),NP(g,l,_,u)}var xM="_reactListening"+Math.random().toString(36).slice(2);function G2(l){if(!l[xM]){l[xM]=!0,Je.forEach(function(g){g!=="selectionchange"&&(B9.has(g)||z2(g,!1,l),z2(g,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[xM]||(u[xM]=!0,z2("selectionchange",!1,u))}}function NP(l,u,g,_){switch(iO(u)){case 2:var T=sV;break;case 8:T=rV;break;default:T=tD}g=T.bind(null,u,g,l),T=void 0,!Zp||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),_?T!==void 0?l.addEventListener(u,g,{capture:!0,passive:T}):l.addEventListener(u,g,!0):T!==void 0?l.addEventListener(u,g,{passive:T}):l.addEventListener(u,g,!1)}function k2(l,u,g,_,T){var B=_;if((u&1)===0&&(u&2)===0&&_!==null)e:for(;;){if(_===null)return;var k=_.tag;if(k===3||k===4){var ee=_.stateNode.containerInfo;if(ee===T)break;if(k===4)for(k=_.return;k!==null;){var pe=k.tag;if((pe===3||pe===4)&&k.stateNode.containerInfo===T)return;k=k.return}for(;ee!==null;){if(k=j(ee),k===null)return;if(pe=k.tag,pe===5||pe===6||pe===26||pe===27){_=B=k;continue e}ee=ee.parentNode}}_=_.return}MA(function(){var Pe=B,ot=Jv(g),ut=[];e:{var Ge=l0.get(l);if(Ge!==void 0){var Ve=Wf,mn=l;switch(l){case"keypress":if(uu(g)===0)break e;case"keydown":case"keyup":Ve=DA;break;case"focusin":mn="focus",Ve=Qv;break;case"focusout":mn="blur",Ve=Qv;break;case"beforeblur":case"afterblur":Ve=Qv;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=wA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=E2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=LA;break;case qr:case kA:case pa:Ve=m1;break;case ac:Ve=tc;break;case"scroll":case"scrollend":Ve=f1;break;case"wheel":Ve=M2;break;case"copy":case"cut":case"paste":Ve=v1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=e0;break;case"toggle":case"beforetoggle":Ve=fu}var un=(u&4)!==0,ki=!un&&(l==="scroll"||l==="scrollend"),we=un?Ge!==null?Ge+"Capture":null:Ge;un=[];for(var Me=Pe,Le;Me!==null;){var ct=Me;if(Le=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Le===null||we===null||(ct=Xf(Me,we),ct!=null&&un.push(Tb(Me,ct,Le))),ki)break;Me=Me.return}0<un.length&&(Ge=new Ve(Ge,mn,null,g,ot),ut.push({event:Ge,listeners:un}))}}if((u&7)===0){e:{if(Ge=l==="mouseover"||l==="pointerover",Ve=l==="mouseout"||l==="pointerout",Ge&&g!==Kv&&(mn=g.relatedTarget||g.fromElement)&&(j(mn)||mn[_s]))break e;if((Ve||Ge)&&(Ge=ot.window===ot?ot:(Ge=ot.ownerDocument)?Ge.defaultView||Ge.parentWindow:window,Ve?(mn=g.relatedTarget||g.toElement,Ve=Pe,mn=mn?j(mn):null,mn!==null&&(ki=r(mn),un=mn.tag,mn!==ki||un!==5&&un!==27&&un!==6)&&(mn=null)):(Ve=null,mn=Pe),Ve!==mn)){if(un=wA,ct="onMouseLeave",we="onMouseEnter",Me="mouse",(l==="pointerout"||l==="pointerover")&&(un=e0,ct="onPointerLeave",we="onPointerEnter",Me="pointer"),ki=Ve==null?Ge:be(Ve),Le=mn==null?Ge:be(mn),Ge=new un(ct,Me+"leave",Ve,g,ot),Ge.target=ki,Ge.relatedTarget=Le,ct=null,j(ot)===Pe&&(un=new un(we,Me+"enter",mn,g,ot),un.target=Le,un.relatedTarget=ki,ct=un),ki=ct,Ve&&mn)t:{for(un=Ve,we=mn,Me=0,Le=un;Le;Le=X0(Le))Me++;for(Le=0,ct=we;ct;ct=X0(ct))Le++;for(;0<Me-Le;)un=X0(un),Me--;for(;0<Le-Me;)we=X0(we),Le--;for(;Me--;){if(un===we||we!==null&&un===we.alternate)break t;un=X0(un),we=X0(we)}un=null}else un=null;Ve!==null&&IP(ut,Ge,Ve,un,!1),mn!==null&&ki!==null&&IP(ut,ki,mn,un,!0)}}e:{if(Ge=Pe?be(Pe):window,Ve=Ge.nodeName&&Ge.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Ge.type==="file")var Xt=n0;else if(OA(Ge))if(i0)Xt=mu;else{Xt=C1;var Xn=T2}else Ve=Ge.nodeName,!Ve||Ve.toLowerCase()!=="input"||Ge.type!=="checkbox"&&Ge.type!=="radio"?Pe&&Wv(Pe.elementType)&&(Xt=n0):Xt=om;if(Xt&&(Xt=Xt(l,Pe))){ha(ut,Xt,g,ot);break e}Xn&&Xn(l,Ge,Pe),l==="focusout"&&Pe&&Ge.type==="number"&&Pe.memoizedProps.value!=null&&qi(Ge,"number",Ge.value)}switch(Xn=Pe?be(Pe):window,l){case"focusin":(OA(Xn)||Xn.contentEditable==="true")&&(ic=Xn,r0=Pe,cm=null);break;case"focusout":cm=r0=ic=null;break;case"mousedown":a0=!0;break;case"contextmenu":case"mouseup":case"dragend":a0=!1,GA(ut,g,ot);break;case"selectionchange":if(zA)break;case"keydown":case"keyup":GA(ut,g,ot)}var $t;if(tm)e:{switch(l){case"compositionstart":var hn="onCompositionStart";break e;case"compositionend":hn="onCompositionEnd";break e;case"compositionupdate":hn="onCompositionUpdate";break e}hn=void 0}else pu?sm(l,g)&&(hn="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(hn="onCompositionStart");hn&&(im&&g.locale!=="ko"&&(pu||hn!=="onCompositionStart"?hn==="onCompositionEnd"&&pu&&($t=CA()):($l=ot,TA="value"in $l?$l.value:$l.textContent,pu=!0)),Xn=SM(Pe,hn),0<Xn.length&&(hn=new $v(hn,l,null,g,ot),ut.push({event:hn,listeners:Xn}),$t?hn.data=$t:($t=IA(g),$t!==null&&(hn.data=$t)))),($t=nm?rm(l,g):PA(l,g))&&(hn=SM(Pe,"onBeforeInput"),0<hn.length&&(Xn=new $v("onBeforeInput","beforeinput",null,g,ot),ut.push({event:Xn,listeners:hn}),Xn.data=$t)),w9(ut,l,Pe,g,ot)}LP(ut,u)})}function Tb(l,u,g){return{instance:l,listener:u,currentTarget:g}}function SM(l,u){for(var g=u+"Capture",_=[];l!==null;){var T=l,B=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||B===null||(T=Xf(l,g),T!=null&&_.unshift(Tb(l,T,B)),T=Xf(l,u),T!=null&&_.push(Tb(l,T,B))),l.tag===3)return _;l=l.return}return[]}function X0(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function IP(l,u,g,_,T){for(var B=u._reactName,k=[];g!==null&&g!==_;){var ee=g,pe=ee.alternate,Pe=ee.stateNode;if(ee=ee.tag,pe!==null&&pe===_)break;ee!==5&&ee!==26&&ee!==27||Pe===null||(pe=Pe,T?(Pe=Xf(g,B),Pe!=null&&k.unshift(Tb(g,Pe,pe))):T||(Pe=Xf(g,B),Pe!=null&&k.push(Tb(g,Pe,pe)))),g=g.return}k.length!==0&&l.push({event:u,listeners:k})}var L9=/\r\n?/g,N9=/\u0000|\uFFFD/g;function PP(l){return(typeof l=="string"?l:""+l).replace(L9,`
`).replace(N9,"")}function OP(l,u){return u=PP(u),PP(l)===u}function EM(){}function Gi(l,u,g,_,T,B){switch(g){case"children":typeof _=="string"?u==="body"||u==="textarea"&&_===""||jr(l,_):(typeof _=="number"||typeof _=="bigint")&&u!=="body"&&jr(l,""+_);break;case"className":Ze(l,"class",_);break;case"tabIndex":Ze(l,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":Ze(l,g,_);break;case"style":Wp(l,_,B);break;case"data":if(u!=="object"){Ze(l,"data",_);break}case"src":case"href":if(_===""&&(u!=="a"||g!=="href")){l.removeAttribute(g);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){l.removeAttribute(g);break}_=Kp(""+_),l.setAttribute(g,_);break;case"action":case"formAction":if(typeof _=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof B=="function"&&(g==="formAction"?(u!=="input"&&Gi(l,u,"name",T.name,T,null),Gi(l,u,"formEncType",T.formEncType,T,null),Gi(l,u,"formMethod",T.formMethod,T,null),Gi(l,u,"formTarget",T.formTarget,T,null)):(Gi(l,u,"encType",T.encType,T,null),Gi(l,u,"method",T.method,T,null),Gi(l,u,"target",T.target,T,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){l.removeAttribute(g);break}_=Kp(""+_),l.setAttribute(g,_);break;case"onClick":_!=null&&(l.onclick=EM);break;case"onScroll":_!=null&&Jn("scroll",l);break;case"onScrollEnd":_!=null&&Jn("scrollend",l);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(g=_.__html,g!=null){if(T.children!=null)throw Error(n(60));l.innerHTML=g}}break;case"multiple":l.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":l.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){l.removeAttribute("xlink:href");break}g=Kp(""+_),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?l.setAttribute(g,""+_):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":_===!0?l.setAttribute(g,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?l.setAttribute(g,_):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?l.setAttribute(g,_):l.removeAttribute(g);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?l.removeAttribute(g):l.setAttribute(g,_);break;case"popover":Jn("beforetoggle",l),Jn("toggle",l),Ne(l,"popover",_);break;case"xlinkActuate":rt(l,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":rt(l,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":rt(l,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":rt(l,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":rt(l,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":rt(l,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":rt(l,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":rt(l,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":rt(l,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":Ne(l,"is",_);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=SA.get(g)||g,Ne(l,g,_))}}function V2(l,u,g,_,T,B){switch(g){case"style":Wp(l,_,B);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(g=_.__html,g!=null){if(T.children!=null)throw Error(n(60));l.innerHTML=g}}break;case"children":typeof _=="string"?jr(l,_):(typeof _=="number"||typeof _=="bigint")&&jr(l,""+_);break;case"onScroll":_!=null&&Jn("scroll",l);break;case"onScrollEnd":_!=null&&Jn("scrollend",l);break;case"onClick":_!=null&&(l.onclick=EM);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_t.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(T=g.endsWith("Capture"),u=g.slice(2,T?g.length-7:void 0),B=l[ys]||null,B=B!=null?B[g]:null,typeof B=="function"&&l.removeEventListener(u,B,T),typeof _=="function")){typeof B!="function"&&B!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(u,_,T);break e}g in l?l[g]=_:_===!0?l.setAttribute(g,""):Ne(l,g,_)}}}function $r(l,u,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jn("error",l),Jn("load",l);var _=!1,T=!1,B;for(B in g)if(g.hasOwnProperty(B)){var k=g[B];if(k!=null)switch(B){case"src":_=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Gi(l,u,B,k,g,null)}}T&&Gi(l,u,"srcSet",g.srcSet,g,null),_&&Gi(l,u,"src",g.src,g,null);return;case"input":Jn("invalid",l);var ee=B=k=T=null,pe=null,Pe=null;for(_ in g)if(g.hasOwnProperty(_)){var ot=g[_];if(ot!=null)switch(_){case"name":T=ot;break;case"type":k=ot;break;case"checked":pe=ot;break;case"defaultChecked":Pe=ot;break;case"value":B=ot;break;case"defaultValue":ee=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(n(137,u));break;default:Gi(l,u,_,ot,g,null)}}Dn(l,B,ee,pe,Pe,k,T,!1),bi(l);return;case"select":Jn("invalid",l),_=k=B=null;for(T in g)if(g.hasOwnProperty(T)&&(ee=g[T],ee!=null))switch(T){case"value":B=ee;break;case"defaultValue":k=ee;break;case"multiple":_=ee;default:Gi(l,u,T,ee,g,null)}u=B,g=k,l.multiple=!!_,u!=null?ei(l,!!_,u,!1):g!=null&&ei(l,!!_,g,!0);return;case"textarea":Jn("invalid",l),B=T=_=null;for(k in g)if(g.hasOwnProperty(k)&&(ee=g[k],ee!=null))switch(k){case"value":_=ee;break;case"defaultValue":T=ee;break;case"children":B=ee;break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(n(91));break;default:Gi(l,u,k,ee,g,null)}Ks(l,_,T,B),bi(l);return;case"option":for(pe in g)if(g.hasOwnProperty(pe)&&(_=g[pe],_!=null))switch(pe){case"selected":l.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Gi(l,u,pe,_,g,null)}return;case"dialog":Jn("beforetoggle",l),Jn("toggle",l),Jn("cancel",l),Jn("close",l);break;case"iframe":case"object":Jn("load",l);break;case"video":case"audio":for(_=0;_<Mb.length;_++)Jn(Mb[_],l);break;case"image":Jn("error",l),Jn("load",l);break;case"details":Jn("toggle",l);break;case"embed":case"source":case"link":Jn("error",l),Jn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Pe in g)if(g.hasOwnProperty(Pe)&&(_=g[Pe],_!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Gi(l,u,Pe,_,g,null)}return;default:if(Wv(u)){for(ot in g)g.hasOwnProperty(ot)&&(_=g[ot],_!==void 0&&V2(l,u,ot,_,g,void 0));return}}for(ee in g)g.hasOwnProperty(ee)&&(_=g[ee],_!=null&&Gi(l,u,ee,_,g,null))}function I9(l,u,g,_){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,B=null,k=null,ee=null,pe=null,Pe=null,ot=null;for(Ve in g){var ut=g[Ve];if(g.hasOwnProperty(Ve)&&ut!=null)switch(Ve){case"checked":break;case"value":break;case"defaultValue":pe=ut;default:_.hasOwnProperty(Ve)||Gi(l,u,Ve,null,_,ut)}}for(var Ge in _){var Ve=_[Ge];if(ut=g[Ge],_.hasOwnProperty(Ge)&&(Ve!=null||ut!=null))switch(Ge){case"type":B=Ve;break;case"name":T=Ve;break;case"checked":Pe=Ve;break;case"defaultChecked":ot=Ve;break;case"value":k=Ve;break;case"defaultValue":ee=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(n(137,u));break;default:Ve!==ut&&Gi(l,u,Ge,Ve,_,ut)}}Nn(l,k,ee,pe,Pe,ot,B,T);return;case"select":Ve=k=ee=Ge=null;for(B in g)if(pe=g[B],g.hasOwnProperty(B)&&pe!=null)switch(B){case"value":break;case"multiple":Ve=pe;default:_.hasOwnProperty(B)||Gi(l,u,B,null,_,pe)}for(T in _)if(B=_[T],pe=g[T],_.hasOwnProperty(T)&&(B!=null||pe!=null))switch(T){case"value":Ge=B;break;case"defaultValue":ee=B;break;case"multiple":k=B;default:B!==pe&&Gi(l,u,T,B,_,pe)}u=ee,g=k,_=Ve,Ge!=null?ei(l,!!g,Ge,!1):!!_!=!!g&&(u!=null?ei(l,!!g,u,!0):ei(l,!!g,g?[]:"",!1));return;case"textarea":Ve=Ge=null;for(ee in g)if(T=g[ee],g.hasOwnProperty(ee)&&T!=null&&!_.hasOwnProperty(ee))switch(ee){case"value":break;case"children":break;default:Gi(l,u,ee,null,_,T)}for(k in _)if(T=_[k],B=g[k],_.hasOwnProperty(k)&&(T!=null||B!=null))switch(k){case"value":Ge=T;break;case"defaultValue":Ve=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:T!==B&&Gi(l,u,k,T,_,B)}wi(l,Ge,Ve);return;case"option":for(var mn in g)if(Ge=g[mn],g.hasOwnProperty(mn)&&Ge!=null&&!_.hasOwnProperty(mn))switch(mn){case"selected":l.selected=!1;break;default:Gi(l,u,mn,null,_,Ge)}for(pe in _)if(Ge=_[pe],Ve=g[pe],_.hasOwnProperty(pe)&&Ge!==Ve&&(Ge!=null||Ve!=null))switch(pe){case"selected":l.selected=Ge&&typeof Ge!="function"&&typeof Ge!="symbol";break;default:Gi(l,u,pe,Ge,_,Ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var un in g)Ge=g[un],g.hasOwnProperty(un)&&Ge!=null&&!_.hasOwnProperty(un)&&Gi(l,u,un,null,_,Ge);for(Pe in _)if(Ge=_[Pe],Ve=g[Pe],_.hasOwnProperty(Pe)&&Ge!==Ve&&(Ge!=null||Ve!=null))switch(Pe){case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(n(137,u));break;default:Gi(l,u,Pe,Ge,_,Ve)}return;default:if(Wv(u)){for(var ki in g)Ge=g[ki],g.hasOwnProperty(ki)&&Ge!==void 0&&!_.hasOwnProperty(ki)&&V2(l,u,ki,void 0,_,Ge);for(ot in _)Ge=_[ot],Ve=g[ot],!_.hasOwnProperty(ot)||Ge===Ve||Ge===void 0&&Ve===void 0||V2(l,u,ot,Ge,_,Ve);return}}for(var we in g)Ge=g[we],g.hasOwnProperty(we)&&Ge!=null&&!_.hasOwnProperty(we)&&Gi(l,u,we,null,_,Ge);for(ut in _)Ge=_[ut],Ve=g[ut],!_.hasOwnProperty(ut)||Ge===Ve||Ge==null&&Ve==null||Gi(l,u,ut,Ge,_,Ve)}var j2=null,X2=null;function MM(l){return l.nodeType===9?l:l.ownerDocument}function UP(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function FP(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function q2(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Y2=null;function P9(){var l=window.event;return l&&l.type==="popstate"?l===Y2?!1:(Y2=l,!0):(Y2=null,!1)}var HP=typeof setTimeout=="function"?setTimeout:void 0,O9=typeof clearTimeout=="function"?clearTimeout:void 0,zP=typeof Promise=="function"?Promise:void 0,U9=typeof queueMicrotask=="function"?queueMicrotask:typeof zP<"u"?function(l){return zP.resolve(null).then(l).catch(F9)}:HP;function F9(l){setTimeout(function(){throw l})}function Dd(l){return l==="head"}function GP(l,u){var g=u,_=0,T=0;do{var B=g.nextSibling;if(l.removeChild(g),B&&B.nodeType===8)if(g=B.data,g==="/$"){if(0<_&&8>_){g=_;var k=l.ownerDocument;if(g&1&&Cb(k.documentElement),g&2&&Cb(k.body),g&4)for(g=k.head,Cb(g),k=g.firstChild;k;){var ee=k.nextSibling,pe=k.nodeName;k[ua]||pe==="SCRIPT"||pe==="STYLE"||pe==="LINK"&&k.rel.toLowerCase()==="stylesheet"||g.removeChild(k),k=ee}}if(T===0){l.removeChild(B),Pb(u);return}T--}else g==="$"||g==="$?"||g==="$!"?T++:_=g.charCodeAt(0)-48;else _=0;g=B}while(g);Pb(u)}function W2(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var g=u;switch(u=u.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":W2(g),pi(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function H9(l,u,g,_){for(;l.nodeType===1;){var T=g;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!_&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(_){if(!l[ua])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(B=l.getAttribute("rel"),B==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(B!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(B=l.getAttribute("src"),(B!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&B&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var B=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===B)return l}else return l;if(l=xc(l.nextSibling),l===null)break}return null}function z9(l,u,g){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=xc(l.nextSibling),l===null))return null;return l}function K2(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function G9(l,u){var g=l.ownerDocument;if(l.data!=="$?"||g.readyState==="complete")u();else{var _=function(){u(),g.removeEventListener("DOMContentLoaded",_)};g.addEventListener("DOMContentLoaded",_),l._reactRetry=_}}function xc(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var J2=null;function kP(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(u===0)return l;u--}else g==="/$"&&u++}l=l.previousSibling}return null}function VP(l,u,g){switch(u=MM(g),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function Cb(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);pi(l)}var Rl=new Map,jP=new Set;function TM(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var zh=K.d;K.d={f:k9,r:V9,D:j9,C:X9,L:q9,m:Y9,X:K9,S:W9,M:J9};function k9(){var l=zh.f(),u=Cl();return l||u}function V9(l){var u=ie(l);u!==null&&u.tag===5&&u.type==="form"?rM(u):zh.r(l)}var q0=typeof document>"u"?null:document;function XP(l,u,g){var _=q0;if(_&&typeof u=="string"&&u){var T=nn(u);T='link[rel="'+l+'"][href="'+T+'"]',typeof g=="string"&&(T+='[crossorigin="'+g+'"]'),jP.has(T)||(jP.add(T),l={rel:l,crossOrigin:g,href:u},_.querySelector(T)===null&&(u=_.createElement("link"),$r(u,"link",l),ze(u),_.head.appendChild(u)))}}function j9(l){zh.D(l),XP("dns-prefetch",l,null)}function X9(l,u){zh.C(l,u),XP("preconnect",l,u)}function q9(l,u,g){zh.L(l,u,g);var _=q0;if(_&&l&&u){var T='link[rel="preload"][as="'+nn(u)+'"]';u==="image"&&g&&g.imageSrcSet?(T+='[imagesrcset="'+nn(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(T+='[imagesizes="'+nn(g.imageSizes)+'"]')):T+='[href="'+nn(l)+'"]';var B=T;switch(u){case"style":B=Y0(l);break;case"script":B=W0(l)}Rl.has(B)||(l=d({rel:"preload",href:u==="image"&&g&&g.imageSrcSet?void 0:l,as:u},g),Rl.set(B,l),_.querySelector(T)!==null||u==="style"&&_.querySelector(wb(B))||u==="script"&&_.querySelector(Rb(B))||(u=_.createElement("link"),$r(u,"link",l),ze(u),_.head.appendChild(u)))}}function Y9(l,u){zh.m(l,u);var g=q0;if(g&&l){var _=u&&typeof u.as=="string"?u.as:"script",T='link[rel="modulepreload"][as="'+nn(_)+'"][href="'+nn(l)+'"]',B=T;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":B=W0(l)}if(!Rl.has(B)&&(l=d({rel:"modulepreload",href:l},u),Rl.set(B,l),g.querySelector(T)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Rb(B)))return}_=g.createElement("link"),$r(_,"link",l),ze(_),g.head.appendChild(_)}}}function W9(l,u,g){zh.S(l,u,g);var _=q0;if(_&&l){var T=Oe(_).hoistableStyles,B=Y0(l);u=u||"default";var k=T.get(B);if(!k){var ee={loading:0,preload:null};if(k=_.querySelector(wb(B)))ee.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":u},g),(g=Rl.get(B))&&Z2(l,g);var pe=k=_.createElement("link");ze(pe),$r(pe,"link",l),pe._p=new Promise(function(Pe,ot){pe.onload=Pe,pe.onerror=ot}),pe.addEventListener("load",function(){ee.loading|=1}),pe.addEventListener("error",function(){ee.loading|=2}),ee.loading|=4,CM(k,u,_)}k={type:"stylesheet",instance:k,count:1,state:ee},T.set(B,k)}}}function K9(l,u){zh.X(l,u);var g=q0;if(g&&l){var _=Oe(g).hoistableScripts,T=W0(l),B=_.get(T);B||(B=g.querySelector(Rb(T)),B||(l=d({src:l,async:!0},u),(u=Rl.get(T))&&Q2(l,u),B=g.createElement("script"),ze(B),$r(B,"link",l),g.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},_.set(T,B))}}function J9(l,u){zh.M(l,u);var g=q0;if(g&&l){var _=Oe(g).hoistableScripts,T=W0(l),B=_.get(T);B||(B=g.querySelector(Rb(T)),B||(l=d({src:l,async:!0,type:"module"},u),(u=Rl.get(T))&&Q2(l,u),B=g.createElement("script"),ze(B),$r(B,"link",l),g.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},_.set(T,B))}}function qP(l,u,g,_){var T=(T=Ce.current)?TM(T):null;if(!T)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(u=Y0(g.href),g=Oe(T).hoistableStyles,_=g.get(u),_||(_={type:"style",instance:null,count:0,state:null},g.set(u,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=Y0(g.href);var B=Oe(T).hoistableStyles,k=B.get(l);if(k||(T=T.ownerDocument||T,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},B.set(l,k),(B=T.querySelector(wb(l)))&&!B._p&&(k.instance=B,k.state.loading=5),Rl.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Rl.set(l,g),B||Z9(T,l,g,k.state))),u&&_===null)throw Error(n(528,""));return k}if(u&&_!==null)throw Error(n(529,""));return null;case"script":return u=g.async,g=g.src,typeof g=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=W0(g),g=Oe(T).hoistableScripts,_=g.get(u),_||(_={type:"script",instance:null,count:0,state:null},g.set(u,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function Y0(l){return'href="'+nn(l)+'"'}function wb(l){return'link[rel="stylesheet"]['+l+"]"}function YP(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function Z9(l,u,g,_){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?_.loading=1:(u=l.createElement("link"),_.preload=u,u.addEventListener("load",function(){return _.loading|=1}),u.addEventListener("error",function(){return _.loading|=2}),$r(u,"link",g),ze(u),l.head.appendChild(u))}function W0(l){return'[src="'+nn(l)+'"]'}function Rb(l){return"script[async]"+l}function WP(l,u,g){if(u.count++,u.instance===null)switch(u.type){case"style":var _=l.querySelector('style[data-href~="'+nn(g.href)+'"]');if(_)return u.instance=_,ze(_),_;var T=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return _=(l.ownerDocument||l).createElement("style"),ze(_),$r(_,"style",T),CM(_,g.precedence,l),u.instance=_;case"stylesheet":T=Y0(g.href);var B=l.querySelector(wb(T));if(B)return u.state.loading|=4,u.instance=B,ze(B),B;_=YP(g),(T=Rl.get(T))&&Z2(_,T),B=(l.ownerDocument||l).createElement("link"),ze(B);var k=B;return k._p=new Promise(function(ee,pe){k.onload=ee,k.onerror=pe}),$r(B,"link",_),u.state.loading|=4,CM(B,g.precedence,l),u.instance=B;case"script":return B=W0(g.src),(T=l.querySelector(Rb(B)))?(u.instance=T,ze(T),T):(_=g,(T=Rl.get(B))&&(_=d({},g),Q2(_,T)),l=l.ownerDocument||l,T=l.createElement("script"),ze(T),$r(T,"link",_),l.head.appendChild(T),u.instance=T);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(_=u.instance,u.state.loading|=4,CM(_,g.precedence,l));return u.instance}function CM(l,u,g){for(var _=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=_.length?_[_.length-1]:null,B=T,k=0;k<_.length;k++){var ee=_[k];if(ee.dataset.precedence===u)B=ee;else if(B!==T)break}B?B.parentNode.insertBefore(l,B.nextSibling):(u=g.nodeType===9?g.head:g,u.insertBefore(l,u.firstChild))}function Z2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function Q2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var wM=null;function KP(l,u,g){if(wM===null){var _=new Map,T=wM=new Map;T.set(g,_)}else T=wM,_=T.get(g),_||(_=new Map,T.set(g,_));if(_.has(l))return _;for(_.set(l,null),g=g.getElementsByTagName(l),T=0;T<g.length;T++){var B=g[T];if(!(B[ua]||B[ls]||l==="link"&&B.getAttribute("rel")==="stylesheet")&&B.namespaceURI!=="http://www.w3.org/2000/svg"){var k=B.getAttribute(u)||"";k=l+k;var ee=_.get(k);ee?ee.push(B):_.set(k,[B])}}return _}function JP(l,u,g){l=l.ownerDocument||l,l.head.insertBefore(g,u==="title"?l.querySelector("head > title"):null)}function Q9(l,u,g){if(g===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function ZP(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Db=null;function $9(){}function eV(l,u,g){if(Db===null)throw Error(n(475));var _=Db;if(u.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var T=Y0(g.href),B=l.querySelector(wb(T));if(B){l=B._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(_.count++,_=RM.bind(_),l.then(_,_)),u.state.loading|=4,u.instance=B,ze(B);return}B=l.ownerDocument||l,g=YP(g),(T=Rl.get(T))&&Z2(g,T),B=B.createElement("link"),ze(B);var k=B;k._p=new Promise(function(ee,pe){k.onload=ee,k.onerror=pe}),$r(B,"link",g),u.instance=B}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(_.count++,u=RM.bind(_),l.addEventListener("load",u),l.addEventListener("error",u))}}function tV(){if(Db===null)throw Error(n(475));var l=Db;return l.stylesheets&&l.count===0&&$2(l,l.stylesheets),0<l.count?function(u){var g=setTimeout(function(){if(l.stylesheets&&$2(l,l.stylesheets),l.unsuspend){var _=l.unsuspend;l.unsuspend=null,_()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(g)}}:null}function RM(){if(this.count--,this.count===0){if(this.stylesheets)$2(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var DM=null;function $2(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,DM=new Map,u.forEach(nV,l),DM=null,RM.call(l))}function nV(l,u){if(!(u.state.loading&4)){var g=DM.get(l);if(g)var _=g.get(null);else{g=new Map,DM.set(l,g);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),B=0;B<T.length;B++){var k=T[B];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(g.set(k.dataset.precedence,k),_=k)}_&&g.set(null,_)}T=u.instance,k=T.getAttribute("data-precedence"),B=g.get(k)||_,B===_&&g.set(null,T),g.set(k,T),this.count++,_=RM.bind(this),T.addEventListener("load",_),T.addEventListener("error",_),B?B.parentNode.insertBefore(T,B.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),u.state.loading|=4}}var Bb={$$typeof:R,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function iV(l,u,g,_,T,B,k,ee){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=He(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=He(0),this.hiddenUpdates=He(null),this.identifierPrefix=_,this.onUncaughtError=T,this.onCaughtError=B,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function QP(l,u,g,_,T,B,k,ee,pe,Pe,ot,ut){return l=new iV(l,u,g,k,ee,pe,Pe,ut),u=1,B===!0&&(u|=24),B=ma(3,null,null,u),l.current=B,B.stateNode=l,u=m0(),u.refCount++,l.pooledCache=u,u.refCount++,B.memoizedState={element:_,isDehydrated:g,cache:u},tb(B),l}function $P(l){return l?(l=yu,l):yu}function eO(l,u,g,_,T,B){T=$P(T),_.context===null?_.context=T:_.pendingContext=T,_=gl(u),_.payload={element:g},B=B===void 0?null:B,B!==null&&(_.callback=B),g=fc(l,_,u),g!==null&&(Qr(g,l,u),xh(g,l,u))}function tO(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<u?g:u}}function eD(l,u){tO(l,u),(l=l.alternate)&&tO(l,u)}function nO(l){if(l.tag===13){var u=oc(l,67108864);u!==null&&Qr(u,l,67108864),eD(l,67108864)}}var BM=!0;function sV(l,u,g,_){var T=z.T;z.T=null;var B=K.p;try{K.p=2,tD(l,u,g,_)}finally{K.p=B,z.T=T}}function rV(l,u,g,_){var T=z.T;z.T=null;var B=K.p;try{K.p=8,tD(l,u,g,_)}finally{K.p=B,z.T=T}}function tD(l,u,g,_){if(BM){var T=nD(_);if(T===null)k2(l,u,_,LM,g),sO(l,_);else if(oV(T,l,u,g,_))_.stopPropagation();else if(sO(l,_),u&4&&-1<aV.indexOf(l)){for(;T!==null;){var B=ie(T);if(B!==null)switch(B.tag){case 3:if(B=B.stateNode,B.current.memoizedState.isDehydrated){var k=Et(B.pendingLanes);if(k!==0){var ee=B;for(ee.pendingLanes|=2,ee.entangledLanes|=2;k;){var pe=1<<31-Mt(k);ee.entanglements[1]|=pe,k&=~pe}ku(B),(gi&6)===0&&(Rr=ke()+500,Eb(0))}}break;case 13:ee=oc(B,2),ee!==null&&Qr(ee,B,2),Cl(),eD(B,2)}if(B=nD(_),B===null&&k2(l,u,_,LM,g),B===T)break;T=B}T!==null&&_.stopPropagation()}else k2(l,u,_,null,g)}}function nD(l){return l=Jv(l),iD(l)}var LM=null;function iD(l){if(LM=null,l=j(l),l!==null){var u=r(l);if(u===null)l=null;else{var g=u.tag;if(g===13){if(l=a(u),l!==null)return l;l=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return LM=l,null}function iO(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(We()){case St:return 2;case nt:return 8;case re:case J:return 32;case Te:return 268435456;default:return 32}default:return 32}}var sD=!1,Bd=null,Ld=null,Nd=null,Lb=new Map,Nb=new Map,Id=[],aV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sO(l,u){switch(l){case"focusin":case"focusout":Bd=null;break;case"dragenter":case"dragleave":Ld=null;break;case"mouseover":case"mouseout":Nd=null;break;case"pointerover":case"pointerout":Lb.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nb.delete(u.pointerId)}}function Ib(l,u,g,_,T,B){return l===null||l.nativeEvent!==B?(l={blockedOn:u,domEventName:g,eventSystemFlags:_,nativeEvent:B,targetContainers:[T]},u!==null&&(u=ie(u),u!==null&&nO(u)),l):(l.eventSystemFlags|=_,u=l.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),l)}function oV(l,u,g,_,T){switch(u){case"focusin":return Bd=Ib(Bd,l,u,g,_,T),!0;case"dragenter":return Ld=Ib(Ld,l,u,g,_,T),!0;case"mouseover":return Nd=Ib(Nd,l,u,g,_,T),!0;case"pointerover":var B=T.pointerId;return Lb.set(B,Ib(Lb.get(B)||null,l,u,g,_,T)),!0;case"gotpointercapture":return B=T.pointerId,Nb.set(B,Ib(Nb.get(B)||null,l,u,g,_,T)),!0}return!1}function rO(l){var u=j(l.target);if(u!==null){var g=r(u);if(g!==null){if(u=g.tag,u===13){if(u=a(g),u!==null){l.blockedOn=u,os(l.priority,function(){if(g.tag===13){var _=fs();_=vn(_);var T=oc(g,_);T!==null&&Qr(T,g,_),eD(g,_)}});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function NM(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var g=nD(l.nativeEvent);if(g===null){g=l.nativeEvent;var _=new g.constructor(g.type,g);Kv=_,g.target.dispatchEvent(_),Kv=null}else return u=ie(g),u!==null&&nO(u),l.blockedOn=g,!1;u.shift()}return!0}function aO(l,u,g){NM(l)&&g.delete(u)}function lV(){sD=!1,Bd!==null&&NM(Bd)&&(Bd=null),Ld!==null&&NM(Ld)&&(Ld=null),Nd!==null&&NM(Nd)&&(Nd=null),Lb.forEach(aO),Nb.forEach(aO)}function IM(l,u){l.blockedOn===u&&(l.blockedOn=null,sD||(sD=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,lV)))}var PM=null;function oO(l){PM!==l&&(PM=l,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){PM===l&&(PM=null);for(var u=0;u<l.length;u+=3){var g=l[u],_=l[u+1],T=l[u+2];if(typeof _!="function"){if(iD(_||g)===null)continue;break}var B=ie(g);B!==null&&(l.splice(u,3),u-=3,vb(B,{pending:!0,data:T,method:g.method,action:_},_,T))}}))}function Pb(l){function u(pe){return IM(pe,l)}Bd!==null&&IM(Bd,l),Ld!==null&&IM(Ld,l),Nd!==null&&IM(Nd,l),Lb.forEach(u),Nb.forEach(u);for(var g=0;g<Id.length;g++){var _=Id[g];_.blockedOn===l&&(_.blockedOn=null)}for(;0<Id.length&&(g=Id[0],g.blockedOn===null);)rO(g),g.blockedOn===null&&Id.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(_=0;_<g.length;_+=3){var T=g[_],B=g[_+1],k=T[ys]||null;if(typeof B=="function")k||oO(g);else if(k){var ee=null;if(B&&B.hasAttribute("formAction")){if(T=B,k=B[ys]||null)ee=k.formAction;else if(iD(T)!==null)continue}else ee=k.action;typeof ee=="function"?g[_+1]=ee:(g.splice(_,3),_-=3),oO(g)}}}function rD(l){this._internalRoot=l}OM.prototype.render=rD.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var g=u.current,_=fs();eO(g,_,l,u,null,null)},OM.prototype.unmount=rD.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;eO(l.current,2,null,l,null,null),Cl(),u[_s]=null}};function OM(l){this._internalRoot=l}OM.prototype.unstable_scheduleHydration=function(l){if(l){var u=yn();l={blockedOn:null,target:l,priority:u};for(var g=0;g<Id.length&&u!==0&&u<Id[g].priority;g++);Id.splice(g,0,l),g===0&&rO(l)}};var lO=e.version;if(lO!=="19.1.0")throw Error(n(527,lO,"19.1.0"));K.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=c(u),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var cV={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var UM=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!UM.isDisabled&&UM.supportsFiber)try{je=UM.inject(cV),pt=UM}catch{}}return Ub.createRoot=function(l,u){if(!s(l))throw Error(n(299));var g=!1,_="",T=Dm,B=L0,k=vM,ee=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&(B=u.onCaughtError),u.onRecoverableError!==void 0&&(k=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ee=u.unstable_transitionCallbacks)),u=QP(l,1,!1,null,null,g,_,T,B,k,ee,null),l[_s]=u.current,G2(l),new rD(u)},Ub.hydrateRoot=function(l,u,g){if(!s(l))throw Error(n(299));var _=!1,T="",B=Dm,k=L0,ee=vM,pe=null,Pe=null;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(T=g.identifierPrefix),g.onUncaughtError!==void 0&&(B=g.onUncaughtError),g.onCaughtError!==void 0&&(k=g.onCaughtError),g.onRecoverableError!==void 0&&(ee=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(pe=g.unstable_transitionCallbacks),g.formState!==void 0&&(Pe=g.formState)),u=QP(l,1,!0,u,g??null,_,T,B,k,ee,pe,Pe),u.context=$P(null),g=u.current,_=fs(),_=vn(_),T=gl(_),T.callback=null,fc(g,T,_),g=_,u.current.lanes=g,tt(u,g),ku(u),l[_s]=u.current,G2(l),new OM(u)},Ub.version="19.1.0",Ub}var _O;function AV(){if(_O)return cD.exports;_O=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),cD.exports=_V(),cD.exports}var pz=AV(),dh=function(){return dh=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},dh.apply(this,arguments)};function mz(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t}function bV(i,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,r;n<s;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return i.concat(r||Array.prototype.slice.call(e))}var KT="right-scroll-bar-position",JT="width-before-scroll-bar",xV="with-scroll-bars-hidden",SV="--removed-body-scroll-bar-size";function dD(i,e){return typeof i=="function"?i(e):i&&(i.current=e),i}function EV(i,e){var t=V.useState(function(){return{value:i,callback:e,facade:{get current(){return t.value},set current(n){var s=t.value;s!==n&&(t.value=n,t.callback(n,s))}}}})[0];return t.callback=e,t.facade}var MV=typeof window<"u"?V.useLayoutEffect:V.useEffect,AO=new WeakMap;function TV(i,e){var t=EV(null,function(n){return i.forEach(function(s){return dD(s,n)})});return MV(function(){var n=AO.get(t);if(n){var s=new Set(n),r=new Set(i),a=t.current;s.forEach(function(o){r.has(o)||dD(o,null)}),r.forEach(function(o){s.has(o)||dD(o,a)})}AO.set(t,i)},[i]),t}function CV(i){return i}function wV(i,e){e===void 0&&(e=CV);var t=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:i},useMedium:function(r){var a=e(r,n);return t.push(a),function(){t=t.filter(function(o){return o!==a})}},assignSyncMedium:function(r){for(n=!0;t.length;){var a=t;t=[],a.forEach(r)}t={push:function(o){return r(o)},filter:function(){return t}}},assignMedium:function(r){n=!0;var a=[];if(t.length){var o=t;t=[],o.forEach(r),a=t}var c=function(){var d=a;a=[],d.forEach(r)},h=function(){return Promise.resolve().then(c)};h(),t={push:function(d){a.push(d),h()},filter:function(d){return a=a.filter(d),t}}}};return s}function RV(i){i===void 0&&(i={});var e=wV(null);return e.options=dh({async:!0,ssr:!1},i),e}var gz=function(i){var e=i.sideCar,t=mz(i,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return V.createElement(n,dh({},t))};gz.isSideCarExport=!0;function DV(i,e){return i.useMedium(e),gz}var vz=RV(),pD=function(){},iR=V.forwardRef(function(i,e){var t=V.useRef(null),n=V.useState({onScrollCapture:pD,onWheelCapture:pD,onTouchMoveCapture:pD}),s=n[0],r=n[1],a=i.forwardProps,o=i.children,c=i.className,h=i.removeScrollBar,d=i.enabled,m=i.shards,v=i.sideCar,y=i.noRelative,A=i.noIsolation,E=i.inert,M=i.allowPinchZoom,x=i.as,w=x===void 0?"div":x,R=i.gapMode,D=mz(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=v,I=TV([t,e]),H=dh(dh({},D),s);return V.createElement(V.Fragment,null,d&&V.createElement(P,{sideCar:vz,removeScrollBar:h,shards:m,noRelative:y,noIsolation:A,inert:E,setCallbacks:r,allowPinchZoom:!!M,lockRef:t,gapMode:R}),a?V.cloneElement(V.Children.only(o),dh(dh({},H),{ref:I})):V.createElement(w,dh({},H,{className:c,ref:I}),o))});iR.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};iR.classNames={fullWidth:JT,zeroRight:KT};var BV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function LV(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var e=BV();return e&&i.setAttribute("nonce",e),i}function NV(i,e){i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}function IV(i){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(i)}var PV=function(){var i=0,e=null;return{add:function(t){i==0&&(e=LV())&&(NV(e,t),IV(e)),i++},remove:function(){i--,!i&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},OV=function(){var i=PV();return function(e,t){V.useEffect(function(){return i.add(e),function(){i.remove()}},[e&&t])}},yz=function(){var i=OV(),e=function(t){var n=t.styles,s=t.dynamic;return i(n,s),null};return e},UV={left:0,top:0,right:0,gap:0},mD=function(i){return parseInt(i||"",10)||0},FV=function(i){var e=window.getComputedStyle(document.body),t=e[i==="padding"?"paddingLeft":"marginLeft"],n=e[i==="padding"?"paddingTop":"marginTop"],s=e[i==="padding"?"paddingRight":"marginRight"];return[mD(t),mD(n),mD(s)]},HV=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return UV;var e=FV(i),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},zV=yz(),Iy="data-scroll-locked",GV=function(i,e,t,n){var s=i.left,r=i.top,a=i.right,o=i.gap;return t===void 0&&(t="margin"),`
  .`.concat(xV,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(Iy,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(KT,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(JT,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(KT," .").concat(KT,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(JT," .").concat(JT,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Iy,`] {
    `).concat(SV,": ").concat(o,`px;
  }
`)},bO=function(){var i=parseInt(document.body.getAttribute(Iy)||"0",10);return isFinite(i)?i:0},kV=function(){V.useEffect(function(){return document.body.setAttribute(Iy,(bO()+1).toString()),function(){var i=bO()-1;i<=0?document.body.removeAttribute(Iy):document.body.setAttribute(Iy,i.toString())}},[])},VV=function(i){var e=i.noRelative,t=i.noImportant,n=i.gapMode,s=n===void 0?"margin":n;kV();var r=V.useMemo(function(){return HV(s)},[s]);return V.createElement(zV,{styles:GV(r,!e,s,t?"":"!important")})},JB=!1;if(typeof window<"u")try{var FM=Object.defineProperty({},"passive",{get:function(){return JB=!0,!0}});window.addEventListener("test",FM,FM),window.removeEventListener("test",FM,FM)}catch{JB=!1}var K0=JB?{passive:!1}:!1,jV=function(i){return i.tagName==="TEXTAREA"},_z=function(i,e){if(!(i instanceof Element))return!1;var t=window.getComputedStyle(i);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!jV(i)&&t[e]==="visible")},XV=function(i){return _z(i,"overflowY")},qV=function(i){return _z(i,"overflowX")},xO=function(i,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=Az(i,n);if(s){var r=bz(i,n),a=r[1],o=r[2];if(a>o)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},YV=function(i){var e=i.scrollTop,t=i.scrollHeight,n=i.clientHeight;return[e,t,n]},WV=function(i){var e=i.scrollLeft,t=i.scrollWidth,n=i.clientWidth;return[e,t,n]},Az=function(i,e){return i==="v"?XV(e):qV(e)},bz=function(i,e){return i==="v"?YV(e):WV(e)},KV=function(i,e){return i==="h"&&e==="rtl"?-1:1},JV=function(i,e,t,n,s){var r=KV(i,window.getComputedStyle(e).direction),a=r*n,o=t.target,c=e.contains(o),h=!1,d=a>0,m=0,v=0;do{var y=bz(i,o),A=y[0],E=y[1],M=y[2],x=E-M-r*A;(A||x)&&Az(i,o)&&(m+=x,v+=A),o=o.parentNode.host||o.parentNode}while(!c&&o!==document.body||c&&(e.contains(o)||e===o));return(d&&Math.abs(m)<1||!d&&Math.abs(v)<1)&&(h=!0),h},HM=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},SO=function(i){return[i.deltaX,i.deltaY]},EO=function(i){return i&&"current"in i?i.current:i},ZV=function(i,e){return i[0]===e[0]&&i[1]===e[1]},QV=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},$V=0,J0=[];function e7(i){var e=V.useRef([]),t=V.useRef([0,0]),n=V.useRef(),s=V.useState($V++)[0],r=V.useState(yz)[0],a=V.useRef(i);V.useEffect(function(){a.current=i},[i]),V.useEffect(function(){if(i.inert){document.body.classList.add("block-interactivity-".concat(s));var E=bV([i.lockRef.current],(i.shards||[]).map(EO),!0).filter(Boolean);return E.forEach(function(M){return M.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),E.forEach(function(M){return M.classList.remove("allow-interactivity-".concat(s))})}}},[i.inert,i.lockRef.current,i.shards]);var o=V.useCallback(function(E,M){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!a.current.allowPinchZoom;var x=HM(E),w=t.current,R="deltaX"in E?E.deltaX:w[0]-x[0],D="deltaY"in E?E.deltaY:w[1]-x[1],P,I=E.target,H=Math.abs(R)>Math.abs(D)?"h":"v";if("touches"in E&&H==="h"&&I.type==="range")return!1;var U=xO(H,I);if(!U)return!0;if(U?P=H:(P=H==="v"?"h":"v",U=xO(H,I)),!U)return!1;if(!n.current&&"changedTouches"in E&&(R||D)&&(n.current=P),!P)return!0;var N=n.current||P;return JV(N,M,E,N==="h"?R:D)},[]),c=V.useCallback(function(E){var M=E;if(!(!J0.length||J0[J0.length-1]!==r)){var x="deltaY"in M?SO(M):HM(M),w=e.current.filter(function(P){return P.name===M.type&&(P.target===M.target||M.target===P.shadowParent)&&ZV(P.delta,x)})[0];if(w&&w.should){M.cancelable&&M.preventDefault();return}if(!w){var R=(a.current.shards||[]).map(EO).filter(Boolean).filter(function(P){return P.contains(M.target)}),D=R.length>0?o(M,R[0]):!a.current.noIsolation;D&&M.cancelable&&M.preventDefault()}}},[]),h=V.useCallback(function(E,M,x,w){var R={name:E,delta:M,target:x,should:w,shadowParent:t7(x)};e.current.push(R),setTimeout(function(){e.current=e.current.filter(function(D){return D!==R})},1)},[]),d=V.useCallback(function(E){t.current=HM(E),n.current=void 0},[]),m=V.useCallback(function(E){h(E.type,SO(E),E.target,o(E,i.lockRef.current))},[]),v=V.useCallback(function(E){h(E.type,HM(E),E.target,o(E,i.lockRef.current))},[]);V.useEffect(function(){return J0.push(r),i.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",c,K0),document.addEventListener("touchmove",c,K0),document.addEventListener("touchstart",d,K0),function(){J0=J0.filter(function(E){return E!==r}),document.removeEventListener("wheel",c,K0),document.removeEventListener("touchmove",c,K0),document.removeEventListener("touchstart",d,K0)}},[]);var y=i.removeScrollBar,A=i.inert;return V.createElement(V.Fragment,null,A?V.createElement(r,{styles:QV(s)}):null,y?V.createElement(VV,{noRelative:i.noRelative,gapMode:i.gapMode}):null)}function t7(i){for(var e=null;i!==null;)i instanceof ShadowRoot&&(e=i.host,i=i.host),i=i.parentNode;return e}const n7=DV(vz,e7);var xz=V.forwardRef(function(i,e){return V.createElement(iR,dh({},i,{ref:e,sideCar:n7}))});xz.classNames=iR.classNames;function zr(i){return Object.keys(i)}function gD(i){return i&&typeof i=="object"&&!Array.isArray(i)}function fI(i,e){const t={...i},n=e;return gD(i)&&gD(e)&&Object.keys(e).forEach(s=>{gD(n[s])&&s in i?t[s]=fI(t[s],n[s]):t[s]=n[s]}),t}function i7(i){return i.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function s7(i){var e;return typeof i!="string"||!i.includes("var(--mantine-scale)")?i:(e=i.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function Av(i){const e=s7(i);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function MO(i){return i==="0rem"?"0rem":`calc(${i} * var(--mantine-scale))`}function Sz(i,{shouldScale:e=!1}={}){function t(n){if(n===0||n==="0")return`0${i}`;if(typeof n=="number"){const s=`${n/16}${i}`;return e?MO(s):s}if(typeof n=="string"){if(n===""||n.startsWith("calc(")||n.startsWith("clamp(")||n.includes("rgba("))return n;if(n.includes(","))return n.split(",").map(r=>t(r)).join(",");if(n.includes(" "))return n.split(" ").map(r=>t(r)).join(" ");const s=n.replace("px","");if(!Number.isNaN(Number(s))){const r=`${Number(s)/16}${i}`;return e?MO(r):r}}return n}return t}const yt=Sz("rem",{shouldScale:!0}),TO=Sz("em");function zp(i){return Object.keys(i).reduce((e,t)=>(i[t]!==void 0&&(e[t]=i[t]),e),{})}function Ez(i){if(typeof i=="number")return!0;if(typeof i=="string"){if(i.startsWith("calc(")||i.startsWith("var(")||i.includes(" ")&&i.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return i.trim().split(/\s+/).every(n=>e.test(n))}return!1}function r7(i){return Array.isArray(i)||i===null?!1:typeof i=="object"?i.type!==V.Fragment:!1}function cA(i){const e=V.createContext(null);return[({children:s,value:r})=>q.jsx(e.Provider,{value:r,children:s}),()=>{const s=V.useContext(e);if(s===null)throw new Error(i);return s}]}function a7(i=null){const e=V.createContext(i);return[({children:s,value:r})=>q.jsx(e.Provider,{value:r,children:s}),()=>V.useContext(e)]}const o7={app:100,modal:200,popover:300,overlay:400,max:9999};function uA(i){return o7[i]}function La(i,e="size",t=!0){if(i!==void 0)return Ez(i)?t?yt(i):i:`var(--${e}-${i})`}function sr(i){return La(i,"mantine-spacing")}function Hv(i){return i===void 0?"var(--mantine-radius-default)":La(i,"mantine-radius")}function Kx(i){return La(i,"mantine-font-size")}function l7(i){return La(i,"mantine-line-height",!1)}function Mz(i){if(i)return La(i,"mantine-shadow",!1)}function c7(i,e){return i in e?Av(e[i]):Av(i)}function Tz(i,e){const t=i.map(n=>({value:n,px:c7(n,e)}));return t.sort((n,s)=>n.px-s.px),t}function ph(i){return typeof i=="object"&&i!==null?"base"in i?i.base:void 0:i}function u7(i,e,t){return t===void 0?Math.max(i,e):Math.min(Math.max(i,e),t)}function h7(i="mantine-"){return`${i}${Math.random().toString(36).slice(2,11)}`}function og(i){const e=V.useRef(i);return V.useEffect(()=>{e.current=i}),V.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}function sR(i,e){const t=typeof e=="number"?e:e.delay,n=typeof e=="number"?!1:e.flushOnUnmount,s=typeof e=="number"?!1:e.leading,r=og(i),a=V.useRef(0),o=V.useRef(()=>{}),c=V.useRef(s),h=Object.assign(V.useCallback((...d)=>{if(window.clearTimeout(a.current),s&&c.current){c.current=!1,r(...d);return}const m=()=>{a.current!==0&&(a.current=0,c.current=!0,r(...d))};o.current=m,h.flush=m,a.current=window.setTimeout(m,t),c.current=!1},[r,t,s]),{flush:o.current});return V.useEffect(()=>()=>{window.clearTimeout(a.current),n&&h.flush()},[h,n]),h}function f7(i,e){try{return i.addEventListener("change",e),()=>i.removeEventListener("change",e)}catch{return i.addListener(e),()=>i.removeListener(e)}}function d7(i,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(i).matches:!1}function p7(i,e,{getInitialValueInEffect:t}={getInitialValueInEffect:!0}){const[n,s]=V.useState(t?e:d7(i)),r=V.useRef(null);return V.useEffect(()=>{if("matchMedia"in window)return r.current=window.matchMedia(i),s(r.current.matches),f7(r.current,a=>s(a.matches))},[i]),n}const OE=typeof document<"u"?V.useLayoutEffect:V.useEffect;function Cz(i,e){const t=V.useRef(!1);V.useEffect(()=>()=>{t.current=!1},[]),V.useEffect(()=>{if(t.current)return i();t.current=!0},e)}function m7({opened:i,shouldReturnFocus:e=!0}){const t=V.useRef(null),n=()=>{var s;t.current&&"focus"in t.current&&typeof t.current.focus=="function"&&((s=t.current)==null||s.focus({preventScroll:!0}))};return Cz(()=>{let s=-1;const r=a=>{a.key==="Tab"&&window.clearTimeout(s)};return document.addEventListener("keydown",r),i?t.current=document.activeElement:e&&(s=window.setTimeout(n,10)),()=>{window.clearTimeout(s),document.removeEventListener("keydown",r)}},[i,e]),n}const g7=/input|select|textarea|button|object/,wz="a, input, select, textarea, button, object, [tabindex]";function v7(i){return i.style.display==="none"}function y7(i){if(i.getAttribute("aria-hidden")||i.getAttribute("hidden")||i.getAttribute("type")==="hidden")return!1;let t=i;for(;t&&!(t===document.body||t.nodeType===11);){if(v7(t))return!1;t=t.parentNode}return!0}function Rz(i){let e=i.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function ZB(i){const e=i.nodeName.toLowerCase(),t=!Number.isNaN(Rz(i));return(g7.test(e)&&!i.disabled||i instanceof HTMLAnchorElement&&i.href||t)&&y7(i)}function Dz(i){const e=Rz(i);return(Number.isNaN(e)||e>=0)&&ZB(i)}function _7(i){return Array.from(i.querySelectorAll(wz)).filter(Dz)}function A7(i,e){const t=_7(i);if(!t.length){e.preventDefault();return}const n=t[e.shiftKey?0:t.length-1],s=i.getRootNode();let r=n===s.activeElement||i===s.activeElement;const a=s.activeElement;if(a.tagName==="INPUT"&&a.getAttribute("type")==="radio"&&(r=t.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===a.getAttribute("name")).includes(n)),!r)return;e.preventDefault();const c=t[e.shiftKey?t.length-1:0];c&&c.focus()}function b7(i=!0){const e=V.useRef(null),t=s=>{let r=s.querySelector("[data-autofocus]");if(!r){const a=Array.from(s.querySelectorAll(wz));r=a.find(Dz)||a.find(ZB)||null,!r&&ZB(s)&&(r=s)}r&&r.focus({preventScroll:!0})},n=V.useCallback(s=>{i&&s!==null&&e.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&t(s)}),e.current=s):e.current=null)},[i]);return V.useEffect(()=>{if(!i)return;e.current&&setTimeout(()=>t(e.current));const s=r=>{r.key==="Tab"&&e.current&&A7(e.current,r)};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[i]),n}const x7=hI.useId||(()=>{});function S7(){const i=x7();return i?`mantine-${i.replace(/:/g,"")}`:""}function E7(i){const e=S7(),[t,n]=V.useState(e);return OE(()=>{n(h7())},[]),typeof i=="string"?i:typeof window>"u"?e:t}function M7(i,e,t){V.useEffect(()=>(window.addEventListener(i,e,t),()=>window.removeEventListener(i,e,t)),[i,e])}function QB(i,e){if(typeof i=="function")return i(e);typeof i=="object"&&i!==null&&"current"in i&&(i.current=e)}function T7(...i){const e=new Map;return t=>{if(i.forEach(n=>{const s=QB(n,t);s&&e.set(n,s)}),e.size>0)return()=>{i.forEach(n=>{const s=e.get(n);s?s():QB(n,null)}),e.clear()}}}function zv(...i){return V.useCallback(T7(...i),i)}function Bz(i,e){return p7("(prefers-reduced-motion: reduce)",i,e)}function C7(i=!1,e){const{onOpen:t,onClose:n}={},[s,r]=V.useState(i),a=V.useCallback(()=>{r(h=>h||(t==null||t(),!0))},[t]),o=V.useCallback(()=>{r(h=>h&&(n==null||n(),!1))},[n]),c=V.useCallback(()=>{s?o():a()},[o,a,s]);return[s,{open:a,close:o,toggle:c}]}function Lz(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(e=0;e<s;e++)i[e]&&(t=Lz(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function Vr(){for(var i,e,t=0,n="",s=arguments.length;t<s;t++)(i=arguments[t])&&(e=Lz(i))&&(n&&(n+=" "),n+=e);return n}const w7={};function R7(i){const e={};return i.forEach(t=>{Object.entries(t).forEach(([n,s])=>{e[n]?e[n]=Vr(e[n],s):e[n]=s})}),e}function dI({theme:i,classNames:e,props:t,stylesCtx:n}){const r=(Array.isArray(e)?e:[e]).map(a=>typeof a=="function"?a(i,t,n):a||w7);return R7(r)}function $B({theme:i,styles:e,props:t,stylesCtx:n}){return(Array.isArray(e)?e:[e]).reduce((r,a)=>typeof a=="function"?{...r,...a(i,t,n)}:{...r,...a},{})}const Nz=V.createContext(null);function Gp(){const i=V.useContext(Nz);if(!i)throw new Error("[@mantine/core] MantineProvider was not found in tree");return i}function D7(){return Gp().cssVariablesResolver}function B7(){return Gp().classNamesPrefix}function pI(){return Gp().getStyleNonce}function L7(){return Gp().withStaticClasses}function N7(){return Gp().headless}function I7(){var i;return(i=Gp().stylesTransform)==null?void 0:i.sx}function P7(){var i;return(i=Gp().stylesTransform)==null?void 0:i.styles}function Iz(){return Gp().env||"default"}function O7(i){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(i)}function U7(i){let e=i.replace("#","");if(e.length===3){const a=e.split("");e=[a[0],a[0],a[1],a[1],a[2],a[2]].join("")}if(e.length===8){const a=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a}}const t=parseInt(e,16),n=t>>16&255,s=t>>8&255,r=t&255;return{r:n,g:s,b:r,a:1}}function F7(i){const[e,t,n,s]=i.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:t,b:n,a:s||1}}function H7(i){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,t=i.match(e);if(!t)return{r:0,g:0,b:0,a:1};const n=parseInt(t[1],10),s=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100,a=t[5]?parseFloat(t[5]):void 0,o=(1-Math.abs(2*r-1))*s,c=n/60,h=o*(1-Math.abs(c%2-1)),d=r-o/2;let m,v,y;return c>=0&&c<1?(m=o,v=h,y=0):c>=1&&c<2?(m=h,v=o,y=0):c>=2&&c<3?(m=0,v=o,y=h):c>=3&&c<4?(m=0,v=h,y=o):c>=4&&c<5?(m=h,v=0,y=o):(m=o,v=0,y=h),{r:Math.round((m+d)*255),g:Math.round((v+d)*255),b:Math.round((y+d)*255),a:a||1}}function mI(i){return O7(i)?U7(i):i.startsWith("rgb")?F7(i):i.startsWith("hsl")?H7(i):{r:0,g:0,b:0,a:1}}function zM(i,e){if(i.startsWith("var("))return`color-mix(in srgb, ${i}, black ${e*100}%)`;const{r:t,g:n,b:s,a:r}=mI(i),a=1-e,o=c=>Math.round(c*a);return`rgba(${o(t)}, ${o(n)}, ${o(s)}, ${r})`}function Jx(i,e){return typeof i.primaryShade=="number"?i.primaryShade:e==="dark"?i.primaryShade.dark:i.primaryShade.light}function vD(i){return i<=.03928?i/12.92:((i+.055)/1.055)**2.4}function z7(i){const e=i.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function G7(i){if(i.startsWith("oklch("))return(z7(i)||0)/100;const{r:e,g:t,b:n}=mI(i),s=e/255,r=t/255,a=n/255,o=vD(s),c=vD(r),h=vD(a);return .2126*o+.7152*c+.0722*h}function Fb(i,e=.179){return i.startsWith("var(")?!1:G7(i)>e}function UE({color:i,theme:e,colorScheme:t}){if(typeof i!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof i}`);if(i==="bright")return{color:i,value:t==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Fb(t==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(i==="dimmed")return{color:i,value:t==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Fb(t==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(i==="white"||i==="black")return{color:i,value:i==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Fb(i==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${i}`};const[n,s]=i.split("."),r=s?Number(s):void 0,a=n in e.colors;if(a){const o=r!==void 0?e.colors[n][r]:e.colors[n][Jx(e,t||"light")];return{color:n,value:o,shade:r,isThemeColor:a,isLight:Fb(o,e.luminanceThreshold),variable:s?`--mantine-color-${n}-${r}`:`--mantine-color-${n}-filled`}}return{color:i,value:i,isThemeColor:a,isLight:Fb(i,e.luminanceThreshold),shade:r,variable:void 0}}function Zx(i,e){const t=UE({color:i||e.primaryColor,theme:e});return t.variable?`var(${t.variable})`:i}function eL(i,e){const t={from:(i==null?void 0:i.from)||e.defaultGradient.from,to:(i==null?void 0:i.to)||e.defaultGradient.to,deg:(i==null?void 0:i.deg)??e.defaultGradient.deg??0},n=Zx(t.from,e),s=Zx(t.to,e);return`linear-gradient(${t.deg}deg, ${n} 0%, ${s} 100%)`}function qu(i,e){if(typeof i!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(i.startsWith("var(")){const r=(1-e)*100;return`color-mix(in srgb, ${i}, transparent ${r}%)`}if(i.startsWith("oklch"))return i.includes("/")?i.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):i.replace(")",` / ${e})`);const{r:t,g:n,b:s}=mI(i);return`rgba(${t}, ${n}, ${s}, ${e})`}const Z0=qu,k7=({color:i,theme:e,variant:t,gradient:n,autoContrast:s})=>{const r=UE({color:i,theme:e}),a=typeof s=="boolean"?s:e.autoContrast;if(t==="none")return{background:"transparent",hover:"transparent",color:"inherit",border:"none"};if(t==="filled"){const o=a&&r.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return r.isThemeColor?r.shade===void 0?{background:`var(--mantine-color-${i}-filled)`,hover:`var(--mantine-color-${i}-filled-hover)`,color:o,border:`${yt(1)} solid transparent`}:{background:`var(--mantine-color-${r.color}-${r.shade})`,hover:`var(--mantine-color-${r.color}-${r.shade===9?8:r.shade+1})`,color:o,border:`${yt(1)} solid transparent`}:{background:i,hover:zM(i,.1),color:o,border:`${yt(1)} solid transparent`}}if(t==="light"){if(r.isThemeColor){if(r.shade===void 0)return{background:`var(--mantine-color-${i}-light)`,hover:`var(--mantine-color-${i}-light-hover)`,color:`var(--mantine-color-${i}-light-color)`,border:`${yt(1)} solid transparent`};const o=e.colors[r.color][r.shade];return{background:qu(o,.1),hover:qu(o,.12),color:`var(--mantine-color-${r.color}-${Math.min(r.shade,6)})`,border:`${yt(1)} solid transparent`}}return{background:qu(i,.1),hover:qu(i,.12),color:i,border:`${yt(1)} solid transparent`}}if(t==="outline")return r.isThemeColor?r.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${i}-outline-hover)`,color:`var(--mantine-color-${i}-outline)`,border:`${yt(1)} solid var(--mantine-color-${i}-outline)`}:{background:"transparent",hover:qu(e.colors[r.color][r.shade],.05),color:`var(--mantine-color-${r.color}-${r.shade})`,border:`${yt(1)} solid var(--mantine-color-${r.color}-${r.shade})`}:{background:"transparent",hover:qu(i,.05),color:i,border:`${yt(1)} solid ${i}`};if(t==="subtle"){if(r.isThemeColor){if(r.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${i}-light-hover)`,color:`var(--mantine-color-${i}-light-color)`,border:`${yt(1)} solid transparent`};const o=e.colors[r.color][r.shade];return{background:"transparent",hover:qu(o,.12),color:`var(--mantine-color-${r.color}-${Math.min(r.shade,6)})`,border:`${yt(1)} solid transparent`}}return{background:"transparent",hover:qu(i,.12),color:i,border:`${yt(1)} solid transparent`}}return t==="transparent"?r.isThemeColor?r.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${i}-light-color)`,border:`${yt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${r.color}-${Math.min(r.shade,6)})`,border:`${yt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:i,border:`${yt(1)} solid transparent`}:t==="white"?r.isThemeColor?r.shade===void 0?{background:"var(--mantine-color-white)",hover:zM(e.white,.01),color:`var(--mantine-color-${i}-filled)`,border:`${yt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:zM(e.white,.01),color:`var(--mantine-color-${r.color}-${r.shade})`,border:`${yt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:zM(e.white,.01),color:i,border:`${yt(1)} solid transparent`}:t==="gradient"?{background:eL(n,e),hover:eL(n,e),color:"var(--mantine-color-white)",border:"none"}:t==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${yt(1)} solid var(--mantine-color-default-border)`}:{}},V7={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},CO="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",gI={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:V7,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:k7,autoContrast:!1,luminanceThreshold:.3,fontFamily:CO,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:CO,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:yt(34),lineHeight:"1.3"},h2:{fontSize:yt(26),lineHeight:"1.35"},h3:{fontSize:yt(22),lineHeight:"1.4"},h4:{fontSize:yt(18),lineHeight:"1.45"},h5:{fontSize:yt(16),lineHeight:"1.5"},h6:{fontSize:yt(14),lineHeight:"1.5"}}},fontSizes:{xs:yt(12),sm:yt(14),md:yt(16),lg:yt(18),xl:yt(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:yt(2),sm:yt(4),md:yt(8),lg:yt(16),xl:yt(32)},spacing:{xs:yt(10),sm:yt(12),md:yt(16),lg:yt(20),xl:yt(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${yt(1)} ${yt(3)} rgba(0, 0, 0, 0.05), 0 ${yt(1)} ${yt(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${yt(1)} ${yt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${yt(10)} ${yt(15)} ${yt(-5)}, rgba(0, 0, 0, 0.04) 0 ${yt(7)} ${yt(7)} ${yt(-5)}`,md:`0 ${yt(1)} ${yt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${yt(20)} ${yt(25)} ${yt(-5)}, rgba(0, 0, 0, 0.04) 0 ${yt(10)} ${yt(10)} ${yt(-5)}`,lg:`0 ${yt(1)} ${yt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${yt(28)} ${yt(23)} ${yt(-7)}, rgba(0, 0, 0, 0.04) 0 ${yt(12)} ${yt(12)} ${yt(-7)}`,xl:`0 ${yt(1)} ${yt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${yt(36)} ${yt(28)} ${yt(-7)}, rgba(0, 0, 0, 0.04) 0 ${yt(17)} ${yt(17)} ${yt(-7)}`},other:{},components:{}};function wO(i){return i==="auto"||i==="dark"||i==="light"}function j7({key:i="mantine-color-scheme-value"}={}){let e;return{get:t=>{if(typeof window>"u")return t;try{const n=window.localStorage.getItem(i);return wO(n)?n:t}catch{return t}},set:t=>{try{window.localStorage.setItem(i,t)}catch(n){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",n)}},subscribe:t=>{e=n=>{n.storageArea===window.localStorage&&n.key===i&&wO(n.newValue)&&t(n.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(i)}}}const X7="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",RO="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function yD(i){return i<0||i>9?!1:parseInt(i.toString(),10)===i}function DO(i){if(!(i.primaryColor in i.colors))throw new Error(X7);if(typeof i.primaryShade=="object"&&(!yD(i.primaryShade.dark)||!yD(i.primaryShade.light)))throw new Error(RO);if(typeof i.primaryShade=="number"&&!yD(i.primaryShade))throw new Error(RO)}function q7(i,e){var n;if(!e)return DO(i),i;const t=fI(i,e);return e.fontFamily&&!((n=e.headings)!=null&&n.fontFamily)&&(t.headings.fontFamily=e.fontFamily),DO(t),t}const vI=V.createContext(null),Y7=()=>V.useContext(vI)||gI;function gh(){const i=V.useContext(vI);if(!i)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return i}function Pz({theme:i,children:e,inherit:t=!0}){const n=Y7(),s=V.useMemo(()=>q7(t?n:gI,i),[i,n,t]);return q.jsx(vI.Provider,{value:s,children:e})}Pz.displayName="@mantine/core/MantineThemeProvider";function W7(){const i=gh(),e=pI(),t=zr(i.breakpoints).reduce((n,s)=>{const r=i.breakpoints[s].includes("px"),a=Av(i.breakpoints[s]),o=r?`${a-.1}px`:TO(a-.1),c=r?`${a}px`:TO(a);return`${n}@media (max-width: ${o}) {.mantine-visible-from-${s} {display: none !important;}}@media (min-width: ${c}) {.mantine-hidden-from-${s} {display: none !important;}}`},"");return q.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:t}})}function _D(i){return Object.entries(i).map(([e,t])=>`${e}: ${t};`).join("")}function Hb(i,e){return(Array.isArray(i)?i:[i]).reduce((n,s)=>`${s}{${n}}`,e)}function K7(i,e){const t=_D(i.variables),n=t?Hb(e,t):"",s=_D(i.dark),r=_D(i.light),a=s?Hb(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,s):"",o=r?Hb(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,r):"";return`${n}${a}${o}`}function J7({color:i,theme:e,autoContrast:t}){return e.autoContrast&&UE({color:i||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function BO(i,e){return J7({color:i.colors[i.primaryColor][Jx(i,e)],theme:i,autoContrast:null})}function GM({theme:i,color:e,colorScheme:t,name:n=e,withColorValues:s=!0}){if(!i.colors[e])return{};if(t==="light"){const o=Jx(i,"light"),c={[`--mantine-color-${n}-text`]:`var(--mantine-color-${n}-filled)`,[`--mantine-color-${n}-filled`]:`var(--mantine-color-${n}-${o})`,[`--mantine-color-${n}-filled-hover`]:`var(--mantine-color-${n}-${o===9?8:o+1})`,[`--mantine-color-${n}-light`]:Z0(i.colors[e][o],.1),[`--mantine-color-${n}-light-hover`]:Z0(i.colors[e][o],.12),[`--mantine-color-${n}-light-color`]:`var(--mantine-color-${n}-${o})`,[`--mantine-color-${n}-outline`]:`var(--mantine-color-${n}-${o})`,[`--mantine-color-${n}-outline-hover`]:Z0(i.colors[e][o],.05)};return s?{[`--mantine-color-${n}-0`]:i.colors[e][0],[`--mantine-color-${n}-1`]:i.colors[e][1],[`--mantine-color-${n}-2`]:i.colors[e][2],[`--mantine-color-${n}-3`]:i.colors[e][3],[`--mantine-color-${n}-4`]:i.colors[e][4],[`--mantine-color-${n}-5`]:i.colors[e][5],[`--mantine-color-${n}-6`]:i.colors[e][6],[`--mantine-color-${n}-7`]:i.colors[e][7],[`--mantine-color-${n}-8`]:i.colors[e][8],[`--mantine-color-${n}-9`]:i.colors[e][9],...c}:c}const r=Jx(i,"dark"),a={[`--mantine-color-${n}-text`]:`var(--mantine-color-${n}-4)`,[`--mantine-color-${n}-filled`]:`var(--mantine-color-${n}-${r})`,[`--mantine-color-${n}-filled-hover`]:`var(--mantine-color-${n}-${r===9?8:r+1})`,[`--mantine-color-${n}-light`]:Z0(i.colors[e][Math.max(0,r-2)],.15),[`--mantine-color-${n}-light-hover`]:Z0(i.colors[e][Math.max(0,r-2)],.2),[`--mantine-color-${n}-light-color`]:`var(--mantine-color-${n}-${Math.max(r-5,0)})`,[`--mantine-color-${n}-outline`]:`var(--mantine-color-${n}-${Math.max(r-4,0)})`,[`--mantine-color-${n}-outline-hover`]:Z0(i.colors[e][Math.max(r-4,0)],.05)};return s?{[`--mantine-color-${n}-0`]:i.colors[e][0],[`--mantine-color-${n}-1`]:i.colors[e][1],[`--mantine-color-${n}-2`]:i.colors[e][2],[`--mantine-color-${n}-3`]:i.colors[e][3],[`--mantine-color-${n}-4`]:i.colors[e][4],[`--mantine-color-${n}-5`]:i.colors[e][5],[`--mantine-color-${n}-6`]:i.colors[e][6],[`--mantine-color-${n}-7`]:i.colors[e][7],[`--mantine-color-${n}-8`]:i.colors[e][8],[`--mantine-color-${n}-9`]:i.colors[e][9],...a}:a}function Z7(i){return!!i&&typeof i=="object"&&"mantine-virtual-color"in i}function Q0(i,e,t){zr(e).forEach(n=>Object.assign(i,{[`--mantine-${t}-${n}`]:e[n]}))}const Oz=i=>{const e=Jx(i,"light"),t=i.defaultRadius in i.radius?i.radius[i.defaultRadius]:yt(i.defaultRadius),n={variables:{"--mantine-scale":i.scale.toString(),"--mantine-cursor-type":i.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":i.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":i.fontSmoothing?"grayscale":"unset","--mantine-color-white":i.white,"--mantine-color-black":i.black,"--mantine-line-height":i.lineHeights.md,"--mantine-font-family":i.fontFamily,"--mantine-font-family-monospace":i.fontFamilyMonospace,"--mantine-font-family-headings":i.headings.fontFamily,"--mantine-heading-font-weight":i.headings.fontWeight,"--mantine-heading-text-wrap":i.headings.textWrap,"--mantine-radius-default":t,"--mantine-primary-color-filled":`var(--mantine-color-${i.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${i.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${i.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${i.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${i.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":BO(i,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":i.black,"--mantine-color-body":i.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${i.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)","--mantine-color-disabled":"var(--mantine-color-gray-2)","--mantine-color-disabled-color":"var(--mantine-color-gray-5)","--mantine-color-disabled-border":"var(--mantine-color-gray-3)"},dark:{"--mantine-primary-color-contrast":BO(i,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${i.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)","--mantine-color-disabled":"var(--mantine-color-dark-6)","--mantine-color-disabled-color":"var(--mantine-color-dark-3)","--mantine-color-disabled-border":"var(--mantine-color-gray-6)"}};Q0(n.variables,i.breakpoints,"breakpoint"),Q0(n.variables,i.spacing,"spacing"),Q0(n.variables,i.fontSizes,"font-size"),Q0(n.variables,i.lineHeights,"line-height"),Q0(n.variables,i.shadows,"shadow"),Q0(n.variables,i.radius,"radius"),i.colors[i.primaryColor].forEach((r,a)=>{n.variables[`--mantine-primary-color-${a}`]=`var(--mantine-color-${i.primaryColor}-${a})`}),zr(i.colors).forEach(r=>{const a=i.colors[r];if(Z7(a)){Object.assign(n.light,GM({theme:i,name:a.name,color:a.light,colorScheme:"light",withColorValues:!0})),Object.assign(n.dark,GM({theme:i,name:a.name,color:a.dark,colorScheme:"dark",withColorValues:!0}));return}a.forEach((o,c)=>{n.variables[`--mantine-color-${r}-${c}`]=o}),Object.assign(n.light,GM({theme:i,color:r,colorScheme:"light",withColorValues:!1})),Object.assign(n.dark,GM({theme:i,color:r,colorScheme:"dark",withColorValues:!1}))});const s=i.headings.sizes;return zr(s).forEach(r=>{n.variables[`--mantine-${r}-font-size`]=s[r].fontSize,n.variables[`--mantine-${r}-line-height`]=s[r].lineHeight,n.variables[`--mantine-${r}-font-weight`]=s[r].fontWeight||i.headings.fontWeight}),n};function Q7({theme:i,generator:e}){const t=Oz(i),n=e==null?void 0:e(i);return n?fI(t,n):t}const AD=Oz(gI);function $7(i){const e={variables:{},light:{},dark:{}};return zr(i.variables).forEach(t=>{AD.variables[t]!==i.variables[t]&&(e.variables[t]=i.variables[t])}),zr(i.light).forEach(t=>{AD.light[t]!==i.light[t]&&(e.light[t]=i.light[t])}),zr(i.dark).forEach(t=>{AD.dark[t]!==i.dark[t]&&(e.dark[t]=i.dark[t])}),e}function ej(i){return`
  ${i}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${i}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Uz({cssVariablesSelector:i,deduplicateCssVariables:e}){const t=gh(),n=pI(),s=D7(),r=Q7({theme:t,generator:s}),a=i===":root"&&e,o=a?$7(r):r,c=K7(o,i);return c?q.jsx("style",{"data-mantine-styles":!0,nonce:n==null?void 0:n(),dangerouslySetInnerHTML:{__html:`${c}${a?"":ej(i)}`}}):null}Uz.displayName="@mantine/CssVariables";function $0(i,e){var s,r;const t=typeof window<"u"&&"matchMedia"in window&&((s=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:s.matches),n=i!=="auto"?i:t?"dark":"light";(r=e())==null||r.setAttribute("data-mantine-color-scheme",n)}function tj({manager:i,defaultColorScheme:e,getRootElement:t,forceColorScheme:n}){const s=V.useRef(null),[r,a]=V.useState(()=>i.get(e)),o=n||r,c=V.useCallback(d=>{n||($0(d,t),a(d),i.set(d))},[i.set,o,n]),h=V.useCallback(()=>{a(e),$0(e,t),i.clear()},[i.clear,e]);return V.useEffect(()=>(i.subscribe(c),i.unsubscribe),[i.subscribe,i.unsubscribe]),OE(()=>{$0(i.get(e),t)},[]),V.useEffect(()=>{var m;if(n)return $0(n,t),()=>{};n===void 0&&$0(r,t),typeof window<"u"&&"matchMedia"in window&&(s.current=window.matchMedia("(prefers-color-scheme: dark)"));const d=v=>{r==="auto"&&$0(v.matches?"dark":"light",t)};return(m=s.current)==null||m.addEventListener("change",d),()=>{var v;return(v=s.current)==null?void 0:v.removeEventListener("change",d)}},[r,n]),{colorScheme:o,setColorScheme:c,clearColorScheme:h}}function nj({respectReducedMotion:i,getRootElement:e}){OE(()=>{var t;i&&((t=e())==null||t.setAttribute("data-respect-reduced-motion","true"))},[i])}function Fz({theme:i,children:e,getStyleNonce:t,withStaticClasses:n=!0,withGlobalClasses:s=!0,deduplicateCssVariables:r=!0,withCssVariables:a=!0,cssVariablesSelector:o=":root",classNamesPrefix:c="mantine",colorSchemeManager:h=j7(),defaultColorScheme:d="light",getRootElement:m=()=>document.documentElement,cssVariablesResolver:v,forceColorScheme:y,stylesTransform:A,env:E}){const{colorScheme:M,setColorScheme:x,clearColorScheme:w}=tj({defaultColorScheme:d,forceColorScheme:y,manager:h,getRootElement:m});return nj({respectReducedMotion:(i==null?void 0:i.respectReducedMotion)||!1,getRootElement:m}),q.jsx(Nz.Provider,{value:{colorScheme:M,setColorScheme:x,clearColorScheme:w,getRootElement:m,classNamesPrefix:c,getStyleNonce:t,cssVariablesResolver:v,cssVariablesSelector:o,withStaticClasses:n,stylesTransform:A,env:E},children:q.jsxs(Pz,{theme:i,children:[a&&q.jsx(Uz,{cssVariablesSelector:o,deduplicateCssVariables:r}),s&&q.jsx(W7,{}),e]})})}Fz.displayName="@mantine/core/MantineProvider";const ij={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function sj({theme:i,options:e,unstyled:t}){return Vr((e==null?void 0:e.focusable)&&!t&&(i.focusClassName||ij[i.focusRing]),(e==null?void 0:e.active)&&!t&&i.activeClassName)}function rj({selector:i,stylesCtx:e,options:t,props:n,theme:s}){return dI({theme:s,classNames:t==null?void 0:t.classNames,props:(t==null?void 0:t.props)||n,stylesCtx:e})[i]}function LO({selector:i,stylesCtx:e,theme:t,classNames:n,props:s}){return dI({theme:t,classNames:n,props:s,stylesCtx:e})[i]}function aj({rootSelector:i,selector:e,className:t}){return i===e?t:void 0}function oj({selector:i,classes:e,unstyled:t}){return t?void 0:e[i]}function lj({themeName:i,classNamesPrefix:e,selector:t,withStaticClass:n}){return n===!1?[]:i.map(s=>`${e}-${s}-${t}`)}function cj({themeName:i,theme:e,selector:t,props:n,stylesCtx:s}){return i.map(r=>{var a,o;return(o=dI({theme:e,classNames:(a=e.components[r])==null?void 0:a.classNames,props:n,stylesCtx:s}))==null?void 0:o[t]})}function uj({options:i,classes:e,selector:t,unstyled:n}){return i!=null&&i.variant&&!n?e[`${t}--${i.variant}`]:void 0}function hj({theme:i,options:e,themeName:t,selector:n,classNamesPrefix:s,classNames:r,classes:a,unstyled:o,className:c,rootSelector:h,props:d,stylesCtx:m,withStaticClasses:v,headless:y,transformedStyles:A}){return Vr(sj({theme:i,options:e,unstyled:o||y}),cj({theme:i,themeName:t,selector:n,props:d,stylesCtx:m}),uj({options:e,classes:a,selector:n,unstyled:o}),LO({selector:n,stylesCtx:m,theme:i,classNames:r,props:d}),LO({selector:n,stylesCtx:m,theme:i,classNames:A,props:d}),rj({selector:n,stylesCtx:m,options:e,props:d,theme:i}),aj({rootSelector:h,selector:n,className:c}),oj({selector:n,classes:a,unstyled:o||y}),v&&!y&&lj({themeName:t,classNamesPrefix:s,selector:n,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function fj({theme:i,themeName:e,props:t,stylesCtx:n,selector:s}){return e.map(r=>{var a;return $B({theme:i,styles:(a=i.components[r])==null?void 0:a.styles,props:t,stylesCtx:n})[s]}).reduce((r,a)=>({...r,...a}),{})}function tL({style:i,theme:e}){return Array.isArray(i)?[...i].reduce((t,n)=>({...t,...tL({style:n,theme:e})}),{}):typeof i=="function"?i(e):i??{}}function dj(i){return i.reduce((e,t)=>(t&&Object.keys(t).forEach(n=>{e[n]={...e[n],...zp(t[n])}}),e),{})}function pj({vars:i,varsResolver:e,theme:t,props:n,stylesCtx:s,selector:r,themeName:a,headless:o}){var c;return(c=dj([o?{}:e==null?void 0:e(t,n,s),...a.map(h=>{var d,m,v;return(v=(m=(d=t.components)==null?void 0:d[h])==null?void 0:m.vars)==null?void 0:v.call(m,t,n,s)}),i==null?void 0:i(t,n,s)]))==null?void 0:c[r]}function mj({theme:i,themeName:e,selector:t,options:n,props:s,stylesCtx:r,rootSelector:a,styles:o,style:c,vars:h,varsResolver:d,headless:m,withStylesTransform:v}){return{...!v&&fj({theme:i,themeName:e,props:s,stylesCtx:r,selector:t}),...!v&&$B({theme:i,styles:o,props:s,stylesCtx:r})[t],...!v&&$B({theme:i,styles:n==null?void 0:n.styles,props:(n==null?void 0:n.props)||s,stylesCtx:r})[t],...pj({theme:i,props:s,stylesCtx:r,vars:h,varsResolver:d,selector:t,themeName:e,headless:m}),...a===t?tL({style:c,theme:i}):null,...tL({style:n==null?void 0:n.style,theme:i})}}function gj({props:i,stylesCtx:e,themeName:t}){var a;const n=gh(),s=(a=P7())==null?void 0:a();return{getTransformedStyles:o=>s?[...o.map(h=>s(h,{props:i,theme:n,ctx:e})),...t.map(h=>{var d;return s((d=n.components[h])==null?void 0:d.styles,{props:i,theme:n,ctx:e})})].filter(Boolean):[],withStylesTransform:!!s}}function Us({name:i,classes:e,props:t,stylesCtx:n,className:s,style:r,rootSelector:a="root",unstyled:o,classNames:c,styles:h,vars:d,varsResolver:m}){const v=gh(),y=B7(),A=L7(),E=N7(),M=(Array.isArray(i)?i:[i]).filter(R=>R),{withStylesTransform:x,getTransformedStyles:w}=gj({props:t,stylesCtx:n,themeName:M});return(R,D)=>({className:hj({theme:v,options:D,themeName:M,selector:R,classNamesPrefix:y,classNames:c,classes:e,unstyled:o,className:s,rootSelector:a,props:t,stylesCtx:n,withStaticClasses:A,headless:E,transformedStyles:w([D==null?void 0:D.styles,h])}),style:mj({theme:v,themeName:M,selector:R,options:D,props:t,stylesCtx:n,rootSelector:a,styles:h,style:r,vars:d,varsResolver:m,headless:E,withStylesTransform:x})})}function Wn(i,e,t){var a;const n=gh(),s=(a=n.components[i])==null?void 0:a.defaultProps,r=typeof s=="function"?s(n):s;return{...e,...r,...zp(t)}}function bD(i){return zr(i).reduce((e,t)=>i[t]!==void 0?`${e}${i7(t)}:${i[t]};`:e,"").trim()}function vj({selector:i,styles:e,media:t,container:n}){const s=e?bD(e):"",r=Array.isArray(t)?t.map(o=>`@media${o.query}{${i}{${bD(o.styles)}}}`):[],a=Array.isArray(n)?n.map(o=>`@container ${o.query}{${i}{${bD(o.styles)}}}`):[];return`${s?`${i}{${s}}`:""}${r.join("")}${a.join("")}`.trim()}function hA(i){const e=pI();return q.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:vj(i)}})}function yj(i){const{m:e,mx:t,my:n,mt:s,mb:r,ml:a,mr:o,me:c,ms:h,p:d,px:m,py:v,pt:y,pb:A,pl:E,pr:M,pe:x,ps:w,bd:R,bg:D,c:P,opacity:I,ff:H,fz:U,fw:N,lts:O,ta:G,lh:oe,fs:se,tt:le,td:ue,w:z,miw:K,maw:Q,h:de,mih:W,mah:he,bgsz:xe,bgp:ye,bgr:fe,bga:De,pos:Ce,top:Ue,left:Qe,bottom:xt,right:lt,inset:mt,display:it,flex:et,hiddenFrom:$,visibleFrom:$e,lightHidden:Ie,darkHidden:ke,sx:We,...St}=i;return{styleProps:zp({m:e,mx:t,my:n,mt:s,mb:r,ml:a,mr:o,me:c,ms:h,p:d,px:m,py:v,pt:y,pb:A,pl:E,pr:M,pe:x,ps:w,bd:R,bg:D,c:P,opacity:I,ff:H,fz:U,fw:N,lts:O,ta:G,lh:oe,fs:se,tt:le,td:ue,w:z,miw:K,maw:Q,h:de,mih:W,mah:he,bgsz:xe,bgp:ye,bgr:fe,bga:De,pos:Ce,top:Ue,left:Qe,bottom:xt,right:lt,inset:mt,display:it,flex:et,hiddenFrom:$,visibleFrom:$e,lightHidden:Ie,darkHidden:ke,sx:We}),rest:St}}const _j={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function yI(i,e){const t=UE({color:i,theme:e});return t.color==="dimmed"?"var(--mantine-color-dimmed)":t.color==="bright"?"var(--mantine-color-bright)":t.variable?`var(${t.variable})`:t.color}function Aj(i,e){const t=UE({color:i,theme:e});return t.isThemeColor&&t.shade===void 0?`var(--mantine-color-${t.color}-text)`:yI(i,e)}function bj(i,e){if(typeof i=="number")return yt(i);if(typeof i=="string"){const[t,n,...s]=i.split(" ").filter(a=>a.trim()!=="");let r=`${yt(t)}`;return n&&(r+=` ${n}`),s.length>0&&(r+=` ${yI(s.join(" "),e)}`),r.trim()}return i}const NO={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function xj(i){return typeof i=="string"&&i in NO?NO[i]:i}const Sj=["h1","h2","h3","h4","h5","h6"];function Ej(i,e){return typeof i=="string"&&i in e.fontSizes?`var(--mantine-font-size-${i})`:typeof i=="string"&&Sj.includes(i)?`var(--mantine-${i}-font-size)`:typeof i=="number"||typeof i=="string"?yt(i):i}function Mj(i){return i}const Tj=["h1","h2","h3","h4","h5","h6"];function Cj(i,e){return typeof i=="string"&&i in e.lineHeights?`var(--mantine-line-height-${i})`:typeof i=="string"&&Tj.includes(i)?`var(--mantine-${i}-line-height)`:i}function wj(i){return typeof i=="number"?yt(i):i}function Rj(i,e){if(typeof i=="number")return yt(i);if(typeof i=="string"){const t=i.replace("-","");if(!(t in e.spacing))return yt(i);const n=`--mantine-spacing-${t}`;return i.startsWith("-")?`calc(var(${n}) * -1)`:`var(${n})`}return i}const xD={color:yI,textColor:Aj,fontSize:Ej,spacing:Rj,identity:Mj,size:wj,lineHeight:Cj,fontFamily:xj,border:bj};function IO(i){return i.replace("(min-width: ","").replace("em)","")}function Dj({media:i,...e}){const n=Object.keys(i).sort((s,r)=>Number(IO(s))-Number(IO(r))).map(s=>({query:s,styles:i[s]}));return{...e,media:n}}function Bj(i){if(typeof i!="object"||i===null)return!1;const e=Object.keys(i);return!(e.length===1&&e[0]==="base")}function Lj(i){return typeof i=="object"&&i!==null?"base"in i?i.base:void 0:i}function Nj(i){return typeof i=="object"&&i!==null?zr(i).filter(e=>e!=="base"):[]}function Ij(i,e){return typeof i=="object"&&i!==null&&e in i?i[e]:i}function Hz({styleProps:i,data:e,theme:t}){return Dj(zr(i).reduce((n,s)=>{if(s==="hiddenFrom"||s==="visibleFrom"||s==="sx")return n;const r=e[s],a=Array.isArray(r.property)?r.property:[r.property],o=Lj(i[s]);if(!Bj(i[s]))return a.forEach(h=>{n.inlineStyles[h]=xD[r.type](o,t)}),n;n.hasResponsiveStyles=!0;const c=Nj(i[s]);return a.forEach(h=>{o&&(n.styles[h]=xD[r.type](o,t)),c.forEach(d=>{const m=`(min-width: ${t.breakpoints[d]})`;n.media[m]={...n.media[m],[h]:xD[r.type](Ij(i[s],d),t)}})}),n},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function rR(){return`__m__-${V.useId().replace(/:/g,"")}`}function zz(i){return i.startsWith("data-")?i:`data-${i}`}function Pj(i){return Object.keys(i).reduce((e,t)=>{const n=i[t];return n===void 0||n===""||n===!1||n===null||(e[zz(t)]=i[t]),e},{})}function Gz(i){return i?typeof i=="string"?{[zz(i)]:!0}:Array.isArray(i)?[...i].reduce((e,t)=>({...e,...Gz(t)}),{}):Pj(i):null}function nL(i,e){return Array.isArray(i)?[...i].reduce((t,n)=>({...t,...nL(n,e)}),{}):typeof i=="function"?i(e):i??{}}function Oj({theme:i,style:e,vars:t,styleProps:n}){const s=nL(e,i),r=nL(t,i);return{...s,...r,...n}}const kz=V.forwardRef(({component:i,style:e,__vars:t,className:n,variant:s,mod:r,size:a,hiddenFrom:o,visibleFrom:c,lightHidden:h,darkHidden:d,renderRoot:m,__size:v,...y},A)=>{var U;const E=gh(),M=i||"div",{styleProps:x,rest:w}=yj(y),R=I7(),D=(U=R==null?void 0:R())==null?void 0:U(x.sx),P=rR(),I=Hz({styleProps:x,theme:E,data:_j}),H={ref:A,style:Oj({theme:E,style:e,vars:t,styleProps:I.inlineStyles}),className:Vr(n,D,{[P]:I.hasResponsiveStyles,"mantine-light-hidden":h,"mantine-dark-hidden":d,[`mantine-hidden-from-${o}`]:o,[`mantine-visible-from-${c}`]:c}),"data-variant":s,"data-size":Ez(a)?void 0:a||void 0,size:v,...Gz(r),...w};return q.jsxs(q.Fragment,{children:[I.hasResponsiveStyles&&q.jsx(hA,{selector:`.${P}`,styles:I.styles,media:I.media}),typeof m=="function"?m(H):q.jsx(M,{...H})]})});kz.displayName="@mantine/core/Box";const Sn=kz;function Vz(i){return i}function vs(i){const e=V.forwardRef(i);return e.extend=Vz,e.withProps=t=>{const n=V.forwardRef((s,r)=>q.jsx(e,{...t,...s,ref:r}));return n.extend=e.extend,n.displayName=`WithProps(${e.displayName})`,n},e}function Kl(i){const e=V.forwardRef(i);return e.withProps=t=>{const n=V.forwardRef((s,r)=>q.jsx(e,{...t,...s,ref:r}));return n.extend=e.extend,n.displayName=`WithProps(${e.displayName})`,n},e.extend=Vz,e}const Uj=V.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function _I(){return V.useContext(Uj)}var jz=dz();const Fj=PE(jz);function Hj(i){return V.useMemo(()=>i.every(e=>e==null)?null:e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})},i)}const[zj,Jl]=cA("ScrollArea.Root component was not found in tree");function V_(i,e){const t=og(e);OE(()=>{let n=0;if(i){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return s.observe(i),()=>{window.cancelAnimationFrame(n),s.unobserve(i)}}},[i,t])}const Gj=V.forwardRef((i,e)=>{const{style:t,...n}=i,s=Jl(),[r,a]=V.useState(0),[o,c]=V.useState(0),h=!!(r&&o);return V_(s.scrollbarX,()=>{var m;const d=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),V_(s.scrollbarY,()=>{var m;const d=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(d),a(d)}),h?q.jsx("div",{...n,ref:e,style:{...t,width:r,height:o}}):null}),kj=V.forwardRef((i,e)=>{const t=Jl(),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?q.jsx(Gj,{...i,ref:e}):null}),Vj={scrollHideDelay:1e3,type:"hover"},Xz=V.forwardRef((i,e)=>{const{type:t,scrollHideDelay:n,scrollbars:s,getStyles:r,...a}=Wn("ScrollAreaRoot",Vj,i),[o,c]=V.useState(null),[h,d]=V.useState(null),[m,v]=V.useState(null),[y,A]=V.useState(null),[E,M]=V.useState(null),[x,w]=V.useState(0),[R,D]=V.useState(0),[P,I]=V.useState(!1),[H,U]=V.useState(!1),N=zv(e,O=>c(O));return q.jsx(zj,{value:{type:t,scrollHideDelay:n,scrollArea:o,viewport:h,onViewportChange:d,content:m,onContentChange:v,scrollbarX:y,onScrollbarXChange:A,scrollbarXEnabled:P,onScrollbarXEnabledChange:I,scrollbarY:E,onScrollbarYChange:M,scrollbarYEnabled:H,onScrollbarYEnabledChange:U,onCornerWidthChange:w,onCornerHeightChange:D,getStyles:r},children:q.jsx(Sn,{...a,ref:N,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${x}px`,"--sa-corner-height":s!=="xy"?"0px":`${R}px`}})})});Xz.displayName="@mantine/core/ScrollAreaRoot";function qz(i,e){const t=i/e;return Number.isNaN(t)?0:t}function aR(i){const e=qz(i.viewport,i.content),t=i.scrollbar.paddingStart+i.scrollbar.paddingEnd,n=(i.scrollbar.size-t)*e;return Math.max(n,18)}function Yz(i,e){return t=>{if(i[0]===i[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(i[1]-i[0]);return e[0]+n*(t-i[0])}}function jj(i,[e,t]){return Math.min(t,Math.max(e,i))}function PO(i,e,t="ltr"){const n=aR(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=e.scrollbar.size-s,a=e.content-e.viewport,o=r-n,c=t==="ltr"?[0,a]:[a*-1,0],h=jj(i,c);return Yz([0,a],[0,o])(h)}function Xj(i,e,t,n="ltr"){const s=aR(t),r=s/2,a=e||r,o=s-a,c=t.scrollbar.paddingStart+a,h=t.scrollbar.size-t.scrollbar.paddingEnd-o,d=t.content-t.viewport,m=n==="ltr"?[0,d]:[d*-1,0];return Yz([c,h],m)(i)}function Wz(i,e){return i>0&&i<e}function IC(i){return i?parseInt(i,10):0}function mv(i,e,{checkForDefaultPrevented:t=!0}={}){return n=>{i==null||i(n),(t===!1||!n.defaultPrevented)&&(e==null||e(n))}}const[qj,Kz]=cA("ScrollAreaScrollbar was not found in tree"),Jz=V.forwardRef((i,e)=>{const{sizes:t,hasThumb:n,onThumbChange:s,onThumbPointerUp:r,onThumbPointerDown:a,onThumbPositionChange:o,onDragScroll:c,onWheelScroll:h,onResize:d,...m}=i,v=Jl(),[y,A]=V.useState(null),E=zv(e,U=>A(U)),M=V.useRef(null),x=V.useRef(""),{viewport:w}=v,R=t.content-t.viewport,D=og(h),P=og(o),I=sR(d,10),H=U=>{if(M.current){const N=U.clientX-M.current.left,O=U.clientY-M.current.top;c({x:N,y:O})}};return V.useEffect(()=>{const U=N=>{const O=N.target;(y==null?void 0:y.contains(O))&&D(N,R)};return document.addEventListener("wheel",U,{passive:!1}),()=>document.removeEventListener("wheel",U,{passive:!1})},[w,y,R,D]),V.useEffect(P,[t,P]),V_(y,I),V_(v.content,I),q.jsx(qj,{value:{scrollbar:y,hasThumb:n,onThumbChange:og(s),onThumbPointerUp:og(r),onThumbPositionChange:P,onThumbPointerDown:og(a)},children:q.jsx("div",{...m,ref:E,"data-mantine-scrollbar":!0,style:{position:"absolute",...m.style},onPointerDown:mv(i.onPointerDown,U=>{U.preventDefault(),U.button===0&&(U.target.setPointerCapture(U.pointerId),M.current=y.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",H(U))}),onPointerMove:mv(i.onPointerMove,H),onPointerUp:mv(i.onPointerUp,U=>{const N=U.target;N.hasPointerCapture(U.pointerId)&&(U.preventDefault(),N.releasePointerCapture(U.pointerId))}),onLostPointerCapture:()=>{document.body.style.webkitUserSelect=x.current,M.current=null}})})}),Zz=V.forwardRef((i,e)=>{const{sizes:t,onSizesChange:n,style:s,...r}=i,a=Jl(),[o,c]=V.useState(),h=V.useRef(null),d=zv(e,h,a.onScrollbarXChange);return V.useEffect(()=>{h.current&&c(getComputedStyle(h.current))},[h]),q.jsx(Jz,{"data-orientation":"horizontal",...r,ref:d,sizes:t,style:{...s,"--sa-thumb-width":`${aR(t)}px`},onThumbPointerDown:m=>i.onThumbPointerDown(m.x),onDragScroll:m=>i.onDragScroll(m.x),onWheelScroll:(m,v)=>{if(a.viewport){const y=a.viewport.scrollLeft+m.deltaX;i.onWheelScroll(y),Wz(y,v)&&m.preventDefault()}},onResize:()=>{h.current&&a.viewport&&o&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:IC(o.paddingLeft),paddingEnd:IC(o.paddingRight)}})}})});Zz.displayName="@mantine/core/ScrollAreaScrollbarX";const Qz=V.forwardRef((i,e)=>{const{sizes:t,onSizesChange:n,style:s,...r}=i,a=Jl(),[o,c]=V.useState(),h=V.useRef(null),d=zv(e,h,a.onScrollbarYChange);return V.useEffect(()=>{h.current&&c(window.getComputedStyle(h.current))},[]),q.jsx(Jz,{...r,"data-orientation":"vertical",ref:d,sizes:t,style:{"--sa-thumb-height":`${aR(t)}px`,...s},onThumbPointerDown:m=>i.onThumbPointerDown(m.y),onDragScroll:m=>i.onDragScroll(m.y),onWheelScroll:(m,v)=>{if(a.viewport){const y=a.viewport.scrollTop+m.deltaY;i.onWheelScroll(y),Wz(y,v)&&m.preventDefault()}},onResize:()=>{h.current&&a.viewport&&o&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:IC(o.paddingTop),paddingEnd:IC(o.paddingBottom)}})}})});Qz.displayName="@mantine/core/ScrollAreaScrollbarY";const oR=V.forwardRef((i,e)=>{const{orientation:t="vertical",...n}=i,{dir:s}=_I(),r=Jl(),a=V.useRef(null),o=V.useRef(0),[c,h]=V.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=qz(c.viewport,c.content),m={...n,sizes:c,onSizesChange:h,hasThumb:d>0&&d<1,onThumbChange:y=>{a.current=y},onThumbPointerUp:()=>{o.current=0},onThumbPointerDown:y=>{o.current=y}},v=(y,A)=>Xj(y,o.current,c,A);return t==="horizontal"?q.jsx(Zz,{...m,ref:e,onThumbPositionChange:()=>{if(r.viewport&&a.current){const y=r.viewport.scrollLeft,A=PO(y,c,s);a.current.style.transform=`translate3d(${A}px, 0, 0)`}},onWheelScroll:y=>{r.viewport&&(r.viewport.scrollLeft=y)},onDragScroll:y=>{r.viewport&&(r.viewport.scrollLeft=v(y,s))}}):t==="vertical"?q.jsx(Qz,{...m,ref:e,onThumbPositionChange:()=>{if(r.viewport&&a.current){const y=r.viewport.scrollTop,A=PO(y,c);c.scrollbar.size===0?a.current.style.setProperty("--thumb-opacity","0"):a.current.style.setProperty("--thumb-opacity","1"),a.current.style.transform=`translate3d(0, ${A}px, 0)`}},onWheelScroll:y=>{r.viewport&&(r.viewport.scrollTop=y)},onDragScroll:y=>{r.viewport&&(r.viewport.scrollTop=v(y))}}):null});oR.displayName="@mantine/core/ScrollAreaScrollbarVisible";const AI=V.forwardRef((i,e)=>{const t=Jl(),{forceMount:n,...s}=i,[r,a]=V.useState(!1),o=i.orientation==="horizontal",c=sR(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,d=t.viewport.offsetHeight<t.viewport.scrollHeight;a(o?h:d)}},10);return V_(t.viewport,c),V_(t.content,c),n||r?q.jsx(oR,{"data-state":r?"visible":"hidden",...s,ref:e}):null});AI.displayName="@mantine/core/ScrollAreaScrollbarAuto";const $z=V.forwardRef((i,e)=>{const{forceMount:t,...n}=i,s=Jl(),[r,a]=V.useState(!1);return V.useEffect(()=>{const{scrollArea:o}=s;let c=0;if(o){const h=()=>{window.clearTimeout(c),a(!0)},d=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return o.addEventListener("pointerenter",h),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",h),o.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),t||r?q.jsx(AI,{"data-state":r?"visible":"hidden",...n,ref:e}):null});$z.displayName="@mantine/core/ScrollAreaScrollbarHover";const Yj=V.forwardRef((i,e)=>{const{forceMount:t,...n}=i,s=Jl(),r=i.orientation==="horizontal",[a,o]=V.useState("hidden"),c=sR(()=>o("idle"),100);return V.useEffect(()=>{if(a==="idle"){const h=window.setTimeout(()=>o("hidden"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[a,s.scrollHideDelay]),V.useEffect(()=>{const{viewport:h}=s,d=r?"scrollLeft":"scrollTop";if(h){let m=h[d];const v=()=>{const y=h[d];m!==y&&(o("scrolling"),c()),m=y};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[s.viewport,r,c]),t||a!=="hidden"?q.jsx(oR,{"data-state":a==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:mv(i.onPointerEnter,()=>o("interacting")),onPointerLeave:mv(i.onPointerLeave,()=>o("idle"))}):null}),iL=V.forwardRef((i,e)=>{const{forceMount:t,...n}=i,s=Jl(),{onScrollbarXEnabledChange:r,onScrollbarYEnabledChange:a}=s,o=i.orientation==="horizontal";return V.useEffect(()=>(o?r(!0):a(!0),()=>{o?r(!1):a(!1)}),[o,r,a]),s.type==="hover"?q.jsx($z,{...n,ref:e,forceMount:t}):s.type==="scroll"?q.jsx(Yj,{...n,ref:e,forceMount:t}):s.type==="auto"?q.jsx(AI,{...n,ref:e,forceMount:t}):s.type==="always"?q.jsx(oR,{...n,ref:e}):null});iL.displayName="@mantine/core/ScrollAreaScrollbar";function Wj(i,e=()=>{}){let t={left:i.scrollLeft,top:i.scrollTop},n=0;return function s(){const r={left:i.scrollLeft,top:i.scrollTop},a=t.left!==r.left,o=t.top!==r.top;(a||o)&&e(),t=r,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)}const e4=V.forwardRef((i,e)=>{const{style:t,...n}=i,s=Jl(),r=Kz(),{onThumbPositionChange:a}=r,o=zv(e,d=>r.onThumbChange(d)),c=V.useRef(void 0),h=sR(()=>{c.current&&(c.current(),c.current=void 0)},100);return V.useEffect(()=>{const{viewport:d}=s;if(d){const m=()=>{if(h(),!c.current){const v=Wj(d,a);c.current=v,a()}};return a(),d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[s.viewport,h,a]),q.jsx("div",{"data-state":r.hasThumb?"visible":"hidden",...n,ref:o,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...t},onPointerDownCapture:mv(i.onPointerDownCapture,d=>{const v=d.target.getBoundingClientRect(),y=d.clientX-v.left,A=d.clientY-v.top;r.onThumbPointerDown({x:y,y:A})}),onPointerUp:mv(i.onPointerUp,r.onThumbPointerUp)})});e4.displayName="@mantine/core/ScrollAreaThumb";const sL=V.forwardRef((i,e)=>{const{forceMount:t,...n}=i,s=Kz();return t||s.hasThumb?q.jsx(e4,{ref:e,...n}):null});sL.displayName="@mantine/core/ScrollAreaThumb";const t4=V.forwardRef(({children:i,style:e,...t},n)=>{const s=Jl(),r=zv(n,s.onViewportChange);return q.jsx(Sn,{...t,ref:r,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e},children:q.jsx("div",{...s.getStyles("content"),ref:s.onContentChange,children:i})})});t4.displayName="@mantine/core/ScrollAreaViewport";var bI={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268",content:"m_b1336c6"};const n4={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Kj=(i,{scrollbarSize:e,overscrollBehavior:t})=>({root:{"--scrollarea-scrollbar-size":yt(e),"--scrollarea-over-scroll-behavior":t}}),FE=vs((i,e)=>{const t=Wn("ScrollArea",n4,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,scrollbarSize:c,vars:h,type:d,scrollHideDelay:m,viewportProps:v,viewportRef:y,onScrollPositionChange:A,children:E,offsetScrollbars:M,scrollbars:x,onBottomReached:w,onTopReached:R,overscrollBehavior:D,...P}=t,[I,H]=V.useState(!1),[U,N]=V.useState(!1),[O,G]=V.useState(!1),oe=Us({name:"ScrollArea",props:t,classes:bI,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:h,varsResolver:Kj}),se=V.useRef(null),le=Hj([y,se]);return V.useEffect(()=>{if(!se.current||M!=="present")return;const ue=se.current,z=new ResizeObserver(()=>{const{scrollHeight:K,clientHeight:Q,scrollWidth:de,clientWidth:W}=ue;N(K>Q),G(de>W)});return z.observe(ue),()=>z.disconnect()},[se,M]),q.jsxs(Xz,{getStyles:oe,type:d==="never"?"always":d,scrollHideDelay:m,ref:e,scrollbars:x,...oe("root"),...P,children:[q.jsx(t4,{...v,...oe("viewport",{style:v==null?void 0:v.style}),ref:le,"data-offset-scrollbars":M===!0?"xy":M||void 0,"data-scrollbars":x||void 0,"data-horizontal-hidden":M==="present"&&!O?"true":void 0,"data-vertical-hidden":M==="present"&&!U?"true":void 0,onScroll:ue=>{var de;(de=v==null?void 0:v.onScroll)==null||de.call(v,ue),A==null||A({x:ue.currentTarget.scrollLeft,y:ue.currentTarget.scrollTop});const{scrollTop:z,scrollHeight:K,clientHeight:Q}=ue.currentTarget;z-(K-Q)>=-.6&&(w==null||w()),z===0&&(R==null||R())},children:E}),(x==="xy"||x==="x")&&q.jsx(iL,{...oe("scrollbar"),orientation:"horizontal","data-hidden":d==="never"||M==="present"&&!O?!0:void 0,forceMount:!0,onMouseEnter:()=>H(!0),onMouseLeave:()=>H(!1),children:q.jsx(sL,{...oe("thumb")})}),(x==="xy"||x==="y")&&q.jsx(iL,{...oe("scrollbar"),orientation:"vertical","data-hidden":d==="never"||M==="present"&&!U?!0:void 0,forceMount:!0,onMouseEnter:()=>H(!0),onMouseLeave:()=>H(!1),children:q.jsx(sL,{...oe("thumb")})}),q.jsx(kj,{...oe("corner"),"data-hovered":I||void 0,"data-hidden":d==="never"||void 0})]})});FE.displayName="@mantine/core/ScrollArea";const xI=vs((i,e)=>{const{children:t,classNames:n,styles:s,scrollbarSize:r,scrollHideDelay:a,type:o,dir:c,offsetScrollbars:h,viewportRef:d,onScrollPositionChange:m,unstyled:v,variant:y,viewportProps:A,scrollbars:E,style:M,vars:x,onBottomReached:w,onTopReached:R,...D}=Wn("ScrollAreaAutosize",n4,i);return q.jsx(Sn,{...D,ref:e,style:[{display:"flex",overflow:"auto"},M],children:q.jsx(Sn,{style:{display:"flex",flexDirection:"column",flex:1},children:q.jsx(FE,{classNames:n,styles:s,scrollHideDelay:a,scrollbarSize:r,type:o,dir:c,offsetScrollbars:h,viewportRef:d,onScrollPositionChange:m,unstyled:v,variant:y,viewportProps:A,vars:x,scrollbars:E,onBottomReached:w,onTopReached:R,children:t})})})});FE.classes=bI;xI.displayName="@mantine/core/ScrollAreaAutosize";xI.classes=bI;FE.Autosize=xI;var i4={root:"m_87cf2631"};const Jj={__staticSelector:"UnstyledButton"},gv=Kl((i,e)=>{const t=Wn("UnstyledButton",Jj,i),{className:n,component:s="button",__staticSelector:r,unstyled:a,classNames:o,styles:c,style:h,...d}=t,m=Us({name:r,props:t,classes:i4,className:n,style:h,classNames:o,styles:c,unstyled:a});return q.jsx(Sn,{...m("root",{focusable:!0}),component:s,ref:e,type:s==="button"?"button":void 0,...d})});gv.classes=i4;gv.displayName="@mantine/core/UnstyledButton";var s4={root:"m_515a97f8"};const Zj={},SI=vs((i,e)=>{const t=Wn("VisuallyHidden",Zj,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,vars:c,...h}=t,d=Us({name:"VisuallyHidden",classes:s4,props:t,className:s,style:r,classNames:n,styles:a,unstyled:o});return q.jsx(Sn,{component:"span",ref:e,...d("root"),...h})});SI.classes=s4;SI.displayName="@mantine/core/VisuallyHidden";var r4={root:"m_1b7284a3"};const Qj={},$j=(i,{radius:e,shadow:t})=>({root:{"--paper-radius":e===void 0?void 0:Hv(e),"--paper-shadow":Mz(t)}}),j_=Kl((i,e)=>{const t=Wn("Paper",Qj,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,withBorder:c,vars:h,radius:d,shadow:m,variant:v,mod:y,...A}=t,E=Us({name:"Paper",props:t,classes:r4,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:h,varsResolver:$j});return q.jsx(Sn,{ref:e,mod:[{"data-with-border":c},y],...E("root"),variant:v,...A})});j_.classes=r4;j_.displayName="@mantine/core/Paper";var a4={root:"m_9814e45f"};const eX={zIndex:uA("modal")},tX=(i,{gradient:e,color:t,backgroundOpacity:n,blur:s,radius:r,zIndex:a})=>({root:{"--overlay-bg":e||(t!==void 0||n!==void 0)&&qu(t||"#000",n??.6)||void 0,"--overlay-filter":s?`blur(${yt(s)})`:void 0,"--overlay-radius":r===void 0?void 0:Hv(r),"--overlay-z-index":a==null?void 0:a.toString()}}),EI=Kl((i,e)=>{const t=Wn("Overlay",eX,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,vars:c,fixed:h,center:d,children:m,radius:v,zIndex:y,gradient:A,blur:E,color:M,backgroundOpacity:x,mod:w,...R}=t,D=Us({name:"Overlay",props:t,classes:a4,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:c,varsResolver:tX});return q.jsx(Sn,{ref:e,...D("root"),mod:[{center:d,fixed:h},w],...R,children:m})});EI.classes=a4;EI.displayName="@mantine/core/Overlay";function SD(i){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof i.className=="string"&&e.classList.add(...i.className.split(" ").filter(Boolean)),typeof i.style=="object"&&Object.assign(e.style,i.style),typeof i.id=="string"&&e.setAttribute("id",i.id),e}function nX({target:i,reuseTargetNode:e,...t}){if(i)return typeof i=="string"?document.querySelector(i)||SD(t):i;if(e){const n=document.querySelector("[data-mantine-shared-portal-node]");if(n)return n;const s=SD(t);return s.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(s),s}return SD(t)}const iX={reuseTargetNode:!0},o4=vs((i,e)=>{const{children:t,target:n,reuseTargetNode:s,...r}=Wn("Portal",iX,i),[a,o]=V.useState(!1),c=V.useRef(null);return OE(()=>(o(!0),c.current=nX({target:n,reuseTargetNode:s,...r}),QB(e,c.current),!n&&!s&&c.current&&document.body.appendChild(c.current),()=>{!n&&!s&&c.current&&document.body.removeChild(c.current)}),[n]),!a||!c.current?null:jz.createPortal(q.jsx(q.Fragment,{children:t}),c.current)});o4.displayName="@mantine/core/Portal";const l4=vs(({withinPortal:i=!0,children:e,...t},n)=>Iz()==="test"||!i?q.jsx(q.Fragment,{children:e}):q.jsx(o4,{ref:n,...t,children:e}));l4.displayName="@mantine/core/OptionalPortal";const zb=i=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${i==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),kM={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...zb("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...zb("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...zb("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...zb("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...zb("top"),common:{transformOrigin:"top right"}}},OO={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function sX({transition:i,state:e,duration:t,timingFunction:n}){const s={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${t}ms`,transitionTimingFunction:n};return typeof i=="string"?i in kM?{transitionProperty:kM[i].transitionProperty,...s,...kM[i].common,...kM[i][OO[e]]}:{}:{transitionProperty:i.transitionProperty,...s,...i.common,...i[OO[e]]}}function rX({duration:i,exitDuration:e,timingFunction:t,mounted:n,onEnter:s,onExit:r,onEntered:a,onExited:o,enterDelay:c,exitDelay:h}){const d=gh(),m=Bz(),v=d.respectReducedMotion?m:!1,[y,A]=V.useState(v?0:i),[E,M]=V.useState(n?"entered":"exited"),x=V.useRef(-1),w=V.useRef(-1),R=V.useRef(-1);function D(){window.clearTimeout(x.current),window.clearTimeout(w.current),cancelAnimationFrame(R.current)}const P=H=>{D();const U=H?s:r,N=H?a:o,O=v?0:H?i:e;A(O),O===0?(typeof U=="function"&&U(),typeof N=="function"&&N(),M(H?"entered":"exited")):R.current=requestAnimationFrame(()=>{Fj.flushSync(()=>{M(H?"pre-entering":"pre-exiting")}),R.current=requestAnimationFrame(()=>{typeof U=="function"&&U(),M(H?"entering":"exiting"),x.current=window.setTimeout(()=>{typeof N=="function"&&N(),M(H?"entered":"exited")},O)})})},I=H=>{if(D(),typeof(H?c:h)!="number"){P(H);return}w.current=window.setTimeout(()=>{P(H)},H?c:h)};return Cz(()=>{I(n)},[n]),V.useEffect(()=>()=>{D()},[]),{transitionDuration:y,transitionStatus:E,transitionTimingFunction:t||"ease"}}function lR({keepMounted:i,transition:e="fade",duration:t=250,exitDuration:n=t,mounted:s,children:r,timingFunction:a="ease",onExit:o,onEntered:c,onEnter:h,onExited:d,enterDelay:m,exitDelay:v}){const y=Iz(),{transitionDuration:A,transitionStatus:E,transitionTimingFunction:M}=rX({mounted:s,exitDuration:n,duration:t,timingFunction:a,onExit:o,onEntered:c,onEnter:h,onExited:d,enterDelay:m,exitDelay:v});return A===0||y==="test"?s?q.jsx(q.Fragment,{children:r({})}):i?r({display:"none"}):null:E==="exited"?i?r({display:"none"}):null:q.jsx(q.Fragment,{children:r(sX({transition:e,duration:A,state:E,timingFunction:M}))})}lR.displayName="@mantine/core/Transition";function MI({children:i,active:e=!0,refProp:t="ref",innerRef:n}){const s=b7(e),r=zv(s,n);return r7(i)?V.cloneElement(i,{[t]:r}):i}function c4(i){return q.jsx(SI,{tabIndex:-1,"data-autofocus":!0,...i})}MI.displayName="@mantine/core/FocusTrap";c4.displayName="@mantine/core/FocusTrapInitialFocus";MI.InitialFocus=c4;var Kc={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const u4=V.forwardRef(({className:i,...e},t)=>q.jsxs(Sn,{component:"span",className:Vr(Kc.barsLoader,i),...e,ref:t,children:[q.jsx("span",{className:Kc.bar}),q.jsx("span",{className:Kc.bar}),q.jsx("span",{className:Kc.bar})]}));u4.displayName="@mantine/core/Bars";const h4=V.forwardRef(({className:i,...e},t)=>q.jsxs(Sn,{component:"span",className:Vr(Kc.dotsLoader,i),...e,ref:t,children:[q.jsx("span",{className:Kc.dot}),q.jsx("span",{className:Kc.dot}),q.jsx("span",{className:Kc.dot})]}));h4.displayName="@mantine/core/Dots";const f4=V.forwardRef(({className:i,...e},t)=>q.jsx(Sn,{component:"span",className:Vr(Kc.ovalLoader,i),...e,ref:t}));f4.displayName="@mantine/core/Oval";const d4={bars:u4,oval:f4,dots:h4},aX={loaders:d4,type:"oval"},oX=(i,{size:e,color:t})=>({root:{"--loader-size":La(e,"loader-size"),"--loader-color":t?Zx(t,i):void 0}}),cR=vs((i,e)=>{const t=Wn("Loader",aX,i),{size:n,color:s,type:r,vars:a,className:o,style:c,classNames:h,styles:d,unstyled:m,loaders:v,variant:y,children:A,...E}=t,M=Us({name:"Loader",props:t,classes:Kc,className:o,style:c,classNames:h,styles:d,unstyled:m,vars:a,varsResolver:oX});return A?q.jsx(Sn,{...M("root"),ref:e,...E,children:A}):q.jsx(Sn,{...M("root"),ref:e,component:v[r],variant:y,size:n,...E})});cR.defaultLoaders=d4;cR.classes=Kc;cR.displayName="@mantine/core/Loader";const p4=V.forwardRef(({size:i="var(--cb-icon-size, 70%)",style:e,...t},n)=>q.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:i,height:i},ref:n,...t,children:q.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));p4.displayName="@mantine/core/CloseIcon";var m4={root:"m_86a44da5","root--subtle":"m_220c80f2"};const lX={variant:"subtle"},cX=(i,{size:e,radius:t,iconSize:n})=>({root:{"--cb-size":La(e,"cb-size"),"--cb-radius":t===void 0?void 0:Hv(t),"--cb-icon-size":yt(n)}}),TI=Kl((i,e)=>{const t=Wn("CloseButton",lX,i),{iconSize:n,children:s,vars:r,radius:a,className:o,classNames:c,style:h,styles:d,unstyled:m,"data-disabled":v,disabled:y,variant:A,icon:E,mod:M,__staticSelector:x,...w}=t,R=Us({name:x||"CloseButton",props:t,className:o,style:h,classes:m4,classNames:c,styles:d,unstyled:m,vars:r,varsResolver:cX});return q.jsxs(gv,{ref:e,...w,unstyled:m,variant:A,disabled:y,mod:[{disabled:y||v},M],...R("root",{variant:A,active:!y&&!v}),children:[E||q.jsx(p4,{}),s]})});TI.classes=m4;TI.displayName="@mantine/core/CloseButton";function uX(i){return V.Children.toArray(i).filter(Boolean)}var g4={root:"m_4081bf90"};const hX={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},fX=(i,{grow:e,preventGrowOverflow:t,gap:n,align:s,justify:r,wrap:a},{childWidth:o})=>({root:{"--group-child-width":e&&t?o:void 0,"--group-gap":sr(n),"--group-align":s,"--group-justify":r,"--group-wrap":a}}),Ma=vs((i,e)=>{const t=Wn("Group",hX,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,children:c,gap:h,align:d,justify:m,wrap:v,grow:y,preventGrowOverflow:A,vars:E,variant:M,__size:x,mod:w,...R}=t,D=uX(c),P=D.length,I=sr(h??"md"),U={childWidth:`calc(${100/P}% - (${I} - ${I} / ${P}))`},N=Us({name:"Group",props:t,stylesCtx:U,className:s,style:r,classes:g4,classNames:n,styles:a,unstyled:o,vars:E,varsResolver:fX});return q.jsx(Sn,{...N("root"),ref:e,variant:M,mod:[{grow:y},w],size:x,...R,children:D})});Ma.classes=g4;Ma.displayName="@mantine/core/Group";const[dX,kf]=cA("ModalBase component was not found in tree");function pX({opened:i,transitionDuration:e}){const[t,n]=V.useState(i),s=V.useRef(-1),a=Bz()?0:e;return V.useEffect(()=>(i?(n(!0),window.clearTimeout(s.current)):a===0?n(!1):s.current=window.setTimeout(()=>n(!1),a),()=>window.clearTimeout(s.current)),[i,a]),t}function mX({id:i,transitionProps:e,opened:t,trapFocus:n,closeOnEscape:s,onClose:r,returnFocus:a}){const o=E7(i),[c,h]=V.useState(!1),[d,m]=V.useState(!1),v=typeof(e==null?void 0:e.duration)=="number"?e==null?void 0:e.duration:200,y=pX({opened:t,transitionDuration:v});return M7("keydown",A=>{var E;A.key==="Escape"&&s&&!A.isComposing&&t&&((E=A.target)==null?void 0:E.getAttribute("data-mantine-stop-propagation"))!=="true"&&r()},{capture:!0}),m7({opened:t,shouldReturnFocus:n&&a}),{_id:o,titleMounted:c,bodyMounted:d,shouldLockScroll:y,setTitleMounted:h,setBodyMounted:m}}const v4=V.forwardRef(({keepMounted:i,opened:e,onClose:t,id:n,transitionProps:s,onExitTransitionEnd:r,onEnterTransitionEnd:a,trapFocus:o,closeOnEscape:c,returnFocus:h,closeOnClickOutside:d,withinPortal:m,portalProps:v,lockScroll:y,children:A,zIndex:E,shadow:M,padding:x,__vars:w,unstyled:R,removeScrollProps:D,...P},I)=>{const{_id:H,titleMounted:U,bodyMounted:N,shouldLockScroll:O,setTitleMounted:G,setBodyMounted:oe}=mX({id:n,transitionProps:s,opened:e,trapFocus:o,closeOnEscape:c,onClose:t,returnFocus:h}),{key:se,...le}=D||{};return q.jsx(l4,{...v,withinPortal:m,children:q.jsx(dX,{value:{opened:e,onClose:t,closeOnClickOutside:d,onExitTransitionEnd:r,onEnterTransitionEnd:a,transitionProps:{...s,keepMounted:i},getTitleId:()=>`${H}-title`,getBodyId:()=>`${H}-body`,titleMounted:U,bodyMounted:N,setTitleMounted:G,setBodyMounted:oe,trapFocus:o,closeOnEscape:c,zIndex:E,unstyled:R},children:q.jsx(xz,{enabled:O&&y,...le,children:q.jsx(Sn,{ref:I,...P,__vars:{...w,"--mb-z-index":(E||uA("modal")).toString(),"--mb-shadow":Mz(M),"--mb-padding":sr(x)},children:A})},se)})})});v4.displayName="@mantine/core/ModalBase";function gX(){const i=kf();return V.useEffect(()=>(i.setBodyMounted(!0),()=>i.setBodyMounted(!1)),[]),i.getBodyId()}var X_={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const y4=V.forwardRef(({className:i,...e},t)=>{const n=gX(),s=kf();return q.jsx(Sn,{ref:t,...e,id:n,className:Vr({[X_.body]:!s.unstyled},i)})});y4.displayName="@mantine/core/ModalBaseBody";const _4=V.forwardRef(({className:i,onClick:e,...t},n)=>{const s=kf();return q.jsx(TI,{ref:n,...t,onClick:r=>{s.onClose(),e==null||e(r)},className:Vr({[X_.close]:!s.unstyled},i),unstyled:s.unstyled})});_4.displayName="@mantine/core/ModalBaseCloseButton";const A4=V.forwardRef(({transitionProps:i,className:e,innerProps:t,onKeyDown:n,style:s,...r},a)=>{const o=kf();return q.jsx(lR,{mounted:o.opened,transition:"pop",...o.transitionProps,onExited:()=>{var c,h,d;(c=o.onExitTransitionEnd)==null||c.call(o),(d=(h=o.transitionProps)==null?void 0:h.onExited)==null||d.call(h)},onEntered:()=>{var c,h,d;(c=o.onEnterTransitionEnd)==null||c.call(o),(d=(h=o.transitionProps)==null?void 0:h.onEntered)==null||d.call(h)},...i,children:c=>q.jsx("div",{...t,className:Vr({[X_.inner]:!o.unstyled},t.className),children:q.jsx(MI,{active:o.opened&&o.trapFocus,innerRef:a,children:q.jsx(j_,{...r,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":o.bodyMounted?o.getBodyId():void 0,"aria-labelledby":o.titleMounted?o.getTitleId():void 0,style:[s,c],className:Vr({[X_.content]:!o.unstyled},e),unstyled:o.unstyled,children:r.children})})})})});A4.displayName="@mantine/core/ModalBaseContent";const b4=V.forwardRef(({className:i,...e},t)=>{const n=kf();return q.jsx(Sn,{component:"header",ref:t,className:Vr({[X_.header]:!n.unstyled},i),...e})});b4.displayName="@mantine/core/ModalBaseHeader";const vX={duration:200,timingFunction:"ease",transition:"fade"};function yX(i){const e=kf();return{...vX,...e.transitionProps,...i}}const x4=V.forwardRef(({onClick:i,transitionProps:e,style:t,visible:n,...s},r)=>{const a=kf(),o=yX(e);return q.jsx(lR,{mounted:n!==void 0?n:a.opened,...o,transition:"fade",children:c=>q.jsx(EI,{ref:r,fixed:!0,style:[t,c],zIndex:a.zIndex,unstyled:a.unstyled,onClick:h=>{i==null||i(h),a.closeOnClickOutside&&a.onClose()},...s})})});x4.displayName="@mantine/core/ModalBaseOverlay";function _X(){const i=kf();return V.useEffect(()=>(i.setTitleMounted(!0),()=>i.setTitleMounted(!1)),[]),i.getTitleId()}const S4=V.forwardRef(({className:i,...e},t)=>{const n=_X(),s=kf();return q.jsx(Sn,{component:"h2",ref:t,className:Vr({[X_.title]:!s.unstyled},i),...e,id:n})});S4.displayName="@mantine/core/ModalBaseTitle";function AX({children:i}){return q.jsx(q.Fragment,{children:i})}const bX={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var E4={root:"m_8bffd616"};const xX={},CI=Kl((i,e)=>{const t=Wn("Flex",xX,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,vars:c,gap:h,rowGap:d,columnGap:m,align:v,justify:y,wrap:A,direction:E,...M}=t,x=Us({name:"Flex",classes:E4,props:t,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:c}),w=gh(),R=rR(),D=Hz({styleProps:{gap:h,rowGap:d,columnGap:m,align:v,justify:y,wrap:A,direction:E},theme:w,data:bX});return q.jsxs(q.Fragment,{children:[D.hasResponsiveStyles&&q.jsx(hA,{selector:`.${R}`,styles:D.styles,media:D.media}),q.jsx(Sn,{ref:e,...x("root",{className:R,style:zp(D.inlineStyles)}),...M})]})});CI.classes=E4;CI.displayName="@mantine/core/Flex";function rL({style:i,size:e=16,...t}){return q.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...i,width:yt(e),height:yt(e),display:"block"},...t,children:q.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}rL.displayName="@mantine/core/AccordionChevron";var M4={root:"m_b6d8b162"};function SX(i){if(i==="start")return"start";if(i==="end"||i)return"end"}const EX={inherit:!1},MX=(i,{variant:e,lineClamp:t,gradient:n,size:s,color:r})=>({root:{"--text-fz":Kx(s),"--text-lh":l7(s),"--text-gradient":e==="gradient"?eL(n,i):void 0,"--text-line-clamp":typeof t=="number"?t.toString():void 0,"--text-color":r?Zx(r,i):void 0}}),Ki=Kl((i,e)=>{const t=Wn("Text",EX,i),{lineClamp:n,truncate:s,inline:r,inherit:a,gradient:o,span:c,__staticSelector:h,vars:d,className:m,style:v,classNames:y,styles:A,unstyled:E,variant:M,mod:x,size:w,...R}=t,D=Us({name:["Text",h],props:t,classes:M4,className:m,style:v,classNames:y,styles:A,unstyled:E,vars:d,varsResolver:MX});return q.jsx(Sn,{...D("root",{focusable:!0}),ref:e,component:c?"span":"p",variant:M,mod:[{"data-truncate":SX(s),"data-line-clamp":typeof n=="number","data-inline":r,"data-inherit":a},x],size:w,...R})});Ki.classes=M4;Ki.displayName="@mantine/core/Text";var T4={root:"m_849cf0da"};const TX={underline:"hover"},Cc=Kl((i,e)=>{const{underline:t,className:n,unstyled:s,mod:r,...a}=Wn("Anchor",TX,i);return q.jsx(Ki,{component:"a",ref:e,className:Vr({[T4.root]:!s},n),...a,mod:[{underline:t},r],__staticSelector:"Anchor",unstyled:s})});Cc.classes=T4;Cc.displayName="@mantine/core/Anchor";var C4={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const CX={},wX=(i,{radius:e,color:t,gradient:n,variant:s,size:r,autoContrast:a})=>{const o=i.variantColorResolver({color:t||i.primaryColor,theme:i,gradient:n,variant:s||"filled",autoContrast:a});return{root:{"--badge-height":La(r,"badge-height"),"--badge-padding-x":La(r,"badge-padding-x"),"--badge-fz":La(r,"badge-fz"),"--badge-radius":e===void 0?void 0:Hv(e),"--badge-bg":t||s?o.background:void 0,"--badge-color":t||s?o.color:void 0,"--badge-bd":t||s?o.border:void 0,"--badge-dot-color":s==="dot"?Zx(t,i):void 0}}},Zh=Kl((i,e)=>{const t=Wn("Badge",CX,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,vars:c,radius:h,color:d,gradient:m,leftSection:v,rightSection:y,children:A,variant:E,fullWidth:M,autoContrast:x,circle:w,mod:R,...D}=t,P=Us({name:"Badge",props:t,classes:C4,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:c,varsResolver:wX});return q.jsxs(Sn,{variant:E,mod:[{block:M,circle:w,"with-right-section":!!y,"with-left-section":!!v},R],...P("root",{variant:E}),ref:e,...D,children:[v&&q.jsx("span",{...P("section"),"data-position":"left",children:v}),q.jsx("span",{...P("label"),children:A}),y&&q.jsx("span",{...P("section"),"data-position":"right",children:y})]})});Zh.classes=C4;Zh.displayName="@mantine/core/Badge";var fA={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const UO={orientation:"horizontal"},RX=(i,{borderWidth:e})=>({group:{"--button-border-width":yt(e)}}),wI=vs((i,e)=>{const t=Wn("ButtonGroup",UO,i),{className:n,style:s,classNames:r,styles:a,unstyled:o,orientation:c,vars:h,borderWidth:d,variant:m,mod:v,...y}=Wn("ButtonGroup",UO,i),A=Us({name:"ButtonGroup",props:t,classes:fA,className:n,style:s,classNames:r,styles:a,unstyled:o,vars:h,varsResolver:RX,rootSelector:"group"});return q.jsx(Sn,{...A("group"),ref:e,variant:m,mod:[{"data-orientation":c},v],role:"group",...y})});wI.classes=fA;wI.displayName="@mantine/core/ButtonGroup";const FO={},DX=(i,{radius:e,color:t,gradient:n,variant:s,autoContrast:r,size:a})=>{const o=i.variantColorResolver({color:t||i.primaryColor,theme:i,gradient:n,variant:s||"filled",autoContrast:r});return{groupSection:{"--section-height":La(a,"section-height"),"--section-padding-x":La(a,"section-padding-x"),"--section-fz":a!=null&&a.includes("compact")?Kx(a.replace("compact-","")):Kx(a),"--section-radius":e===void 0?void 0:Hv(e),"--section-bg":t||s?o.background:void 0,"--section-color":o.color,"--section-bd":t||s?o.border:void 0}}},RI=vs((i,e)=>{const t=Wn("ButtonGroupSection",FO,i),{className:n,style:s,classNames:r,styles:a,unstyled:o,vars:c,variant:h,gradient:d,radius:m,autoContrast:v,...y}=Wn("ButtonGroupSection",FO,i),A=Us({name:"ButtonGroupSection",props:t,classes:fA,className:n,style:s,classNames:r,styles:a,unstyled:o,vars:c,varsResolver:DX,rootSelector:"groupSection"});return q.jsx(Sn,{...A("groupSection"),ref:e,variant:h,...y})});RI.classes=fA;RI.displayName="@mantine/core/ButtonGroupSection";const BX={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${yt(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},LX={},NX=(i,{radius:e,color:t,gradient:n,variant:s,size:r,justify:a,autoContrast:o})=>{const c=i.variantColorResolver({color:t||i.primaryColor,theme:i,gradient:n,variant:s||"filled",autoContrast:o});return{root:{"--button-justify":a,"--button-height":La(r,"button-height"),"--button-padding-x":La(r,"button-padding-x"),"--button-fz":r!=null&&r.includes("compact")?Kx(r.replace("compact-","")):Kx(r),"--button-radius":e===void 0?void 0:Hv(e),"--button-bg":t||s?c.background:void 0,"--button-hover":t||s?c.hover:void 0,"--button-color":c.color,"--button-bd":t||s?c.border:void 0,"--button-hover-color":t||s?c.hoverColor:void 0}}},Bp=Kl((i,e)=>{const t=Wn("Button",LX,i),{style:n,vars:s,className:r,color:a,disabled:o,children:c,leftSection:h,rightSection:d,fullWidth:m,variant:v,radius:y,loading:A,loaderProps:E,gradient:M,classNames:x,styles:w,unstyled:R,"data-disabled":D,autoContrast:P,mod:I,...H}=t,U=Us({name:"Button",props:t,classes:fA,className:r,style:n,classNames:x,styles:w,unstyled:R,vars:s,varsResolver:NX}),N=!!h,O=!!d;return q.jsxs(gv,{ref:e,...U("root",{active:!o&&!A&&!D}),unstyled:R,variant:v,disabled:o||A,mod:[{disabled:o||D,loading:A,block:m,"with-left-section":N,"with-right-section":O},I],...H,children:[q.jsx(lR,{mounted:!!A,transition:BX,duration:150,children:G=>q.jsx(Sn,{component:"span",...U("loader",{style:G}),"aria-hidden":!0,children:q.jsx(cR,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...E})})}),q.jsxs("span",{...U("inner"),children:[h&&q.jsx(Sn,{component:"span",...U("section"),mod:{position:"left"},children:h}),q.jsx(Sn,{component:"span",mod:{loading:A},...U("label"),children:c}),d&&q.jsx(Sn,{component:"span",...U("section"),mod:{position:"right"},children:d})]})]})});Bp.classes=fA;Bp.displayName="@mantine/core/Button";Bp.Group=wI;Bp.GroupSection=RI;const[IX,PX]=cA("Card component was not found in tree");var DI={root:"m_e615b15f",section:"m_599a2148"};const OX={},uR=Kl((i,e)=>{const t=Wn("CardSection",OX,i),{classNames:n,className:s,style:r,styles:a,vars:o,withBorder:c,inheritPadding:h,mod:d,...m}=t,v=PX();return q.jsx(Sn,{ref:e,mod:[{"with-border":c,"inherit-padding":h},d],...v.getStyles("section",{className:s,style:r,styles:a,classNames:n}),...m})});uR.classes=DI;uR.displayName="@mantine/core/CardSection";const UX={},FX=(i,{padding:e})=>({root:{"--card-padding":sr(e)}}),ta=Kl((i,e)=>{const t=Wn("Card",UX,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,vars:c,children:h,padding:d,...m}=t,v=Us({name:"Card",props:t,classes:DI,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:c,varsResolver:FX}),y=V.Children.toArray(h),A=y.map((E,M)=>typeof E=="object"&&E&&"type"in E&&E.type===uR?V.cloneElement(E,{"data-first-section":M===0||void 0,"data-last-section":M===y.length-1||void 0}):E);return q.jsx(IX,{value:{getStyles:v},children:q.jsx(j_,{ref:e,unstyled:o,...v("root"),...m,children:A})})});ta.classes=DI;ta.displayName="@mantine/core/Card";ta.Section=uR;var w4={root:"m_7485cace"};const HX={},zX=(i,{size:e,fluid:t})=>({root:{"--container-size":t?void 0:La(e,"container-size")}}),hR=vs((i,e)=>{const t=Wn("Container",HX,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,vars:c,fluid:h,mod:d,...m}=t,v=Us({name:"Container",classes:w4,props:t,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:c,varsResolver:zX});return q.jsx(Sn,{ref:e,mod:[{fluid:h},d],...v("root"),...m})});hR.classes=w4;hR.displayName="@mantine/core/Container";const[GX,dA]=cA("Drawer component was not found in tree");var Vf={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const kX={},fR=vs((i,e)=>{const t=Wn("DrawerBody",kX,i),{classNames:n,className:s,style:r,styles:a,vars:o,...c}=t,h=dA();return q.jsx(y4,{ref:e,...h.getStyles("body",{classNames:n,style:r,styles:a,className:s}),...c})});fR.classes=Vf;fR.displayName="@mantine/core/DrawerBody";const VX={},dR=vs((i,e)=>{const t=Wn("DrawerCloseButton",VX,i),{classNames:n,className:s,style:r,styles:a,vars:o,...c}=t,h=dA();return q.jsx(_4,{ref:e,...h.getStyles("close",{classNames:n,style:r,styles:a,className:s}),...c})});dR.classes=Vf;dR.displayName="@mantine/core/DrawerCloseButton";const jX={},pR=vs((i,e)=>{const t=Wn("DrawerContent",jX,i),{classNames:n,className:s,style:r,styles:a,vars:o,children:c,radius:h,__hidden:d,...m}=t,v=dA(),y=v.scrollAreaComponent||AX;return q.jsx(A4,{...v.getStyles("content",{className:s,style:r,styles:a,classNames:n}),innerProps:v.getStyles("inner",{className:s,style:r,styles:a,classNames:n}),ref:e,...m,radius:h||v.radius||0,"data-hidden":d||void 0,children:q.jsx(y,{style:{height:"calc(100vh - var(--drawer-offset) * 2)"},children:c})})});pR.classes=Vf;pR.displayName="@mantine/core/DrawerContent";const XX={},mR=vs((i,e)=>{const t=Wn("DrawerHeader",XX,i),{classNames:n,className:s,style:r,styles:a,vars:o,...c}=t,h=dA();return q.jsx(b4,{ref:e,...h.getStyles("header",{classNames:n,style:r,styles:a,className:s}),...c})});mR.classes=Vf;mR.displayName="@mantine/core/DrawerHeader";const qX={},gR=vs((i,e)=>{const t=Wn("DrawerOverlay",qX,i),{classNames:n,className:s,style:r,styles:a,vars:o,...c}=t,h=dA();return q.jsx(x4,{ref:e,...h.getStyles("overlay",{classNames:n,style:r,styles:a,className:s}),...c})});gR.classes=Vf;gR.displayName="@mantine/core/DrawerOverlay";function YX(i){switch(i){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function WX(i){if(i==="top"||i==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const KX={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},JX={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},ZX={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:uA("modal"),position:"left"},QX=(i,{position:e,size:t,offset:n})=>({root:{"--drawer-size":La(t,"drawer-size"),"--drawer-flex":WX(e),"--drawer-height":e==="left"||e==="right"?void 0:"var(--drawer-size)","--drawer-align":YX(e),"--drawer-justify":e==="right"?"flex-end":void 0,"--drawer-offset":yt(n)}}),vR=vs((i,e)=>{const t=Wn("DrawerRoot",ZX,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,vars:c,scrollAreaComponent:h,position:d,transitionProps:m,radius:v,...y}=t,{dir:A}=_I(),E=Us({name:"Drawer",classes:Vf,props:t,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:c,varsResolver:QX}),M=(A==="rtl"?JX:KX)[d];return q.jsx(GX,{value:{scrollAreaComponent:h,getStyles:E,radius:v},children:q.jsx(v4,{ref:e,...E("root"),transitionProps:{transition:M,...m},"data-offset-scrollbars":h===FE.Autosize||void 0,unstyled:o,...y})})});vR.classes=Vf;vR.displayName="@mantine/core/DrawerRoot";const[$X,eq]=a7();function R4({children:i}){const[e,t]=V.useState([]),[n,s]=V.useState(uA("modal"));return q.jsx($X,{value:{stack:e,addModal:(r,a)=>{t(o=>[...new Set([...o,r])]),s(o=>typeof a=="number"&&typeof o=="number"?Math.max(o,a):o)},removeModal:r=>t(a=>a.filter(o=>o!==r)),getZIndex:r=>`calc(${n} + ${e.indexOf(r)} + 1)`,currentId:e[e.length-1],maxZIndex:n},children:i})}R4.displayName="@mantine/core/DrawerStack";const tq={},yR=vs((i,e)=>{const t=Wn("DrawerTitle",tq,i),{classNames:n,className:s,style:r,styles:a,vars:o,...c}=t,h=dA();return q.jsx(S4,{ref:e,...h.getStyles("title",{classNames:n,style:r,styles:a,className:s}),...c})});yR.classes=Vf;yR.displayName="@mantine/core/DrawerTitle";const nq={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:uA("modal"),withOverlay:!0,withCloseButton:!0},au=vs((i,e)=>{const{title:t,withOverlay:n,overlayProps:s,withCloseButton:r,closeButtonProps:a,children:o,opened:c,stackId:h,zIndex:d,...m}=Wn("Drawer",nq,i),v=eq(),y=!!t||r,A=v&&h?{closeOnEscape:v.currentId===h,trapFocus:v.currentId===h,zIndex:v.getZIndex(h)}:{},E=n===!1?!1:h&&v?v.currentId===h:c;return V.useEffect(()=>{v&&h&&(c?v.addModal(h,d||uA("modal")):v.removeModal(h))},[c,h,d]),q.jsxs(vR,{ref:e,opened:c,zIndex:v&&h?v.getZIndex(h):d,...m,...A,children:[n&&q.jsx(gR,{visible:E,transitionProps:v&&h?{duration:0}:void 0,...s}),q.jsxs(pR,{__hidden:v&&h&&c?h!==v.currentId:!1,children:[y&&q.jsxs(mR,{children:[t&&q.jsx(yR,{children:t}),r&&q.jsx(dR,{...a})]}),q.jsx(fR,{children:o})]})]})});au.classes=Vf;au.displayName="@mantine/core/Drawer";au.Root=vR;au.Overlay=gR;au.Content=pR;au.Body=fR;au.Header=mR;au.Title=yR;au.CloseButton=dR;au.Stack=R4;var D4={root:"m_9e117634"};const iq={},sq=(i,{radius:e,fit:t})=>({root:{"--image-radius":e===void 0?void 0:Hv(e),"--image-object-fit":t}}),Qh=Kl((i,e)=>{const t=Wn("Image",iq,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,vars:c,onError:h,src:d,radius:m,fit:v,fallbackSrc:y,mod:A,...E}=t,[M,x]=V.useState(!d);V.useEffect(()=>x(!d),[d]);const w=Us({name:"Image",classes:D4,props:t,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:c,varsResolver:sq});return M&&y?q.jsx(Sn,{component:"img",ref:e,src:y,...w("root"),onError:h,mod:["fallback",A],...E}):q.jsx(Sn,{component:"img",ref:e,...w("root"),src:d,onError:R=>{h==null||h(R),x(!0)},mod:A,...E})});Qh.classes=D4;Qh.displayName="@mantine/core/Image";function q_(){return q_=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},q_.apply(null,arguments)}function rq({spacing:i,verticalSpacing:e,cols:t,selector:n}){var d;const s=gh(),r=e===void 0?i:e,a=zp({"--sg-spacing-x":sr(ph(i)),"--sg-spacing-y":sr(ph(r)),"--sg-cols":(d=ph(t))==null?void 0:d.toString()}),o=zr(s.breakpoints).reduce((m,v)=>(m[v]||(m[v]={}),typeof i=="object"&&i[v]!==void 0&&(m[v]["--sg-spacing-x"]=sr(i[v])),typeof r=="object"&&r[v]!==void 0&&(m[v]["--sg-spacing-y"]=sr(r[v])),typeof t=="object"&&t[v]!==void 0&&(m[v]["--sg-cols"]=t[v]),m),{}),h=Tz(zr(o),s.breakpoints).filter(m=>zr(o[m.value]).length>0).map(m=>({query:`(min-width: ${s.breakpoints[m.value]})`,styles:o[m.value]}));return q.jsx(hA,{styles:a,media:h,selector:n})}function ED(i){return typeof i=="object"&&i!==null?zr(i):[]}function aq(i){return i.sort((e,t)=>Av(e)-Av(t))}function oq({spacing:i,verticalSpacing:e,cols:t}){const n=Array.from(new Set([...ED(i),...ED(e),...ED(t)]));return aq(n)}function lq({spacing:i,verticalSpacing:e,cols:t,selector:n}){var h;const s=e===void 0?i:e,r=zp({"--sg-spacing-x":sr(ph(i)),"--sg-spacing-y":sr(ph(s)),"--sg-cols":(h=ph(t))==null?void 0:h.toString()}),a=oq({spacing:i,verticalSpacing:e,cols:t}),o=a.reduce((d,m)=>(d[m]||(d[m]={}),typeof i=="object"&&i[m]!==void 0&&(d[m]["--sg-spacing-x"]=sr(i[m])),typeof s=="object"&&s[m]!==void 0&&(d[m]["--sg-spacing-y"]=sr(s[m])),typeof t=="object"&&t[m]!==void 0&&(d[m]["--sg-cols"]=t[m]),d),{}),c=a.map(d=>({query:`simple-grid (min-width: ${d})`,styles:o[d]}));return q.jsx(hA,{styles:r,container:c,selector:n})}var B4={container:"m_925c2d2c",root:"m_2415a157"};const cq={cols:1,spacing:"md",type:"media"},BI=vs((i,e)=>{const t=Wn("SimpleGrid",cq,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,vars:c,cols:h,verticalSpacing:d,spacing:m,type:v,...y}=t,A=Us({name:"SimpleGrid",classes:B4,props:t,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:c}),E=rR();return v==="container"?q.jsxs(q.Fragment,{children:[q.jsx(lq,{...t,selector:`.${E}`}),q.jsx("div",{...A("container"),children:q.jsx(Sn,{ref:e,...A("root",{className:E}),...y})})]}):q.jsxs(q.Fragment,{children:[q.jsx(rq,{...t,selector:`.${E}`}),q.jsx(Sn,{ref:e,...A("root",{className:E}),...y})]})});BI.classes=B4;BI.displayName="@mantine/core/SimpleGrid";const uq={},L4=vs((i,e)=>{const{w:t,h:n,miw:s,mih:r,...a}=Wn("Space",uq,i);return q.jsx(Sn,{ref:e,...a,w:t,miw:s??t,h:n,mih:r??n})});L4.displayName="@mantine/core/Space";var N4={root:"m_6d731127"};const hq={gap:"md",align:"stretch",justify:"flex-start"},fq=(i,{gap:e,align:t,justify:n})=>({root:{"--stack-gap":sr(e),"--stack-align":t,"--stack-justify":n}}),_R=vs((i,e)=>{const t=Wn("Stack",hq,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,vars:c,align:h,justify:d,gap:m,variant:v,...y}=t,A=Us({name:"Stack",props:t,classes:N4,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:c,varsResolver:fq});return q.jsx(Sn,{ref:e,...A("root"),variant:v,...y})});_R.classes=N4;_R.displayName="@mantine/core/Stack";const dq=["h1","h2","h3","h4","h5","h6"],pq=["xs","sm","md","lg","xl"];function mq(i,e){const t=e!==void 0?e:`h${i}`;return dq.includes(t)?{fontSize:`var(--mantine-${t}-font-size)`,fontWeight:`var(--mantine-${t}-font-weight)`,lineHeight:`var(--mantine-${t}-line-height)`}:pq.includes(t)?{fontSize:`var(--mantine-font-size-${t})`,fontWeight:`var(--mantine-h${i}-font-weight)`,lineHeight:`var(--mantine-h${i}-line-height)`}:{fontSize:yt(t),fontWeight:`var(--mantine-h${i}-font-weight)`,lineHeight:`var(--mantine-h${i}-line-height)`}}var I4={root:"m_8a5d1357"};const gq={order:1},vq=(i,{order:e,size:t,lineClamp:n,textWrap:s})=>{const r=mq(e,t);return{root:{"--title-fw":r.fontWeight,"--title-lh":r.lineHeight,"--title-fz":r.fontSize,"--title-line-clamp":typeof n=="number"?n.toString():void 0,"--title-text-wrap":s}}},AR=vs((i,e)=>{const t=Wn("Title",gq,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,order:c,vars:h,size:d,variant:m,lineClamp:v,textWrap:y,mod:A,...E}=t,M=Us({name:"Title",props:t,classes:I4,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:h,varsResolver:vq});return[1,2,3,4,5,6].includes(c)?q.jsx(Sn,{...M("root"),component:`h${c}`,variant:m,ref:e,mod:[{order:c,"data-line-clamp":typeof v=="number"},A],size:d,...E}):null});AR.classes=I4;AR.displayName="@mantine/core/Title";const yq="420394102939-u4nfikoc6d9ggk24d42jcb1s3fo3t9vj.apps.googleusercontent.com";function HO({onLoginSuccess:i,onLoginError:e,buttonType:t}){const n=V.useRef(null),[s,r]=V.useState(null);V.useEffect(()=>{window.google&&n.current&&!s&&(n.current.innerHTML="",window.google.accounts.id.initialize({client_id:yq,callback:a}),window.google.accounts.id.renderButton(n.current,{theme:"outline",size:"large"}))},[s]);function a(c){if(c.credential){const h=o(c.credential);r(h),i&&i(h)}else e&&e("No credential received")}function o(c){const d=c.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),m=decodeURIComponent(atob(d).split("").map(v=>"%"+("00"+v.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(m)}return q.jsx(q.Fragment,{children:t=="google"?q.jsx("div",{ref:n}):q.jsx(Bp,{size:"md",variant:"default",onClick:()=>{let c={name:"guest",picture:"/earth.png"};r(c),i(c)},children:"Continue as guest"})})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const kp="176",$m={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},eg={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},P4=0,aL=1,O4=2,_q=3,U4=0,bR=1,Dx=2,Rc=3,nu=0,Ar=1,ra=2,qs=0,vv=1,oL=2,lL=3,cL=4,F4=5,Kd=100,H4=101,z4=102,G4=103,k4=104,V4=200,j4=201,X4=202,q4=203,PC=204,OC=205,Y4=206,W4=207,K4=208,J4=209,Z4=210,Q4=211,$4=212,eG=213,tG=214,UC=0,FC=1,HC=2,bv=3,zC=4,GC=5,kC=6,VC=7,HE=0,nG=1,iG=2,$c=0,sG=1,rG=2,aG=3,xR=4,oG=5,lG=6,cG=7,uL="attached",uG="detached",Lp=300,mh=301,Np=302,Y_=303,Qx=304,pA=306,Ip=1e3,js=1001,W_=1002,gs=1003,SR=1004,Aq=1004,fg=1005,bq=1005,li=1006,Py=1007,xq=1007,rl=1008,hL=1008,as=1009,ER=1010,MR=1011,K_=1012,zE=1013,iu=1014,ms=1015,br=1016,TR=1017,CR=1018,xv=1020,LI=35902,NI=1021,II=1022,Xs=1023,J_=1026,Sv=1027,GE=1028,kE=1029,PI=1030,wR=1031,Sq=1032,RR=1033,Bx=33776,Lx=33777,Nx=33778,Ix=33779,jC=35840,XC=35841,qC=35842,YC=35843,WC=36196,KC=37492,JC=37496,ZC=37808,QC=37809,$C=37810,ew=37811,tw=37812,nw=37813,iw=37814,sw=37815,rw=37816,aw=37817,ow=37818,lw=37819,cw=37820,uw=37821,Px=36492,hw=36494,fw=36495,OI=36283,dw=36284,pw=36285,mw=36286,hG=2200,fG=2201,dG=2202,Z_=2300,Q_=2301,ZT=2302,dg=2400,pg=2401,$x=2402,DR=2500,UI=2501,pG=0,FI=1,gw=2,vh=3200,mG=3201,Eq=3202,Mq=3203,Vp=0,gG=1,Yc="",Yn="srgb",ll="srgb-linear",eS="linear",Pi="srgb",Tq=0,tg=7680,Cq=7681,wq=7682,Rq=7683,Dq=34055,Bq=34056,Lq=5386,Nq=512,Iq=513,Pq=514,Oq=515,Uq=516,Fq=517,Hq=518,fL=519,vG=512,yG=513,_G=514,HI=515,AG=516,bG=517,xG=518,SG=519,tS=35044,zq=35048,Gq=35040,kq=35045,Vq=35049,jq=35041,Xq=35046,qq=35050,Yq=35042,Wq="100",dL="300 es",jl=2e3,nS=2001,Kq={COMPUTE:"compute",RENDER:"render"},Jq={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},Zq={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};let ul=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const s=n[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,e);e.target=null}}};const Aa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let zO=1234567;const yv=Math.PI/180,$_=180/Math.PI;function al(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Aa[i&255]+Aa[i>>8&255]+Aa[i>>16&255]+Aa[i>>24&255]+"-"+Aa[e&255]+Aa[e>>8&255]+"-"+Aa[e>>16&15|64]+Aa[e>>24&255]+"-"+Aa[t&63|128]+Aa[t>>8&255]+"-"+Aa[t>>16&255]+Aa[t>>24&255]+Aa[n&255]+Aa[n>>8&255]+Aa[n>>16&255]+Aa[n>>24&255]).toLowerCase()}function Cn(i,e,t){return Math.max(e,Math.min(t,i))}function zI(i,e){return(i%e+e)%e}function Qq(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function $q(i,e,t){return i!==e?(t-i)/(e-i):0}function Ox(i,e,t){return(1-t)*i+t*e}function eY(i,e,t,n){return Ox(i,e,1-Math.exp(-t*n))}function tY(i,e=1){return e-Math.abs(zI(i,e*2)-e)}function nY(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function iY(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function sY(i,e){return i+Math.floor(Math.random()*(e-i+1))}function rY(i,e){return i+Math.random()*(e-i)}function aY(i){return i*(.5-Math.random())}function oY(i){i!==void 0&&(zO=i);let e=zO+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function lY(i){return i*yv}function cY(i){return i*$_}function uY(i){return(i&i-1)===0&&i!==0}function hY(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function fY(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function dY(i,e,t,n,s){const r=Math.cos,a=Math.sin,o=r(t/2),c=a(t/2),h=r((e+n)/2),d=a((e+n)/2),m=r((e-n)/2),v=a((e-n)/2),y=r((n-e)/2),A=a((n-e)/2);switch(s){case"XYX":i.set(o*d,c*m,c*v,o*h);break;case"YZY":i.set(c*v,o*d,c*m,o*h);break;case"ZXZ":i.set(c*m,c*v,o*d,o*h);break;case"XZX":i.set(o*d,c*A,c*y,o*h);break;case"YXY":i.set(c*y,o*d,c*A,o*h);break;case"ZYZ":i.set(c*A,c*y,o*d,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function io(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Pn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const EG={DEG2RAD:yv,RAD2DEG:$_,generateUUID:al,clamp:Cn,euclideanModulo:zI,mapLinear:Qq,inverseLerp:$q,lerp:Ox,damp:eY,pingpong:tY,smoothstep:nY,smootherstep:iY,randInt:sY,randFloat:rY,randFloatSpread:aY,seededRandom:oY,degToRad:lY,radToDeg:cY,isPowerOfTwo:uY,ceilPowerOfTwo:hY,floorPowerOfTwo:fY,setQuaternionFromProperEuler:dY,normalize:Pn,denormalize:io};class Ke{constructor(e=0,t=0){Ke.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Cn(this.x,e.x,t.x),this.y=Cn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Cn(this.x,e,t),this.y=Cn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Cn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Cn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*s+e.x,this.y=r*s+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ln{constructor(e,t,n,s,r,a,o,c,h){Ln.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,a,o,c,h)}set(e,t,n,s,r,a,o,c,h){const d=this.elements;return d[0]=e,d[1]=s,d[2]=o,d[3]=t,d[4]=r,d[5]=c,d[6]=n,d[7]=a,d[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,a=n[0],o=n[3],c=n[6],h=n[1],d=n[4],m=n[7],v=n[2],y=n[5],A=n[8],E=s[0],M=s[3],x=s[6],w=s[1],R=s[4],D=s[7],P=s[2],I=s[5],H=s[8];return r[0]=a*E+o*w+c*P,r[3]=a*M+o*R+c*I,r[6]=a*x+o*D+c*H,r[1]=h*E+d*w+m*P,r[4]=h*M+d*R+m*I,r[7]=h*x+d*D+m*H,r[2]=v*E+y*w+A*P,r[5]=v*M+y*R+A*I,r[8]=v*x+y*D+A*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],c=e[6],h=e[7],d=e[8];return t*a*d-t*o*h-n*r*d+n*o*c+s*r*h-s*a*c}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],c=e[6],h=e[7],d=e[8],m=d*a-o*h,v=o*c-d*r,y=h*r-a*c,A=t*m+n*v+s*y;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/A;return e[0]=m*E,e[1]=(s*h-d*n)*E,e[2]=(o*n-s*a)*E,e[3]=v*E,e[4]=(d*t-s*c)*E,e[5]=(s*r-o*t)*E,e[6]=y*E,e[7]=(n*c-h*t)*E,e[8]=(a*t-n*r)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,r,a,o){const c=Math.cos(r),h=Math.sin(r);return this.set(n*c,n*h,-n*(c*a+h*o)+a+e,-s*h,s*c,-s*(-h*a+c*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(MD.makeScale(e,t)),this}rotate(e){return this.premultiply(MD.makeRotation(-e)),this}translate(e,t){return this.premultiply(MD.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const MD=new Ln;function MG(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const pY={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function By(i,e){return new pY[i](e)}function iS(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function TG(){const i=iS("canvas");return i.style.display="block",i}const GO={};function QT(i){i in GO||(GO[i]=!0,console.warn(i))}function mY(i,e,t){return new Promise(function(n,s){function r(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:n()}}setTimeout(r,t)})}function gY(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function vY(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const kO=new Ln().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),VO=new Ln().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function yY(){const i={enabled:!0,workingColorSpace:ll,spaces:{},convert:function(s,r,a){return this.enabled===!1||r===a||!r||!a||(this.spaces[r].transfer===Pi&&(s.r=Nf(s.r),s.g=Nf(s.g),s.b=Nf(s.b)),this.spaces[r].primaries!==this.spaces[a].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Pi&&(s.r=Oy(s.r),s.g=Oy(s.g),s.b=Oy(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Yc?eS:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,a){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[ll]:{primaries:e,whitePoint:n,transfer:eS,toXYZ:kO,fromXYZ:VO,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Yn},outputColorSpaceConfig:{drawingBufferColorSpace:Yn}},[Yn]:{primaries:e,whitePoint:n,transfer:Pi,toXYZ:kO,fromXYZ:VO,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Yn}}}),i}const ri=yY();function Nf(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Oy(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let ey;class CG{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{ey===void 0&&(ey=iS("canvas")),ey.width=e.width,ey.height=e.height;const s=ey.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=ey}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=iS("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),r=s.data;for(let a=0;a<r.length;a++)r[a]=Nf(r[a]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Nf(t[n]/255)*255):t[n]=Nf(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _Y=0;class Ep{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_Y++}),this.uuid=al(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let a=0,o=s.length;a<o;a++)s[a].isDataTexture?r.push(TD(s[a].image)):r.push(TD(s[a]))}else r=TD(s);n.url=r}return t||(e.images[this.uuid]=n),n}}function TD(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?CG.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let AY=0;class Ai extends ul{constructor(e=Ai.DEFAULT_IMAGE,t=Ai.DEFAULT_MAPPING,n=js,s=js,r=li,a=rl,o=Xs,c=as,h=Ai.DEFAULT_ANISOTROPY,d=Yc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:AY++}),this.uuid=al(),this.name="",this.source=new Ep(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=r,this.minFilter=a,this.anisotropy=h,this.format=o,this.internalFormat=null,this.type=c,this.offset=new Ke(0,0),this.repeat=new Ke(1,1),this.center=new Ke(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ln,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Lp)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ip:e.x=e.x-Math.floor(e.x);break;case js:e.x=e.x<0?0:1;break;case W_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ip:e.y=e.y-Math.floor(e.y);break;case js:e.y=e.y<0?0:1;break;case W_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ai.DEFAULT_IMAGE=null;Ai.DEFAULT_MAPPING=Lp;Ai.DEFAULT_ANISOTROPY=1;class ai{constructor(e=0,t=0,n=0,s=1){ai.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*s+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*s+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*s+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*s+a[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,r;const c=e.elements,h=c[0],d=c[4],m=c[8],v=c[1],y=c[5],A=c[9],E=c[2],M=c[6],x=c[10];if(Math.abs(d-v)<.01&&Math.abs(m-E)<.01&&Math.abs(A-M)<.01){if(Math.abs(d+v)<.1&&Math.abs(m+E)<.1&&Math.abs(A+M)<.1&&Math.abs(h+y+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const R=(h+1)/2,D=(y+1)/2,P=(x+1)/2,I=(d+v)/4,H=(m+E)/4,U=(A+M)/4;return R>D&&R>P?R<.01?(n=0,s=.707106781,r=.707106781):(n=Math.sqrt(R),s=I/n,r=H/n):D>P?D<.01?(n=.707106781,s=0,r=.707106781):(s=Math.sqrt(D),n=I/s,r=U/s):P<.01?(n=.707106781,s=.707106781,r=0):(r=Math.sqrt(P),n=H/r,s=U/r),this.set(n,s,r,t),this}let w=Math.sqrt((M-A)*(M-A)+(m-E)*(m-E)+(v-d)*(v-d));return Math.abs(w)<.001&&(w=1),this.x=(M-A)/w,this.y=(m-E)/w,this.z=(v-d)/w,this.w=Math.acos((h+y+x-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Cn(this.x,e.x,t.x),this.y=Cn(this.y,e.y,t.y),this.z=Cn(this.z,e.z,t.z),this.w=Cn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Cn(this.x,e,t),this.y=Cn(this.y,e,t),this.z=Cn(this.z,e,t),this.w=Cn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Cn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class BR extends ul{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth?n.depth:1,this.scissor=new ai(0,0,e,t),this.scissorTest=!1,this.viewport=new ai(0,0,e,t);const s={width:e,height:t,depth:this.depth};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:li,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},n);const r=new Ai(s,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=r.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new Ep(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Zi extends BR{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class VE extends Ai{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=gs,this.minFilter=gs,this.wrapR=js,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class bY extends Zi{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new VE(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class LR extends Ai{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=gs,this.minFilter=gs,this.wrapR=js,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xY extends Zi{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new LR(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Gr{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,r,a,o){let c=n[s+0],h=n[s+1],d=n[s+2],m=n[s+3];const v=r[a+0],y=r[a+1],A=r[a+2],E=r[a+3];if(o===0){e[t+0]=c,e[t+1]=h,e[t+2]=d,e[t+3]=m;return}if(o===1){e[t+0]=v,e[t+1]=y,e[t+2]=A,e[t+3]=E;return}if(m!==E||c!==v||h!==y||d!==A){let M=1-o;const x=c*v+h*y+d*A+m*E,w=x>=0?1:-1,R=1-x*x;if(R>Number.EPSILON){const P=Math.sqrt(R),I=Math.atan2(P,x*w);M=Math.sin(M*I)/P,o=Math.sin(o*I)/P}const D=o*w;if(c=c*M+v*D,h=h*M+y*D,d=d*M+A*D,m=m*M+E*D,M===1-o){const P=1/Math.sqrt(c*c+h*h+d*d+m*m);c*=P,h*=P,d*=P,m*=P}}e[t]=c,e[t+1]=h,e[t+2]=d,e[t+3]=m}static multiplyQuaternionsFlat(e,t,n,s,r,a){const o=n[s],c=n[s+1],h=n[s+2],d=n[s+3],m=r[a],v=r[a+1],y=r[a+2],A=r[a+3];return e[t]=o*A+d*m+c*y-h*v,e[t+1]=c*A+d*v+h*m-o*y,e[t+2]=h*A+d*y+o*v-c*m,e[t+3]=d*A-o*m-c*v-h*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,r=e._z,a=e._order,o=Math.cos,c=Math.sin,h=o(n/2),d=o(s/2),m=o(r/2),v=c(n/2),y=c(s/2),A=c(r/2);switch(a){case"XYZ":this._x=v*d*m+h*y*A,this._y=h*y*m-v*d*A,this._z=h*d*A+v*y*m,this._w=h*d*m-v*y*A;break;case"YXZ":this._x=v*d*m+h*y*A,this._y=h*y*m-v*d*A,this._z=h*d*A-v*y*m,this._w=h*d*m+v*y*A;break;case"ZXY":this._x=v*d*m-h*y*A,this._y=h*y*m+v*d*A,this._z=h*d*A+v*y*m,this._w=h*d*m-v*y*A;break;case"ZYX":this._x=v*d*m-h*y*A,this._y=h*y*m+v*d*A,this._z=h*d*A-v*y*m,this._w=h*d*m+v*y*A;break;case"YZX":this._x=v*d*m+h*y*A,this._y=h*y*m+v*d*A,this._z=h*d*A-v*y*m,this._w=h*d*m-v*y*A;break;case"XZY":this._x=v*d*m-h*y*A,this._y=h*y*m-v*d*A,this._z=h*d*A+v*y*m,this._w=h*d*m+v*y*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],r=t[8],a=t[1],o=t[5],c=t[9],h=t[2],d=t[6],m=t[10],v=n+o+m;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(d-c)*y,this._y=(r-h)*y,this._z=(a-s)*y}else if(n>o&&n>m){const y=2*Math.sqrt(1+n-o-m);this._w=(d-c)/y,this._x=.25*y,this._y=(s+a)/y,this._z=(r+h)/y}else if(o>m){const y=2*Math.sqrt(1+o-n-m);this._w=(r-h)/y,this._x=(s+a)/y,this._y=.25*y,this._z=(c+d)/y}else{const y=2*Math.sqrt(1+m-n-o);this._w=(a-s)/y,this._x=(r+h)/y,this._y=(c+d)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Cn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,r=e._z,a=e._w,o=t._x,c=t._y,h=t._z,d=t._w;return this._x=n*d+a*o+s*h-r*c,this._y=s*d+a*c+r*o-n*h,this._z=r*d+a*h+n*c-s*o,this._w=a*d-n*o-s*c-r*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,r=this._z,a=this._w;let o=a*e._w+n*e._x+s*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=s,this._z=r,this;const c=1-o*o;if(c<=Number.EPSILON){const y=1-t;return this._w=y*a+t*this._w,this._x=y*n+t*this._x,this._y=y*s+t*this._y,this._z=y*r+t*this._z,this.normalize(),this}const h=Math.sqrt(c),d=Math.atan2(h,o),m=Math.sin((1-t)*d)/h,v=Math.sin(t*d)/h;return this._w=a*m+this._w*v,this._x=n*m+this._x*v,this._y=s*m+this._y*v,this._z=r*m+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ae{constructor(e=0,t=0,n=0){ae.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(jO.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(jO.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*s,this.y=r[1]*t+r[4]*n+r[7]*s,this.z=r[2]*t+r[5]*n+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*s+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*s+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*s+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,r=e.x,a=e.y,o=e.z,c=e.w,h=2*(a*s-o*n),d=2*(o*t-r*s),m=2*(r*n-a*t);return this.x=t+c*h+a*m-o*d,this.y=n+c*d+o*h-r*m,this.z=s+c*m+r*d-a*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*s,this.y=r[1]*t+r[5]*n+r[9]*s,this.z=r[2]*t+r[6]*n+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Cn(this.x,e.x,t.x),this.y=Cn(this.y,e.y,t.y),this.z=Cn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Cn(this.x,e,t),this.y=Cn(this.y,e,t),this.z=Cn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Cn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,r=e.z,a=t.x,o=t.y,c=t.z;return this.x=s*c-r*o,this.y=r*a-n*c,this.z=n*o-s*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return CD.copy(this).projectOnVector(e),this.sub(CD)}reflect(e){return this.sub(CD.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Cn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const CD=new ae,jO=new Gr;class aa{constructor(e=new ae(1/0,1/0,1/0),t=new ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Sc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Sc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Sc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const r=n.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=r.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Sc):Sc.fromBufferAttribute(r,a),Sc.applyMatrix4(e.matrixWorld),this.expandByPoint(Sc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),VM.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),VM.copy(n.boundingBox)),VM.applyMatrix4(e.matrixWorld),this.union(VM)}const s=e.children;for(let r=0,a=s.length;r<a;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Sc),Sc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Gb),jM.subVectors(this.max,Gb),ty.subVectors(e.a,Gb),ny.subVectors(e.b,Gb),iy.subVectors(e.c,Gb),Od.subVectors(ny,ty),Ud.subVectors(iy,ny),Fm.subVectors(ty,iy);let t=[0,-Od.z,Od.y,0,-Ud.z,Ud.y,0,-Fm.z,Fm.y,Od.z,0,-Od.x,Ud.z,0,-Ud.x,Fm.z,0,-Fm.x,-Od.y,Od.x,0,-Ud.y,Ud.x,0,-Fm.y,Fm.x,0];return!wD(t,ty,ny,iy,jM)||(t=[1,0,0,0,1,0,0,0,1],!wD(t,ty,ny,iy,jM))?!1:(XM.crossVectors(Od,Ud),t=[XM.x,XM.y,XM.z],wD(t,ty,ny,iy,jM))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Sc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Sc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Gh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Gh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Gh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Gh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Gh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Gh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Gh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Gh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Gh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Gh=[new ae,new ae,new ae,new ae,new ae,new ae,new ae,new ae],Sc=new ae,VM=new aa,ty=new ae,ny=new ae,iy=new ae,Od=new ae,Ud=new ae,Fm=new ae,Gb=new ae,jM=new ae,XM=new ae,Hm=new ae;function wD(i,e,t,n,s){for(let r=0,a=i.length-3;r<=a;r+=3){Hm.fromArray(i,r);const o=s.x*Math.abs(Hm.x)+s.y*Math.abs(Hm.y)+s.z*Math.abs(Hm.z),c=e.dot(Hm),h=t.dot(Hm),d=n.dot(Hm);if(Math.max(-Math.max(c,h,d),Math.min(c,h,d))>o)return!1}return!0}const SY=new aa,kb=new ae,RD=new ae;class kr{constructor(e=new ae,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):SY.setFromPoints(e).getCenter(n);let s=0;for(let r=0,a=e.length;r<a;r++)s=Math.max(s,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;kb.subVectors(e,this.center);const t=kb.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(kb,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(RD.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(kb.copy(e.center).add(RD)),this.expandByPoint(kb.copy(e.center).sub(RD))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const kh=new ae,DD=new ae,qM=new ae,Fd=new ae,BD=new ae,YM=new ae,LD=new ae;class Gv{constructor(e=new ae,t=new ae(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,kh)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=kh.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(kh.copy(this.origin).addScaledVector(this.direction,t),kh.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){DD.copy(e).add(t).multiplyScalar(.5),qM.copy(t).sub(e).normalize(),Fd.copy(this.origin).sub(DD);const r=e.distanceTo(t)*.5,a=-this.direction.dot(qM),o=Fd.dot(this.direction),c=-Fd.dot(qM),h=Fd.lengthSq(),d=Math.abs(1-a*a);let m,v,y,A;if(d>0)if(m=a*c-o,v=a*o-c,A=r*d,m>=0)if(v>=-A)if(v<=A){const E=1/d;m*=E,v*=E,y=m*(m+a*v+2*o)+v*(a*m+v+2*c)+h}else v=r,m=Math.max(0,-(a*v+o)),y=-m*m+v*(v+2*c)+h;else v=-r,m=Math.max(0,-(a*v+o)),y=-m*m+v*(v+2*c)+h;else v<=-A?(m=Math.max(0,-(-a*r+o)),v=m>0?-r:Math.min(Math.max(-r,-c),r),y=-m*m+v*(v+2*c)+h):v<=A?(m=0,v=Math.min(Math.max(-r,-c),r),y=v*(v+2*c)+h):(m=Math.max(0,-(a*r+o)),v=m>0?r:Math.min(Math.max(-r,-c),r),y=-m*m+v*(v+2*c)+h);else v=a>0?-r:r,m=Math.max(0,-(a*v+o)),y=-m*m+v*(v+2*c)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,m),s&&s.copy(DD).addScaledVector(qM,v),y}intersectSphere(e,t){kh.subVectors(e.center,this.origin);const n=kh.dot(this.direction),s=kh.dot(kh)-n*n,r=e.radius*e.radius;if(s>r)return null;const a=Math.sqrt(r-s),o=n-a,c=n+a;return c<0?null:o<0?this.at(c,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,r,a,o,c;const h=1/this.direction.x,d=1/this.direction.y,m=1/this.direction.z,v=this.origin;return h>=0?(n=(e.min.x-v.x)*h,s=(e.max.x-v.x)*h):(n=(e.max.x-v.x)*h,s=(e.min.x-v.x)*h),d>=0?(r=(e.min.y-v.y)*d,a=(e.max.y-v.y)*d):(r=(e.max.y-v.y)*d,a=(e.min.y-v.y)*d),n>a||r>s||((r>n||isNaN(n))&&(n=r),(a<s||isNaN(s))&&(s=a),m>=0?(o=(e.min.z-v.z)*m,c=(e.max.z-v.z)*m):(o=(e.max.z-v.z)*m,c=(e.min.z-v.z)*m),n>c||o>s)||((o>n||n!==n)&&(n=o),(c<s||s!==s)&&(s=c),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,kh)!==null}intersectTriangle(e,t,n,s,r){BD.subVectors(t,e),YM.subVectors(n,e),LD.crossVectors(BD,YM);let a=this.direction.dot(LD),o;if(a>0){if(s)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Fd.subVectors(this.origin,e);const c=o*this.direction.dot(YM.crossVectors(Fd,YM));if(c<0)return null;const h=o*this.direction.dot(BD.cross(Fd));if(h<0||c+h>a)return null;const d=-o*Fd.dot(LD);return d<0?null:this.at(d/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class on{constructor(e,t,n,s,r,a,o,c,h,d,m,v,y,A,E,M){on.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,r,a,o,c,h,d,m,v,y,A,E,M)}set(e,t,n,s,r,a,o,c,h,d,m,v,y,A,E,M){const x=this.elements;return x[0]=e,x[4]=t,x[8]=n,x[12]=s,x[1]=r,x[5]=a,x[9]=o,x[13]=c,x[2]=h,x[6]=d,x[10]=m,x[14]=v,x[3]=y,x[7]=A,x[11]=E,x[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new on().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/sy.setFromMatrixColumn(e,0).length(),r=1/sy.setFromMatrixColumn(e,1).length(),a=1/sy.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),c=Math.cos(s),h=Math.sin(s),d=Math.cos(r),m=Math.sin(r);if(e.order==="XYZ"){const v=a*d,y=a*m,A=o*d,E=o*m;t[0]=c*d,t[4]=-c*m,t[8]=h,t[1]=y+A*h,t[5]=v-E*h,t[9]=-o*c,t[2]=E-v*h,t[6]=A+y*h,t[10]=a*c}else if(e.order==="YXZ"){const v=c*d,y=c*m,A=h*d,E=h*m;t[0]=v+E*o,t[4]=A*o-y,t[8]=a*h,t[1]=a*m,t[5]=a*d,t[9]=-o,t[2]=y*o-A,t[6]=E+v*o,t[10]=a*c}else if(e.order==="ZXY"){const v=c*d,y=c*m,A=h*d,E=h*m;t[0]=v-E*o,t[4]=-a*m,t[8]=A+y*o,t[1]=y+A*o,t[5]=a*d,t[9]=E-v*o,t[2]=-a*h,t[6]=o,t[10]=a*c}else if(e.order==="ZYX"){const v=a*d,y=a*m,A=o*d,E=o*m;t[0]=c*d,t[4]=A*h-y,t[8]=v*h+E,t[1]=c*m,t[5]=E*h+v,t[9]=y*h-A,t[2]=-h,t[6]=o*c,t[10]=a*c}else if(e.order==="YZX"){const v=a*c,y=a*h,A=o*c,E=o*h;t[0]=c*d,t[4]=E-v*m,t[8]=A*m+y,t[1]=m,t[5]=a*d,t[9]=-o*d,t[2]=-h*d,t[6]=y*m+A,t[10]=v-E*m}else if(e.order==="XZY"){const v=a*c,y=a*h,A=o*c,E=o*h;t[0]=c*d,t[4]=-m,t[8]=h*d,t[1]=v*m+E,t[5]=a*d,t[9]=y*m-A,t[2]=A*m-y,t[6]=o*d,t[10]=E*m+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(EY,e,MY)}lookAt(e,t,n){const s=this.elements;return Xo.subVectors(e,t),Xo.lengthSq()===0&&(Xo.z=1),Xo.normalize(),Hd.crossVectors(n,Xo),Hd.lengthSq()===0&&(Math.abs(n.z)===1?Xo.x+=1e-4:Xo.z+=1e-4,Xo.normalize(),Hd.crossVectors(n,Xo)),Hd.normalize(),WM.crossVectors(Xo,Hd),s[0]=Hd.x,s[4]=WM.x,s[8]=Xo.x,s[1]=Hd.y,s[5]=WM.y,s[9]=Xo.y,s[2]=Hd.z,s[6]=WM.z,s[10]=Xo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,r=this.elements,a=n[0],o=n[4],c=n[8],h=n[12],d=n[1],m=n[5],v=n[9],y=n[13],A=n[2],E=n[6],M=n[10],x=n[14],w=n[3],R=n[7],D=n[11],P=n[15],I=s[0],H=s[4],U=s[8],N=s[12],O=s[1],G=s[5],oe=s[9],se=s[13],le=s[2],ue=s[6],z=s[10],K=s[14],Q=s[3],de=s[7],W=s[11],he=s[15];return r[0]=a*I+o*O+c*le+h*Q,r[4]=a*H+o*G+c*ue+h*de,r[8]=a*U+o*oe+c*z+h*W,r[12]=a*N+o*se+c*K+h*he,r[1]=d*I+m*O+v*le+y*Q,r[5]=d*H+m*G+v*ue+y*de,r[9]=d*U+m*oe+v*z+y*W,r[13]=d*N+m*se+v*K+y*he,r[2]=A*I+E*O+M*le+x*Q,r[6]=A*H+E*G+M*ue+x*de,r[10]=A*U+E*oe+M*z+x*W,r[14]=A*N+E*se+M*K+x*he,r[3]=w*I+R*O+D*le+P*Q,r[7]=w*H+R*G+D*ue+P*de,r[11]=w*U+R*oe+D*z+P*W,r[15]=w*N+R*se+D*K+P*he,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],r=e[12],a=e[1],o=e[5],c=e[9],h=e[13],d=e[2],m=e[6],v=e[10],y=e[14],A=e[3],E=e[7],M=e[11],x=e[15];return A*(+r*c*m-s*h*m-r*o*v+n*h*v+s*o*y-n*c*y)+E*(+t*c*y-t*h*v+r*a*v-s*a*y+s*h*d-r*c*d)+M*(+t*h*m-t*o*y-r*a*m+n*a*y+r*o*d-n*h*d)+x*(-s*o*d-t*c*m+t*o*v+s*a*m-n*a*v+n*c*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],c=e[6],h=e[7],d=e[8],m=e[9],v=e[10],y=e[11],A=e[12],E=e[13],M=e[14],x=e[15],w=m*M*h-E*v*h+E*c*y-o*M*y-m*c*x+o*v*x,R=A*v*h-d*M*h-A*c*y+a*M*y+d*c*x-a*v*x,D=d*E*h-A*m*h+A*o*y-a*E*y-d*o*x+a*m*x,P=A*m*c-d*E*c-A*o*v+a*E*v+d*o*M-a*m*M,I=t*w+n*R+s*D+r*P;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const H=1/I;return e[0]=w*H,e[1]=(E*v*r-m*M*r-E*s*y+n*M*y+m*s*x-n*v*x)*H,e[2]=(o*M*r-E*c*r+E*s*h-n*M*h-o*s*x+n*c*x)*H,e[3]=(m*c*r-o*v*r-m*s*h+n*v*h+o*s*y-n*c*y)*H,e[4]=R*H,e[5]=(d*M*r-A*v*r+A*s*y-t*M*y-d*s*x+t*v*x)*H,e[6]=(A*c*r-a*M*r-A*s*h+t*M*h+a*s*x-t*c*x)*H,e[7]=(a*v*r-d*c*r+d*s*h-t*v*h-a*s*y+t*c*y)*H,e[8]=D*H,e[9]=(A*m*r-d*E*r-A*n*y+t*E*y+d*n*x-t*m*x)*H,e[10]=(a*E*r-A*o*r+A*n*h-t*E*h-a*n*x+t*o*x)*H,e[11]=(d*o*r-a*m*r-d*n*h+t*m*h+a*n*y-t*o*y)*H,e[12]=P*H,e[13]=(d*E*s-A*m*s+A*n*v-t*E*v-d*n*M+t*m*M)*H,e[14]=(A*o*s-a*E*s-A*n*c+t*E*c+a*n*M-t*o*M)*H,e[15]=(a*m*s-d*o*s+d*n*c-t*m*c-a*n*v+t*o*v)*H,this}scale(e){const t=this.elements,n=e.x,s=e.y,r=e.z;return t[0]*=n,t[4]*=s,t[8]*=r,t[1]*=n,t[5]*=s,t[9]*=r,t[2]*=n,t[6]*=s,t[10]*=r,t[3]*=n,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),r=1-n,a=e.x,o=e.y,c=e.z,h=r*a,d=r*o;return this.set(h*a+n,h*o-s*c,h*c+s*o,0,h*o+s*c,d*o+n,d*c-s*a,0,h*c-s*o,d*c+s*a,r*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,r,a){return this.set(1,n,r,0,e,1,a,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,r=t._x,a=t._y,o=t._z,c=t._w,h=r+r,d=a+a,m=o+o,v=r*h,y=r*d,A=r*m,E=a*d,M=a*m,x=o*m,w=c*h,R=c*d,D=c*m,P=n.x,I=n.y,H=n.z;return s[0]=(1-(E+x))*P,s[1]=(y+D)*P,s[2]=(A-R)*P,s[3]=0,s[4]=(y-D)*I,s[5]=(1-(v+x))*I,s[6]=(M+w)*I,s[7]=0,s[8]=(A+R)*H,s[9]=(M-w)*H,s[10]=(1-(v+E))*H,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let r=sy.set(s[0],s[1],s[2]).length();const a=sy.set(s[4],s[5],s[6]).length(),o=sy.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],Ec.copy(this);const h=1/r,d=1/a,m=1/o;return Ec.elements[0]*=h,Ec.elements[1]*=h,Ec.elements[2]*=h,Ec.elements[4]*=d,Ec.elements[5]*=d,Ec.elements[6]*=d,Ec.elements[8]*=m,Ec.elements[9]*=m,Ec.elements[10]*=m,t.setFromRotationMatrix(Ec),n.x=r,n.y=a,n.z=o,this}makePerspective(e,t,n,s,r,a,o=jl){const c=this.elements,h=2*r/(t-e),d=2*r/(n-s),m=(t+e)/(t-e),v=(n+s)/(n-s);let y,A;if(o===jl)y=-(a+r)/(a-r),A=-2*a*r/(a-r);else if(o===nS)y=-a/(a-r),A=-a*r/(a-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return c[0]=h,c[4]=0,c[8]=m,c[12]=0,c[1]=0,c[5]=d,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=y,c[14]=A,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,s,r,a,o=jl){const c=this.elements,h=1/(t-e),d=1/(n-s),m=1/(a-r),v=(t+e)*h,y=(n+s)*d;let A,E;if(o===jl)A=(a+r)*m,E=-2*m;else if(o===nS)A=r*m,E=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return c[0]=2*h,c[4]=0,c[8]=0,c[12]=-v,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-y,c[2]=0,c[6]=0,c[10]=E,c[14]=-A,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const sy=new ae,Ec=new on,EY=new ae(0,0,0),MY=new ae(1,1,1),Hd=new ae,WM=new ae,Xo=new ae,XO=new on,qO=new Gr;class cl{constructor(e=0,t=0,n=0,s=cl.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,r=s[0],a=s[4],o=s[8],c=s[1],h=s[5],d=s[9],m=s[2],v=s[6],y=s[10];switch(t){case"XYZ":this._y=Math.asin(Cn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-d,y),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(v,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Cn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(o,y),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-m,r),this._z=0);break;case"ZXY":this._x=Math.asin(Cn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(c,r));break;case"ZYX":this._y=Math.asin(-Cn(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(c,r)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin(Cn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,h),this._y=Math.atan2(-m,r)):(this._x=0,this._y=Math.atan2(o,y));break;case"XZY":this._z=Math.asin(-Cn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,h),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-d,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return XO.makeRotationFromQuaternion(e),this.setFromRotationMatrix(XO,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return qO.setFromEuler(this),this.setFromQuaternion(qO,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}cl.DEFAULT_ORDER="XYZ";class eA{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let TY=0;const YO=new ae,ry=new Gr,Vh=new on,KM=new ae,Vb=new ae,CY=new ae,wY=new Gr,WO=new ae(1,0,0),KO=new ae(0,1,0),JO=new ae(0,0,1),ZO={type:"added"},RY={type:"removed"},ay={type:"childadded",child:null},ND={type:"childremoved",child:null};class ci extends ul{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:TY++}),this.uuid=al(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ci.DEFAULT_UP.clone();const e=new ae,t=new cl,n=new Gr,s=new ae(1,1,1);function r(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new on},normalMatrix:{value:new Ln}}),this.matrix=new on,this.matrixWorld=new on,this.matrixAutoUpdate=ci.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ci.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new eA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ry.setFromAxisAngle(e,t),this.quaternion.multiply(ry),this}rotateOnWorldAxis(e,t){return ry.setFromAxisAngle(e,t),this.quaternion.premultiply(ry),this}rotateX(e){return this.rotateOnAxis(WO,e)}rotateY(e){return this.rotateOnAxis(KO,e)}rotateZ(e){return this.rotateOnAxis(JO,e)}translateOnAxis(e,t){return YO.copy(e).applyQuaternion(this.quaternion),this.position.add(YO.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(WO,e)}translateY(e){return this.translateOnAxis(KO,e)}translateZ(e){return this.translateOnAxis(JO,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Vh.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?KM.copy(e):KM.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),Vb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vh.lookAt(Vb,KM,this.up):Vh.lookAt(KM,Vb,this.up),this.quaternion.setFromRotationMatrix(Vh),s&&(Vh.extractRotation(s.matrixWorld),ry.setFromRotationMatrix(Vh),this.quaternion.premultiply(ry.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(ZO),ay.child=e,this.dispatchEvent(ay),ay.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(RY),ND.child=e,this.dispatchEvent(ND),ND.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Vh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Vh.multiply(e.parent.matrixWorld)),e.applyMatrix4(Vh),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(ZO),ay.child=e,this.dispatchEvent(ay),ay.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vb,e,CY),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vb,wY,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,a=s.length;r<a;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?{min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}:void 0,boundingSphere:o.boundingSphere?{radius:o.boundingSphere.radius,center:o.boundingSphere.center.toArray()}:void 0})),s.instanceInfo=this._instanceInfo.map(o=>({...o})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(e),s.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function r(o,c){return o[c.uuid]===void 0&&(o[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const c=o.shapes;if(Array.isArray(c))for(let h=0,d=c.length;h<d;h++){const m=c[h];r(e.shapes,m)}else r(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let c=0,h=this.material.length;c<h;c++)o.push(r(e.materials,this.material[c]));s.material=o}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let o=0;o<this.children.length;o++)s.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let o=0;o<this.animations.length;o++){const c=this.animations[o];s.animations.push(r(e.animations,c))}}if(t){const o=a(e.geometries),c=a(e.materials),h=a(e.textures),d=a(e.images),m=a(e.shapes),v=a(e.skeletons),y=a(e.animations),A=a(e.nodes);o.length>0&&(n.geometries=o),c.length>0&&(n.materials=c),h.length>0&&(n.textures=h),d.length>0&&(n.images=d),m.length>0&&(n.shapes=m),v.length>0&&(n.skeletons=v),y.length>0&&(n.animations=y),A.length>0&&(n.nodes=A)}return n.object=s,n;function a(o){const c=[];for(const h in o){const d=o[h];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}ci.DEFAULT_UP=new ae(0,1,0);ci.DEFAULT_MATRIX_AUTO_UPDATE=!0;ci.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Mc=new ae,jh=new ae,ID=new ae,Xh=new ae,oy=new ae,ly=new ae,QO=new ae,PD=new ae,OD=new ae,UD=new ae,FD=new ai,HD=new ai,zD=new ai;class Ro{constructor(e=new ae,t=new ae,n=new ae){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),Mc.subVectors(e,t),s.cross(Mc);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,n,s,r){Mc.subVectors(s,t),jh.subVectors(n,t),ID.subVectors(e,t);const a=Mc.dot(Mc),o=Mc.dot(jh),c=Mc.dot(ID),h=jh.dot(jh),d=jh.dot(ID),m=a*h-o*o;if(m===0)return r.set(0,0,0),null;const v=1/m,y=(h*c-o*d)*v,A=(a*d-o*c)*v;return r.set(1-y-A,A,y)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,Xh)===null?!1:Xh.x>=0&&Xh.y>=0&&Xh.x+Xh.y<=1}static getInterpolation(e,t,n,s,r,a,o,c){return this.getBarycoord(e,t,n,s,Xh)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(r,Xh.x),c.addScaledVector(a,Xh.y),c.addScaledVector(o,Xh.z),c)}static getInterpolatedAttribute(e,t,n,s,r,a){return FD.setScalar(0),HD.setScalar(0),zD.setScalar(0),FD.fromBufferAttribute(e,t),HD.fromBufferAttribute(e,n),zD.fromBufferAttribute(e,s),a.setScalar(0),a.addScaledVector(FD,r.x),a.addScaledVector(HD,r.y),a.addScaledVector(zD,r.z),a}static isFrontFacing(e,t,n,s){return Mc.subVectors(n,t),jh.subVectors(e,t),Mc.cross(jh).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Mc.subVectors(this.c,this.b),jh.subVectors(this.a,this.b),Mc.cross(jh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ro.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ro.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,s,r){return Ro.getInterpolation(e,this.a,this.b,this.c,t,n,s,r)}containsPoint(e){return Ro.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ro.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,r=this.c;let a,o;oy.subVectors(s,n),ly.subVectors(r,n),PD.subVectors(e,n);const c=oy.dot(PD),h=ly.dot(PD);if(c<=0&&h<=0)return t.copy(n);OD.subVectors(e,s);const d=oy.dot(OD),m=ly.dot(OD);if(d>=0&&m<=d)return t.copy(s);const v=c*m-d*h;if(v<=0&&c>=0&&d<=0)return a=c/(c-d),t.copy(n).addScaledVector(oy,a);UD.subVectors(e,r);const y=oy.dot(UD),A=ly.dot(UD);if(A>=0&&y<=A)return t.copy(r);const E=y*h-c*A;if(E<=0&&h>=0&&A<=0)return o=h/(h-A),t.copy(n).addScaledVector(ly,o);const M=d*A-y*m;if(M<=0&&m-d>=0&&y-A>=0)return QO.subVectors(r,s),o=(m-d)/(m-d+(y-A)),t.copy(s).addScaledVector(QO,o);const x=1/(M+E+v);return a=E*x,o=v*x,t.copy(n).addScaledVector(oy,a).addScaledVector(ly,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const wG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zd={h:0,s:0,l:0},JM={h:0,s:0,l:0};function GD(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Bt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Yn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ri.toWorkingColorSpace(this,t),this}setRGB(e,t,n,s=ri.workingColorSpace){return this.r=e,this.g=t,this.b=n,ri.toWorkingColorSpace(this,s),this}setHSL(e,t,n,s=ri.workingColorSpace){if(e=zI(e,1),t=Cn(t,0,1),n=Cn(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=GD(a,r,e+1/3),this.g=GD(a,r,e),this.b=GD(a,r,e-1/3)}return ri.toWorkingColorSpace(this,s),this}setStyle(e,t=Yn){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=s[1],o=s[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],a=r.length;if(a===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Yn){const n=wG[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Nf(e.r),this.g=Nf(e.g),this.b=Nf(e.b),this}copyLinearToSRGB(e){return this.r=Oy(e.r),this.g=Oy(e.g),this.b=Oy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Yn){return ri.fromWorkingColorSpace(ba.copy(this),e),Math.round(Cn(ba.r*255,0,255))*65536+Math.round(Cn(ba.g*255,0,255))*256+Math.round(Cn(ba.b*255,0,255))}getHexString(e=Yn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ri.workingColorSpace){ri.fromWorkingColorSpace(ba.copy(this),t);const n=ba.r,s=ba.g,r=ba.b,a=Math.max(n,s,r),o=Math.min(n,s,r);let c,h;const d=(o+a)/2;if(o===a)c=0,h=0;else{const m=a-o;switch(h=d<=.5?m/(a+o):m/(2-a-o),a){case n:c=(s-r)/m+(s<r?6:0);break;case s:c=(r-n)/m+2;break;case r:c=(n-s)/m+4;break}c/=6}return e.h=c,e.s=h,e.l=d,e}getRGB(e,t=ri.workingColorSpace){return ri.fromWorkingColorSpace(ba.copy(this),t),e.r=ba.r,e.g=ba.g,e.b=ba.b,e}getStyle(e=Yn){ri.fromWorkingColorSpace(ba.copy(this),e);const t=ba.r,n=ba.g,s=ba.b;return e!==Yn?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(zd),this.setHSL(zd.h+e,zd.s+t,zd.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(zd),e.getHSL(JM);const n=Ox(zd.h,JM.h,t),s=Ox(zd.s,JM.s,t),r=Ox(zd.l,JM.l,t);return this.setHSL(n,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*s,this.g=r[1]*t+r[4]*n+r[7]*s,this.b=r[2]*t+r[5]*n+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ba=new Bt;Bt.NAMES=wG;let DY=0;class Ys extends ul{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:DY++}),this.uuid=al(),this.name="",this.type="Material",this.blending=vv,this.side=nu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=PC,this.blendDst=OC,this.blendEquation=Kd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Bt(0,0,0),this.blendAlpha=0,this.depthFunc=bv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=fL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=tg,this.stencilZFail=tg,this.stencilZPass=tg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==vv&&(n.blending=this.blending),this.side!==nu&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==PC&&(n.blendSrc=this.blendSrc),this.blendDst!==OC&&(n.blendDst=this.blendDst),this.blendEquation!==Kd&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==bv&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==fL&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==tg&&(n.stencilFail=this.stencilFail),this.stencilZFail!==tg&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==tg&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(r){const a=[];for(const o in r){const c=r[o];delete c.metadata,a.push(c)}return a}if(t){const r=s(e.textures),a=s(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let r=0;r!==s;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Do extends Ys{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new cl,this.combine=HE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Rf=BY();function BY(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let c=0;c<256;++c){const h=c-127;h<-27?(n[c]=0,n[c|256]=32768,s[c]=24,s[c|256]=24):h<-14?(n[c]=1024>>-h-14,n[c|256]=1024>>-h-14|32768,s[c]=-h-1,s[c|256]=-h-1):h<=15?(n[c]=h+15<<10,n[c|256]=h+15<<10|32768,s[c]=13,s[c|256]=13):h<128?(n[c]=31744,n[c|256]=64512,s[c]=24,s[c|256]=24):(n[c]=31744,n[c|256]=64512,s[c]=13,s[c|256]=13)}const r=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let c=1;c<1024;++c){let h=c<<13,d=0;for(;(h&8388608)===0;)h<<=1,d-=8388608;h&=-8388609,d+=947912704,r[c]=h|d}for(let c=1024;c<2048;++c)r[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(o[c]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:s,mantissaTable:r,exponentTable:a,offsetTable:o}}function So(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Cn(i,-65504,65504),Rf.floatView[0]=i;const e=Rf.uint32View[0],t=e>>23&511;return Rf.baseTable[t]+((e&8388607)>>Rf.shiftTable[t])}function cx(i){const e=i>>10;return Rf.uint32View[0]=Rf.mantissaTable[Rf.offsetTable[e]+(i&1023)]+Rf.exponentTable[e],Rf.floatView[0]}class mg{static toHalfFloat(e){return So(e)}static fromHalfFloat(e){return cx(e)}}const tr=new ae,ZM=new Ke;let LY=0;class ui{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:LY++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=tS,this.updateRanges=[],this.gpuType=ms,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)ZM.fromBufferAttribute(this,t),ZM.applyMatrix3(e),this.setXY(t,ZM.x,ZM.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)tr.fromBufferAttribute(this,t),tr.applyMatrix3(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)tr.fromBufferAttribute(this,t),tr.applyMatrix4(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)tr.fromBufferAttribute(this,t),tr.applyNormalMatrix(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)tr.fromBufferAttribute(this,t),tr.transformDirection(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=io(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Pn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=io(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=io(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=io(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=io(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),s=Pn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),s=Pn(s,this.array),r=Pn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==tS&&(e.usage=this.usage),e}}class NY extends ui{constructor(e,t,n){super(new Int8Array(e),t,n)}}class IY extends ui{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class PY extends ui{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class OY extends ui{constructor(e,t,n){super(new Int16Array(e),t,n)}}class GI extends ui{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class UY extends ui{constructor(e,t,n){super(new Int32Array(e),t,n)}}class kI extends ui{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class FY extends ui{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=cx(this.array[e*this.itemSize]);return this.normalized&&(t=io(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize]=So(t),this}getY(e){let t=cx(this.array[e*this.itemSize+1]);return this.normalized&&(t=io(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+1]=So(t),this}getZ(e){let t=cx(this.array[e*this.itemSize+2]);return this.normalized&&(t=io(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+2]=So(t),this}getW(e){let t=cx(this.array[e*this.itemSize+3]);return this.normalized&&(t=io(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pn(t,this.array)),this.array[e*this.itemSize+3]=So(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array)),this.array[e+0]=So(t),this.array[e+1]=So(n),this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),s=Pn(s,this.array)),this.array[e+0]=So(t),this.array[e+1]=So(n),this.array[e+2]=So(s),this}setXYZW(e,t,n,s,r){return e*=this.itemSize,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),s=Pn(s,this.array),r=Pn(r,this.array)),this.array[e+0]=So(t),this.array[e+1]=So(n),this.array[e+2]=So(s),this.array[e+3]=So(r),this}}class Yt extends ui{constructor(e,t,n){super(new Float32Array(e),t,n)}}let HY=0;const Dl=new on,kD=new ci,cy=new ae,qo=new aa,jb=new aa,Lr=new ae;class En extends ul{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:HY++}),this.uuid=al(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(MG(e)?kI:GI)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new Ln().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Dl.makeRotationFromQuaternion(e),this.applyMatrix4(Dl),this}rotateX(e){return Dl.makeRotationX(e),this.applyMatrix4(Dl),this}rotateY(e){return Dl.makeRotationY(e),this.applyMatrix4(Dl),this}rotateZ(e){return Dl.makeRotationZ(e),this.applyMatrix4(Dl),this}translate(e,t,n){return Dl.makeTranslation(e,t,n),this.applyMatrix4(Dl),this}scale(e,t,n){return Dl.makeScale(e,t,n),this.applyMatrix4(Dl),this}lookAt(e){return kD.lookAt(e),kD.updateMatrix(),this.applyMatrix4(kD.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(cy).negate(),this.translate(cy.x,cy.y,cy.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let s=0,r=e.length;s<r;s++){const a=e[s];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Yt(n,3))}else{const n=Math.min(e.length,t.count);for(let s=0;s<n;s++){const r=e[s];t.setXYZ(s,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new aa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ae(-1/0,-1/0,-1/0),new ae(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const r=t[n];qo.setFromBufferAttribute(r),this.morphTargetsRelative?(Lr.addVectors(this.boundingBox.min,qo.min),this.boundingBox.expandByPoint(Lr),Lr.addVectors(this.boundingBox.max,qo.max),this.boundingBox.expandByPoint(Lr)):(this.boundingBox.expandByPoint(qo.min),this.boundingBox.expandByPoint(qo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new kr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ae,1/0);return}if(e){const n=this.boundingSphere.center;if(qo.setFromBufferAttribute(e),t)for(let r=0,a=t.length;r<a;r++){const o=t[r];jb.setFromBufferAttribute(o),this.morphTargetsRelative?(Lr.addVectors(qo.min,jb.min),qo.expandByPoint(Lr),Lr.addVectors(qo.max,jb.max),qo.expandByPoint(Lr)):(qo.expandByPoint(jb.min),qo.expandByPoint(jb.max))}qo.getCenter(n);let s=0;for(let r=0,a=e.count;r<a;r++)Lr.fromBufferAttribute(e,r),s=Math.max(s,n.distanceToSquared(Lr));if(t)for(let r=0,a=t.length;r<a;r++){const o=t[r],c=this.morphTargetsRelative;for(let h=0,d=o.count;h<d;h++)Lr.fromBufferAttribute(o,h),c&&(cy.fromBufferAttribute(e,h),Lr.add(cy)),s=Math.max(s,n.distanceToSquared(Lr))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ui(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],c=[];for(let U=0;U<n.count;U++)o[U]=new ae,c[U]=new ae;const h=new ae,d=new ae,m=new ae,v=new Ke,y=new Ke,A=new Ke,E=new ae,M=new ae;function x(U,N,O){h.fromBufferAttribute(n,U),d.fromBufferAttribute(n,N),m.fromBufferAttribute(n,O),v.fromBufferAttribute(r,U),y.fromBufferAttribute(r,N),A.fromBufferAttribute(r,O),d.sub(h),m.sub(h),y.sub(v),A.sub(v);const G=1/(y.x*A.y-A.x*y.y);isFinite(G)&&(E.copy(d).multiplyScalar(A.y).addScaledVector(m,-y.y).multiplyScalar(G),M.copy(m).multiplyScalar(y.x).addScaledVector(d,-A.x).multiplyScalar(G),o[U].add(E),o[N].add(E),o[O].add(E),c[U].add(M),c[N].add(M),c[O].add(M))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let U=0,N=w.length;U<N;++U){const O=w[U],G=O.start,oe=O.count;for(let se=G,le=G+oe;se<le;se+=3)x(e.getX(se+0),e.getX(se+1),e.getX(se+2))}const R=new ae,D=new ae,P=new ae,I=new ae;function H(U){P.fromBufferAttribute(s,U),I.copy(P);const N=o[U];R.copy(N),R.sub(P.multiplyScalar(P.dot(N))).normalize(),D.crossVectors(I,N);const G=D.dot(c[U])<0?-1:1;a.setXYZW(U,R.x,R.y,R.z,G)}for(let U=0,N=w.length;U<N;++U){const O=w[U],G=O.start,oe=O.count;for(let se=G,le=G+oe;se<le;se+=3)H(e.getX(se+0)),H(e.getX(se+1)),H(e.getX(se+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new ui(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let v=0,y=n.count;v<y;v++)n.setXYZ(v,0,0,0);const s=new ae,r=new ae,a=new ae,o=new ae,c=new ae,h=new ae,d=new ae,m=new ae;if(e)for(let v=0,y=e.count;v<y;v+=3){const A=e.getX(v+0),E=e.getX(v+1),M=e.getX(v+2);s.fromBufferAttribute(t,A),r.fromBufferAttribute(t,E),a.fromBufferAttribute(t,M),d.subVectors(a,r),m.subVectors(s,r),d.cross(m),o.fromBufferAttribute(n,A),c.fromBufferAttribute(n,E),h.fromBufferAttribute(n,M),o.add(d),c.add(d),h.add(d),n.setXYZ(A,o.x,o.y,o.z),n.setXYZ(E,c.x,c.y,c.z),n.setXYZ(M,h.x,h.y,h.z)}else for(let v=0,y=t.count;v<y;v+=3)s.fromBufferAttribute(t,v+0),r.fromBufferAttribute(t,v+1),a.fromBufferAttribute(t,v+2),d.subVectors(a,r),m.subVectors(s,r),d.cross(m),n.setXYZ(v+0,d.x,d.y,d.z),n.setXYZ(v+1,d.x,d.y,d.z),n.setXYZ(v+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Lr.fromBufferAttribute(e,t),Lr.normalize(),e.setXYZ(t,Lr.x,Lr.y,Lr.z)}toNonIndexed(){function e(o,c){const h=o.array,d=o.itemSize,m=o.normalized,v=new h.constructor(c.length*d);let y=0,A=0;for(let E=0,M=c.length;E<M;E++){o.isInterleavedBufferAttribute?y=c[E]*o.data.stride+o.offset:y=c[E]*d;for(let x=0;x<d;x++)v[A++]=h[y++]}return new ui(v,d,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new En,n=this.index.array,s=this.attributes;for(const o in s){const c=s[o],h=e(c,n);t.setAttribute(o,h)}const r=this.morphAttributes;for(const o in r){const c=[],h=r[o];for(let d=0,m=h.length;d<m;d++){const v=h[d],y=e(v,n);c.push(y)}t.morphAttributes[o]=c}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,c=a.length;o<c;o++){const h=a[o];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(e[h]=c[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const h=n[c];e.data.attributes[c]=h.toJSON(e.data)}const s={};let r=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],d=[];for(let m=0,v=h.length;m<v;m++){const y=h[m];d.push(y.toJSON(e.data))}d.length>0&&(s[c]=d,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const s=e.attributes;for(const h in s){const d=s[h];this.setAttribute(h,d.clone(t))}const r=e.morphAttributes;for(const h in r){const d=[],m=r[h];for(let v=0,y=m.length;v<y;v++)d.push(m[v].clone(t));this.morphAttributes[h]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let h=0,d=a.length;h<d;h++){const m=a[h];this.addGroup(m.start,m.count,m.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const $O=new on,zm=new Gv,QM=new kr,eU=new ae,$M=new ae,eT=new ae,tT=new ae,VD=new ae,nT=new ae,tU=new ae,iT=new ae;class ts extends ci{constructor(e=new En,t=new Do){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const o=this.morphTargetInfluences;if(r&&o){nT.set(0,0,0);for(let c=0,h=r.length;c<h;c++){const d=o[c],m=r[c];d!==0&&(VD.fromBufferAttribute(m,e),a?nT.addScaledVector(VD,d):nT.addScaledVector(VD.sub(t),d))}t.add(nT)}return t}raycast(e,t){const n=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),QM.copy(n.boundingSphere),QM.applyMatrix4(r),zm.copy(e.ray).recast(e.near),!(QM.containsPoint(zm.origin)===!1&&(zm.intersectSphere(QM,eU)===null||zm.origin.distanceToSquared(eU)>(e.far-e.near)**2))&&($O.copy(r).invert(),zm.copy(e.ray).applyMatrix4($O),!(n.boundingBox!==null&&zm.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,zm)))}_computeIntersections(e,t,n){let s;const r=this.geometry,a=this.material,o=r.index,c=r.attributes.position,h=r.attributes.uv,d=r.attributes.uv1,m=r.attributes.normal,v=r.groups,y=r.drawRange;if(o!==null)if(Array.isArray(a))for(let A=0,E=v.length;A<E;A++){const M=v[A],x=a[M.materialIndex],w=Math.max(M.start,y.start),R=Math.min(o.count,Math.min(M.start+M.count,y.start+y.count));for(let D=w,P=R;D<P;D+=3){const I=o.getX(D),H=o.getX(D+1),U=o.getX(D+2);s=sT(this,x,e,n,h,d,m,I,H,U),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=M.materialIndex,t.push(s))}}else{const A=Math.max(0,y.start),E=Math.min(o.count,y.start+y.count);for(let M=A,x=E;M<x;M+=3){const w=o.getX(M),R=o.getX(M+1),D=o.getX(M+2);s=sT(this,a,e,n,h,d,m,w,R,D),s&&(s.faceIndex=Math.floor(M/3),t.push(s))}}else if(c!==void 0)if(Array.isArray(a))for(let A=0,E=v.length;A<E;A++){const M=v[A],x=a[M.materialIndex],w=Math.max(M.start,y.start),R=Math.min(c.count,Math.min(M.start+M.count,y.start+y.count));for(let D=w,P=R;D<P;D+=3){const I=D,H=D+1,U=D+2;s=sT(this,x,e,n,h,d,m,I,H,U),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=M.materialIndex,t.push(s))}}else{const A=Math.max(0,y.start),E=Math.min(c.count,y.start+y.count);for(let M=A,x=E;M<x;M+=3){const w=M,R=M+1,D=M+2;s=sT(this,a,e,n,h,d,m,w,R,D),s&&(s.faceIndex=Math.floor(M/3),t.push(s))}}}}function zY(i,e,t,n,s,r,a,o){let c;if(e.side===Ar?c=n.intersectTriangle(a,r,s,!0,o):c=n.intersectTriangle(s,r,a,e.side===nu,o),c===null)return null;iT.copy(o),iT.applyMatrix4(i.matrixWorld);const h=t.ray.origin.distanceTo(iT);return h<t.near||h>t.far?null:{distance:h,point:iT.clone(),object:i}}function sT(i,e,t,n,s,r,a,o,c,h){i.getVertexPosition(o,$M),i.getVertexPosition(c,eT),i.getVertexPosition(h,tT);const d=zY(i,e,t,n,$M,eT,tT,tU);if(d){const m=new ae;Ro.getBarycoord(tU,$M,eT,tT,m),s&&(d.uv=Ro.getInterpolatedAttribute(s,o,c,h,m,new Ke)),r&&(d.uv1=Ro.getInterpolatedAttribute(r,o,c,h,m,new Ke)),a&&(d.normal=Ro.getInterpolatedAttribute(a,o,c,h,m,new ae),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const v={a:o,b:c,c:h,normal:new ae,materialIndex:0};Ro.getNormal($M,eT,tT,v.normal),d.face=v,d.barycoord=m}return d}class kv extends En{constructor(e=1,t=1,n=1,s=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:r,depthSegments:a};const o=this;s=Math.floor(s),r=Math.floor(r),a=Math.floor(a);const c=[],h=[],d=[],m=[];let v=0,y=0;A("z","y","x",-1,-1,n,t,e,a,r,0),A("z","y","x",1,-1,n,t,-e,a,r,1),A("x","z","y",1,1,e,n,t,s,a,2),A("x","z","y",1,-1,e,n,-t,s,a,3),A("x","y","z",1,-1,e,t,n,s,r,4),A("x","y","z",-1,-1,e,t,-n,s,r,5),this.setIndex(c),this.setAttribute("position",new Yt(h,3)),this.setAttribute("normal",new Yt(d,3)),this.setAttribute("uv",new Yt(m,2));function A(E,M,x,w,R,D,P,I,H,U,N){const O=D/H,G=P/U,oe=D/2,se=P/2,le=I/2,ue=H+1,z=U+1;let K=0,Q=0;const de=new ae;for(let W=0;W<z;W++){const he=W*G-se;for(let xe=0;xe<ue;xe++){const ye=xe*O-oe;de[E]=ye*w,de[M]=he*R,de[x]=le,h.push(de.x,de.y,de.z),de[E]=0,de[M]=0,de[x]=I>0?1:-1,d.push(de.x,de.y,de.z),m.push(xe/H),m.push(1-W/U),K+=1}}for(let W=0;W<U;W++)for(let he=0;he<H;he++){const xe=v+he+ue*W,ye=v+he+ue*(W+1),fe=v+(he+1)+ue*(W+1),De=v+(he+1)+ue*W;c.push(xe,ye,De),c.push(ye,fe,De),Q+=6}o.addGroup(y,Q,N),y+=Q,v+=K}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kv(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function tA(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function $a(i){const e={};for(let t=0;t<i.length;t++){const n=tA(i[t]);for(const s in n)e[s]=n[s]}return e}function GY(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function RG(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:ri.workingColorSpace}const DG={clone:tA,merge:$a};var kY=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,VY=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Xi extends Ys{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=kY,this.fragmentShader=VY,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=tA(e.uniforms),this.uniformsGroups=GY(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const a=this.uniforms[s].value;a&&a.isTexture?t.uniforms[s]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[s]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[s]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[s]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[s]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[s]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[s]={type:"m4",value:a.toArray()}:t.uniforms[s]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class jE extends ci{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new on,this.projectionMatrix=new on,this.projectionMatrixInverse=new on,this.coordinateSystem=jl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Gd=new ae,nU=new Ke,iU=new Ke;class es extends jE{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=$_*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(yv*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return $_*2*Math.atan(Math.tan(yv*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Gd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Gd.x,Gd.y).multiplyScalar(-e/Gd.z),Gd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Gd.x,Gd.y).multiplyScalar(-e/Gd.z)}getViewSize(e,t){return this.getViewBounds(e,nU,iU),t.subVectors(iU,nU)}setViewOffset(e,t,n,s,r,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(yv*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,r=-.5*s;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,h=a.fullHeight;r+=a.offsetX*s/c,t-=a.offsetY*n/h,s*=a.width/c,n*=a.height/h}const o=this.filmOffset;o!==0&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const uy=-90,hy=1;class BG extends ci{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new es(uy,hy,e,t);s.layers=this.layers,this.add(s);const r=new es(uy,hy,e,t);r.layers=this.layers,this.add(r);const a=new es(uy,hy,e,t);a.layers=this.layers,this.add(a);const o=new es(uy,hy,e,t);o.layers=this.layers,this.add(o);const c=new es(uy,hy,e,t);c.layers=this.layers,this.add(c);const h=new es(uy,hy,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,r,a,o,c]=t;for(const h of t)this.remove(h);if(e===jl)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===nS)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,o,c,h,d]=this.children,m=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;const E=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(t,r),e.setRenderTarget(n,1,s),e.render(t,a),e.setRenderTarget(n,2,s),e.render(t,o),e.setRenderTarget(n,3,s),e.render(t,c),e.setRenderTarget(n,4,s),e.render(t,h),n.texture.generateMipmaps=E,e.setRenderTarget(n,5,s),e.render(t,d),e.setRenderTarget(m,v,y),e.xr.enabled=A,n.texture.needsPMREMUpdate=!0}}class XE extends Ai{constructor(e=[],t=mh,n,s,r,a,o,c,h,d){super(e,t,n,s,r,a,o,c,h,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class VI extends Zi{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new XE(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:li}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new kv(5,5,5),r=new Xi({name:"CubemapFromEquirect",uniforms:tA(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ar,blending:qs});r.uniforms.tEquirect.value=t;const a=new ts(s,r),o=t.minFilter;return t.minFilter===rl&&(t.minFilter=li),new BG(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,n=!0,s=!0){const r=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,s);e.setRenderTarget(r)}}class Bf extends ci{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jY={type:"move"};class $T{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Bf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Bf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ae),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Bf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ae),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,r=null,a=null;const o=this._targetRay,c=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){a=!0;for(const E of e.hand.values()){const M=t.getJointPose(E,n),x=this._getHandJoint(h,E);M!==null&&(x.matrix.fromArray(M.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=M.radius),x.visible=M!==null}const d=h.joints["index-finger-tip"],m=h.joints["thumb-tip"],v=d.position.distanceTo(m.position),y=.02,A=.005;h.inputState.pinching&&v>y+A?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&v<=y-A&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1));o!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&r!==null&&(s=r),s!==null&&(o.matrix.fromArray(s.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,s.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(s.linearVelocity)):o.hasLinearVelocity=!1,s.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(s.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(jY)))}return o!==null&&(o.visible=s!==null),c!==null&&(c.visible=r!==null),h!==null&&(h.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Bf;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class NR{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Bt(e),this.density=t}clone(){return new NR(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class IR{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Bt(e),this.near=t,this.far=n}clone(){return new IR(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Ev extends ci{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new cl,this.environmentIntensity=1,this.environmentRotation=new cl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class qE{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=tS,this.updateRanges=[],this.version=0,this.uuid=al()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[n+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=al()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=al()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Za=new ae;class Pp{constructor(e,t,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Za.fromBufferAttribute(this,t),Za.applyMatrix4(e),this.setXYZ(t,Za.x,Za.y,Za.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Za.fromBufferAttribute(this,t),Za.applyNormalMatrix(e),this.setXYZ(t,Za.x,Za.y,Za.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Za.fromBufferAttribute(this,t),Za.transformDirection(e),this.setXYZ(t,Za.x,Za.y,Za.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=io(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Pn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Pn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=io(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=io(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=io(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=io(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),s=Pn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,t,n,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pn(t,this.array),n=Pn(n,this.array),s=Pn(s,this.array),r=Pn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new ui(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Pp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class jI extends Ys{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let fy;const Xb=new ae,dy=new ae,py=new ae,my=new Ke,qb=new Ke,LG=new on,rT=new ae,Yb=new ae,aT=new ae,sU=new Ke,jD=new Ke,rU=new Ke;class NG extends ci{constructor(e=new jI){if(super(),this.isSprite=!0,this.type="Sprite",fy===void 0){fy=new En;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new qE(t,5);fy.setIndex([0,1,2,0,2,3]),fy.setAttribute("position",new Pp(n,3,0,!1)),fy.setAttribute("uv",new Pp(n,2,3,!1))}this.geometry=fy,this.material=e,this.center=new Ke(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),dy.setFromMatrixScale(this.matrixWorld),LG.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),py.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&dy.multiplyScalar(-py.z);const n=this.material.rotation;let s,r;n!==0&&(r=Math.cos(n),s=Math.sin(n));const a=this.center;oT(rT.set(-.5,-.5,0),py,a,dy,s,r),oT(Yb.set(.5,-.5,0),py,a,dy,s,r),oT(aT.set(.5,.5,0),py,a,dy,s,r),sU.set(0,0),jD.set(1,0),rU.set(1,1);let o=e.ray.intersectTriangle(rT,Yb,aT,!1,Xb);if(o===null&&(oT(Yb.set(-.5,.5,0),py,a,dy,s,r),jD.set(0,1),o=e.ray.intersectTriangle(rT,aT,Yb,!1,Xb),o===null))return;const c=e.ray.origin.distanceTo(Xb);c<e.near||c>e.far||t.push({distance:c,point:Xb.clone(),uv:Ro.getInterpolation(Xb,rT,Yb,aT,sU,jD,rU,new Ke),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function oT(i,e,t,n,s,r){my.subVectors(i,t).addScalar(.5).multiply(n),s!==void 0?(qb.x=r*my.x-s*my.y,qb.y=s*my.x+r*my.y):qb.copy(my),i.copy(e),i.x+=qb.x,i.y+=qb.y,i.applyMatrix4(LG)}const lT=new ae,aU=new ae;class IG extends ci{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,s=t.length;n<s;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const s=this.levels;let r;for(r=0;r<s.length&&!(t<s[r].distance);r++);return s.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const s=t.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,s;for(n=1,s=t.length;n<s;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){lT.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(lT);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){lT.setFromMatrixPosition(e.matrixWorld),aU.setFromMatrixPosition(this.matrixWorld);const n=lT.distanceTo(aU)/e.zoom;t[0].object.visible=!0;let s,r;for(s=1,r=t.length;s<r;s++){let a=t[s].distance;if(t[s].object.visible&&(a-=a*t[s].hysteresis),n>=a)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let s=0,r=n.length;s<r;s++){const a=n[s];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const oU=new ae,lU=new ai,cU=new ai,XY=new ae,uU=new on,cT=new ae,XD=new kr,hU=new on,qD=new Gv;class XI extends ts{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=uL,this.bindMatrix=new on,this.bindMatrixInverse=new on,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new aa),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,cT),this.boundingBox.expandByPoint(cT)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new kr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,cT),this.boundingSphere.expandByPoint(cT)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),XD.copy(this.boundingSphere),XD.applyMatrix4(s),e.ray.intersectsSphere(XD)!==!1&&(hU.copy(s).invert(),qD.copy(e.ray).applyMatrix4(hU),!(this.boundingBox!==null&&qD.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,qD)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ai,t=this.geometry.attributes.skinWeight;for(let n=0,s=t.count;n<s;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===uL?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===uG?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,s=this.geometry;lU.fromBufferAttribute(s.attributes.skinIndex,e),cU.fromBufferAttribute(s.attributes.skinWeight,e),oU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const a=cU.getComponent(r);if(a!==0){const o=lU.getComponent(r);uU.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(XY.copy(oU).applyMatrix4(uU),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class PR extends ci{constructor(){super(),this.isBone=!0,this.type="Bone"}}class eu extends Ai{constructor(e=null,t=1,n=1,s,r,a,o,c,h=gs,d=gs,m,v){super(null,a,o,c,h,d,s,r,m,v),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const fU=new on,qY=new on;class YE{constructor(e=[],t=[]){this.uuid=al(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new on)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new on;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let r=0,a=e.length;r<a;r++){const o=e[r]?e[r].matrixWorld:qY;fU.multiplyMatrices(o,t[r]),fU.toArray(n,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new YE(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new eu(t,e,e,Xs,ms);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,s=e.bones.length;n<s;n++){const r=e.bones[n];let a=t[r];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new PR),this.bones.push(a),this.boneInverses.push(new on().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const a=t[s];e.bones.push(a.uuid);const o=n[s];e.boneInverses.push(o.toArray())}return e}}class Mv extends ui{constructor(e,t,n,s=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const gy=new on,dU=new on,uT=[],pU=new aa,YY=new on,Wb=new ts,Kb=new kr;class qI extends ts{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Mv(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,YY)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new aa),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,gy),pU.copy(e.boundingBox).applyMatrix4(gy),this.boundingBox.union(pU)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new kr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,gy),Kb.copy(e.boundingSphere).applyMatrix4(gy),this.boundingSphere.union(Kb)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=n.length+1,a=e*r+1;for(let o=0;o<n.length;o++)n[o]=s[a+o]}raycast(e,t){const n=this.matrixWorld,s=this.count;if(Wb.geometry=this.geometry,Wb.material=this.material,Wb.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Kb.copy(this.boundingSphere),Kb.applyMatrix4(n),e.ray.intersectsSphere(Kb)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,gy),dU.multiplyMatrices(n,gy),Wb.matrixWorld=dU,Wb.raycast(e,uT);for(let a=0,o=uT.length;a<o;a++){const c=uT[a];c.instanceId=r,c.object=this,t.push(c)}uT.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Mv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new eu(new Float32Array(s*this.count),s,this.count,GE,ms));const r=this.morphTexture.source.data.data;let a=0;for(let h=0;h<n.length;h++)a+=n[h];const o=this.geometry.morphTargetsRelative?1:1-a,c=s*e;r[c]=o,r.set(n,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const YD=new ae,WY=new ae,KY=new Ln;class sf{constructor(e=new ae(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=YD.subVectors(n,t).cross(WY.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(YD),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||KY.getNormalMatrix(e),s=this.coplanarPoint(YD).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Gm=new kr,hT=new ae;class mA{constructor(e=new sf,t=new sf,n=new sf,s=new sf,r=new sf,a=new sf){this.planes=[e,t,n,s,r,a]}set(e,t,n,s,r,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(s),o[4].copy(r),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=jl){const n=this.planes,s=e.elements,r=s[0],a=s[1],o=s[2],c=s[3],h=s[4],d=s[5],m=s[6],v=s[7],y=s[8],A=s[9],E=s[10],M=s[11],x=s[12],w=s[13],R=s[14],D=s[15];if(n[0].setComponents(c-r,v-h,M-y,D-x).normalize(),n[1].setComponents(c+r,v+h,M+y,D+x).normalize(),n[2].setComponents(c+a,v+d,M+A,D+w).normalize(),n[3].setComponents(c-a,v-d,M-A,D-w).normalize(),n[4].setComponents(c-o,v-m,M-E,D-R).normalize(),t===jl)n[5].setComponents(c+o,v+m,M+E,D+R).normalize();else if(t===nS)n[5].setComponents(o,m,E,R).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Gm.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Gm.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Gm)}intersectsSprite(e){return Gm.center.set(0,0,0),Gm.radius=.7071067811865476,Gm.applyMatrix4(e.matrixWorld),this.intersectsSphere(Gm)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(hT.x=s.normal.x>0?e.max.x:e.min.x,hT.y=s.normal.y>0?e.max.y:e.min.y,hT.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(hT)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Vu=new on,ju=new mA;class OR{constructor(){this.coordinateSystem=jl}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(Vu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ju.setFromProjectionMatrix(Vu,this.coordinateSystem),ju.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(Vu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ju.setFromProjectionMatrix(Vu,this.coordinateSystem),ju.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(Vu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ju.setFromProjectionMatrix(Vu,this.coordinateSystem),ju.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(Vu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ju.setFromProjectionMatrix(Vu,this.coordinateSystem),ju.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(Vu.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),ju.setFromProjectionMatrix(Vu,this.coordinateSystem),ju.containsPoint(e))return!0}return!1}clone(){return new OR}}function WD(i,e){return i-e}function JY(i,e){return i.z-e.z}function ZY(i,e){return e.z-i.z}class QY{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,s){const r=this.pool,a=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=s}reset(){this.list.length=0,this.index=0}}const bo=new on,$Y=new Bt(1,1,1),mU=new mA,eW=new OR,fT=new aa,km=new kr,Jb=new ae,gU=new ae,tW=new ae,KD=new QY,xa=new ts,dT=[];function nW(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const s=i.count;for(let r=0;r<s;r++)for(let a=0;a<n;a++)e.setComponent(r+t,a,i.getComponent(r,a))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function Vm(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class PG extends ts{constructor(e,t,n=t*2,s){super(new En,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new eu(t,e,e,Xs,ms);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new eu(t,e,e,kE,iu);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new eu(t,e,e,Xs,ms);n.colorSpace=ri.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const a=e.getAttribute(r),{array:o,itemSize:c,normalized:h}=a,d=new o.constructor(n*c),m=new ui(d,c,h);t.setAttribute(r,m)}if(e.getIndex()!==null){const r=n>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new ui(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=e.getAttribute(n),r=t.getAttribute(n);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new aa);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,bo),this.getBoundingBoxAt(r,fT).applyMatrix4(bo),e.union(fT)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new kr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,bo),this.getBoundingSphereAt(r,km).applyMatrix4(bo),e.union(km)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(WD),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;bo.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const a=this._colorsTexture;return a&&($Y.toArray(a.image.data,s*4),a.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?a.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(WD),c=this._availableGeometryIds.shift(),r[c]=s):(c=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(c,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,s=n.getIndex()!==null,r=n.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(s&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=o.vertexStart,h=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const d in n.attributes){const m=t.getAttribute(d),v=n.getAttribute(d);nW(m,v,c);const y=m.itemSize;for(let A=m.count,E=h;A<E;A++){const M=c+A;for(let x=0;x<y;x++)v.setComponent(M,x,0)}v.needsUpdate=!0,v.addUpdateRange(c*y,h*y)}if(s){const d=o.indexStart,m=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let v=0;v<a.count;v++)r.setX(d+v,c+a.getX(v));for(let v=a.count,y=m;v<y;v++)r.setX(d+v,c);r.needsUpdate=!0,r.addUpdateRange(d,o.reservedIndexCount)}return o.start=s?o.indexStart:o.vertexStart,o.count=s?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let s=0,r=n.length;s<r;s++)n[s].active&&n[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,s=n.map((a,o)=>o).sort((a,o)=>n[a].vertexStart-n[o].vertexStart),r=this.geometry;for(let a=0,o=n.length;a<o;a++){const c=s[a],h=n[c];if(h.active!==!1){if(r.index!==null){if(h.indexStart!==t){const{indexStart:d,vertexStart:m,reservedIndexCount:v}=h,y=r.index,A=y.array,E=e-m;for(let M=d;M<d+v;M++)A[M]=A[M]+E;y.array.copyWithin(t,d,d+v),y.addUpdateRange(t,v),h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:d,reservedVertexCount:m}=h,v=r.attributes;for(const y in v){const A=v[y],{array:E,itemSize:M}=A;E.copyWithin(e*M,d*M,(d+m)*M),A.addUpdateRange(e*M,m*M)}h.vertexStart=e}e+=h.reservedVertexCount,h.start=r.index?h.indexStart:h.vertexStart,this._nextIndexStart=r.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const r=new aa,a=n.index,o=n.attributes.position;for(let c=s.start,h=s.start+s.count;c<h;c++){let d=c;a&&(d=a.getX(d)),r.expandByPoint(Jb.fromBufferAttribute(o,d))}s.boundingBox=r}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const r=new kr;this.getBoundingBoxAt(e,fT),fT.getCenter(r.center);const a=n.index,o=n.attributes.position;let c=0;for(let h=s.start,d=s.start+s.count;h<d;h++){let m=h;a&&(m=a.getX(m)),Jb.fromBufferAttribute(o,m),c=Math.max(c,r.center.distanceToSquared(Jb))}r.radius=Math.sqrt(c),s.boundingSphere=r}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(WD);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),r=new Int32Array(e);Vm(this._multiDrawCounts,s),Vm(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,c=this._colorsTexture;a.dispose(),this._initIndirectTexture(),Vm(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),Vm(o.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Vm(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...n.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new En,this._initializeGeometry(r));const a=this.geometry;r.index&&Vm(r.index.array,a.index.array);for(const o in r.attributes)Vm(r.attributes[o].array,a.attributes[o].array)}raycast(e,t){const n=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,a=this.geometry;xa.material=this.material,xa.geometry.index=a.index,xa.geometry.attributes=a.attributes,xa.geometry.boundingBox===null&&(xa.geometry.boundingBox=new aa),xa.geometry.boundingSphere===null&&(xa.geometry.boundingSphere=new kr);for(let o=0,c=n.length;o<c;o++){if(!n[o].visible||!n[o].active)continue;const h=n[o].geometryIndex,d=s[h];xa.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(o,xa.matrixWorld).premultiply(r),this.getBoundingBoxAt(h,xa.geometry.boundingBox),this.getBoundingSphereAt(h,xa.geometry.boundingSphere),xa.raycast(e,dT);for(let m=0,v=dT.length;m<v;m++){const y=dT[m];y.object=this,y.batchId=o,t.push(y)}dT.length=0}xa.material=null,xa.geometry.index=null,xa.geometry.attributes={},xa.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=s.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,c=this._instanceInfo,h=this._multiDrawStarts,d=this._multiDrawCounts,m=this._geometryInfo,v=this.perObjectFrustumCulled,y=this._indirectTexture,A=y.image.data,E=n.isArrayCamera?eW:mU;v&&!n.isArrayCamera&&(bo.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),mU.setFromProjectionMatrix(bo,e.coordinateSystem));let M=0;if(this.sortObjects){bo.copy(this.matrixWorld).invert(),Jb.setFromMatrixPosition(n.matrixWorld).applyMatrix4(bo),gU.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(bo);for(let R=0,D=c.length;R<D;R++)if(c[R].visible&&c[R].active){const P=c[R].geometryIndex;this.getMatrixAt(R,bo),this.getBoundingSphereAt(P,km).applyMatrix4(bo);let I=!1;if(v&&(I=!E.intersectsSphere(km,n)),!I){const H=m[P],U=tW.subVectors(km.center,Jb).dot(gU);KD.push(H.start,H.count,U,R)}}const x=KD.list,w=this.customSort;w===null?x.sort(r.transparent?ZY:JY):w.call(this,x,n);for(let R=0,D=x.length;R<D;R++){const P=x[R];h[M]=P.start*o,d[M]=P.count,A[M]=P.index,M++}KD.reset()}else for(let x=0,w=c.length;x<w;x++)if(c[x].visible&&c[x].active){const R=c[x].geometryIndex;let D=!1;if(v&&(this.getMatrixAt(x,bo),this.getBoundingSphereAt(R,km).applyMatrix4(bo),D=!E.intersectsSphere(km,n)),!D){const P=m[R];h[M]=P.start*o,d[M]=P.count,A[M]=x,M++}}y.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(e,t,n,s,r,a){this.onBeforeRender(e,null,s,r,a)}}class Na extends Ys{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const vw=new ae,yw=new ae,vU=new on,Zb=new Gv,pT=new kr,JD=new ae,yU=new ae;class Ff extends ci{constructor(e=new En,t=new Na){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let s=1,r=t.count;s<r;s++)vw.fromBufferAttribute(t,s-1),yw.fromBufferAttribute(t,s),n[s]=n[s-1],n[s]+=vw.distanceTo(yw);e.setAttribute("lineDistance",new Yt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),pT.copy(n.boundingSphere),pT.applyMatrix4(s),pT.radius+=r,e.ray.intersectsSphere(pT)===!1)return;vU.copy(s).invert(),Zb.copy(e.ray).applyMatrix4(vU);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,h=this.isLineSegments?2:1,d=n.index,v=n.attributes.position;if(d!==null){const y=Math.max(0,a.start),A=Math.min(d.count,a.start+a.count);for(let E=y,M=A-1;E<M;E+=h){const x=d.getX(E),w=d.getX(E+1),R=mT(this,e,Zb,c,x,w,E);R&&t.push(R)}if(this.isLineLoop){const E=d.getX(A-1),M=d.getX(y),x=mT(this,e,Zb,c,E,M,A-1);x&&t.push(x)}}else{const y=Math.max(0,a.start),A=Math.min(v.count,a.start+a.count);for(let E=y,M=A-1;E<M;E+=h){const x=mT(this,e,Zb,c,E,E+1,E);x&&t.push(x)}if(this.isLineLoop){const E=mT(this,e,Zb,c,A-1,y,A-1);E&&t.push(E)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}function mT(i,e,t,n,s,r,a){const o=i.geometry.attributes.position;if(vw.fromBufferAttribute(o,s),yw.fromBufferAttribute(o,r),t.distanceSqToSegment(vw,yw,JD,yU)>n)return;JD.applyMatrix4(i.matrixWorld);const h=e.ray.origin.distanceTo(JD);if(!(h<e.near||h>e.far))return{distance:h,point:yU.clone().applyMatrix4(i.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:i}}const _U=new ae,AU=new ae;class ou extends Ff{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let s=0,r=t.count;s<r;s+=2)_U.fromBufferAttribute(t,s),AU.fromBufferAttribute(t,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+_U.distanceTo(AU);e.setAttribute("lineDistance",new Yt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class YI extends Ff{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class UR extends Ys{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const bU=new on,pL=new Gv,gT=new kr,vT=new ae;class WI extends ci{constructor(e=new En,t=new UR){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),gT.copy(n.boundingSphere),gT.applyMatrix4(s),gT.radius+=r,e.ray.intersectsSphere(gT)===!1)return;bU.copy(s).invert(),pL.copy(e.ray).applyMatrix4(bU);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,h=n.index,m=n.attributes.position;if(h!==null){const v=Math.max(0,a.start),y=Math.min(h.count,a.start+a.count);for(let A=v,E=y;A<E;A++){const M=h.getX(A);vT.fromBufferAttribute(m,M),xU(vT,M,c,s,e,t,this)}}else{const v=Math.max(0,a.start),y=Math.min(m.count,a.start+a.count);for(let A=v,E=y;A<E;A++)vT.fromBufferAttribute(m,A),xU(vT,A,c,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=s.length;r<a;r++){const o=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}function xU(i,e,t,n,s,r,a){const o=pL.distanceSqToPoint(i);if(o<t){const c=new ae;pL.closestPointToPoint(i,c),c.applyMatrix4(n);const h=s.ray.origin.distanceTo(c);if(h<s.near||h>s.far)return;r.push({distance:h,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class OG extends Ai{constructor(e,t,n,s,r=li,a=li,o,c,h){super(e,t,n,s,r,a,o,c,h),this.isVideoTexture=!0,this.generateMipmaps=!1;const d=this;function m(){d.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class iW extends OG{constructor(e,t,n,s,r,a,o,c){super({},e,t,n,s,r,a,o,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class sW extends Ai{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=gs,this.minFilter=gs,this.generateMipmaps=!1,this.needsUpdate=!0}}class FR extends Ai{constructor(e,t,n,s,r,a,o,c,h,d,m,v){super(null,a,o,c,h,d,s,r,m,v),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class rW extends FR{constructor(e,t,n,s,r,a){super(e,t,n,r,a),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=js,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class aW extends FR{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,mh),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class oW extends Ai{constructor(e,t,n,s,r,a,o,c,h){super(e,t,n,s,r,a,o,c,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class WE extends Ai{constructor(e,t,n=iu,s,r,a,o=gs,c=gs,h,d=J_){if(d!==J_&&d!==Sv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,s,r,a,o,c,d,n,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Ep(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class lW extends WE{constructor(e=1,t=1,n=1){super(e,t),this.isDepthArrayTexture=!0,this.image={width:e,height:t,depth:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class HR extends En{constructor(e=1,t=1,n=4,s=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:s,heightSegments:r},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),r=Math.max(1,Math.floor(r));const a=[],o=[],c=[],h=[],d=t/2,m=Math.PI/2*e,v=t,y=2*m+v,A=n*2+r,E=s+1,M=new ae,x=new ae;for(let w=0;w<=A;w++){let R=0,D=0,P=0,I=0;if(w<=n){const N=w/n,O=N*Math.PI/2;D=-d-e*Math.cos(O),P=e*Math.sin(O),I=-e*Math.cos(O),R=N*m}else if(w<=n+r){const N=(w-n)/r;D=-d+N*t,P=e,I=0,R=m+N*v}else{const N=(w-n-r)/n,O=N*Math.PI/2;D=d+e*Math.sin(O),P=e*Math.cos(O),I=e*Math.sin(O),R=m+v+N*m}const H=Math.max(0,Math.min(1,R/y));let U=0;w===0?U=.5/s:w===A&&(U=-.5/s);for(let N=0;N<=s;N++){const O=N/s,G=O*Math.PI*2,oe=Math.sin(G),se=Math.cos(G);x.x=-P*se,x.y=D,x.z=P*oe,o.push(x.x,x.y,x.z),M.set(-P*se,I,P*oe),M.normalize(),c.push(M.x,M.y,M.z),h.push(O+U,H)}if(w>0){const N=(w-1)*E;for(let O=0;O<s;O++){const G=N+O,oe=N+O+1,se=w*E+O,le=w*E+O+1;a.push(G,oe,se),a.push(oe,le,se)}}}this.setIndex(a),this.setAttribute("position",new Yt(o,3)),this.setAttribute("normal",new Yt(c,3)),this.setAttribute("uv",new Yt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new HR(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class zR extends En{constructor(e=1,t=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:s},t=Math.max(3,t);const r=[],a=[],o=[],c=[],h=new ae,d=new Ke;a.push(0,0,0),o.push(0,0,1),c.push(.5,.5);for(let m=0,v=3;m<=t;m++,v+=3){const y=n+m/t*s;h.x=e*Math.cos(y),h.y=e*Math.sin(y),a.push(h.x,h.y,h.z),o.push(0,0,1),d.x=(a[v]/e+1)/2,d.y=(a[v+1]/e+1)/2,c.push(d.x,d.y)}for(let m=1;m<=t;m++)r.push(m,m+1,0);this.setIndex(r),this.setAttribute("position",new Yt(a,3)),this.setAttribute("normal",new Yt(o,3)),this.setAttribute("uv",new Yt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zR(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class KE extends En{constructor(e=1,t=1,n=1,s=32,r=1,a=!1,o=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:s,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:c};const h=this;s=Math.floor(s),r=Math.floor(r);const d=[],m=[],v=[],y=[];let A=0;const E=[],M=n/2;let x=0;w(),a===!1&&(e>0&&R(!0),t>0&&R(!1)),this.setIndex(d),this.setAttribute("position",new Yt(m,3)),this.setAttribute("normal",new Yt(v,3)),this.setAttribute("uv",new Yt(y,2));function w(){const D=new ae,P=new ae;let I=0;const H=(t-e)/n;for(let U=0;U<=r;U++){const N=[],O=U/r,G=O*(t-e)+e;for(let oe=0;oe<=s;oe++){const se=oe/s,le=se*c+o,ue=Math.sin(le),z=Math.cos(le);P.x=G*ue,P.y=-O*n+M,P.z=G*z,m.push(P.x,P.y,P.z),D.set(ue,H,z).normalize(),v.push(D.x,D.y,D.z),y.push(se,1-O),N.push(A++)}E.push(N)}for(let U=0;U<s;U++)for(let N=0;N<r;N++){const O=E[N][U],G=E[N+1][U],oe=E[N+1][U+1],se=E[N][U+1];(e>0||N!==0)&&(d.push(O,G,se),I+=3),(t>0||N!==r-1)&&(d.push(G,oe,se),I+=3)}h.addGroup(x,I,0),x+=I}function R(D){const P=A,I=new Ke,H=new ae;let U=0;const N=D===!0?e:t,O=D===!0?1:-1;for(let oe=1;oe<=s;oe++)m.push(0,M*O,0),v.push(0,O,0),y.push(.5,.5),A++;const G=A;for(let oe=0;oe<=s;oe++){const le=oe/s*c+o,ue=Math.cos(le),z=Math.sin(le);H.x=N*z,H.y=M*O,H.z=N*ue,m.push(H.x,H.y,H.z),v.push(0,O,0),I.x=ue*.5+.5,I.y=z*.5*O+.5,y.push(I.x,I.y),A++}for(let oe=0;oe<s;oe++){const se=P+oe,le=G+oe;D===!0?d.push(le,le+1,se):d.push(le+1,le,se),U+=3}h.addGroup(x,U,D===!0?1:2),x+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new KE(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class JE extends KE{constructor(e=1,t=1,n=32,s=1,r=!1,a=0,o=Math.PI*2){super(0,e,t,n,s,r,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:s,openEnded:r,thetaStart:a,thetaLength:o}}static fromJSON(e){return new JE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jp extends En{constructor(e=[],t=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:s};const r=[],a=[];o(s),h(n),d(),this.setAttribute("position",new Yt(r,3)),this.setAttribute("normal",new Yt(r.slice(),3)),this.setAttribute("uv",new Yt(a,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function o(w){const R=new ae,D=new ae,P=new ae;for(let I=0;I<t.length;I+=3)y(t[I+0],R),y(t[I+1],D),y(t[I+2],P),c(R,D,P,w)}function c(w,R,D,P){const I=P+1,H=[];for(let U=0;U<=I;U++){H[U]=[];const N=w.clone().lerp(D,U/I),O=R.clone().lerp(D,U/I),G=I-U;for(let oe=0;oe<=G;oe++)oe===0&&U===I?H[U][oe]=N:H[U][oe]=N.clone().lerp(O,oe/G)}for(let U=0;U<I;U++)for(let N=0;N<2*(I-U)-1;N++){const O=Math.floor(N/2);N%2===0?(v(H[U][O+1]),v(H[U+1][O]),v(H[U][O])):(v(H[U][O+1]),v(H[U+1][O+1]),v(H[U+1][O]))}}function h(w){const R=new ae;for(let D=0;D<r.length;D+=3)R.x=r[D+0],R.y=r[D+1],R.z=r[D+2],R.normalize().multiplyScalar(w),r[D+0]=R.x,r[D+1]=R.y,r[D+2]=R.z}function d(){const w=new ae;for(let R=0;R<r.length;R+=3){w.x=r[R+0],w.y=r[R+1],w.z=r[R+2];const D=M(w)/2/Math.PI+.5,P=x(w)/Math.PI+.5;a.push(D,1-P)}A(),m()}function m(){for(let w=0;w<a.length;w+=6){const R=a[w+0],D=a[w+2],P=a[w+4],I=Math.max(R,D,P),H=Math.min(R,D,P);I>.9&&H<.1&&(R<.2&&(a[w+0]+=1),D<.2&&(a[w+2]+=1),P<.2&&(a[w+4]+=1))}}function v(w){r.push(w.x,w.y,w.z)}function y(w,R){const D=w*3;R.x=e[D+0],R.y=e[D+1],R.z=e[D+2]}function A(){const w=new ae,R=new ae,D=new ae,P=new ae,I=new Ke,H=new Ke,U=new Ke;for(let N=0,O=0;N<r.length;N+=9,O+=6){w.set(r[N+0],r[N+1],r[N+2]),R.set(r[N+3],r[N+4],r[N+5]),D.set(r[N+6],r[N+7],r[N+8]),I.set(a[O+0],a[O+1]),H.set(a[O+2],a[O+3]),U.set(a[O+4],a[O+5]),P.copy(w).add(R).add(D).divideScalar(3);const G=M(P);E(I,O+0,w,G),E(H,O+2,R,G),E(U,O+4,D,G)}}function E(w,R,D,P){P<0&&w.x===1&&(a[R]=w.x-1),D.x===0&&D.z===0&&(a[R]=P/2/Math.PI+.5)}function M(w){return Math.atan2(w.z,-w.x)}function x(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jp(e.vertices,e.indices,e.radius,e.details)}}class GR extends jp{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new GR(e.radius,e.detail)}}const yT=new ae,_T=new ae,ZD=new ae,AT=new Ro;class UG extends En{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),r=Math.cos(yv*t),a=e.getIndex(),o=e.getAttribute("position"),c=a?a.count:o.count,h=[0,0,0],d=["a","b","c"],m=new Array(3),v={},y=[];for(let A=0;A<c;A+=3){a?(h[0]=a.getX(A),h[1]=a.getX(A+1),h[2]=a.getX(A+2)):(h[0]=A,h[1]=A+1,h[2]=A+2);const{a:E,b:M,c:x}=AT;if(E.fromBufferAttribute(o,h[0]),M.fromBufferAttribute(o,h[1]),x.fromBufferAttribute(o,h[2]),AT.getNormal(ZD),m[0]=`${Math.round(E.x*s)},${Math.round(E.y*s)},${Math.round(E.z*s)}`,m[1]=`${Math.round(M.x*s)},${Math.round(M.y*s)},${Math.round(M.z*s)}`,m[2]=`${Math.round(x.x*s)},${Math.round(x.y*s)},${Math.round(x.z*s)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let w=0;w<3;w++){const R=(w+1)%3,D=m[w],P=m[R],I=AT[d[w]],H=AT[d[R]],U=`${D}_${P}`,N=`${P}_${D}`;N in v&&v[N]?(ZD.dot(v[N].normal)<=r&&(y.push(I.x,I.y,I.z),y.push(H.x,H.y,H.z)),v[N]=null):U in v||(v[U]={index0:h[w],index1:h[R],normal:ZD.clone()})}}for(const A in v)if(v[A]){const{index0:E,index1:M}=v[A];yT.fromBufferAttribute(o,E),_T.fromBufferAttribute(o,M),y.push(yT.x,yT.y,yT.z),y.push(_T.x,_T.y,_T.z)}this.setAttribute("position",new Yt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class lu{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),r+=n.distanceTo(s),t.push(r),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let s=0;const r=n.length;let a;t?a=t:a=e*n[r-1];let o=0,c=r-1,h;for(;o<=c;)if(s=Math.floor(o+(c-o)/2),h=n[s]-a,h<0)o=s+1;else if(h>0)c=s-1;else{c=s;break}if(s=c,n[s]===a)return s/(r-1);const d=n[s],v=n[s+1]-d,y=(a-d)/v;return(s+y)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const a=this.getPoint(s),o=this.getPoint(r),c=t||(a.isVector2?new Ke:new ae);return c.copy(o).sub(a).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new ae,s=[],r=[],a=[],o=new ae,c=new on;for(let y=0;y<=e;y++){const A=y/e;s[y]=this.getTangentAt(A,new ae)}r[0]=new ae,a[0]=new ae;let h=Number.MAX_VALUE;const d=Math.abs(s[0].x),m=Math.abs(s[0].y),v=Math.abs(s[0].z);d<=h&&(h=d,n.set(1,0,0)),m<=h&&(h=m,n.set(0,1,0)),v<=h&&n.set(0,0,1),o.crossVectors(s[0],n).normalize(),r[0].crossVectors(s[0],o),a[0].crossVectors(s[0],r[0]);for(let y=1;y<=e;y++){if(r[y]=r[y-1].clone(),a[y]=a[y-1].clone(),o.crossVectors(s[y-1],s[y]),o.length()>Number.EPSILON){o.normalize();const A=Math.acos(Cn(s[y-1].dot(s[y]),-1,1));r[y].applyMatrix4(c.makeRotationAxis(o,A))}a[y].crossVectors(s[y],r[y])}if(t===!0){let y=Math.acos(Cn(r[0].dot(r[e]),-1,1));y/=e,s[0].dot(o.crossVectors(r[0],r[e]))>0&&(y=-y);for(let A=1;A<=e;A++)r[A].applyMatrix4(c.makeRotationAxis(s[A],y*A)),a[A].crossVectors(s[A],r[A])}return{tangents:s,normals:r,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class kR extends lu{constructor(e=0,t=0,n=1,s=1,r=0,a=Math.PI*2,o=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=o,this.aRotation=c}getPoint(e,t=new Ke){const n=t,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(a?r=0:r=s),this.aClockwise===!0&&!a&&(r===s?r=-s:r=r-s);const o=this.aStartAngle+e*r;let c=this.aX+this.xRadius*Math.cos(o),h=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const d=Math.cos(this.aRotation),m=Math.sin(this.aRotation),v=c-this.aX,y=h-this.aY;c=v*d-y*m+this.aX,h=v*m+y*d+this.aY}return n.set(c,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class FG extends kR{constructor(e,t,n,s,r,a){super(e,t,n,n,s,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function KI(){let i=0,e=0,t=0,n=0;function s(r,a,o,c){i=r,e=o,t=-3*r+3*a-2*o-c,n=2*r-2*a+o+c}return{initCatmullRom:function(r,a,o,c,h){s(a,o,h*(o-r),h*(c-a))},initNonuniformCatmullRom:function(r,a,o,c,h,d,m){let v=(a-r)/h-(o-r)/(h+d)+(o-a)/d,y=(o-a)/d-(c-a)/(d+m)+(c-o)/m;v*=d,y*=d,s(a,o,v,y)},calc:function(r){const a=r*r,o=a*r;return i+e*r+t*a+n*o}}}const bT=new ae,QD=new KI,$D=new KI,eB=new KI;class HG extends lu{constructor(e=[],t=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=s}getPoint(e,t=new ae){const n=t,s=this.points,r=s.length,a=(r-(this.closed?0:1))*e;let o=Math.floor(a),c=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:c===0&&o===r-1&&(o=r-2,c=1);let h,d;this.closed||o>0?h=s[(o-1)%r]:(bT.subVectors(s[0],s[1]).add(s[0]),h=bT);const m=s[o%r],v=s[(o+1)%r];if(this.closed||o+2<r?d=s[(o+2)%r]:(bT.subVectors(s[r-1],s[r-2]).add(s[r-1]),d=bT),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let A=Math.pow(h.distanceToSquared(m),y),E=Math.pow(m.distanceToSquared(v),y),M=Math.pow(v.distanceToSquared(d),y);E<1e-4&&(E=1),A<1e-4&&(A=E),M<1e-4&&(M=E),QD.initNonuniformCatmullRom(h.x,m.x,v.x,d.x,A,E,M),$D.initNonuniformCatmullRom(h.y,m.y,v.y,d.y,A,E,M),eB.initNonuniformCatmullRom(h.z,m.z,v.z,d.z,A,E,M)}else this.curveType==="catmullrom"&&(QD.initCatmullRom(h.x,m.x,v.x,d.x,this.tension),$D.initCatmullRom(h.y,m.y,v.y,d.y,this.tension),eB.initCatmullRom(h.z,m.z,v.z,d.z,this.tension));return n.set(QD.calc(c),$D.calc(c),eB.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new ae().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function SU(i,e,t,n,s){const r=(n-e)*.5,a=(s-t)*.5,o=i*i,c=i*o;return(2*t-2*n+r+a)*c+(-3*t+3*n-2*r-a)*o+r*i+t}function cW(i,e){const t=1-i;return t*t*e}function uW(i,e){return 2*(1-i)*i*e}function hW(i,e){return i*i*e}function Ux(i,e,t,n){return cW(i,e)+uW(i,t)+hW(i,n)}function fW(i,e){const t=1-i;return t*t*t*e}function dW(i,e){const t=1-i;return 3*t*t*i*e}function pW(i,e){return 3*(1-i)*i*i*e}function mW(i,e){return i*i*i*e}function Fx(i,e,t,n,s){return fW(i,e)+dW(i,t)+pW(i,n)+mW(i,s)}class JI extends lu{constructor(e=new Ke,t=new Ke,n=new Ke,s=new Ke){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new Ke){const n=t,s=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Fx(e,s.x,r.x,a.x,o.x),Fx(e,s.y,r.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class zG extends lu{constructor(e=new ae,t=new ae,n=new ae,s=new ae){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new ae){const n=t,s=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Fx(e,s.x,r.x,a.x,o.x),Fx(e,s.y,r.y,a.y,o.y),Fx(e,s.z,r.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ZI extends lu{constructor(e=new Ke,t=new Ke){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ke){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ke){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class GG extends lu{constructor(e=new ae,t=new ae){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ae){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ae){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QI extends lu{constructor(e=new Ke,t=new Ke,n=new Ke){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ke){const n=t,s=this.v0,r=this.v1,a=this.v2;return n.set(Ux(e,s.x,r.x,a.x),Ux(e,s.y,r.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $I extends lu{constructor(e=new ae,t=new ae,n=new ae){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ae){const n=t,s=this.v0,r=this.v1,a=this.v2;return n.set(Ux(e,s.x,r.x,a.x),Ux(e,s.y,r.y,a.y),Ux(e,s.z,r.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class e3 extends lu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ke){const n=t,s=this.points,r=(s.length-1)*e,a=Math.floor(r),o=r-a,c=s[a===0?a:a-1],h=s[a],d=s[a>s.length-2?s.length-1:a+1],m=s[a>s.length-3?s.length-1:a+2];return n.set(SU(o,c.x,h.x,d.x,m.x),SU(o,c.y,h.y,d.y,m.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new Ke().fromArray(s))}return this}}var _w=Object.freeze({__proto__:null,ArcCurve:FG,CatmullRomCurve3:HG,CubicBezierCurve:JI,CubicBezierCurve3:zG,EllipseCurve:kR,LineCurve:ZI,LineCurve3:GG,QuadraticBezierCurve:QI,QuadraticBezierCurve3:$I,SplineCurve:e3});class kG extends lu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new _w[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=n){const a=s[r]-n,o=this.curves[r],c=o.getLength(),h=c===0?0:1-a/c;return o.getPointAt(h,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,s=this.curves.length;n<s;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let s=0,r=this.curves;s<r.length;s++){const a=r[s],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,c=a.getPoints(o);for(let h=0;h<c.length;h++){const d=c[h];n&&n.equals(d)||(t.push(d),n=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(new _w[s.type]().fromJSON(s))}return this}}class Aw extends kG{constructor(e){super(),this.type="Path",this.currentPoint=new Ke,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new ZI(this.currentPoint.clone(),new Ke(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,s){const r=new QI(this.currentPoint.clone(),new Ke(e,t),new Ke(n,s));return this.curves.push(r),this.currentPoint.set(n,s),this}bezierCurveTo(e,t,n,s,r,a){const o=new JI(this.currentPoint.clone(),new Ke(e,t),new Ke(n,s),new Ke(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new e3(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,s,r,a){const o=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+o,t+c,n,s,r,a),this}absarc(e,t,n,s,r,a){return this.absellipse(e,t,n,n,s,r,a),this}ellipse(e,t,n,s,r,a,o,c){const h=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+h,t+d,n,s,r,a,o,c),this}absellipse(e,t,n,s,r,a,o,c){const h=new kR(e,t,n,s,r,a,o,c);if(this.curves.length>0){const m=h.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(h);const d=h.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class _v extends Aw{constructor(e){super(e),this.uuid=al(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,s=this.holes.length;n<s;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(new Aw().fromJSON(s))}return this}}function gW(i,e,t=2){const n=e&&e.length,s=n?e[0]*t:i.length;let r=VG(i,0,s,t,!0);const a=[];if(!r||r.next===r.prev)return a;let o,c,h;if(n&&(r=bW(i,e,r,t)),i.length>80*t){o=1/0,c=1/0;let d=-1/0,m=-1/0;for(let v=t;v<s;v+=t){const y=i[v],A=i[v+1];y<o&&(o=y),A<c&&(c=A),y>d&&(d=y),A>m&&(m=A)}h=Math.max(d-o,m-c),h=h!==0?32767/h:0}return sS(r,a,t,o,c,h,0),a}function VG(i,e,t,n,s){let r;if(s===LW(i,e,t,n)>0)for(let a=e;a<t;a+=n)r=EU(a/n|0,i[a],i[a+1],r);else for(let a=t-n;a>=e;a-=n)r=EU(a/n|0,i[a],i[a+1],r);return r&&nA(r,r.next)&&(aS(r),r=r.next),r}function Tv(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(nA(t,t.next)||Rs(t.prev,t,t.next)===0)){if(aS(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function sS(i,e,t,n,s,r,a){if(!i)return;!a&&r&&TW(i,n,s,r);let o=i;for(;i.prev!==i.next;){const c=i.prev,h=i.next;if(r?yW(i,n,s,r):vW(i)){e.push(c.i,i.i,h.i),aS(i),i=h.next,o=h.next;continue}if(i=h,i===o){a?a===1?(i=_W(Tv(i),e),sS(i,e,t,n,s,r,2)):a===2&&AW(i,e,t,n,s,r):sS(Tv(i),e,t,n,s,r,1);break}}}function vW(i){const e=i.prev,t=i,n=i.next;if(Rs(e,t,n)>=0)return!1;const s=e.x,r=t.x,a=n.x,o=e.y,c=t.y,h=n.y,d=Math.min(s,r,a),m=Math.min(o,c,h),v=Math.max(s,r,a),y=Math.max(o,c,h);let A=n.next;for(;A!==e;){if(A.x>=d&&A.x<=v&&A.y>=m&&A.y<=y&&ux(s,o,r,c,a,h,A.x,A.y)&&Rs(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function yW(i,e,t,n){const s=i.prev,r=i,a=i.next;if(Rs(s,r,a)>=0)return!1;const o=s.x,c=r.x,h=a.x,d=s.y,m=r.y,v=a.y,y=Math.min(o,c,h),A=Math.min(d,m,v),E=Math.max(o,c,h),M=Math.max(d,m,v),x=mL(y,A,e,t,n),w=mL(E,M,e,t,n);let R=i.prevZ,D=i.nextZ;for(;R&&R.z>=x&&D&&D.z<=w;){if(R.x>=y&&R.x<=E&&R.y>=A&&R.y<=M&&R!==s&&R!==a&&ux(o,d,c,m,h,v,R.x,R.y)&&Rs(R.prev,R,R.next)>=0||(R=R.prevZ,D.x>=y&&D.x<=E&&D.y>=A&&D.y<=M&&D!==s&&D!==a&&ux(o,d,c,m,h,v,D.x,D.y)&&Rs(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;R&&R.z>=x;){if(R.x>=y&&R.x<=E&&R.y>=A&&R.y<=M&&R!==s&&R!==a&&ux(o,d,c,m,h,v,R.x,R.y)&&Rs(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;D&&D.z<=w;){if(D.x>=y&&D.x<=E&&D.y>=A&&D.y<=M&&D!==s&&D!==a&&ux(o,d,c,m,h,v,D.x,D.y)&&Rs(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function _W(i,e){let t=i;do{const n=t.prev,s=t.next.next;!nA(n,s)&&XG(n,t,t.next,s)&&rS(n,s)&&rS(s,n)&&(e.push(n.i,t.i,s.i),aS(t),aS(t.next),t=i=s),t=t.next}while(t!==i);return Tv(t)}function AW(i,e,t,n,s,r){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&RW(a,o)){let c=qG(a,o);a=Tv(a,a.next),c=Tv(c,c.next),sS(a,e,t,n,s,r,0),sS(c,e,t,n,s,r,0);return}o=o.next}a=a.next}while(a!==i)}function bW(i,e,t,n){const s=[];for(let r=0,a=e.length;r<a;r++){const o=e[r]*n,c=r<a-1?e[r+1]*n:i.length,h=VG(i,o,c,n,!1);h===h.next&&(h.steiner=!0),s.push(wW(h))}s.sort(xW);for(let r=0;r<s.length;r++)t=SW(s[r],t);return t}function xW(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(e.next.y-e.y)/(e.next.x-e.x);t=n-s}return t}function SW(i,e){const t=EW(i,e);if(!t)return e;const n=qG(t,i);return Tv(n,n.next),Tv(t,t.next)}function EW(i,e){let t=e;const n=i.x,s=i.y;let r=-1/0,a;if(nA(i,t))return t;do{if(nA(i,t.next))return t.next;if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const m=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=n&&m>r&&(r=m,a=t.x<t.next.x?t:t.next,m===n))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,c=a.x,h=a.y;let d=1/0;t=a;do{if(n>=t.x&&t.x>=c&&n!==t.x&&jG(s<h?n:r,s,c,h,s<h?r:n,s,t.x,t.y)){const m=Math.abs(s-t.y)/(n-t.x);rS(t,i)&&(m<d||m===d&&(t.x>a.x||t.x===a.x&&MW(a,t)))&&(a=t,d=m)}t=t.next}while(t!==o);return a}function MW(i,e){return Rs(i.prev,i,e.prev)<0&&Rs(e.next,i,i.next)<0}function TW(i,e,t,n){let s=i;do s.z===0&&(s.z=mL(s.x,s.y,e,t,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,CW(s)}function CW(i){let e,t=1;do{let n=i,s;i=null;let r=null;for(e=0;n;){e++;let a=n,o=0;for(let h=0;h<t&&(o++,a=a.nextZ,!!a);h++);let c=t;for(;o>0||c>0&&a;)o!==0&&(c===0||!a||n.z<=a.z)?(s=n,n=n.nextZ,o--):(s=a,a=a.nextZ,c--),r?r.nextZ=s:i=s,s.prevZ=r,r=s;n=a}r.nextZ=null,t*=2}while(e>1);return i}function mL(i,e,t,n,s){return i=(i-t)*s|0,e=(e-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function wW(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function jG(i,e,t,n,s,r,a,o){return(s-a)*(e-o)>=(i-a)*(r-o)&&(i-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(r-o)>=(s-a)*(n-o)}function ux(i,e,t,n,s,r,a,o){return!(i===a&&e===o)&&jG(i,e,t,n,s,r,a,o)}function RW(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!DW(i,e)&&(rS(i,e)&&rS(e,i)&&BW(i,e)&&(Rs(i.prev,i,e.prev)||Rs(i,e.prev,e))||nA(i,e)&&Rs(i.prev,i,i.next)>0&&Rs(e.prev,e,e.next)>0)}function Rs(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function nA(i,e){return i.x===e.x&&i.y===e.y}function XG(i,e,t,n){const s=ST(Rs(i,e,t)),r=ST(Rs(i,e,n)),a=ST(Rs(t,n,i)),o=ST(Rs(t,n,e));return!!(s!==r&&a!==o||s===0&&xT(i,t,e)||r===0&&xT(i,n,e)||a===0&&xT(t,i,n)||o===0&&xT(t,e,n))}function xT(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function ST(i){return i>0?1:i<0?-1:0}function DW(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&XG(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function rS(i,e){return Rs(i.prev,i,i.next)<0?Rs(i,e,i.next)>=0&&Rs(i,i.prev,e)>=0:Rs(i,e,i.prev)<0||Rs(i,i.next,e)<0}function BW(i,e){let t=i,n=!1;const s=(i.x+e.x)/2,r=(i.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function qG(i,e){const t=gL(i.i,i.x,i.y),n=gL(e.i,e.x,e.y),s=i.next,r=e.prev;return i.next=e,e.prev=i,t.next=s,s.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}function EU(i,e,t,n){const s=gL(i,e,t);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function aS(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function gL(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function LW(i,e,t,n){let s=0;for(let r=e,a=t-n;r<t;r+=n)s+=(i[a]-i[r])*(i[r+1]+i[a+1]),a=r;return s}class NW{static triangulate(e,t,n=2){return gW(e,t,n)}}class Jc{static area(e){const t=e.length;let n=0;for(let s=t-1,r=0;r<t;s=r++)n+=e[s].x*e[r].y-e[r].x*e[s].y;return n*.5}static isClockWise(e){return Jc.area(e)<0}static triangulateShape(e,t){const n=[],s=[],r=[];MU(e),TU(n,e);let a=e.length;t.forEach(MU);for(let c=0;c<t.length;c++)s.push(a),a+=t[c].length,TU(n,t[c]);const o=NW.triangulate(n,s);for(let c=0;c<o.length;c+=3)r.push(o.slice(c,c+3));return r}}function MU(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function TU(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class VR extends En{constructor(e=new _v([new Ke(.5,.5),new Ke(-.5,.5),new Ke(-.5,-.5),new Ke(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,s=[],r=[];for(let o=0,c=e.length;o<c;o++){const h=e[o];a(h)}this.setAttribute("position",new Yt(s,3)),this.setAttribute("uv",new Yt(r,2)),this.computeVertexNormals();function a(o){const c=[],h=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,A=t.bevelSize!==void 0?t.bevelSize:y-.1,E=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:IW;let R,D=!1,P,I,H,U;x&&(R=x.getSpacedPoints(d),D=!0,v=!1,P=x.computeFrenetFrames(d,!1),I=new ae,H=new ae,U=new ae),v||(M=0,y=0,A=0,E=0);const N=o.extractPoints(h);let O=N.shape;const G=N.holes;if(!Jc.isClockWise(O)){O=O.reverse();for(let $=0,$e=G.length;$<$e;$++){const Ie=G[$];Jc.isClockWise(Ie)&&(G[$]=Ie.reverse())}}function se($){const Ie=10000000000000001e-36;let ke=$[0];for(let We=1;We<=$.length;We++){const St=We%$.length,nt=$[St],re=nt.x-ke.x,J=nt.y-ke.y,Te=re*re+J*J,Ye=Math.max(Math.abs(nt.x),Math.abs(nt.y),Math.abs(ke.x),Math.abs(ke.y)),st=Ie*Ye*Ye;if(Te<=st){$.splice(St,1),We--;continue}ke=nt}}se(O),G.forEach(se);const le=G.length,ue=O;for(let $=0;$<le;$++){const $e=G[$];O=O.concat($e)}function z($,$e,Ie){return $e||console.error("THREE.ExtrudeGeometry: vec does not exist"),$.clone().addScaledVector($e,Ie)}const K=O.length;function Q($,$e,Ie){let ke,We,St;const nt=$.x-$e.x,re=$.y-$e.y,J=Ie.x-$.x,Te=Ie.y-$.y,Ye=nt*nt+re*re,st=nt*Te-re*J;if(Math.abs(st)>Number.EPSILON){const je=Math.sqrt(Ye),pt=Math.sqrt(J*J+Te*Te),vt=$e.x-re/je,Mt=$e.y+nt/je,kt=Ie.x-Te/pt,dt=Ie.y+J/pt,Dt=((kt-vt)*Te-(dt-Mt)*J)/(nt*Te-re*J);ke=vt+nt*Dt-$.x,We=Mt+re*Dt-$.y;const Ot=ke*ke+We*We;if(Ot<=2)return new Ke(ke,We);St=Math.sqrt(Ot/2)}else{let je=!1;nt>Number.EPSILON?J>Number.EPSILON&&(je=!0):nt<-Number.EPSILON?J<-Number.EPSILON&&(je=!0):Math.sign(re)===Math.sign(Te)&&(je=!0),je?(ke=-re,We=nt,St=Math.sqrt(Ye)):(ke=nt,We=re,St=Math.sqrt(Ye/2))}return new Ke(ke/St,We/St)}const de=[];for(let $=0,$e=ue.length,Ie=$e-1,ke=$+1;$<$e;$++,Ie++,ke++)Ie===$e&&(Ie=0),ke===$e&&(ke=0),de[$]=Q(ue[$],ue[Ie],ue[ke]);const W=[];let he,xe=de.concat();for(let $=0,$e=le;$<$e;$++){const Ie=G[$];he=[];for(let ke=0,We=Ie.length,St=We-1,nt=ke+1;ke<We;ke++,St++,nt++)St===We&&(St=0),nt===We&&(nt=0),he[ke]=Q(Ie[ke],Ie[St],Ie[nt]);W.push(he),xe=xe.concat(he)}let ye;if(M===0)ye=Jc.triangulateShape(ue,G);else{const $=[],$e=[];for(let Ie=0;Ie<M;Ie++){const ke=Ie/M,We=y*Math.cos(ke*Math.PI/2),St=A*Math.sin(ke*Math.PI/2)+E;for(let nt=0,re=ue.length;nt<re;nt++){const J=z(ue[nt],de[nt],St);xt(J.x,J.y,-We),ke===0&&$.push(J)}for(let nt=0,re=le;nt<re;nt++){const J=G[nt];he=W[nt];const Te=[];for(let Ye=0,st=J.length;Ye<st;Ye++){const je=z(J[Ye],he[Ye],St);xt(je.x,je.y,-We),ke===0&&Te.push(je)}ke===0&&$e.push(Te)}}ye=Jc.triangulateShape($,$e)}const fe=ye.length,De=A+E;for(let $=0;$<K;$++){const $e=v?z(O[$],xe[$],De):O[$];D?(H.copy(P.normals[0]).multiplyScalar($e.x),I.copy(P.binormals[0]).multiplyScalar($e.y),U.copy(R[0]).add(H).add(I),xt(U.x,U.y,U.z)):xt($e.x,$e.y,0)}for(let $=1;$<=d;$++)for(let $e=0;$e<K;$e++){const Ie=v?z(O[$e],xe[$e],De):O[$e];D?(H.copy(P.normals[$]).multiplyScalar(Ie.x),I.copy(P.binormals[$]).multiplyScalar(Ie.y),U.copy(R[$]).add(H).add(I),xt(U.x,U.y,U.z)):xt(Ie.x,Ie.y,m/d*$)}for(let $=M-1;$>=0;$--){const $e=$/M,Ie=y*Math.cos($e*Math.PI/2),ke=A*Math.sin($e*Math.PI/2)+E;for(let We=0,St=ue.length;We<St;We++){const nt=z(ue[We],de[We],ke);xt(nt.x,nt.y,m+Ie)}for(let We=0,St=G.length;We<St;We++){const nt=G[We];he=W[We];for(let re=0,J=nt.length;re<J;re++){const Te=z(nt[re],he[re],ke);D?xt(Te.x,Te.y+R[d-1].y,R[d-1].x+Ie):xt(Te.x,Te.y,m+Ie)}}}Ce(),Ue();function Ce(){const $=s.length/3;if(v){let $e=0,Ie=K*$e;for(let ke=0;ke<fe;ke++){const We=ye[ke];lt(We[2]+Ie,We[1]+Ie,We[0]+Ie)}$e=d+M*2,Ie=K*$e;for(let ke=0;ke<fe;ke++){const We=ye[ke];lt(We[0]+Ie,We[1]+Ie,We[2]+Ie)}}else{for(let $e=0;$e<fe;$e++){const Ie=ye[$e];lt(Ie[2],Ie[1],Ie[0])}for(let $e=0;$e<fe;$e++){const Ie=ye[$e];lt(Ie[0]+K*d,Ie[1]+K*d,Ie[2]+K*d)}}n.addGroup($,s.length/3-$,0)}function Ue(){const $=s.length/3;let $e=0;Qe(ue,$e),$e+=ue.length;for(let Ie=0,ke=G.length;Ie<ke;Ie++){const We=G[Ie];Qe(We,$e),$e+=We.length}n.addGroup($,s.length/3-$,1)}function Qe($,$e){let Ie=$.length;for(;--Ie>=0;){const ke=Ie;let We=Ie-1;We<0&&(We=$.length-1);for(let St=0,nt=d+M*2;St<nt;St++){const re=K*St,J=K*(St+1),Te=$e+ke+re,Ye=$e+We+re,st=$e+We+J,je=$e+ke+J;mt(Te,Ye,st,je)}}}function xt($,$e,Ie){c.push($),c.push($e),c.push(Ie)}function lt($,$e,Ie){it($),it($e),it(Ie);const ke=s.length/3,We=w.generateTopUV(n,s,ke-3,ke-2,ke-1);et(We[0]),et(We[1]),et(We[2])}function mt($,$e,Ie,ke){it($),it($e),it(ke),it($e),it(Ie),it(ke);const We=s.length/3,St=w.generateSideWallUV(n,s,We-6,We-3,We-2,We-1);et(St[0]),et(St[1]),et(St[3]),et(St[1]),et(St[2]),et(St[3])}function it($){s.push(c[$*3+0]),s.push(c[$*3+1]),s.push(c[$*3+2])}function et($){r.push($.x),r.push($.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return PW(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,a=e.shapes.length;r<a;r++){const o=t[e.shapes[r]];n.push(o)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new _w[s.type]().fromJSON(s)),new VR(n,e.options)}}const IW={generateTopUV:function(i,e,t,n,s){const r=e[t*3],a=e[t*3+1],o=e[n*3],c=e[n*3+1],h=e[s*3],d=e[s*3+1];return[new Ke(r,a),new Ke(o,c),new Ke(h,d)]},generateSideWallUV:function(i,e,t,n,s,r){const a=e[t*3],o=e[t*3+1],c=e[t*3+2],h=e[n*3],d=e[n*3+1],m=e[n*3+2],v=e[s*3],y=e[s*3+1],A=e[s*3+2],E=e[r*3],M=e[r*3+1],x=e[r*3+2];return Math.abs(o-d)<Math.abs(a-h)?[new Ke(a,1-c),new Ke(h,1-m),new Ke(v,1-A),new Ke(E,1-x)]:[new Ke(o,1-c),new Ke(d,1-m),new Ke(y,1-A),new Ke(M,1-x)]}};function PW(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const r=i[n];t.shapes.push(r.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class ZE extends jp{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ZE(e.radius,e.detail)}}class jR extends En{constructor(e=[new Ke(0,-.5),new Ke(.5,0),new Ke(0,.5)],t=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:s},t=Math.floor(t),s=Cn(s,0,Math.PI*2);const r=[],a=[],o=[],c=[],h=[],d=1/t,m=new ae,v=new Ke,y=new ae,A=new ae,E=new ae;let M=0,x=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:M=e[w+1].x-e[w].x,x=e[w+1].y-e[w].y,y.x=x*1,y.y=-M,y.z=x*0,E.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(E.x,E.y,E.z);break;default:M=e[w+1].x-e[w].x,x=e[w+1].y-e[w].y,y.x=x*1,y.y=-M,y.z=x*0,A.copy(y),y.x+=E.x,y.y+=E.y,y.z+=E.z,y.normalize(),c.push(y.x,y.y,y.z),E.copy(A)}for(let w=0;w<=t;w++){const R=n+w*d*s,D=Math.sin(R),P=Math.cos(R);for(let I=0;I<=e.length-1;I++){m.x=e[I].x*D,m.y=e[I].y,m.z=e[I].x*P,a.push(m.x,m.y,m.z),v.x=w/t,v.y=I/(e.length-1),o.push(v.x,v.y);const H=c[3*I+0]*D,U=c[3*I+1],N=c[3*I+0]*P;h.push(H,U,N)}}for(let w=0;w<t;w++)for(let R=0;R<e.length-1;R++){const D=R+w*e.length,P=D,I=D+e.length,H=D+e.length+1,U=D+1;r.push(P,I,U),r.push(H,U,I)}this.setIndex(r),this.setAttribute("position",new Yt(a,3)),this.setAttribute("uv",new Yt(o,2)),this.setAttribute("normal",new Yt(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jR(e.points,e.segments,e.phiStart,e.phiLength)}}class QE extends jp{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new QE(e.radius,e.detail)}}class jf extends En{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const r=e/2,a=t/2,o=Math.floor(n),c=Math.floor(s),h=o+1,d=c+1,m=e/o,v=t/c,y=[],A=[],E=[],M=[];for(let x=0;x<d;x++){const w=x*v-a;for(let R=0;R<h;R++){const D=R*m-r;A.push(D,-w,0),E.push(0,0,1),M.push(R/o),M.push(1-x/c)}}for(let x=0;x<c;x++)for(let w=0;w<o;w++){const R=w+h*x,D=w+h*(x+1),P=w+1+h*(x+1),I=w+1+h*x;y.push(R,D,I),y.push(D,P,I)}this.setIndex(y),this.setAttribute("position",new Yt(A,3)),this.setAttribute("normal",new Yt(E,3)),this.setAttribute("uv",new Yt(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jf(e.width,e.height,e.widthSegments,e.heightSegments)}}class XR extends En{constructor(e=.5,t=1,n=32,s=1,r=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:s,thetaStart:r,thetaLength:a},n=Math.max(3,n),s=Math.max(1,s);const o=[],c=[],h=[],d=[];let m=e;const v=(t-e)/s,y=new ae,A=new Ke;for(let E=0;E<=s;E++){for(let M=0;M<=n;M++){const x=r+M/n*a;y.x=m*Math.cos(x),y.y=m*Math.sin(x),c.push(y.x,y.y,y.z),h.push(0,0,1),A.x=(y.x/t+1)/2,A.y=(y.y/t+1)/2,d.push(A.x,A.y)}m+=v}for(let E=0;E<s;E++){const M=E*(n+1);for(let x=0;x<n;x++){const w=x+M,R=w,D=w+n+1,P=w+n+2,I=w+1;o.push(R,D,I),o.push(D,P,I)}}this.setIndex(o),this.setAttribute("position",new Yt(c,3)),this.setAttribute("normal",new Yt(h,3)),this.setAttribute("uv",new Yt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new XR(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class qR extends En{constructor(e=new _v([new Ke(0,.5),new Ke(-.5,-.5),new Ke(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],s=[],r=[],a=[];let o=0,c=0;if(Array.isArray(e)===!1)h(e);else for(let d=0;d<e.length;d++)h(e[d]),this.addGroup(o,c,d),o+=c,c=0;this.setIndex(n),this.setAttribute("position",new Yt(s,3)),this.setAttribute("normal",new Yt(r,3)),this.setAttribute("uv",new Yt(a,2));function h(d){const m=s.length/3,v=d.extractPoints(t);let y=v.shape;const A=v.holes;Jc.isClockWise(y)===!1&&(y=y.reverse());for(let M=0,x=A.length;M<x;M++){const w=A[M];Jc.isClockWise(w)===!0&&(A[M]=w.reverse())}const E=Jc.triangulateShape(y,A);for(let M=0,x=A.length;M<x;M++){const w=A[M];y=y.concat(w)}for(let M=0,x=y.length;M<x;M++){const w=y[M];s.push(w.x,w.y,0),r.push(0,0,1),a.push(w.x,w.y)}for(let M=0,x=E.length;M<x;M++){const w=E[M],R=w[0]+m,D=w[1]+m,P=w[2]+m;n.push(R,D,P),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return OW(t,e)}static fromJSON(e,t){const n=[];for(let s=0,r=e.shapes.length;s<r;s++){const a=t[e.shapes[s]];n.push(a)}return new qR(n,e.curveSegments)}}function OW(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const s=i[t];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}class $E extends En{constructor(e=1,t=32,n=16,s=0,r=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:r,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const c=Math.min(a+o,Math.PI);let h=0;const d=[],m=new ae,v=new ae,y=[],A=[],E=[],M=[];for(let x=0;x<=n;x++){const w=[],R=x/n;let D=0;x===0&&a===0?D=.5/t:x===n&&c===Math.PI&&(D=-.5/t);for(let P=0;P<=t;P++){const I=P/t;m.x=-e*Math.cos(s+I*r)*Math.sin(a+R*o),m.y=e*Math.cos(a+R*o),m.z=e*Math.sin(s+I*r)*Math.sin(a+R*o),A.push(m.x,m.y,m.z),v.copy(m).normalize(),E.push(v.x,v.y,v.z),M.push(I+D,1-R),w.push(h++)}d.push(w)}for(let x=0;x<n;x++)for(let w=0;w<t;w++){const R=d[x][w+1],D=d[x][w],P=d[x+1][w],I=d[x+1][w+1];(x!==0||a>0)&&y.push(R,D,I),(x!==n-1||c<Math.PI)&&y.push(D,P,I)}this.setIndex(y),this.setAttribute("position",new Yt(A,3)),this.setAttribute("normal",new Yt(E,3)),this.setAttribute("uv",new Yt(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $E(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class YR extends jp{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new YR(e.radius,e.detail)}}class WR extends En{constructor(e=1,t=.4,n=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:s,arc:r},n=Math.floor(n),s=Math.floor(s);const a=[],o=[],c=[],h=[],d=new ae,m=new ae,v=new ae;for(let y=0;y<=n;y++)for(let A=0;A<=s;A++){const E=A/s*r,M=y/n*Math.PI*2;m.x=(e+t*Math.cos(M))*Math.cos(E),m.y=(e+t*Math.cos(M))*Math.sin(E),m.z=t*Math.sin(M),o.push(m.x,m.y,m.z),d.x=e*Math.cos(E),d.y=e*Math.sin(E),v.subVectors(m,d).normalize(),c.push(v.x,v.y,v.z),h.push(A/s),h.push(y/n)}for(let y=1;y<=n;y++)for(let A=1;A<=s;A++){const E=(s+1)*y+A-1,M=(s+1)*(y-1)+A-1,x=(s+1)*(y-1)+A,w=(s+1)*y+A;a.push(E,M,w),a.push(M,x,w)}this.setIndex(a),this.setAttribute("position",new Yt(o,3)),this.setAttribute("normal",new Yt(c,3)),this.setAttribute("uv",new Yt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new WR(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class KR extends En{constructor(e=1,t=.4,n=64,s=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:s,p:r,q:a},n=Math.floor(n),s=Math.floor(s);const o=[],c=[],h=[],d=[],m=new ae,v=new ae,y=new ae,A=new ae,E=new ae,M=new ae,x=new ae;for(let R=0;R<=n;++R){const D=R/n*r*Math.PI*2;w(D,r,a,e,y),w(D+.01,r,a,e,A),M.subVectors(A,y),x.addVectors(A,y),E.crossVectors(M,x),x.crossVectors(E,M),E.normalize(),x.normalize();for(let P=0;P<=s;++P){const I=P/s*Math.PI*2,H=-t*Math.cos(I),U=t*Math.sin(I);m.x=y.x+(H*x.x+U*E.x),m.y=y.y+(H*x.y+U*E.y),m.z=y.z+(H*x.z+U*E.z),c.push(m.x,m.y,m.z),v.subVectors(m,y).normalize(),h.push(v.x,v.y,v.z),d.push(R/n),d.push(P/s)}}for(let R=1;R<=n;R++)for(let D=1;D<=s;D++){const P=(s+1)*(R-1)+(D-1),I=(s+1)*R+(D-1),H=(s+1)*R+D,U=(s+1)*(R-1)+D;o.push(P,I,U),o.push(I,H,U)}this.setIndex(o),this.setAttribute("position",new Yt(c,3)),this.setAttribute("normal",new Yt(h,3)),this.setAttribute("uv",new Yt(d,2));function w(R,D,P,I,H){const U=Math.cos(R),N=Math.sin(R),O=P/D*R,G=Math.cos(O);H.x=I*(2+G)*.5*U,H.y=I*(2+G)*N*.5,H.z=I*Math.sin(O)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new KR(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class JR extends En{constructor(e=new $I(new ae(-1,-1,0),new ae(-1,1,0),new ae(1,1,0)),t=64,n=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:s,closed:r};const a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new ae,c=new ae,h=new Ke;let d=new ae;const m=[],v=[],y=[],A=[];E(),this.setIndex(A),this.setAttribute("position",new Yt(m,3)),this.setAttribute("normal",new Yt(v,3)),this.setAttribute("uv",new Yt(y,2));function E(){for(let R=0;R<t;R++)M(R);M(r===!1?t:0),w(),x()}function M(R){d=e.getPointAt(R/t,d);const D=a.normals[R],P=a.binormals[R];for(let I=0;I<=s;I++){const H=I/s*Math.PI*2,U=Math.sin(H),N=-Math.cos(H);c.x=N*D.x+U*P.x,c.y=N*D.y+U*P.y,c.z=N*D.z+U*P.z,c.normalize(),v.push(c.x,c.y,c.z),o.x=d.x+n*c.x,o.y=d.y+n*c.y,o.z=d.z+n*c.z,m.push(o.x,o.y,o.z)}}function x(){for(let R=1;R<=t;R++)for(let D=1;D<=s;D++){const P=(s+1)*(R-1)+(D-1),I=(s+1)*R+(D-1),H=(s+1)*R+D,U=(s+1)*(R-1)+D;A.push(P,I,U),A.push(I,H,U)}}function w(){for(let R=0;R<=t;R++)for(let D=0;D<=s;D++)h.x=R/t,h.y=D/s,y.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new JR(new _w[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class YG extends En{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,s=new ae,r=new ae;if(e.index!==null){const a=e.attributes.position,o=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:o.count,materialIndex:0}]);for(let h=0,d=c.length;h<d;++h){const m=c[h],v=m.start,y=m.count;for(let A=v,E=v+y;A<E;A+=3)for(let M=0;M<3;M++){const x=o.getX(A+M),w=o.getX(A+(M+1)%3);s.fromBufferAttribute(a,x),r.fromBufferAttribute(a,w),CU(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}}else{const a=e.attributes.position;for(let o=0,c=a.count/3;o<c;o++)for(let h=0;h<3;h++){const d=3*o+h,m=3*o+(h+1)%3;s.fromBufferAttribute(a,d),r.fromBufferAttribute(a,m),CU(s,r,n)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new Yt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function CU(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(s)===!0?!1:(t.add(n),t.add(s),!0)}var wU=Object.freeze({__proto__:null,BoxGeometry:kv,CapsuleGeometry:HR,CircleGeometry:zR,ConeGeometry:JE,CylinderGeometry:KE,DodecahedronGeometry:GR,EdgesGeometry:UG,ExtrudeGeometry:VR,IcosahedronGeometry:ZE,LatheGeometry:jR,OctahedronGeometry:QE,PlaneGeometry:jf,PolyhedronGeometry:jp,RingGeometry:XR,ShapeGeometry:qR,SphereGeometry:$E,TetrahedronGeometry:YR,TorusGeometry:WR,TorusKnotGeometry:KR,TubeGeometry:JR,WireframeGeometry:YG});class WG extends Ys{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Bt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class KG extends Xi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class gA extends Ys{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vp,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new cl,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Zl extends gA{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ke(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Cn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class JG extends Ys{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Bt(16777215),this.specular=new Bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vp,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new cl,this.combine=HE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ZG extends Ys{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vp,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class t3 extends Ys{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vp,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class QG extends Ys{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vp,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new cl,this.combine=HE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ZR extends Ys{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=vh,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class n3 extends Ys{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class $G extends Ys{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vp,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ek extends Na{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function gg(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function tk(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function nk(i){function e(s,r){return i[s]-i[r]}const t=i.length,n=new Array(t);for(let s=0;s!==t;++s)n[s]=s;return n.sort(e),n}function vL(i,e,t){const n=i.length,s=new i.constructor(n);for(let r=0,a=0;a!==n;++r){const o=t[r]*e;for(let c=0;c!==e;++c)s[a++]=i[o+c]}return s}function i3(i,e,t,n){let s=1,r=i[0];for(;r!==void 0&&r[n]===void 0;)r=i[s++];if(r===void 0)return;let a=r[n];if(a!==void 0)if(Array.isArray(a))do a=r[n],a!==void 0&&(e.push(r.time),t.push(...a)),r=i[s++];while(r!==void 0);else if(a.toArray!==void 0)do a=r[n],a!==void 0&&(e.push(r.time),a.toArray(t,t.length)),r=i[s++];while(r!==void 0);else do a=r[n],a!==void 0&&(e.push(r.time),t.push(a)),r=i[s++];while(r!==void 0)}function UW(i,e,t,n,s=30){const r=i.clone();r.name=e;const a=[];for(let c=0;c<r.tracks.length;++c){const h=r.tracks[c],d=h.getValueSize(),m=[],v=[];for(let y=0;y<h.times.length;++y){const A=h.times[y]*s;if(!(A<t||A>=n)){m.push(h.times[y]);for(let E=0;E<d;++E)v.push(h.values[y*d+E])}}m.length!==0&&(h.times=gg(m,h.times.constructor),h.values=gg(v,h.values.constructor),a.push(h))}r.tracks=a;let o=1/0;for(let c=0;c<r.tracks.length;++c)o>r.tracks[c].times[0]&&(o=r.tracks[c].times[0]);for(let c=0;c<r.tracks.length;++c)r.tracks[c].shift(-1*o);return r.resetDuration(),r}function FW(i,e=0,t=i,n=30){n<=0&&(n=30);const s=t.tracks.length,r=e/n;for(let a=0;a<s;++a){const o=t.tracks[a],c=o.ValueTypeName;if(c==="bool"||c==="string")continue;const h=i.tracks.find(function(x){return x.name===o.name&&x.ValueTypeName===c});if(h===void 0)continue;let d=0;const m=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);let v=0;const y=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const A=o.times.length-1;let E;if(r<=o.times[0]){const x=d,w=m-d;E=o.values.slice(x,w)}else if(r>=o.times[A]){const x=A*m+d,w=x+m-d;E=o.values.slice(x,w)}else{const x=o.createInterpolant(),w=d,R=m-d;x.evaluate(r),E=x.resultBuffer.slice(w,R)}c==="quaternion"&&new Gr().fromArray(E).normalize().conjugate().toArray(E);const M=h.times.length;for(let x=0;x<M;++x){const w=x*y+v;if(c==="quaternion")Gr.multiplyQuaternionsFlat(h.values,w,E,0,h.values,w);else{const R=y-v*2;for(let D=0;D<R;++D)h.values[w+D]-=E[D]}}}return i.blendMode=UI,i}class HW{static convertArray(e,t){return gg(e,t)}static isTypedArray(e){return tk(e)}static getKeyframeOrder(e){return nk(e)}static sortedArray(e,t,n){return vL(e,t,n)}static flattenJSON(e,t,n,s){i3(e,t,n,s)}static subclip(e,t,n,s,r=30){return UW(e,t,n,s,r)}static makeClipAdditive(e,t=0,n=e,s=30){return FW(e,t,n,s)}}class vA{constructor(e,t,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,s=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<s)){for(let o=n+2;;){if(s===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=s,s=t[++n],e<s)break t}a=t.length;break n}if(!(e>=r)){const o=t[1];e<o&&(n=2,r=o);for(let c=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(s=r,r=t[--n-1],e>=r)break t}a=n,n=0;break n}break e}for(;n<a;){const o=n+a>>>1;e<t[o]?a=o:n=o+1}if(s=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,s)}return this.interpolate_(n,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s;for(let a=0;a!==s;++a)t[a]=n[r+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ik extends vA{constructor(e,t,n,s){super(e,t,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:dg,endingEnd:dg}}intervalChanged_(e,t,n){const s=this.parameterPositions;let r=e-2,a=e+1,o=s[r],c=s[a];if(o===void 0)switch(this.getSettings_().endingStart){case pg:r=e,o=2*t-n;break;case $x:r=s.length-2,o=t+s[r]-s[r+1];break;default:r=e,o=n}if(c===void 0)switch(this.getSettings_().endingEnd){case pg:a=e,c=2*n-t;break;case $x:a=1,c=n+s[1]-s[0];break;default:a=e-1,c=t}const h=(n-t)*.5,d=this.valueSize;this._weightPrev=h/(t-o),this._weightNext=h/(c-n),this._offsetPrev=r*d,this._offsetNext=a*d}interpolate_(e,t,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=e*o,h=c-o,d=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,y=this._weightNext,A=(n-t)/(s-t),E=A*A,M=E*A,x=-v*M+2*v*E-v*A,w=(1+v)*M+(-1.5-2*v)*E+(-.5+v)*A+1,R=(-1-y)*M+(1.5+y)*E+.5*A,D=y*M-y*E;for(let P=0;P!==o;++P)r[P]=x*a[d+P]+w*a[h+P]+R*a[c+P]+D*a[m+P];return r}}class s3 extends vA{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=e*o,h=c-o,d=(n-t)/(s-t),m=1-d;for(let v=0;v!==o;++v)r[v]=a[h+v]*m+a[c+v]*d;return r}}class sk extends vA{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ql{constructor(e,t,n,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gg(t,this.TimeBufferType),this.values=gg(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:gg(e.times,Array),values:gg(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(n.interpolation=s)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new sk(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new s3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ik(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Z_:t=this.InterpolantFactoryMethodDiscrete;break;case Q_:t=this.InterpolantFactoryMethodLinear;break;case ZT:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Z_;case this.InterpolantFactoryMethodLinear:return Q_;case this.InterpolantFactoryMethodSmooth:return ZT}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]*=e}return this}trim(e,t){const n=this.times,s=n.length;let r=0,a=s-1;for(;r!==s&&n[r]<e;)++r;for(;a!==-1&&n[a]>t;)--a;if(++a,r!==0||a!==s){r>=a&&(a=Math.max(a,1),r=a-1);const o=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,s=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==r;o++){const c=n[o];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,c),e=!1;break}if(a!==null&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,c,a),e=!1;break}a=c}if(s!==void 0&&tk(s))for(let o=0,c=s.length;o!==c;++o){const h=s[o];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===ZT,r=e.length-1;let a=1;for(let o=1;o<r;++o){let c=!1;const h=e[o],d=e[o+1];if(h!==d&&(o!==1||h!==e[0]))if(s)c=!0;else{const m=o*n,v=m-n,y=m+n;for(let A=0;A!==n;++A){const E=t[m+A];if(E!==t[v+A]||E!==t[y+A]){c=!0;break}}}if(c){if(o!==a){e[a]=e[o];const m=o*n,v=a*n;for(let y=0;y!==n;++y)t[v+y]=t[m+y]}++a}}if(r>0){e[a]=e[r];for(let o=r*n,c=a*n,h=0;h!==n;++h)t[c+h]=t[o+h];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,s=new n(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Ql.prototype.ValueTypeName="";Ql.prototype.TimeBufferType=Float32Array;Ql.prototype.ValueBufferType=Float32Array;Ql.prototype.DefaultInterpolation=Q_;class Vv extends Ql{constructor(e,t,n){super(e,t,n)}}Vv.prototype.ValueTypeName="bool";Vv.prototype.ValueBufferType=Array;Vv.prototype.DefaultInterpolation=Z_;Vv.prototype.InterpolantFactoryMethodLinear=void 0;Vv.prototype.InterpolantFactoryMethodSmooth=void 0;class r3 extends Ql{constructor(e,t,n,s){super(e,t,n,s)}}r3.prototype.ValueTypeName="color";class Cv extends Ql{constructor(e,t,n,s){super(e,t,n,s)}}Cv.prototype.ValueTypeName="number";class rk extends vA{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=(n-t)/(s-t);let h=e*o;for(let d=h+o;h!==d;h+=4)Gr.slerpFlat(r,0,a,h-o,a,h,c);return r}}class wv extends Ql{constructor(e,t,n,s){super(e,t,n,s)}InterpolantFactoryMethodLinear(e){return new rk(this.times,this.values,this.getValueSize(),e)}}wv.prototype.ValueTypeName="quaternion";wv.prototype.InterpolantFactoryMethodSmooth=void 0;class jv extends Ql{constructor(e,t,n){super(e,t,n)}}jv.prototype.ValueTypeName="string";jv.prototype.ValueBufferType=Array;jv.prototype.DefaultInterpolation=Z_;jv.prototype.InterpolantFactoryMethodLinear=void 0;jv.prototype.InterpolantFactoryMethodSmooth=void 0;class Rv extends Ql{constructor(e,t,n,s){super(e,t,n,s)}}Rv.prototype.ValueTypeName="vector";class iA{constructor(e="",t=-1,n=[],s=DR){this.name=e,this.tracks=n,this.duration=t,this.blendMode=s,this.uuid=al(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,s=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(GW(n[a]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,a=n.length;r!==a;++r)t.push(Ql.toJSON(n[r]));return s}static CreateFromMorphTargetSequence(e,t,n,s){const r=t.length,a=[];for(let o=0;o<r;o++){let c=[],h=[];c.push((o+r-1)%r,o,(o+1)%r),h.push(0,1,0);const d=nk(c);c=vL(c,1,d),h=vL(h,1,d),!s&&c[0]===0&&(c.push(r),h.push(h[0])),a.push(new Cv(".morphTargetInfluences["+t[o].name+"]",c,h).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const s=e;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===t)return n[s];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const s={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,c=e.length;o<c;o++){const h=e[o],d=h.name.match(r);if(d&&d.length>1){const m=d[1];let v=s[m];v||(s[m]=v=[]),v.push(h)}}const a=[];for(const o in s)a.push(this.CreateFromMorphTargetSequence(o,s[o],t,n));return a}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(m,v,y,A,E){if(y.length!==0){const M=[],x=[];i3(y,M,x,A),M.length!==0&&E.push(new m(v,M,x))}},s=[],r=e.name||"default",a=e.fps||30,o=e.blendMode;let c=e.length||-1;const h=e.hierarchy||[];for(let m=0;m<h.length;m++){const v=h[m].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let A;for(A=0;A<v.length;A++)if(v[A].morphTargets)for(let E=0;E<v[A].morphTargets.length;E++)y[v[A].morphTargets[E]]=-1;for(const E in y){const M=[],x=[];for(let w=0;w!==v[A].morphTargets.length;++w){const R=v[A];M.push(R.time),x.push(R.morphTarget===E?1:0)}s.push(new Cv(".morphTargetInfluence["+E+"]",M,x))}c=y.length*a}else{const y=".bones["+t[m].name+"]";n(Rv,y+".position",v,"pos",s),n(wv,y+".quaternion",v,"rot",s),n(Rv,y+".scale",v,"scl",s)}}return s.length===0?null:new this(r,c,s,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,s=e.length;n!==s;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function zW(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cv;case"vector":case"vector2":case"vector3":case"vector4":return Rv;case"color":return r3;case"quaternion":return wv;case"bool":case"boolean":return Vv;case"string":return jv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function GW(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=zW(i.type);if(i.times===void 0){const t=[],n=[];i3(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Lf={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class QR{constructor(e,t,n){const s=this;let r=!1,a=0,o=0,c;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(d){o++,r===!1&&s.onStart!==void 0&&s.onStart(d,a,o),r=!0},this.itemEnd=function(d){a++,s.onProgress!==void 0&&s.onProgress(d,a,o),a===o&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(d){s.onError!==void 0&&s.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,m){return h.push(d,m),this},this.removeHandler=function(d){const m=h.indexOf(d);return m!==-1&&h.splice(m,2),this},this.getHandler=function(d){for(let m=0,v=h.length;m<v;m+=2){const y=h[m],A=h[m+1];if(y.global&&(y.lastIndex=0),y.test(d))return A}return null}}}const ak=new QR;class ca{constructor(e){this.manager=e!==void 0?e:ak,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,r){n.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ca.DEFAULT_MATERIAL_NAME="__DEFAULT";const qh={};class kW extends Error{constructor(e,t){super(e),this.response=t}}class oa extends ca{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Lf.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(qh[e]!==void 0){qh[e].push({onLoad:t,onProgress:n,onError:s});return}qh[e]=[],qh[e].push({onLoad:t,onProgress:n,onError:s});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,c=this.responseType;fetch(a).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const d=qh[e],m=h.body.getReader(),v=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),y=v?parseInt(v):0,A=y!==0;let E=0;const M=new ReadableStream({start(x){w();function w(){m.read().then(({done:R,value:D})=>{if(R)x.close();else{E+=D.byteLength;const P=new ProgressEvent("progress",{lengthComputable:A,loaded:E,total:y});for(let I=0,H=d.length;I<H;I++){const U=d[I];U.onProgress&&U.onProgress(P)}x.enqueue(D),w()}},R=>{x.error(R)})}}});return new Response(M)}else throw new kW(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(c){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(d=>new DOMParser().parseFromString(d,o));case"json":return h.json();default:if(o==="")return h.text();{const m=/charset="?([^;"\s]*)"?/i.exec(o),v=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(v);return h.arrayBuffer().then(A=>y.decode(A))}}}).then(h=>{Lf.add(e,h);const d=qh[e];delete qh[e];for(let m=0,v=d.length;m<v;m++){const y=d[m];y.onLoad&&y.onLoad(h)}}).catch(h=>{const d=qh[e];if(d===void 0)throw this.manager.itemError(e),h;delete qh[e];for(let m=0,v=d.length;m<v;m++){const y=d[m];y.onError&&y.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class VW extends ca{constructor(e){super(e)}load(e,t,n,s){const r=this,a=new oa(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(c){s?s(c):console.error(c),r.manager.itemError(e)}},n,s)}parse(e){const t=[];for(let n=0;n<e.length;n++){const s=iA.parse(e[n]);t.push(s)}return t}}class jW extends ca{constructor(e){super(e)}load(e,t,n,s){const r=this,a=[],o=new FR,c=new oa(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(r.withCredentials);let h=0;function d(m){c.load(e[m],function(v){const y=r.parse(v,!0);a[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},h+=1,h===6&&(y.mipmapCount===1&&(o.minFilter=li),o.image=a,o.format=y.format,o.needsUpdate=!0,t&&t(o))},n,s)}if(Array.isArray(e))for(let m=0,v=e.length;m<v;++m)d(m);else c.load(e,function(m){const v=r.parse(m,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let A=0;A<y;A++){a[A]={mipmaps:[]};for(let E=0;E<v.mipmapCount;E++)a[A].mipmaps.push(v.mipmaps[A*v.mipmapCount+E]),a[A].format=v.format,a[A].width=v.width,a[A].height=v.height}o.image=a}else o.image.width=v.width,o.image.height=v.height,o.mipmaps=v.mipmaps;v.mipmapCount===1&&(o.minFilter=li),o.format=v.format,o.needsUpdate=!0,t&&t(o)},n,s);return o}}class oS extends ca{constructor(e){super(e)}load(e,t,n,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Lf.get(e);if(a!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;const o=iS("img");function c(){d(),Lf.add(e,this),t&&t(this),r.manager.itemEnd(e)}function h(m){d(),s&&s(m),r.manager.itemError(e),r.manager.itemEnd(e)}function d(){o.removeEventListener("load",c,!1),o.removeEventListener("error",h,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}class ok extends ca{constructor(e){super(e)}load(e,t,n,s){const r=new XE;r.colorSpace=Yn;const a=new oS(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function c(h){a.load(e[h],function(d){r.images[h]=d,o++,o===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let h=0;h<e.length;++h)c(h);return r}}class a3 extends ca{constructor(e){super(e)}load(e,t,n,s){const r=this,a=new eu,o=new oa(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,function(c){let h;try{h=r.parse(c)}catch(d){if(s!==void 0)s(d);else{console.error(d);return}}h.image!==void 0?a.image=h.image:h.data!==void 0&&(a.image.width=h.width,a.image.height=h.height,a.image.data=h.data),a.wrapS=h.wrapS!==void 0?h.wrapS:js,a.wrapT=h.wrapT!==void 0?h.wrapT:js,a.magFilter=h.magFilter!==void 0?h.magFilter:li,a.minFilter=h.minFilter!==void 0?h.minFilter:li,a.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(a.colorSpace=h.colorSpace),h.flipY!==void 0&&(a.flipY=h.flipY),h.format!==void 0&&(a.format=h.format),h.type!==void 0&&(a.type=h.type),h.mipmaps!==void 0&&(a.mipmaps=h.mipmaps,a.minFilter=rl),h.mipmapCount===1&&(a.minFilter=li),h.generateMipmaps!==void 0&&(a.generateMipmaps=h.generateMipmaps),a.needsUpdate=!0,t&&t(a,h)},n,s),a}}class bw extends ca{constructor(e){super(e)}load(e,t,n,s){const r=new Ai,a=new oS(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){r.image=o,r.needsUpdate=!0,t!==void 0&&t(r)},n,s),r}}class Xp extends ci{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Bt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class lk extends Xp{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ci.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Bt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const tB=new on,RU=new ae,DU=new ae;class o3{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ke(512,512),this.mapType=as,this.map=null,this.mapPass=null,this.matrix=new on,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mA,this._frameExtents=new Ke(1,1),this._viewportCount=1,this._viewports=[new ai(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;RU.setFromMatrixPosition(e.matrixWorld),t.position.copy(RU),DU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(DU),t.updateMatrixWorld(),tB.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tB),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(tB)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class XW extends o3{constructor(){super(new es(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=$_*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class l3 extends Xp{constructor(e,t,n=0,s=Math.PI/3,r=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ci.DEFAULT_UP),this.updateMatrix(),this.target=new ci,this.distance=n,this.angle=s,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new XW}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const BU=new on,Qb=new ae,nB=new ae;class qW extends o3{constructor(){super(new es(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ke(4,2),this._viewportCount=6,this._viewports=[new ai(2,1,1,1),new ai(0,1,1,1),new ai(3,1,1,1),new ai(1,1,1,1),new ai(3,0,1,1),new ai(1,0,1,1)],this._cubeDirections=[new ae(1,0,0),new ae(-1,0,0),new ae(0,0,1),new ae(0,0,-1),new ae(0,1,0),new ae(0,-1,0)],this._cubeUps=[new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,0,1),new ae(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,s=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Qb.setFromMatrixPosition(e.matrixWorld),n.position.copy(Qb),nB.copy(n.position),nB.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(nB),n.updateMatrixWorld(),s.makeTranslation(-Qb.x,-Qb.y,-Qb.z),BU.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(BU)}}class c3 extends Xp{constructor(e,t,n=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new qW}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class ql extends jE{constructor(e=-1,t=1,n=1,s=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=n-e,a=n+e,o=s+t,c=s-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=h*this.view.offsetX,a=r+h*this.view.width,o-=d*this.view.offsetY,c=o-d*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class YW extends o3{constructor(){super(new ql(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class u3 extends Xp{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ci.DEFAULT_UP),this.updateMatrix(),this.target=new ci,this.shadow=new YW}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ck extends Xp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class uk extends Xp{constructor(e,t,n=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class hk{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ae)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,s=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*s),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*s)),t.addScaledVector(a[5],1.092548*(s*r)),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],1.092548*(n*r)),t.addScaledVector(a[8],.546274*(n*n-s*s)),t}getIrradianceAt(e,t){const n=e.x,s=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*s),t.addScaledVector(a[2],2*.511664*r),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*s),t.addScaledVector(a[5],2*.429043*s*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],2*.429043*n*r),t.addScaledVector(a[8],.429043*(n*n-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const n=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-s*s)}}class fk extends Xp{constructor(e=new hk,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class $R extends ca{constructor(e){super(e),this.textures={}}load(e,t,n,s){const r=this,a=new oa(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(c){s?s(c):console.error(c),r.manager.itemError(e)}},n,s)}parse(e){const t=this.textures;function n(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new Bt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const a=e.uniforms[r];switch(s.uniforms[r]={},a.type){case"t":s.uniforms[r].value=n(a.value);break;case"c":s.uniforms[r].value=new Bt().setHex(a.value);break;case"v2":s.uniforms[r].value=new Ke().fromArray(a.value);break;case"v3":s.uniforms[r].value=new ae().fromArray(a.value);break;case"v4":s.uniforms[r].value=new ai().fromArray(a.value);break;case"m3":s.uniforms[r].value=new Ln().fromArray(a.value);break;case"m4":s.uniforms[r].value=new on().fromArray(a.value);break;default:s.uniforms[r].value=a.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)s.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=n(e.map)),e.matcap!==void 0&&(s.matcap=n(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new Ke().fromArray(r)}return e.displacementMap!==void 0&&(s.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=n(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Ke().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return $R.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:WG,SpriteMaterial:jI,RawShaderMaterial:KG,ShaderMaterial:Xi,PointsMaterial:UR,MeshPhysicalMaterial:Zl,MeshStandardMaterial:gA,MeshPhongMaterial:JG,MeshToonMaterial:ZG,MeshNormalMaterial:t3,MeshLambertMaterial:QG,MeshDepthMaterial:ZR,MeshDistanceMaterial:n3,MeshBasicMaterial:Do,MeshMatcapMaterial:$G,LineDashedMaterial:ek,LineBasicMaterial:Na,Material:Ys};return new t[e]}}class wp{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class dk extends En{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class pk extends ca{constructor(e){super(e)}load(e,t,n,s){const r=this,a=new oa(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(c){s?s(c):console.error(c),r.manager.itemError(e)}},n,s)}parse(e){const t={},n={};function s(y,A){if(t[A]!==void 0)return t[A];const M=y.interleavedBuffers[A],x=r(y,M.buffer),w=By(M.type,x),R=new qE(w,M.stride);return R.uuid=M.uuid,t[A]=R,R}function r(y,A){if(n[A]!==void 0)return n[A];const M=y.arrayBuffers[A],x=new Uint32Array(M).buffer;return n[A]=x,x}const a=e.isInstancedBufferGeometry?new dk:new En,o=e.data.index;if(o!==void 0){const y=By(o.type,o.array);a.setIndex(new ui(y,1))}const c=e.data.attributes;for(const y in c){const A=c[y];let E;if(A.isInterleavedBufferAttribute){const M=s(e.data,A.data);E=new Pp(M,A.itemSize,A.offset,A.normalized)}else{const M=By(A.type,A.array),x=A.isInstancedBufferAttribute?Mv:ui;E=new x(M,A.itemSize,A.normalized)}A.name!==void 0&&(E.name=A.name),A.usage!==void 0&&E.setUsage(A.usage),a.setAttribute(y,E)}const h=e.data.morphAttributes;if(h)for(const y in h){const A=h[y],E=[];for(let M=0,x=A.length;M<x;M++){const w=A[M];let R;if(w.isInterleavedBufferAttribute){const D=s(e.data,w.data);R=new Pp(D,w.itemSize,w.offset,w.normalized)}else{const D=By(w.type,w.array);R=new ui(D,w.itemSize,w.normalized)}w.name!==void 0&&(R.name=w.name),E.push(R)}a.morphAttributes[y]=E}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,A=m.length;y!==A;++y){const E=m[y];a.addGroup(E.start,E.count,E.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const y=new ae;v.center!==void 0&&y.fromArray(v.center),a.boundingSphere=new kr(y,v.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class WW extends ca{constructor(e){super(e)}load(e,t,n,s){const r=this,a=this.path===""?wp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new oa(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){let h=null;try{h=JSON.parse(c)}catch(m){s!==void 0&&s(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const d=h.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(h,t)},n,s)}async loadAsync(e,t){const n=this,s=this.path===""?wp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const r=new oa(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const a=await r.loadAsync(e,t),o=JSON.parse(a),c=o.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,s),a=this.parseImages(e.images,function(){t!==void 0&&t(h)}),o=this.parseTextures(e.textures,a),c=this.parseMaterials(e.materials,o),h=this.parseObject(e.object,r,c,o,n),d=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,d),this.bindLightTargets(h),t!==void 0){let m=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,o,a,t),h=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,h),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let n=0,s=e.length;n<s;n++){const r=new _v().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},s={};if(t.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),e!==void 0)for(let r=0,a=e.length;r<a;r++){const o=new YE().fromJSON(e[r],s);n[o.uuid]=o}return n}parseGeometries(e,t){const n={};if(e!==void 0){const s=new pk;for(let r=0,a=e.length;r<a;r++){let o;const c=e[r];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":o=s.parse(c);break;default:c.type in wU?o=wU[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}o.uuid=c.uuid,c.name!==void 0&&(o.name=c.name),c.userData!==void 0&&(o.userData=c.userData),n[c.uuid]=o}}return n}parseMaterials(e,t){const n={},s={};if(e!==void 0){const r=new $R;r.setTextures(t);for(let a=0,o=e.length;a<o;a++){const c=e[a];n[c.uuid]===void 0&&(n[c.uuid]=r.parse(c)),s[c.uuid]=n[c.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const s=e[n],r=iA.parse(s);t[r.uuid]=r}return t}parseImages(e,t){const n=this,s={};let r;function a(c){return n.manager.itemStart(c),r.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function o(c){if(typeof c=="string"){const h=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;return a(d)}else return c.data?{data:By(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new QR(t);r=new oS(c),r.setCrossOrigin(this.crossOrigin);for(let h=0,d=e.length;h<d;h++){const m=e[h],v=m.url;if(Array.isArray(v)){const y=[];for(let A=0,E=v.length;A<E;A++){const M=v[A],x=o(M);x!==null&&(x instanceof HTMLImageElement?y.push(x):y.push(new eu(x.data,x.width,x.height)))}s[m.uuid]=new Ep(y)}else{const y=o(m.url);s[m.uuid]=new Ep(y)}}}return s}async parseImagesAsync(e){const t=this,n={};let s;async function r(a){if(typeof a=="string"){const o=a,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await s.loadAsync(c)}else return a.data?{data:By(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){s=new oS(this.manager),s.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const c=e[a],h=c.url;if(Array.isArray(h)){const d=[];for(let m=0,v=h.length;m<v;m++){const y=h[m],A=await r(y);A!==null&&(A instanceof HTMLImageElement?d.push(A):d.push(new eu(A.data,A.width,A.height)))}n[c.uuid]=new Ep(d)}else{const d=await r(c.url);n[c.uuid]=new Ep(d)}}}return n}parseTextures(e,t){function n(r,a){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),a[r])}const s={};if(e!==void 0)for(let r=0,a=e.length;r<a;r++){const o=e[r];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const c=t[o.image],h=c.data;let d;Array.isArray(h)?(d=new XE,h.length===6&&(d.needsUpdate=!0)):(h&&h.data?d=new eu:d=new Ai,h&&(d.needsUpdate=!0)),d.source=c,d.uuid=o.uuid,o.name!==void 0&&(d.name=o.name),o.mapping!==void 0&&(d.mapping=n(o.mapping,KW)),o.channel!==void 0&&(d.channel=o.channel),o.offset!==void 0&&d.offset.fromArray(o.offset),o.repeat!==void 0&&d.repeat.fromArray(o.repeat),o.center!==void 0&&d.center.fromArray(o.center),o.rotation!==void 0&&(d.rotation=o.rotation),o.wrap!==void 0&&(d.wrapS=n(o.wrap[0],LU),d.wrapT=n(o.wrap[1],LU)),o.format!==void 0&&(d.format=o.format),o.internalFormat!==void 0&&(d.internalFormat=o.internalFormat),o.type!==void 0&&(d.type=o.type),o.colorSpace!==void 0&&(d.colorSpace=o.colorSpace),o.minFilter!==void 0&&(d.minFilter=n(o.minFilter,NU)),o.magFilter!==void 0&&(d.magFilter=n(o.magFilter,NU)),o.anisotropy!==void 0&&(d.anisotropy=o.anisotropy),o.flipY!==void 0&&(d.flipY=o.flipY),o.generateMipmaps!==void 0&&(d.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(d.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(d.compareFunction=o.compareFunction),o.userData!==void 0&&(d.userData=o.userData),s[o.uuid]=d}return s}parseObject(e,t,n,s,r){let a;function o(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let A=0,E=v.length;A<E;A++){const M=v[A];n[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),y.push(n[M])}return y}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function h(v){return s[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),s[v]}let d,m;switch(e.type){case"Scene":a=new Ev,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Bt(e.background):a.background=h(e.background)),e.environment!==void 0&&(a.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new IR(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new NR(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new es(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ql(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new ck(e.color,e.intensity);break;case"DirectionalLight":a=new u3(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new c3(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new uk(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new l3(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new lk(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new fk().fromJSON(e);break;case"SkinnedMesh":d=o(e.geometry),m=c(e.material),a=new XI(d,m),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":d=o(e.geometry),m=c(e.material),a=new ts(d,m);break;case"InstancedMesh":d=o(e.geometry),m=c(e.material);const v=e.count,y=e.instanceMatrix,A=e.instanceColor;a=new qI(d,m,v),a.instanceMatrix=new Mv(new Float32Array(y.array),16),A!==void 0&&(a.instanceColor=new Mv(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":d=o(e.geometry),m=c(e.material),a=new PG(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,m),a.geometry=d,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._geometryInfo=e.geometryInfo.map(E=>{let M=null,x=null;return E.boundingBox!==void 0&&(M=new aa,M.min.fromArray(E.boundingBox.min),M.max.fromArray(E.boundingBox.max)),E.boundingSphere!==void 0&&(x=new kr,x.radius=E.boundingSphere.radius,x.center.fromArray(E.boundingSphere.center)),{...E,boundingBox:M,boundingSphere:x}}),a._instanceInfo=e.instanceInfo,a._availableInstanceIds=e._availableInstanceIds,a._availableGeometryIds=e._availableGeometryIds,a._nextIndexStart=e.nextIndexStart,a._nextVertexStart=e.nextVertexStart,a._geometryCount=e.geometryCount,a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._matricesTexture=h(e.matricesTexture.uuid),a._indirectTexture=h(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=h(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(a.boundingSphere=new kr,a.boundingSphere.center.fromArray(e.boundingSphere.center),a.boundingSphere.radius=e.boundingSphere.radius),e.boundingBox!==void 0&&(a.boundingBox=new aa,a.boundingBox.min.fromArray(e.boundingBox.min),a.boundingBox.max.fromArray(e.boundingBox.max));break;case"LOD":a=new IG;break;case"Line":a=new Ff(o(e.geometry),c(e.material));break;case"LineLoop":a=new YI(o(e.geometry),c(e.material));break;case"LineSegments":a=new ou(o(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new WI(o(e.geometry),c(e.material));break;case"Sprite":a=new NG(c(e.material));break;case"Group":a=new Bf;break;case"Bone":a=new PR;break;default:a=new ci}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)a.add(this.parseObject(v[y],t,n,s,r))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const A=v[y];a.animations.push(r[A])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const A=v[y],E=a.getObjectByProperty("uuid",A.object);E!==void 0&&a.addLevel(E,A.distance,A.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=t[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,s=e.getObjectByProperty("uuid",n);s!==void 0?t.target=s:t.target=new ci}})}}const KW={UVMapping:Lp,CubeReflectionMapping:mh,CubeRefractionMapping:Np,EquirectangularReflectionMapping:Y_,EquirectangularRefractionMapping:Qx,CubeUVReflectionMapping:pA},LU={RepeatWrapping:Ip,ClampToEdgeWrapping:js,MirroredRepeatWrapping:W_},NU={NearestFilter:gs,NearestMipmapNearestFilter:SR,NearestMipmapLinearFilter:fg,LinearFilter:li,LinearMipmapNearestFilter:Py,LinearMipmapLinearFilter:rl};class mk extends ca{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Lf.get(e);if(a!==void 0){if(r.manager.itemStart(e),a.then){a.then(h=>{t&&t(h),r.manager.itemEnd(e)}).catch(h=>{s&&s(h)});return}return setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const c=fetch(e,o).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(h){return Lf.add(e,h),t&&t(h),r.manager.itemEnd(e),h}).catch(function(h){s&&s(h),Lf.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});Lf.add(e,c),r.manager.itemStart(e)}}let ET;class h3{static getContext(){return ET===void 0&&(ET=new(window.AudioContext||window.webkitAudioContext)),ET}static setContext(e){ET=e}}class JW extends ca{constructor(e){super(e)}load(e,t,n,s){const r=this,a=new oa(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{const h=c.slice(0);h3.getContext().decodeAudioData(h,function(m){t(m)}).catch(o)}catch(h){o(h)}},n,s);function o(c){s?s(c):console.error(c),r.manager.itemError(e)}}}const IU=new on,PU=new on,jm=new on;class ZW{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new es,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new es,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,jm.copy(e.projectionMatrix);const s=t.eyeSep/2,r=s*t.near/t.focus,a=t.near*Math.tan(yv*t.fov*.5)/t.zoom;let o,c;PU.elements[12]=-s,IU.elements[12]=s,o=-a*t.aspect+r,c=a*t.aspect+r,jm.elements[0]=2*t.near/(c-o),jm.elements[8]=(c+o)/(c-o),this.cameraL.projectionMatrix.copy(jm),o=-a*t.aspect-r,c=a*t.aspect-r,jm.elements[0]=2*t.near/(c-o),jm.elements[8]=(c+o)/(c-o),this.cameraR.projectionMatrix.copy(jm)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(PU),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(IU)}}class gk extends es{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class f3{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=OU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=OU();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function OU(){return performance.now()}const Xm=new ae,UU=new Gr,QW=new ae,qm=new ae;class $W extends ci{constructor(){super(),this.type="AudioListener",this.context=h3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new f3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Xm,UU,QW),qm.set(0,0,-1).applyQuaternion(UU),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Xm.x,s),t.positionY.linearRampToValueAtTime(Xm.y,s),t.positionZ.linearRampToValueAtTime(Xm.z,s),t.forwardX.linearRampToValueAtTime(qm.x,s),t.forwardY.linearRampToValueAtTime(qm.y,s),t.forwardZ.linearRampToValueAtTime(qm.z,s),t.upX.linearRampToValueAtTime(n.x,s),t.upY.linearRampToValueAtTime(n.y,s),t.upZ.linearRampToValueAtTime(n.z,s)}else t.setPosition(Xm.x,Xm.y,Xm.z),t.setOrientation(qm.x,qm.y,qm.z,n.x,n.y,n.z)}}class vk extends ci{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Ym=new ae,FU=new Gr,eK=new ae,Wm=new ae;class tK extends vk{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ym,FU,eK),Wm.set(0,0,1).applyQuaternion(FU);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ym.x,n),t.positionY.linearRampToValueAtTime(Ym.y,n),t.positionZ.linearRampToValueAtTime(Ym.z,n),t.orientationX.linearRampToValueAtTime(Wm.x,n),t.orientationY.linearRampToValueAtTime(Wm.y,n),t.orientationZ.linearRampToValueAtTime(Wm.z,n)}else t.setPosition(Ym.x,Ym.y,Ym.z),t.setOrientation(Wm.x,Wm.y,Wm.z)}}class nK{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class yk{constructor(e,t,n){this.binding=e,this.valueSize=n;let s,r,a;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,s=this.valueSize,r=e*s+s;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==s;++o)n[r+o]=n[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(n,r,0,o,s)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,s=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const c=t*this._origIndex;this._mixBufferRegion(n,s,c,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*t,1,t);for(let c=t,h=t+t;c!==h;++c)if(n[c]!==n[c+t]){o.setValue(n,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,s=n*this._origIndex;e.getValue(t,s);for(let r=n,a=s;r!==a;++r)t[r]=t[s+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,s,r){if(s>=.5)for(let a=0;a!==r;++a)e[t+a]=e[n+a]}_slerp(e,t,n,s){Gr.slerpFlat(e,t,e,t,e,n,s)}_slerpAdditive(e,t,n,s,r){const a=this._workIndex*r;Gr.multiplyQuaternionsFlat(e,a,e,t,e,n),Gr.slerpFlat(e,t,e,t,e,a,s)}_lerp(e,t,n,s,r){const a=1-s;for(let o=0;o!==r;++o){const c=t+o;e[c]=e[c]*a+e[n+o]*s}}_lerpAdditive(e,t,n,s,r){for(let a=0;a!==r;++a){const o=t+a;e[o]=e[o]+e[n+a]*s}}}const d3="\\[\\]\\.:\\/",iK=new RegExp("["+d3+"]","g"),p3="[^"+d3+"]",sK="[^"+d3.replace("\\.","")+"]",rK=/((?:WC+[\/:])*)/.source.replace("WC",p3),aK=/(WCOD+)?/.source.replace("WCOD",sK),oK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",p3),lK=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",p3),cK=new RegExp("^"+rK+aK+oK+lK+"$"),uK=["material","materials","bones","map"];class hK{constructor(e,t,n){const s=n||di.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=n.length;s!==r;++s)n[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class di{constructor(e,t,n){this.path=t,this.parsedPath=n||di.parseTrackName(t),this.node=di.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new di.Composite(e,t,n):new di(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(iK,"")}static parseTrackName(e){const t=cK.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=n.nodeName.substring(s+1);uK.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let a=0;a<r.length;a++){const o=r[a];if(o.name===t||o.uuid===t)return o;const c=n(o.children);if(c)return c}return null},s=n(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)e[t++]=n[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,r=n.length;s!==r;++s)n[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=di.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let h=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===h){h=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const a=e[s];if(a===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+s+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}di.Composite=hK;di.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};di.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};di.prototype.GetterByBindingType=[di.prototype._getValue_direct,di.prototype._getValue_array,di.prototype._getValue_arrayElement,di.prototype._getValue_toArray];di.prototype.SetterByBindingTypeAndVersioning=[[di.prototype._setValue_direct,di.prototype._setValue_direct_setNeedsUpdate,di.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[di.prototype._setValue_array,di.prototype._setValue_array_setNeedsUpdate,di.prototype._setValue_array_setMatrixWorldNeedsUpdate],[di.prototype._setValue_arrayElement,di.prototype._setValue_arrayElement_setNeedsUpdate,di.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[di.prototype._setValue_fromArray,di.prototype._setValue_fromArray_setNeedsUpdate,di.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class fK{constructor(){this.isAnimationObjectGroup=!0,this.uuid=al(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,s=arguments.length;n!==s;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,s=this._parsedPaths,r=this._bindings,a=r.length;let o,c=e.length,h=this.nCachedObjects_;for(let d=0,m=arguments.length;d!==m;++d){const v=arguments[d],y=v.uuid;let A=t[y];if(A===void 0){A=c++,t[y]=A,e.push(v);for(let E=0,M=a;E!==M;++E)r[E].push(new di(v,n[E],s[E]))}else if(A<h){o=e[A];const E=--h,M=e[E];t[M.uuid]=A,e[A]=M,t[y]=E,e[E]=v;for(let x=0,w=a;x!==w;++x){const R=r[x],D=R[E];let P=R[A];R[A]=D,P===void 0&&(P=new di(v,n[x],s[x])),R[E]=P}}else e[A]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const c=arguments[a],h=c.uuid,d=t[h];if(d!==void 0&&d>=r){const m=r++,v=e[m];t[v.uuid]=d,e[d]=v,t[h]=m,e[m]=c;for(let y=0,A=s;y!==A;++y){const E=n[y],M=E[m],x=E[d];E[d]=M,E[m]=x}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let r=this.nCachedObjects_,a=e.length;for(let o=0,c=arguments.length;o!==c;++o){const h=arguments[o],d=h.uuid,m=t[d];if(m!==void 0)if(delete t[d],m<r){const v=--r,y=e[v],A=--a,E=e[A];t[y.uuid]=m,e[m]=y,t[E.uuid]=v,e[v]=E,e.pop();for(let M=0,x=s;M!==x;++M){const w=n[M],R=w[v],D=w[A];w[m]=R,w[v]=D,w.pop()}}else{const v=--a,y=e[v];v>0&&(t[y.uuid]=m),e[m]=y,e.pop();for(let A=0,E=s;A!==E;++A){const M=n[A];M[m]=M[v],M.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let s=n[e];const r=this._bindings;if(s!==void 0)return r[s];const a=this._paths,o=this._parsedPaths,c=this._objects,h=c.length,d=this.nCachedObjects_,m=new Array(h);s=r.length,n[e]=s,a.push(e),o.push(t),r.push(m);for(let v=d,y=c.length;v!==y;++v){const A=c[v];m[v]=new di(A,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const s=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,c=a[o],h=e[o];t[h]=n,a[n]=c,a.pop(),r[n]=r[o],r.pop(),s[n]=s[o],s.pop()}}}class _k{constructor(e,t,n=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=s;const r=t.tracks,a=r.length,o=new Array(a),c={endingStart:dg,endingEnd:dg};for(let h=0;h!==a;++h){const d=r[h].createInterpolant(null);o[h]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=fG,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const s=this._clip.duration,r=e._clip.duration,a=r/s,o=s/r;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const s=this._mixer,r=s.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=s._lendControlInterpolant(),this._timeScaleInterpolant=o);const c=o.parameterPositions,h=o.sampleValues;return c[0]=r,c[1]=r+n,h[0]=e/a,h[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const c=(e-r)*n;c<0||n===0?t=0:(this._startTime=null,t=n*c)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const c=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case UI:for(let d=0,m=c.length;d!==m;++d)c[d].evaluate(a),h[d].accumulateAdditive(o);break;case DR:default:for(let d=0,m=c.length;d!==m;++d)c[d].evaluate(a),h[d].accumulate(s,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let s=this.time+e,r=this._loopCount;const a=n===dG;if(e===0)return r===-1?s:a&&(r&1)===1?t-s:s;if(n===hG){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),s>=t||s<0){const o=Math.floor(s/t);s-=t*o,r+=Math.abs(o);const c=this.repetitions-r;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const h=e<0;this._setEndings(h,!h,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=s;if(a&&(r&1)===1)return t-s}return s}_setEndings(e,t,n){const s=this._interpolantSettings;n?(s.endingStart=pg,s.endingEnd=pg):(e?s.endingStart=this.zeroSlopeAtStart?pg:dg:s.endingStart=$x,t?s.endingEnd=this.zeroSlopeAtEnd?pg:dg:s.endingEnd=$x)}_scheduleFading(e,t,n){const s=this._mixer,r=s.time;let a=this._weightInterpolant;a===null&&(a=s._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,c=a.sampleValues;return o[0]=r,c[0]=t,o[1]=r+e,c[1]=n,this}}const dK=new Float32Array(1);class pK extends ul{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,s=e._clip.tracks,r=s.length,a=e._propertyBindings,o=e._interpolants,c=n.uuid,h=this._bindingsByRootAndName;let d=h[c];d===void 0&&(d={},h[c]=d);for(let m=0;m!==r;++m){const v=s[m],y=v.name;let A=d[y];if(A!==void 0)++A.referenceCount,a[m]=A;else{if(A=a[m],A!==void 0){A._cacheIndex===null&&(++A.referenceCount,this._addInactiveBinding(A,c,y));continue}const E=t&&t._propertyBindings[m].binding.parsedPath;A=new yk(di.create(n,y,E),v.ValueTypeName,v.getValueSize()),++A.referenceCount,this._addInactiveBinding(A,c,y),a[m]=A}o[m].resultBuffer=A.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,n)}const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const s=this._actions,r=this._actionsByClip;let a=r[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=s.length,s.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],s=e._cacheIndex;n._cacheIndex=s,t[s]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,o=a[r],c=o.knownActions,h=c[c.length-1],d=e._byClipCacheIndex;h._byClipCacheIndex=d,c[d]=h,c.pop(),e._byClipCacheIndex=null;const m=o.actionByRoot,v=(e._localRoot||this._root).uuid;delete m[v],c.length===0&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const s=this._bindingsByRootAndName,r=this._bindings;let a=s[t];a===void 0&&(a={},s[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,s=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[s],c=t[t.length-1],h=e._cacheIndex;c._cacheIndex=h,t[h]=c,t.pop(),delete o[r],Object.keys(o).length===0&&delete a[s]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new s3(new Float32Array(2),new Float32Array(2),1,dK),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const s=t||this._root,r=s.uuid;let a=typeof e=="string"?iA.findByName(s,e):e;const o=a!==null?a.uuid:e,c=this._actionsByClip[o];let h=null;if(n===void 0&&(a!==null?n=a.blendMode:n=DR),c!==void 0){const m=c.actionByRoot[r];if(m!==void 0&&m.blendMode===n)return m;h=c.knownActions[0],a===null&&(a=h._clip)}if(a===null)return null;const d=new _k(this,a,t,n);return this._bindAction(d,h),this._addInactiveAction(d,o,r),d}existingAction(e,t){const n=t||this._root,s=n.uuid,r=typeof e=="string"?iA.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,s=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let h=0;h!==n;++h)t[h]._update(s,e,r,a);const o=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)o[h].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,s=this._actionsByClip,r=s[n];if(r!==void 0){const a=r.knownActions;for(let o=0,c=a.length;o!==c;++o){const h=a[o];this._deactivateAction(h);const d=h._cacheIndex,m=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,m._cacheIndex=d,t[d]=m,t.pop(),this._removeInactiveBindingsForAction(h)}delete s[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const o=n[a].actionByRoot,c=o[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const a in r){const o=r[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class mK extends BR{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new LR(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class gK extends BR{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTargetArray=!0,this.depth=n,this.texture=new VE(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class qt{constructor(e){this.value=e}clone(){return new qt(this.value.clone===void 0?this.value:this.value.clone())}}let vK=0;class yK extends ul{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:vK++}),this.name="",this.usage=tS,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,s=t.length;n<s;n++){const r=Array.isArray(t[n])?t[n]:[t[n]];for(let a=0;a<r.length;a++)this.uniforms.push(r[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class _K extends qE{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class AK{constructor(e,t,n,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const HU=new on;class m3{constructor(e,t,n=0,s=1/0){this.ray=new Gv(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new eA,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return HU.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(HU),this}intersectObject(e,t=!0,n=[]){return yL(e,this,n,t),n.sort(zU),n}intersectObjects(e,t=!0,n=[]){for(let s=0,r=e.length;s<r;s++)yL(e[s],this,n,t);return n.sort(zU),n}}function zU(i,e){return i.distance-e.distance}function yL(i,e,t,n){let s=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(s=!1),s===!0&&n===!0){const r=i.children;for(let a=0,o=r.length;a<o;a++)yL(r[a],e,t,!0)}}class _L{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Cn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Cn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class bK{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class g3{constructor(e,t,n,s){g3.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,s){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=s,this}}const GU=new Ke;class xK{constructor(e=new Ke(1/0,1/0),t=new Ke(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=GU.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,GU).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const kU=new ae,MT=new ae;class SK{constructor(e=new ae,t=new ae){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){kU.subVectors(e,this.start),MT.subVectors(this.end,this.start);const n=MT.dot(MT);let r=MT.dot(kU)/n;return t&&(r=Cn(r,0,1)),r}closestPointToPoint(e,t,n){const s=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const VU=new ae;class EK extends ci{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new En,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,c=32;a<c;a++,o++){const h=a/c*Math.PI*2,d=o/c*Math.PI*2;s.push(Math.cos(h),Math.sin(h),1,Math.cos(d),Math.sin(d),1)}n.setAttribute("position",new Yt(s,3));const r=new Na({fog:!1,toneMapped:!1});this.cone=new ou(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),VU.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(VU),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const kd=new ae,TT=new on,iB=new on;class MK extends ou{constructor(e){const t=Ak(e),n=new En,s=[],r=[],a=new Bt(0,0,1),o=new Bt(0,1,0);for(let h=0;h<t.length;h++){const d=t[h];d.parent&&d.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new Yt(s,3)),n.setAttribute("color",new Yt(r,3));const c=new Na({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,s=n.getAttribute("position");iB.copy(this.root.matrixWorld).invert();for(let r=0,a=0;r<t.length;r++){const o=t[r];o.parent&&o.parent.isBone&&(TT.multiplyMatrices(iB,o.matrixWorld),kd.setFromMatrixPosition(TT),s.setXYZ(a,kd.x,kd.y,kd.z),TT.multiplyMatrices(iB,o.parent.matrixWorld),kd.setFromMatrixPosition(TT),s.setXYZ(a+1,kd.x,kd.y,kd.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ak(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...Ak(i.children[t]));return e}class TK extends ts{constructor(e,t,n){const s=new $E(t,4,2),r=new Do({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const CK=new ae,jU=new Bt,XU=new Bt;class wK extends ci{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new QE(t);s.rotateY(Math.PI*.5),this.material=new Do({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),a=new Float32Array(r.count*3);s.setAttribute("color",new ui(a,3)),this.add(new ts(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");jU.copy(this.light.color),XU.copy(this.light.groundColor);for(let n=0,s=t.count;n<s;n++){const r=n<s/2?jU:XU;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(CK.setFromMatrixPosition(this.light.matrixWorld).negate())}}class RK extends ou{constructor(e=10,t=10,n=4473924,s=8947848){n=new Bt(n),s=new Bt(s);const r=t/2,a=e/t,o=e/2,c=[],h=[];for(let v=0,y=0,A=-o;v<=t;v++,A+=a){c.push(-o,0,A,o,0,A),c.push(A,0,-o,A,0,o);const E=v===r?n:s;E.toArray(h,y),y+=3,E.toArray(h,y),y+=3,E.toArray(h,y),y+=3,E.toArray(h,y),y+=3}const d=new En;d.setAttribute("position",new Yt(c,3)),d.setAttribute("color",new Yt(h,3));const m=new Na({vertexColors:!0,toneMapped:!1});super(d,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class DK extends ou{constructor(e=10,t=16,n=8,s=64,r=4473924,a=8947848){r=new Bt(r),a=new Bt(a);const o=[],c=[];if(t>1)for(let m=0;m<t;m++){const v=m/t*(Math.PI*2),y=Math.sin(v)*e,A=Math.cos(v)*e;o.push(0,0,0),o.push(y,0,A);const E=m&1?r:a;c.push(E.r,E.g,E.b),c.push(E.r,E.g,E.b)}for(let m=0;m<n;m++){const v=m&1?r:a,y=e-e/n*m;for(let A=0;A<s;A++){let E=A/s*(Math.PI*2),M=Math.sin(E)*y,x=Math.cos(E)*y;o.push(M,0,x),c.push(v.r,v.g,v.b),E=(A+1)/s*(Math.PI*2),M=Math.sin(E)*y,x=Math.cos(E)*y,o.push(M,0,x),c.push(v.r,v.g,v.b)}}const h=new En;h.setAttribute("position",new Yt(o,3)),h.setAttribute("color",new Yt(c,3));const d=new Na({vertexColors:!0,toneMapped:!1});super(h,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const qU=new ae,CT=new ae,YU=new ae;class BK extends ci{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new En;s.setAttribute("position",new Yt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new Na({fog:!1,toneMapped:!1});this.lightPlane=new Ff(s,r),this.add(this.lightPlane),s=new En,s.setAttribute("position",new Yt([0,0,0,0,0,1],3)),this.targetLine=new Ff(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),qU.setFromMatrixPosition(this.light.matrixWorld),CT.setFromMatrixPosition(this.light.target.matrixWorld),YU.subVectors(CT,qU),this.lightPlane.lookAt(CT),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(CT),this.targetLine.scale.z=YU.length()}}const wT=new ae,Is=new jE;class LK extends ou{constructor(e){const t=new En,n=new Na({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(A,E){c(A),c(E)}function c(A){s.push(0,0,0),r.push(0,0,0),a[A]===void 0&&(a[A]=[]),a[A].push(s.length/3-1)}t.setAttribute("position",new Yt(s,3)),t.setAttribute("color",new Yt(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const h=new Bt(16755200),d=new Bt(16711680),m=new Bt(43775),v=new Bt(16777215),y=new Bt(3355443);this.setColors(h,d,m,v,y)}setColors(e,t,n,s,r){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,s.r,s.g,s.b),o.setXYZ(39,s.r,s.g,s.b),o.setXYZ(40,r.r,r.g,r.b),o.setXYZ(41,r.r,r.g,r.b),o.setXYZ(42,r.r,r.g,r.b),o.setXYZ(43,r.r,r.g,r.b),o.setXYZ(44,r.r,r.g,r.b),o.setXYZ(45,r.r,r.g,r.b),o.setXYZ(46,r.r,r.g,r.b),o.setXYZ(47,r.r,r.g,r.b),o.setXYZ(48,r.r,r.g,r.b),o.setXYZ(49,r.r,r.g,r.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,s=1;Is.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===jl?-1:0;ks("c",t,e,Is,0,0,r),ks("t",t,e,Is,0,0,1),ks("n1",t,e,Is,-1,-1,r),ks("n2",t,e,Is,n,-1,r),ks("n3",t,e,Is,-1,s,r),ks("n4",t,e,Is,n,s,r),ks("f1",t,e,Is,-1,-1,1),ks("f2",t,e,Is,n,-1,1),ks("f3",t,e,Is,-1,s,1),ks("f4",t,e,Is,n,s,1),ks("u1",t,e,Is,n*.7,s*1.1,r),ks("u2",t,e,Is,-1*.7,s*1.1,r),ks("u3",t,e,Is,0,s*2,r),ks("cf1",t,e,Is,-1,0,1),ks("cf2",t,e,Is,n,0,1),ks("cf3",t,e,Is,0,-1,1),ks("cf4",t,e,Is,0,s,1),ks("cn1",t,e,Is,-1,0,r),ks("cn2",t,e,Is,n,0,r),ks("cn3",t,e,Is,0,-1,r),ks("cn4",t,e,Is,0,s,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ks(i,e,t,n,s,r,a){wT.set(s,r,a).unproject(n);const o=e[i];if(o!==void 0){const c=t.getAttribute("position");for(let h=0,d=o.length;h<d;h++)c.setXYZ(o[h],wT.x,wT.y,wT.z)}}const RT=new aa;class NK extends ou{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new En;r.setIndex(new ui(n,1)),r.setAttribute("position",new ui(s,3)),super(r,new Na({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&RT.setFromObject(this.object),RT.isEmpty())return;const e=RT.min,t=RT.max,n=this.geometry.attributes.position,s=n.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=e.x,s[7]=e.y,s[8]=t.z,s[9]=t.x,s[10]=e.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=e.z,s[15]=e.x,s[16]=t.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=t.x,s[22]=e.y,s[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class IK extends ou{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new En;r.setIndex(new ui(n,1)),r.setAttribute("position",new Yt(s,3)),super(r,new Na({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PK extends Ff{constructor(e,t=1,n=16776960){const s=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new En;a.setAttribute("position",new Yt(r,3)),a.computeBoundingSphere(),super(a,new Na({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new En;c.setAttribute("position",new Yt(o,3)),c.computeBoundingSphere(),this.add(new ts(c,new Do({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const WU=new ae;let DT,sB;class OK extends ci{constructor(e=new ae(0,0,1),t=new ae(0,0,0),n=1,s=16776960,r=n*.2,a=r*.2){super(),this.type="ArrowHelper",DT===void 0&&(DT=new En,DT.setAttribute("position",new Yt([0,0,0,0,1,0],3)),sB=new JE(.5,1,5,1),sB.translate(0,-.5,0)),this.position.copy(t),this.line=new Ff(DT,new Na({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ts(sB,new Do({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{WU.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(WU,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class UK extends ou{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new En;s.setAttribute("position",new Yt(t,3)),s.setAttribute("color",new Yt(n,3));const r=new Na({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(e,t,n){const s=new Bt,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(n),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class FK{constructor(){this.type="ShapePath",this.color=new Bt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Aw,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,s){return this.currentPath.quadraticCurveTo(e,t,n,s),this}bezierCurveTo(e,t,n,s,r,a){return this.currentPath.bezierCurveTo(e,t,n,s,r,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const w=[];for(let R=0,D=x.length;R<D;R++){const P=x[R],I=new _v;I.curves=P.curves,w.push(I)}return w}function n(x,w){const R=w.length;let D=!1;for(let P=R-1,I=0;I<R;P=I++){let H=w[P],U=w[I],N=U.x-H.x,O=U.y-H.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(H=w[I],N=-N,U=w[P],O=-O),x.y<H.y||x.y>U.y)continue;if(x.y===H.y){if(x.x===H.x)return!0}else{const G=O*(x.x-H.x)-N*(x.y-H.y);if(G===0)return!0;if(G<0)continue;D=!D}}else{if(x.y!==H.y)continue;if(U.x<=x.x&&x.x<=H.x||H.x<=x.x&&x.x<=U.x)return!0}}return D}const s=Jc.isClockWise,r=this.subPaths;if(r.length===0)return[];let a,o,c;const h=[];if(r.length===1)return o=r[0],c=new _v,c.curves=o.curves,h.push(c),h;let d=!s(r[0].getPoints());d=e?!d:d;const m=[],v=[];let y=[],A=0,E;v[A]=void 0,y[A]=[];for(let x=0,w=r.length;x<w;x++)o=r[x],E=o.getPoints(),a=s(E),a=e?!a:a,a?(!d&&v[A]&&A++,v[A]={s:new _v,p:E},v[A].s.curves=o.curves,d&&A++,y[A]=[]):y[A].push({h:o,p:E[0]});if(!v[0])return t(r);if(v.length>1){let x=!1,w=0;for(let R=0,D=v.length;R<D;R++)m[R]=[];for(let R=0,D=v.length;R<D;R++){const P=y[R];for(let I=0;I<P.length;I++){const H=P[I];let U=!0;for(let N=0;N<v.length;N++)n(H.p,v[N].p)&&(R!==N&&w++,U?(U=!1,m[N].push(H)):x=!0);U&&m[R].push(H)}}w>0&&x===!1&&(y=m)}let M;for(let x=0,w=v.length;x<w;x++){c=v[x].s,h.push(c),M=y[x];for(let R=0,D=M.length;R<D;R++)c.holes.push(M[R].h)}return h}}class HK extends ul{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function zK(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function GK(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function kK(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function AL(i,e,t,n){const s=VK(n);switch(t){case NI:return i*e;case GE:return i*e/s.components*s.byteLength;case kE:return i*e/s.components*s.byteLength;case PI:return i*e*2/s.components*s.byteLength;case wR:return i*e*2/s.components*s.byteLength;case II:return i*e*3/s.components*s.byteLength;case Xs:return i*e*4/s.components*s.byteLength;case RR:return i*e*4/s.components*s.byteLength;case Bx:case Lx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Nx:case Ix:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case XC:case YC:return Math.max(i,16)*Math.max(e,8)/4;case jC:case qC:return Math.max(i,8)*Math.max(e,8)/2;case WC:case KC:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case JC:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case ZC:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case QC:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case $C:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case ew:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case tw:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case nw:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case iw:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case sw:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case rw:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case aw:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case ow:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case lw:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case cw:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case uw:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case Px:case hw:case fw:return Math.ceil(i/4)*Math.ceil(e/4)*16;case OI:case dw:return Math.ceil(i/4)*Math.ceil(e/4)*8;case pw:case mw:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function VK(i){switch(i){case as:case ER:return{byteLength:1,components:1};case K_:case MR:case br:return{byteLength:2,components:1};case TR:case CR:return{byteLength:2,components:4};case iu:case zE:case ms:return{byteLength:4,components:1};case LI:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class jK{static contain(e,t){return zK(e,t)}static cover(e,t){return GK(e,t)}static fill(e){return kK(e)}static getByteLength(e,t,n,s){return AL(e,t,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:kp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=kp);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function bk(){let i=null,e=!1,t=null,n=null;function s(r,a){t(r,a),n=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){i=r}}}function XK(i){const e=new WeakMap;function t(o,c){const h=o.array,d=o.usage,m=h.byteLength,v=i.createBuffer();i.bindBuffer(c,v),i.bufferData(c,h,d),o.onUploadCallback();let y;if(h instanceof Float32Array)y=i.FLOAT;else if(h instanceof Uint16Array)o.isFloat16BufferAttribute?y=i.HALF_FLOAT:y=i.UNSIGNED_SHORT;else if(h instanceof Int16Array)y=i.SHORT;else if(h instanceof Uint32Array)y=i.UNSIGNED_INT;else if(h instanceof Int32Array)y=i.INT;else if(h instanceof Int8Array)y=i.BYTE;else if(h instanceof Uint8Array)y=i.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)y=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:v,type:y,bytesPerElement:h.BYTES_PER_ELEMENT,version:o.version,size:m}}function n(o,c,h){const d=c.array,m=c.updateRanges;if(i.bindBuffer(h,o),m.length===0)i.bufferSubData(h,0,d);else{m.sort((y,A)=>y.start-A.start);let v=0;for(let y=1;y<m.length;y++){const A=m[v],E=m[y];E.start<=A.start+A.count+1?A.count=Math.max(A.count,E.start+E.count-A.start):(++v,m[v]=E)}m.length=v+1;for(let y=0,A=m.length;y<A;y++){const E=m[y];i.bufferSubData(h,E.start*d.BYTES_PER_ELEMENT,d,E.start,E.count)}c.clearUpdateRanges()}c.onUploadCallback()}function s(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function r(o){o.isInterleavedBufferAttribute&&(o=o.data);const c=e.get(o);c&&(i.deleteBuffer(c.buffer),e.delete(o))}function a(o,c){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const d=e.get(o);(!d||d.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const h=e.get(o);if(h===void 0)e.set(o,t(o,c));else if(h.version<o.version){if(h.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(h.buffer,o,c),h.version=o.version}}return{get:s,remove:r,update:a}}var qK=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,YK=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,WK=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,KK=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,JK=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,ZK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,QK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,$K=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,eJ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,tJ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,nJ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,iJ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,sJ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,rJ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,aJ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,oJ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,lJ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,cJ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,uJ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,hJ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,fJ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,dJ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,pJ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,mJ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,gJ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,vJ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,yJ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,_J=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,AJ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,bJ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,xJ="gl_FragColor = linearToOutputTexel( gl_FragColor );",SJ=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,EJ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,MJ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,TJ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,CJ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,wJ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,RJ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,DJ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,BJ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,LJ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,NJ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,IJ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,PJ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,OJ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,UJ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,FJ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,HJ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,zJ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,GJ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,kJ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,VJ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,jJ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,XJ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,qJ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,YJ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,WJ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,KJ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,JJ=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ZJ=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,QJ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,$J=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,eZ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,tZ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nZ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,iZ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,sZ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,rZ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,aZ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,oZ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,lZ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,cZ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,uZ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,hZ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fZ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dZ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,pZ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,mZ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,gZ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,vZ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,yZ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,_Z=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,AZ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,bZ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,xZ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,SZ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,EZ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,MZ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,TZ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,CZ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,wZ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,RZ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,DZ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,BZ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,LZ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,NZ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,IZ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,PZ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,OZ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,UZ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,FZ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,HZ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,zZ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,GZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,VZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,jZ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const XZ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,qZ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,YZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,WZ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,JZ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ZZ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,QZ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,$Z=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,eQ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,tQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,nQ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iQ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sQ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rQ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,aQ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oQ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lQ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cQ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,uQ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hQ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fQ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,dQ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pQ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mQ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,gQ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vQ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yQ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_Q=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,AQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,bQ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xQ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,SQ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,EQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Fn={alphahash_fragment:qK,alphahash_pars_fragment:YK,alphamap_fragment:WK,alphamap_pars_fragment:KK,alphatest_fragment:JK,alphatest_pars_fragment:ZK,aomap_fragment:QK,aomap_pars_fragment:$K,batching_pars_vertex:eJ,batching_vertex:tJ,begin_vertex:nJ,beginnormal_vertex:iJ,bsdfs:sJ,iridescence_fragment:rJ,bumpmap_pars_fragment:aJ,clipping_planes_fragment:oJ,clipping_planes_pars_fragment:lJ,clipping_planes_pars_vertex:cJ,clipping_planes_vertex:uJ,color_fragment:hJ,color_pars_fragment:fJ,color_pars_vertex:dJ,color_vertex:pJ,common:mJ,cube_uv_reflection_fragment:gJ,defaultnormal_vertex:vJ,displacementmap_pars_vertex:yJ,displacementmap_vertex:_J,emissivemap_fragment:AJ,emissivemap_pars_fragment:bJ,colorspace_fragment:xJ,colorspace_pars_fragment:SJ,envmap_fragment:EJ,envmap_common_pars_fragment:MJ,envmap_pars_fragment:TJ,envmap_pars_vertex:CJ,envmap_physical_pars_fragment:FJ,envmap_vertex:wJ,fog_vertex:RJ,fog_pars_vertex:DJ,fog_fragment:BJ,fog_pars_fragment:LJ,gradientmap_pars_fragment:NJ,lightmap_pars_fragment:IJ,lights_lambert_fragment:PJ,lights_lambert_pars_fragment:OJ,lights_pars_begin:UJ,lights_toon_fragment:HJ,lights_toon_pars_fragment:zJ,lights_phong_fragment:GJ,lights_phong_pars_fragment:kJ,lights_physical_fragment:VJ,lights_physical_pars_fragment:jJ,lights_fragment_begin:XJ,lights_fragment_maps:qJ,lights_fragment_end:YJ,logdepthbuf_fragment:WJ,logdepthbuf_pars_fragment:KJ,logdepthbuf_pars_vertex:JJ,logdepthbuf_vertex:ZJ,map_fragment:QJ,map_pars_fragment:$J,map_particle_fragment:eZ,map_particle_pars_fragment:tZ,metalnessmap_fragment:nZ,metalnessmap_pars_fragment:iZ,morphinstance_vertex:sZ,morphcolor_vertex:rZ,morphnormal_vertex:aZ,morphtarget_pars_vertex:oZ,morphtarget_vertex:lZ,normal_fragment_begin:cZ,normal_fragment_maps:uZ,normal_pars_fragment:hZ,normal_pars_vertex:fZ,normal_vertex:dZ,normalmap_pars_fragment:pZ,clearcoat_normal_fragment_begin:mZ,clearcoat_normal_fragment_maps:gZ,clearcoat_pars_fragment:vZ,iridescence_pars_fragment:yZ,opaque_fragment:_Z,packing:AZ,premultiplied_alpha_fragment:bZ,project_vertex:xZ,dithering_fragment:SZ,dithering_pars_fragment:EZ,roughnessmap_fragment:MZ,roughnessmap_pars_fragment:TZ,shadowmap_pars_fragment:CZ,shadowmap_pars_vertex:wZ,shadowmap_vertex:RZ,shadowmask_pars_fragment:DZ,skinbase_vertex:BZ,skinning_pars_vertex:LZ,skinning_vertex:NZ,skinnormal_vertex:IZ,specularmap_fragment:PZ,specularmap_pars_fragment:OZ,tonemapping_fragment:UZ,tonemapping_pars_fragment:FZ,transmission_fragment:HZ,transmission_pars_fragment:zZ,uv_pars_fragment:GZ,uv_pars_vertex:kZ,uv_vertex:VZ,worldpos_vertex:jZ,background_vert:XZ,background_frag:qZ,backgroundCube_vert:YZ,backgroundCube_frag:WZ,cube_vert:KZ,cube_frag:JZ,depth_vert:ZZ,depth_frag:QZ,distanceRGBA_vert:$Z,distanceRGBA_frag:eQ,equirect_vert:tQ,equirect_frag:nQ,linedashed_vert:iQ,linedashed_frag:sQ,meshbasic_vert:rQ,meshbasic_frag:aQ,meshlambert_vert:oQ,meshlambert_frag:lQ,meshmatcap_vert:cQ,meshmatcap_frag:uQ,meshnormal_vert:hQ,meshnormal_frag:fQ,meshphong_vert:dQ,meshphong_frag:pQ,meshphysical_vert:mQ,meshphysical_frag:gQ,meshtoon_vert:vQ,meshtoon_frag:yQ,points_vert:_Q,points_frag:AQ,shadow_vert:bQ,shadow_frag:xQ,sprite_vert:SQ,sprite_frag:EQ},Ft={common:{diffuse:{value:new Bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ln},alphaMap:{value:null},alphaMapTransform:{value:new Ln},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ln}},envmap:{envMap:{value:null},envMapRotation:{value:new Ln},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ln}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ln}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ln},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ln},normalScale:{value:new Ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ln},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ln}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ln}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ln}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ln},alphaTest:{value:0},uvTransform:{value:new Ln}},sprite:{diffuse:{value:new Bt(16777215)},opacity:{value:1},center:{value:new Ke(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ln},alphaMap:{value:null},alphaMapTransform:{value:new Ln},alphaTest:{value:0}}},Xc={basic:{uniforms:$a([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.fog]),vertexShader:Fn.meshbasic_vert,fragmentShader:Fn.meshbasic_frag},lambert:{uniforms:$a([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,Ft.lights,{emissive:{value:new Bt(0)}}]),vertexShader:Fn.meshlambert_vert,fragmentShader:Fn.meshlambert_frag},phong:{uniforms:$a([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,Ft.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:Fn.meshphong_vert,fragmentShader:Fn.meshphong_frag},standard:{uniforms:$a([Ft.common,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.roughnessmap,Ft.metalnessmap,Ft.fog,Ft.lights,{emissive:{value:new Bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Fn.meshphysical_vert,fragmentShader:Fn.meshphysical_frag},toon:{uniforms:$a([Ft.common,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.gradientmap,Ft.fog,Ft.lights,{emissive:{value:new Bt(0)}}]),vertexShader:Fn.meshtoon_vert,fragmentShader:Fn.meshtoon_frag},matcap:{uniforms:$a([Ft.common,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,{matcap:{value:null}}]),vertexShader:Fn.meshmatcap_vert,fragmentShader:Fn.meshmatcap_frag},points:{uniforms:$a([Ft.points,Ft.fog]),vertexShader:Fn.points_vert,fragmentShader:Fn.points_frag},dashed:{uniforms:$a([Ft.common,Ft.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Fn.linedashed_vert,fragmentShader:Fn.linedashed_frag},depth:{uniforms:$a([Ft.common,Ft.displacementmap]),vertexShader:Fn.depth_vert,fragmentShader:Fn.depth_frag},normal:{uniforms:$a([Ft.common,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,{opacity:{value:1}}]),vertexShader:Fn.meshnormal_vert,fragmentShader:Fn.meshnormal_frag},sprite:{uniforms:$a([Ft.sprite,Ft.fog]),vertexShader:Fn.sprite_vert,fragmentShader:Fn.sprite_frag},background:{uniforms:{uvTransform:{value:new Ln},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Fn.background_vert,fragmentShader:Fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ln}},vertexShader:Fn.backgroundCube_vert,fragmentShader:Fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Fn.cube_vert,fragmentShader:Fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Fn.equirect_vert,fragmentShader:Fn.equirect_frag},distanceRGBA:{uniforms:$a([Ft.common,Ft.displacementmap,{referencePosition:{value:new ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Fn.distanceRGBA_vert,fragmentShader:Fn.distanceRGBA_frag},shadow:{uniforms:$a([Ft.lights,Ft.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:Fn.shadow_vert,fragmentShader:Fn.shadow_frag}};Xc.physical={uniforms:$a([Xc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ln},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ln},clearcoatNormalScale:{value:new Ke(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ln},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ln},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ln},sheen:{value:0},sheenColor:{value:new Bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ln},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ln},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ln},transmissionSamplerSize:{value:new Ke},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ln},attenuationDistance:{value:0},attenuationColor:{value:new Bt(0)},specularColor:{value:new Bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ln},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ln},anisotropyVector:{value:new Ke},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ln}}]),vertexShader:Fn.meshphysical_vert,fragmentShader:Fn.meshphysical_frag};const BT={r:0,b:0,g:0},Km=new cl,MQ=new on;function TQ(i,e,t,n,s,r,a){const o=new Bt(0);let c=r===!0?0:1,h,d,m=null,v=0,y=null;function A(R){let D=R.isScene===!0?R.background:null;return D&&D.isTexture&&(D=(R.backgroundBlurriness>0?t:e).get(D)),D}function E(R){let D=!1;const P=A(R);P===null?x(o,c):P&&P.isColor&&(x(P,1),D=!0);const I=i.xr.getEnvironmentBlendMode();I==="additive"?n.buffers.color.setClear(0,0,0,1,a):I==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||D)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function M(R,D){const P=A(D);P&&(P.isCubeTexture||P.mapping===pA)?(d===void 0&&(d=new ts(new kv(1,1,1),new Xi({name:"BackgroundCubeMaterial",uniforms:tA(Xc.backgroundCube.uniforms),vertexShader:Xc.backgroundCube.vertexShader,fragmentShader:Xc.backgroundCube.fragmentShader,side:Ar,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(I,H,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(d)),Km.copy(D.backgroundRotation),Km.x*=-1,Km.y*=-1,Km.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(Km.y*=-1,Km.z*=-1),d.material.uniforms.envMap.value=P,d.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(MQ.makeRotationFromEuler(Km)),d.material.toneMapped=ri.getTransfer(P.colorSpace)!==Pi,(m!==P||v!==P.version||y!==i.toneMapping)&&(d.material.needsUpdate=!0,m=P,v=P.version,y=i.toneMapping),d.layers.enableAll(),R.unshift(d,d.geometry,d.material,0,0,null)):P&&P.isTexture&&(h===void 0&&(h=new ts(new jf(2,2),new Xi({name:"BackgroundMaterial",uniforms:tA(Xc.background.uniforms),vertexShader:Xc.background.vertexShader,fragmentShader:Xc.background.fragmentShader,side:nu,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(h)),h.material.uniforms.t2D.value=P,h.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,h.material.toneMapped=ri.getTransfer(P.colorSpace)!==Pi,P.matrixAutoUpdate===!0&&P.updateMatrix(),h.material.uniforms.uvTransform.value.copy(P.matrix),(m!==P||v!==P.version||y!==i.toneMapping)&&(h.material.needsUpdate=!0,m=P,v=P.version,y=i.toneMapping),h.layers.enableAll(),R.unshift(h,h.geometry,h.material,0,0,null))}function x(R,D){R.getRGB(BT,RG(i)),n.buffers.color.setClear(BT.r,BT.g,BT.b,D,a)}function w(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return o},setClearColor:function(R,D=1){o.set(R),c=D,x(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(R){c=R,x(o,c)},render:E,addToRenderList:M,dispose:w}}function CQ(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=v(null);let r=s,a=!1;function o(O,G,oe,se,le){let ue=!1;const z=m(se,oe,G);r!==z&&(r=z,h(r.object)),ue=y(O,se,oe,le),ue&&A(O,se,oe,le),le!==null&&e.update(le,i.ELEMENT_ARRAY_BUFFER),(ue||a)&&(a=!1,D(O,G,oe,se),le!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(le).buffer))}function c(){return i.createVertexArray()}function h(O){return i.bindVertexArray(O)}function d(O){return i.deleteVertexArray(O)}function m(O,G,oe){const se=oe.wireframe===!0;let le=n[O.id];le===void 0&&(le={},n[O.id]=le);let ue=le[G.id];ue===void 0&&(ue={},le[G.id]=ue);let z=ue[se];return z===void 0&&(z=v(c()),ue[se]=z),z}function v(O){const G=[],oe=[],se=[];for(let le=0;le<t;le++)G[le]=0,oe[le]=0,se[le]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:oe,attributeDivisors:se,object:O,attributes:{},index:null}}function y(O,G,oe,se){const le=r.attributes,ue=G.attributes;let z=0;const K=oe.getAttributes();for(const Q in K)if(K[Q].location>=0){const W=le[Q];let he=ue[Q];if(he===void 0&&(Q==="instanceMatrix"&&O.instanceMatrix&&(he=O.instanceMatrix),Q==="instanceColor"&&O.instanceColor&&(he=O.instanceColor)),W===void 0||W.attribute!==he||he&&W.data!==he.data)return!0;z++}return r.attributesNum!==z||r.index!==se}function A(O,G,oe,se){const le={},ue=G.attributes;let z=0;const K=oe.getAttributes();for(const Q in K)if(K[Q].location>=0){let W=ue[Q];W===void 0&&(Q==="instanceMatrix"&&O.instanceMatrix&&(W=O.instanceMatrix),Q==="instanceColor"&&O.instanceColor&&(W=O.instanceColor));const he={};he.attribute=W,W&&W.data&&(he.data=W.data),le[Q]=he,z++}r.attributes=le,r.attributesNum=z,r.index=se}function E(){const O=r.newAttributes;for(let G=0,oe=O.length;G<oe;G++)O[G]=0}function M(O){x(O,0)}function x(O,G){const oe=r.newAttributes,se=r.enabledAttributes,le=r.attributeDivisors;oe[O]=1,se[O]===0&&(i.enableVertexAttribArray(O),se[O]=1),le[O]!==G&&(i.vertexAttribDivisor(O,G),le[O]=G)}function w(){const O=r.newAttributes,G=r.enabledAttributes;for(let oe=0,se=G.length;oe<se;oe++)G[oe]!==O[oe]&&(i.disableVertexAttribArray(oe),G[oe]=0)}function R(O,G,oe,se,le,ue,z){z===!0?i.vertexAttribIPointer(O,G,oe,le,ue):i.vertexAttribPointer(O,G,oe,se,le,ue)}function D(O,G,oe,se){E();const le=se.attributes,ue=oe.getAttributes(),z=G.defaultAttributeValues;for(const K in ue){const Q=ue[K];if(Q.location>=0){let de=le[K];if(de===void 0&&(K==="instanceMatrix"&&O.instanceMatrix&&(de=O.instanceMatrix),K==="instanceColor"&&O.instanceColor&&(de=O.instanceColor)),de!==void 0){const W=de.normalized,he=de.itemSize,xe=e.get(de);if(xe===void 0)continue;const ye=xe.buffer,fe=xe.type,De=xe.bytesPerElement,Ce=fe===i.INT||fe===i.UNSIGNED_INT||de.gpuType===zE;if(de.isInterleavedBufferAttribute){const Ue=de.data,Qe=Ue.stride,xt=de.offset;if(Ue.isInstancedInterleavedBuffer){for(let lt=0;lt<Q.locationSize;lt++)x(Q.location+lt,Ue.meshPerAttribute);O.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=Ue.meshPerAttribute*Ue.count)}else for(let lt=0;lt<Q.locationSize;lt++)M(Q.location+lt);i.bindBuffer(i.ARRAY_BUFFER,ye);for(let lt=0;lt<Q.locationSize;lt++)R(Q.location+lt,he/Q.locationSize,fe,W,Qe*De,(xt+he/Q.locationSize*lt)*De,Ce)}else{if(de.isInstancedBufferAttribute){for(let Ue=0;Ue<Q.locationSize;Ue++)x(Q.location+Ue,de.meshPerAttribute);O.isInstancedMesh!==!0&&se._maxInstanceCount===void 0&&(se._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let Ue=0;Ue<Q.locationSize;Ue++)M(Q.location+Ue);i.bindBuffer(i.ARRAY_BUFFER,ye);for(let Ue=0;Ue<Q.locationSize;Ue++)R(Q.location+Ue,he/Q.locationSize,fe,W,he*De,he/Q.locationSize*Ue*De,Ce)}}else if(z!==void 0){const W=z[K];if(W!==void 0)switch(W.length){case 2:i.vertexAttrib2fv(Q.location,W);break;case 3:i.vertexAttrib3fv(Q.location,W);break;case 4:i.vertexAttrib4fv(Q.location,W);break;default:i.vertexAttrib1fv(Q.location,W)}}}}w()}function P(){U();for(const O in n){const G=n[O];for(const oe in G){const se=G[oe];for(const le in se)d(se[le].object),delete se[le];delete G[oe]}delete n[O]}}function I(O){if(n[O.id]===void 0)return;const G=n[O.id];for(const oe in G){const se=G[oe];for(const le in se)d(se[le].object),delete se[le];delete G[oe]}delete n[O.id]}function H(O){for(const G in n){const oe=n[G];if(oe[O.id]===void 0)continue;const se=oe[O.id];for(const le in se)d(se[le].object),delete se[le];delete oe[O.id]}}function U(){N(),a=!0,r!==s&&(r=s,h(r.object))}function N(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:o,reset:U,resetDefaultState:N,dispose:P,releaseStatesOfGeometry:I,releaseStatesOfProgram:H,initAttributes:E,enableAttribute:M,disableUnusedAttributes:w}}function wQ(i,e,t){let n;function s(h){n=h}function r(h,d){i.drawArrays(n,h,d),t.update(d,n,1)}function a(h,d,m){m!==0&&(i.drawArraysInstanced(n,h,d,m),t.update(d,n,m))}function o(h,d,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,h,0,d,0,m);let y=0;for(let A=0;A<m;A++)y+=d[A];t.update(y,n,1)}function c(h,d,m,v){if(m===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let A=0;A<h.length;A++)a(h[A],d[A],v[A]);else{y.multiDrawArraysInstancedWEBGL(n,h,0,d,0,v,0,m);let A=0;for(let E=0;E<m;E++)A+=d[E]*v[E];t.update(A,n,1)}}this.setMode=s,this.render=r,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=c}function RQ(i,e,t,n){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const H=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(H.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(H){return!(H!==Xs&&n.convert(H)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(H){const U=H===br&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(H!==as&&n.convert(H)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&H!==ms&&!U)}function c(H){if(H==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";H="mediump"}return H==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=t.precision!==void 0?t.precision:"highp";const d=c(h);d!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",d,"instead."),h=d);const m=t.logarithmicDepthBuffer===!0,v=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),y=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),A=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=i.getParameter(i.MAX_TEXTURE_SIZE),M=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),x=i.getParameter(i.MAX_VERTEX_ATTRIBS),w=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),R=i.getParameter(i.MAX_VARYING_VECTORS),D=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),P=A>0,I=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:c,textureFormatReadable:a,textureTypeReadable:o,precision:h,logarithmicDepthBuffer:m,reverseDepthBuffer:v,maxTextures:y,maxVertexTextures:A,maxTextureSize:E,maxCubemapSize:M,maxAttributes:x,maxVertexUniforms:w,maxVaryings:R,maxFragmentUniforms:D,vertexTextures:P,maxSamples:I}}function DQ(i){const e=this;let t=null,n=0,s=!1,r=!1;const a=new sf,o=new Ln,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,v){const y=m.length!==0||v||n!==0||s;return s=v,n=m.length,y},this.beginShadows=function(){r=!0,d(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(m,v){t=d(m,v,0)},this.setState=function(m,v,y){const A=m.clippingPlanes,E=m.clipIntersection,M=m.clipShadows,x=i.get(m);if(!s||A===null||A.length===0||r&&!M)r?d(null):h();else{const w=r?0:n,R=w*4;let D=x.clippingState||null;c.value=D,D=d(A,v,R,y);for(let P=0;P!==R;++P)D[P]=t[P];x.clippingState=D,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=w}};function h(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function d(m,v,y,A){const E=m!==null?m.length:0;let M=null;if(E!==0){if(M=c.value,A!==!0||M===null){const x=y+E*4,w=v.matrixWorldInverse;o.getNormalMatrix(w),(M===null||M.length<x)&&(M=new Float32Array(x));for(let R=0,D=y;R!==E;++R,D+=4)a.copy(m[R]).applyMatrix4(w,o),a.normal.toArray(M,D),M[D+3]=a.constant}c.value=M,c.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,M}}function BQ(i){let e=new WeakMap;function t(a,o){return o===Y_?a.mapping=mh:o===Qx&&(a.mapping=Np),a}function n(a){if(a&&a.isTexture){const o=a.mapping;if(o===Y_||o===Qx)if(e.has(a)){const c=e.get(a).texture;return t(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const h=new VI(c.height);return h.fromEquirectangularTexture(i,a),e.set(a,h),a.addEventListener("dispose",s),t(h.texture,a.mapping)}else return null}}return a}function s(a){const o=a.target;o.removeEventListener("dispose",s);const c=e.get(o);c!==void 0&&(e.delete(o),c.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}const Ly=4,KU=[.125,.215,.35,.446,.526,.582],lg=20,rB=new ql,JU=new Bt;let aB=null,oB=0,lB=0,cB=!1;const ng=(1+Math.sqrt(5))/2,vy=1/ng,ZU=[new ae(-ng,vy,0),new ae(ng,vy,0),new ae(-vy,0,ng),new ae(vy,0,ng),new ae(0,ng,-vy),new ae(0,ng,vy),new ae(-1,1,-1),new ae(1,1,-1),new ae(-1,1,1),new ae(1,1,1)],LQ=new ae;class bL{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100,r={}){const{size:a=256,position:o=LQ}=r;aB=this._renderer.getRenderTarget(),oB=this._renderer.getActiveCubeFace(),lB=this._renderer.getActiveMipmapLevel(),cB=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,n,s,c,o),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=eF(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$U(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(aB,oB,lB),this._renderer.xr.enabled=cB,e.scissorTest=!1,LT(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===mh||e.mapping===Np?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),aB=this._renderer.getRenderTarget(),oB=this._renderer.getActiveCubeFace(),lB=this._renderer.getActiveMipmapLevel(),cB=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:li,minFilter:li,generateMipmaps:!1,type:br,format:Xs,colorSpace:ll,depthBuffer:!1},s=QU(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=QU(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=NQ(r)),this._blurMaterial=IQ(r,e,t)}return s}_compileMaterial(e){const t=new ts(this._lodPlanes[0],e);this._renderer.compile(t,rB)}_sceneToCubeUV(e,t,n,s,r){const c=new es(90,1,t,n),h=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],m=this._renderer,v=m.autoClear,y=m.toneMapping;m.getClearColor(JU),m.toneMapping=$c,m.autoClear=!1;const A=new Do({name:"PMREM.Background",side:Ar,depthWrite:!1,depthTest:!1}),E=new ts(new kv,A);let M=!1;const x=e.background;x?x.isColor&&(A.color.copy(x),e.background=null,M=!0):(A.color.copy(JU),M=!0);for(let w=0;w<6;w++){const R=w%3;R===0?(c.up.set(0,h[w],0),c.position.set(r.x,r.y,r.z),c.lookAt(r.x+d[w],r.y,r.z)):R===1?(c.up.set(0,0,h[w]),c.position.set(r.x,r.y,r.z),c.lookAt(r.x,r.y+d[w],r.z)):(c.up.set(0,h[w],0),c.position.set(r.x,r.y,r.z),c.lookAt(r.x,r.y,r.z+d[w]));const D=this._cubeSize;LT(s,R*D,w>2?D:0,D,D),m.setRenderTarget(s),M&&m.render(E,c),m.render(e,c)}E.geometry.dispose(),E.material.dispose(),m.toneMapping=y,m.autoClear=v,e.background=x}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===mh||e.mapping===Np;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=eF()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$U());const r=s?this._cubemapMaterial:this._equirectMaterial,a=new ts(this._lodPlanes[0],r),o=r.uniforms;o.envMap.value=e;const c=this._cubeSize;LT(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(a,rB)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=ZU[(s-r-1)%ZU.length];this._blur(e,r-1,r,a,o)}t.autoClear=n}_blur(e,t,n,s,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,s,"latitudinal",r),this._halfBlur(a,e,n,n,s,"longitudinal",r)}_halfBlur(e,t,n,s,r,a,o){const c=this._renderer,h=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,m=new ts(this._lodPlanes[s],h),v=h.uniforms,y=this._sizeLods[n]-1,A=isFinite(r)?Math.PI/(2*y):2*Math.PI/(2*lg-1),E=r/A,M=isFinite(r)?1+Math.floor(d*E):lg;M>lg&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${lg}`);const x=[];let w=0;for(let H=0;H<lg;++H){const U=H/E,N=Math.exp(-U*U/2);x.push(N),H===0?w+=N:H<M&&(w+=2*N)}for(let H=0;H<x.length;H++)x[H]=x[H]/w;v.envMap.value=e.texture,v.samples.value=M,v.weights.value=x,v.latitudinal.value=a==="latitudinal",o&&(v.poleAxis.value=o);const{_lodMax:R}=this;v.dTheta.value=A,v.mipInt.value=R-n;const D=this._sizeLods[s],P=3*D*(s>R-Ly?s-R+Ly:0),I=4*(this._cubeSize-D);LT(t,P,I,3*D,2*D),c.setRenderTarget(t),c.render(m,rB)}}function NQ(i){const e=[],t=[],n=[];let s=i;const r=i-Ly+1+KU.length;for(let a=0;a<r;a++){const o=Math.pow(2,s);t.push(o);let c=1/o;a>i-Ly?c=KU[a-i+Ly-1]:a===0&&(c=0),n.push(c);const h=1/(o-2),d=-h,m=1+h,v=[d,d,m,d,m,m,d,d,m,m,d,m],y=6,A=6,E=3,M=2,x=1,w=new Float32Array(E*A*y),R=new Float32Array(M*A*y),D=new Float32Array(x*A*y);for(let I=0;I<y;I++){const H=I%3*2/3-1,U=I>2?0:-1,N=[H,U,0,H+2/3,U,0,H+2/3,U+1,0,H,U,0,H+2/3,U+1,0,H,U+1,0];w.set(N,E*A*I),R.set(v,M*A*I);const O=[I,I,I,I,I,I];D.set(O,x*A*I)}const P=new En;P.setAttribute("position",new ui(w,E)),P.setAttribute("uv",new ui(R,M)),P.setAttribute("faceIndex",new ui(D,x)),e.push(P),s>Ly&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function QU(i,e,t){const n=new Zi(i,e,t);return n.texture.mapping=pA,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function LT(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function IQ(i,e,t){const n=new Float32Array(lg),s=new ae(0,1,0);return new Xi({name:"SphericalGaussianBlur",defines:{n:lg,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:v3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:qs,depthTest:!1,depthWrite:!1})}function $U(){return new Xi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:v3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:qs,depthTest:!1,depthWrite:!1})}function eF(){return new Xi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:v3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:qs,depthTest:!1,depthWrite:!1})}function v3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function PQ(i){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const c=o.mapping,h=c===Y_||c===Qx,d=c===mh||c===Np;if(h||d){let m=e.get(o);const v=m!==void 0?m.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==v)return t===null&&(t=new bL(i)),m=h?t.fromEquirectangular(o,m):t.fromCubemap(o,m),m.texture.pmremVersion=o.pmremVersion,e.set(o,m),m.texture;if(m!==void 0)return m.texture;{const y=o.image;return h&&y&&y.height>0||d&&y&&s(y)?(t===null&&(t=new bL(i)),m=h?t.fromEquirectangular(o):t.fromCubemap(o),m.texture.pmremVersion=o.pmremVersion,e.set(o,m),o.addEventListener("dispose",r),m.texture):null}}}return o}function s(o){let c=0;const h=6;for(let d=0;d<h;d++)o[d]!==void 0&&c++;return c===h}function r(o){const c=o.target;c.removeEventListener("dispose",r);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function OQ(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const s=t(n);return s===null&&QT("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function UQ(i,e,t,n){const s={},r=new WeakMap;function a(m){const v=m.target;v.index!==null&&e.remove(v.index);for(const A in v.attributes)e.remove(v.attributes[A]);v.removeEventListener("dispose",a),delete s[v.id];const y=r.get(v);y&&(e.remove(y),r.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function o(m,v){return s[v.id]===!0||(v.addEventListener("dispose",a),s[v.id]=!0,t.memory.geometries++),v}function c(m){const v=m.attributes;for(const y in v)e.update(v[y],i.ARRAY_BUFFER)}function h(m){const v=[],y=m.index,A=m.attributes.position;let E=0;if(y!==null){const w=y.array;E=y.version;for(let R=0,D=w.length;R<D;R+=3){const P=w[R+0],I=w[R+1],H=w[R+2];v.push(P,I,I,H,H,P)}}else if(A!==void 0){const w=A.array;E=A.version;for(let R=0,D=w.length/3-1;R<D;R+=3){const P=R+0,I=R+1,H=R+2;v.push(P,I,I,H,H,P)}}else return;const M=new(MG(v)?kI:GI)(v,1);M.version=E;const x=r.get(m);x&&e.remove(x),r.set(m,M)}function d(m){const v=r.get(m);if(v){const y=m.index;y!==null&&v.version<y.version&&h(m)}else h(m);return r.get(m)}return{get:o,update:c,getWireframeAttribute:d}}function FQ(i,e,t){let n;function s(v){n=v}let r,a;function o(v){r=v.type,a=v.bytesPerElement}function c(v,y){i.drawElements(n,y,r,v*a),t.update(y,n,1)}function h(v,y,A){A!==0&&(i.drawElementsInstanced(n,y,r,v*a,A),t.update(y,n,A))}function d(v,y,A){if(A===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,y,0,r,v,0,A);let M=0;for(let x=0;x<A;x++)M+=y[x];t.update(M,n,1)}function m(v,y,A,E){if(A===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let x=0;x<v.length;x++)h(v[x]/a,y[x],E[x]);else{M.multiDrawElementsInstancedWEBGL(n,y,0,r,v,0,E,0,A);let x=0;for(let w=0;w<A;w++)x+=y[w]*E[w];t.update(x,n,1)}}this.setMode=s,this.setIndex=o,this.render=c,this.renderInstances=h,this.renderMultiDraw=d,this.renderMultiDrawInstances=m}function HQ(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,a,o){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=o*(r/3);break;case i.LINES:t.lines+=o*(r/2);break;case i.LINE_STRIP:t.lines+=o*(r-1);break;case i.LINE_LOOP:t.lines+=o*r;break;case i.POINTS:t.points+=o*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function zQ(i,e,t){const n=new WeakMap,s=new ai;function r(a,o,c){const h=a.morphTargetInfluences,d=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,m=d!==void 0?d.length:0;let v=n.get(o);if(v===void 0||v.count!==m){let O=function(){U.dispose(),n.delete(o),o.removeEventListener("dispose",O)};var y=O;v!==void 0&&v.texture.dispose();const A=o.morphAttributes.position!==void 0,E=o.morphAttributes.normal!==void 0,M=o.morphAttributes.color!==void 0,x=o.morphAttributes.position||[],w=o.morphAttributes.normal||[],R=o.morphAttributes.color||[];let D=0;A===!0&&(D=1),E===!0&&(D=2),M===!0&&(D=3);let P=o.attributes.position.count*D,I=1;P>e.maxTextureSize&&(I=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const H=new Float32Array(P*I*4*m),U=new VE(H,P,I,m);U.type=ms,U.needsUpdate=!0;const N=D*4;for(let G=0;G<m;G++){const oe=x[G],se=w[G],le=R[G],ue=P*I*4*G;for(let z=0;z<oe.count;z++){const K=z*N;A===!0&&(s.fromBufferAttribute(oe,z),H[ue+K+0]=s.x,H[ue+K+1]=s.y,H[ue+K+2]=s.z,H[ue+K+3]=0),E===!0&&(s.fromBufferAttribute(se,z),H[ue+K+4]=s.x,H[ue+K+5]=s.y,H[ue+K+6]=s.z,H[ue+K+7]=0),M===!0&&(s.fromBufferAttribute(le,z),H[ue+K+8]=s.x,H[ue+K+9]=s.y,H[ue+K+10]=s.z,H[ue+K+11]=le.itemSize===4?s.w:1)}}v={count:m,texture:U,size:new Ke(P,I)},n.set(o,v),o.addEventListener("dispose",O)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)c.getUniforms().setValue(i,"morphTexture",a.morphTexture,t);else{let A=0;for(let M=0;M<h.length;M++)A+=h[M];const E=o.morphTargetsRelative?1:1-A;c.getUniforms().setValue(i,"morphTargetBaseInfluence",E),c.getUniforms().setValue(i,"morphTargetInfluences",h)}c.getUniforms().setValue(i,"morphTargetsTexture",v.texture,t),c.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}return{update:r}}function GQ(i,e,t,n){let s=new WeakMap;function r(c){const h=n.render.frame,d=c.geometry,m=e.get(c,d);if(s.get(m)!==h&&(e.update(m),s.set(m,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",o)===!1&&c.addEventListener("dispose",o),s.get(c)!==h&&(t.update(c.instanceMatrix,i.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,i.ARRAY_BUFFER),s.set(c,h))),c.isSkinnedMesh){const v=c.skeleton;s.get(v)!==h&&(v.update(),s.set(v,h))}return m}function a(){s=new WeakMap}function o(c){const h=c.target;h.removeEventListener("dispose",o),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:r,dispose:a}}const xk=new Ai,tF=new WE(1,1),Sk=new VE,Ek=new LR,Mk=new XE,nF=[],iF=[],sF=new Float32Array(16),rF=new Float32Array(9),aF=new Float32Array(4);function yA(i,e,t){const n=i[0];if(n<=0||n>0)return i;const s=e*t;let r=nF[s];if(r===void 0&&(r=new Float32Array(s),nF[s]=r),e!==0){n.toArray(r,0);for(let a=1,o=0;a!==e;++a)o+=t,i[a].toArray(r,o)}return r}function Er(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Mr(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function e2(i,e){let t=iF[e];t===void 0&&(t=new Int32Array(e),iF[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function kQ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function VQ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Er(t,e))return;i.uniform2fv(this.addr,e),Mr(t,e)}}function jQ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Er(t,e))return;i.uniform3fv(this.addr,e),Mr(t,e)}}function XQ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Er(t,e))return;i.uniform4fv(this.addr,e),Mr(t,e)}}function qQ(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Er(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Mr(t,e)}else{if(Er(t,n))return;aF.set(n),i.uniformMatrix2fv(this.addr,!1,aF),Mr(t,n)}}function YQ(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Er(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Mr(t,e)}else{if(Er(t,n))return;rF.set(n),i.uniformMatrix3fv(this.addr,!1,rF),Mr(t,n)}}function WQ(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Er(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Mr(t,e)}else{if(Er(t,n))return;sF.set(n),i.uniformMatrix4fv(this.addr,!1,sF),Mr(t,n)}}function KQ(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function JQ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Er(t,e))return;i.uniform2iv(this.addr,e),Mr(t,e)}}function ZQ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Er(t,e))return;i.uniform3iv(this.addr,e),Mr(t,e)}}function QQ(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Er(t,e))return;i.uniform4iv(this.addr,e),Mr(t,e)}}function $Q(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function e$(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Er(t,e))return;i.uniform2uiv(this.addr,e),Mr(t,e)}}function t$(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Er(t,e))return;i.uniform3uiv(this.addr,e),Mr(t,e)}}function n$(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Er(t,e))return;i.uniform4uiv(this.addr,e),Mr(t,e)}}function i$(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let r;this.type===i.SAMPLER_2D_SHADOW?(tF.compareFunction=HI,r=tF):r=xk,t.setTexture2D(e||r,s)}function s$(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||Ek,s)}function r$(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||Mk,s)}function a$(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||Sk,s)}function o$(i){switch(i){case 5126:return kQ;case 35664:return VQ;case 35665:return jQ;case 35666:return XQ;case 35674:return qQ;case 35675:return YQ;case 35676:return WQ;case 5124:case 35670:return KQ;case 35667:case 35671:return JQ;case 35668:case 35672:return ZQ;case 35669:case 35673:return QQ;case 5125:return $Q;case 36294:return e$;case 36295:return t$;case 36296:return n$;case 35678:case 36198:case 36298:case 36306:case 35682:return i$;case 35679:case 36299:case 36307:return s$;case 35680:case 36300:case 36308:case 36293:return r$;case 36289:case 36303:case 36311:case 36292:return a$}}function l$(i,e){i.uniform1fv(this.addr,e)}function c$(i,e){const t=yA(e,this.size,2);i.uniform2fv(this.addr,t)}function u$(i,e){const t=yA(e,this.size,3);i.uniform3fv(this.addr,t)}function h$(i,e){const t=yA(e,this.size,4);i.uniform4fv(this.addr,t)}function f$(i,e){const t=yA(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function d$(i,e){const t=yA(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function p$(i,e){const t=yA(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function m$(i,e){i.uniform1iv(this.addr,e)}function g$(i,e){i.uniform2iv(this.addr,e)}function v$(i,e){i.uniform3iv(this.addr,e)}function y$(i,e){i.uniform4iv(this.addr,e)}function _$(i,e){i.uniform1uiv(this.addr,e)}function A$(i,e){i.uniform2uiv(this.addr,e)}function b$(i,e){i.uniform3uiv(this.addr,e)}function x$(i,e){i.uniform4uiv(this.addr,e)}function S$(i,e,t){const n=this.cache,s=e.length,r=e2(t,s);Er(n,r)||(i.uniform1iv(this.addr,r),Mr(n,r));for(let a=0;a!==s;++a)t.setTexture2D(e[a]||xk,r[a])}function E$(i,e,t){const n=this.cache,s=e.length,r=e2(t,s);Er(n,r)||(i.uniform1iv(this.addr,r),Mr(n,r));for(let a=0;a!==s;++a)t.setTexture3D(e[a]||Ek,r[a])}function M$(i,e,t){const n=this.cache,s=e.length,r=e2(t,s);Er(n,r)||(i.uniform1iv(this.addr,r),Mr(n,r));for(let a=0;a!==s;++a)t.setTextureCube(e[a]||Mk,r[a])}function T$(i,e,t){const n=this.cache,s=e.length,r=e2(t,s);Er(n,r)||(i.uniform1iv(this.addr,r),Mr(n,r));for(let a=0;a!==s;++a)t.setTexture2DArray(e[a]||Sk,r[a])}function C$(i){switch(i){case 5126:return l$;case 35664:return c$;case 35665:return u$;case 35666:return h$;case 35674:return f$;case 35675:return d$;case 35676:return p$;case 5124:case 35670:return m$;case 35667:case 35671:return g$;case 35668:case 35672:return v$;case 35669:case 35673:return y$;case 5125:return _$;case 36294:return A$;case 36295:return b$;case 36296:return x$;case 35678:case 36198:case 36298:case 36306:case 35682:return S$;case 35679:case 36299:case 36307:return E$;case 35680:case 36300:case 36308:case 36293:return M$;case 36289:case 36303:case 36311:case 36292:return T$}}class w${constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=o$(t.type)}}class R${constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=C$(t.type)}}class D${constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let r=0,a=s.length;r!==a;++r){const o=s[r];o.setValue(e,t[o.id],n)}}}const uB=/(\w+)(\])?(\[|\.)?/g;function oF(i,e){i.seq.push(e),i.map[e.id]=e}function B$(i,e,t){const n=i.name,s=n.length;for(uB.lastIndex=0;;){const r=uB.exec(n),a=uB.lastIndex;let o=r[1];const c=r[2]==="]",h=r[3];if(c&&(o=o|0),h===void 0||h==="["&&a+2===s){oF(t,h===void 0?new w$(o,i,e):new R$(o,i,e));break}else{let m=t.map[o];m===void 0&&(m=new D$(o),oF(t,m)),t=m}}}class eC{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const r=e.getActiveUniform(t,s),a=e.getUniformLocation(t,r.name);B$(r,a,this)}}setValue(e,t,n,s){const r=this.map[t];r!==void 0&&r.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let r=0,a=t.length;r!==a;++r){const o=t[r],c=n[o.id];c.needsUpdate!==!1&&o.setValue(e,c.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,r=e.length;s!==r;++s){const a=e[s];a.id in t&&n.push(a)}return n}}function lF(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const L$=37297;let N$=0;function I$(i,e){const t=i.split(`
`),n=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let a=s;a<r;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}const cF=new Ln;function P$(i){ri._getMatrix(cF,ri.workingColorSpace,i);const e=`mat3( ${cF.elements.map(t=>t.toFixed(4))} )`;switch(ri.getTransfer(i)){case eS:return[e,"LinearTransferOETF"];case Pi:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function uF(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=i.getShaderInfoLog(e).trim();if(n&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const a=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+I$(i.getShaderSource(e),a)}else return s}function O$(i,e){const t=P$(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function U$(i,e){let t;switch(e){case sG:t="Linear";break;case rG:t="Reinhard";break;case aG:t="Cineon";break;case xR:t="ACESFilmic";break;case lG:t="AgX";break;case cG:t="Neutral";break;case oG:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const NT=new ae;function F$(){ri.getLuminanceCoefficients(NT);const i=NT.x.toFixed(4),e=NT.y.toFixed(4),t=NT.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function H$(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(hx).join(`
`)}function z$(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function G$(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const r=i.getActiveAttrib(e,s),a=r.name;let o=1;r.type===i.FLOAT_MAT2&&(o=2),r.type===i.FLOAT_MAT3&&(o=3),r.type===i.FLOAT_MAT4&&(o=4),t[a]={type:r.type,location:i.getAttribLocation(e,a),locationSize:o}}return t}function hx(i){return i!==""}function hF(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function fF(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const k$=/^[ \t]*#include +<([\w\d./]+)>/gm;function xL(i){return i.replace(k$,j$)}const V$=new Map;function j$(i,e){let t=Fn[e];if(t===void 0){const n=V$.get(e);if(n!==void 0)t=Fn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return xL(t)}const X$=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dF(i){return i.replace(X$,q$)}function q$(i,e,t,n){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function pF(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Y$(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===bR?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Dx?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Rc&&(e="SHADOWMAP_TYPE_VSM"),e}function W$(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case mh:case Np:e="ENVMAP_TYPE_CUBE";break;case pA:e="ENVMAP_TYPE_CUBE_UV";break}return e}function K$(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Np:e="ENVMAP_MODE_REFRACTION";break}return e}function J$(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case HE:e="ENVMAP_BLENDING_MULTIPLY";break;case nG:e="ENVMAP_BLENDING_MIX";break;case iG:e="ENVMAP_BLENDING_ADD";break}return e}function Z$(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function Q$(i,e,t,n){const s=i.getContext(),r=t.defines;let a=t.vertexShader,o=t.fragmentShader;const c=Y$(t),h=W$(t),d=K$(t),m=J$(t),v=Z$(t),y=H$(t),A=z$(r),E=s.createProgram();let M,x,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(hx).join(`
`),M.length>0&&(M+=`
`),x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(hx).join(`
`),x.length>0&&(x+=`
`)):(M=[pF(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(hx).join(`
`),x=[pF(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",t.envMap?"#define "+m:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==$c?"#define TONE_MAPPING":"",t.toneMapping!==$c?Fn.tonemapping_pars_fragment:"",t.toneMapping!==$c?U$("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Fn.colorspace_pars_fragment,O$("linearToOutputTexel",t.outputColorSpace),F$(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(hx).join(`
`)),a=xL(a),a=hF(a,t),a=fF(a,t),o=xL(o),o=hF(o,t),o=fF(o,t),a=dF(a),o=dF(o),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,M=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,x=["#define varying in",t.glslVersion===dL?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===dL?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const R=w+M+a,D=w+x+o,P=lF(s,s.VERTEX_SHADER,R),I=lF(s,s.FRAGMENT_SHADER,D);s.attachShader(E,P),s.attachShader(E,I),t.index0AttributeName!==void 0?s.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(E,0,"position"),s.linkProgram(E);function H(G){if(i.debug.checkShaderErrors){const oe=s.getProgramInfoLog(E).trim(),se=s.getShaderInfoLog(P).trim(),le=s.getShaderInfoLog(I).trim();let ue=!0,z=!0;if(s.getProgramParameter(E,s.LINK_STATUS)===!1)if(ue=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,E,P,I);else{const K=uF(s,P,"vertex"),Q=uF(s,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(E,s.VALIDATE_STATUS)+`

Material Name: `+G.name+`
Material Type: `+G.type+`

Program Info Log: `+oe+`
`+K+`
`+Q)}else oe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",oe):(se===""||le==="")&&(z=!1);z&&(G.diagnostics={runnable:ue,programLog:oe,vertexShader:{log:se,prefix:M},fragmentShader:{log:le,prefix:x}})}s.deleteShader(P),s.deleteShader(I),U=new eC(s,E),N=G$(s,E)}let U;this.getUniforms=function(){return U===void 0&&H(this),U};let N;this.getAttributes=function(){return N===void 0&&H(this),N};let O=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=s.getProgramParameter(E,L$)),O},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=N$++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=P,this.fragmentShader=I,this}let $$=0;class eee{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(s)===!1&&(a.add(s),s.usedTimes++),a.has(r)===!1&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new tee(e),t.set(e,n)),n}}class tee{constructor(e){this.id=$$++,this.code=e,this.usedTimes=0}}function nee(i,e,t,n,s,r,a){const o=new eA,c=new eee,h=new Set,d=[],m=s.logarithmicDepthBuffer,v=s.vertexTextures;let y=s.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(N){return h.add(N),N===0?"uv":`uv${N}`}function M(N,O,G,oe,se){const le=oe.fog,ue=se.geometry,z=N.isMeshStandardMaterial?oe.environment:null,K=(N.isMeshStandardMaterial?t:e).get(N.envMap||z),Q=K&&K.mapping===pA?K.image.height:null,de=A[N.type];N.precision!==null&&(y=s.getMaxPrecision(N.precision),y!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",y,"instead."));const W=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,he=W!==void 0?W.length:0;let xe=0;ue.morphAttributes.position!==void 0&&(xe=1),ue.morphAttributes.normal!==void 0&&(xe=2),ue.morphAttributes.color!==void 0&&(xe=3);let ye,fe,De,Ce;if(de){const yn=Xc[de];ye=yn.vertexShader,fe=yn.fragmentShader}else ye=N.vertexShader,fe=N.fragmentShader,c.update(N),De=c.getVertexShaderID(N),Ce=c.getFragmentShaderID(N);const Ue=i.getRenderTarget(),Qe=i.state.buffers.depth.getReversed(),xt=se.isInstancedMesh===!0,lt=se.isBatchedMesh===!0,mt=!!N.map,it=!!N.matcap,et=!!K,$=!!N.aoMap,$e=!!N.lightMap,Ie=!!N.bumpMap,ke=!!N.normalMap,We=!!N.displacementMap,St=!!N.emissiveMap,nt=!!N.metalnessMap,re=!!N.roughnessMap,J=N.anisotropy>0,Te=N.clearcoat>0,Ye=N.dispersion>0,st=N.iridescence>0,je=N.sheen>0,pt=N.transmission>0,vt=J&&!!N.anisotropyMap,Mt=Te&&!!N.clearcoatMap,kt=Te&&!!N.clearcoatNormalMap,dt=Te&&!!N.clearcoatRoughnessMap,Dt=st&&!!N.iridescenceMap,Ot=st&&!!N.iridescenceThicknessMap,Lt=je&&!!N.sheenColorMap,Et=je&&!!N.sheenRoughnessMap,Ae=!!N.specularMap,qe=!!N.specularColorMap,gt=!!N.specularIntensityMap,_e=pt&&!!N.transmissionMap,Be=pt&&!!N.thicknessMap,He=!!N.gradientMap,tt=!!N.alphaMap,wt=N.alphaTest>0,Tt=!!N.alphaHash,Wt=!!N.extensions;let vn=$c;N.toneMapped&&(Ue===null||Ue.isXRRenderTarget===!0)&&(vn=i.toneMapping);const $n={shaderID:de,shaderType:N.type,shaderName:N.name,vertexShader:ye,fragmentShader:fe,defines:N.defines,customVertexShaderID:De,customFragmentShaderID:Ce,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:y,batching:lt,batchingColor:lt&&se._colorsTexture!==null,instancing:xt,instancingColor:xt&&se.instanceColor!==null,instancingMorph:xt&&se.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:Ue===null?i.outputColorSpace:Ue.isXRRenderTarget===!0?Ue.texture.colorSpace:ll,alphaToCoverage:!!N.alphaToCoverage,map:mt,matcap:it,envMap:et,envMapMode:et&&K.mapping,envMapCubeUVHeight:Q,aoMap:$,lightMap:$e,bumpMap:Ie,normalMap:ke,displacementMap:v&&We,emissiveMap:St,normalMapObjectSpace:ke&&N.normalMapType===gG,normalMapTangentSpace:ke&&N.normalMapType===Vp,metalnessMap:nt,roughnessMap:re,anisotropy:J,anisotropyMap:vt,clearcoat:Te,clearcoatMap:Mt,clearcoatNormalMap:kt,clearcoatRoughnessMap:dt,dispersion:Ye,iridescence:st,iridescenceMap:Dt,iridescenceThicknessMap:Ot,sheen:je,sheenColorMap:Lt,sheenRoughnessMap:Et,specularMap:Ae,specularColorMap:qe,specularIntensityMap:gt,transmission:pt,transmissionMap:_e,thicknessMap:Be,gradientMap:He,opaque:N.transparent===!1&&N.blending===vv&&N.alphaToCoverage===!1,alphaMap:tt,alphaTest:wt,alphaHash:Tt,combine:N.combine,mapUv:mt&&E(N.map.channel),aoMapUv:$&&E(N.aoMap.channel),lightMapUv:$e&&E(N.lightMap.channel),bumpMapUv:Ie&&E(N.bumpMap.channel),normalMapUv:ke&&E(N.normalMap.channel),displacementMapUv:We&&E(N.displacementMap.channel),emissiveMapUv:St&&E(N.emissiveMap.channel),metalnessMapUv:nt&&E(N.metalnessMap.channel),roughnessMapUv:re&&E(N.roughnessMap.channel),anisotropyMapUv:vt&&E(N.anisotropyMap.channel),clearcoatMapUv:Mt&&E(N.clearcoatMap.channel),clearcoatNormalMapUv:kt&&E(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:dt&&E(N.clearcoatRoughnessMap.channel),iridescenceMapUv:Dt&&E(N.iridescenceMap.channel),iridescenceThicknessMapUv:Ot&&E(N.iridescenceThicknessMap.channel),sheenColorMapUv:Lt&&E(N.sheenColorMap.channel),sheenRoughnessMapUv:Et&&E(N.sheenRoughnessMap.channel),specularMapUv:Ae&&E(N.specularMap.channel),specularColorMapUv:qe&&E(N.specularColorMap.channel),specularIntensityMapUv:gt&&E(N.specularIntensityMap.channel),transmissionMapUv:_e&&E(N.transmissionMap.channel),thicknessMapUv:Be&&E(N.thicknessMap.channel),alphaMapUv:tt&&E(N.alphaMap.channel),vertexTangents:!!ue.attributes.tangent&&(ke||J),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,pointsUvs:se.isPoints===!0&&!!ue.attributes.uv&&(mt||tt),fog:!!le,useFog:N.fog===!0,fogExp2:!!le&&le.isFogExp2,flatShading:N.flatShading===!0,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:m,reverseDepthBuffer:Qe,skinning:se.isSkinnedMesh===!0,morphTargets:ue.morphAttributes.position!==void 0,morphNormals:ue.morphAttributes.normal!==void 0,morphColors:ue.morphAttributes.color!==void 0,morphTargetsCount:he,morphTextureStride:xe,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:N.dithering,shadowMapEnabled:i.shadowMap.enabled&&G.length>0,shadowMapType:i.shadowMap.type,toneMapping:vn,decodeVideoTexture:mt&&N.map.isVideoTexture===!0&&ri.getTransfer(N.map.colorSpace)===Pi,decodeVideoTextureEmissive:St&&N.emissiveMap.isVideoTexture===!0&&ri.getTransfer(N.emissiveMap.colorSpace)===Pi,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===ra,flipSided:N.side===Ar,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:Wt&&N.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Wt&&N.extensions.multiDraw===!0||lt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return $n.vertexUv1s=h.has(1),$n.vertexUv2s=h.has(2),$n.vertexUv3s=h.has(3),h.clear(),$n}function x(N){const O=[];if(N.shaderID?O.push(N.shaderID):(O.push(N.customVertexShaderID),O.push(N.customFragmentShaderID)),N.defines!==void 0)for(const G in N.defines)O.push(G),O.push(N.defines[G]);return N.isRawShaderMaterial===!1&&(w(O,N),R(O,N),O.push(i.outputColorSpace)),O.push(N.customProgramCacheKey),O.join()}function w(N,O){N.push(O.precision),N.push(O.outputColorSpace),N.push(O.envMapMode),N.push(O.envMapCubeUVHeight),N.push(O.mapUv),N.push(O.alphaMapUv),N.push(O.lightMapUv),N.push(O.aoMapUv),N.push(O.bumpMapUv),N.push(O.normalMapUv),N.push(O.displacementMapUv),N.push(O.emissiveMapUv),N.push(O.metalnessMapUv),N.push(O.roughnessMapUv),N.push(O.anisotropyMapUv),N.push(O.clearcoatMapUv),N.push(O.clearcoatNormalMapUv),N.push(O.clearcoatRoughnessMapUv),N.push(O.iridescenceMapUv),N.push(O.iridescenceThicknessMapUv),N.push(O.sheenColorMapUv),N.push(O.sheenRoughnessMapUv),N.push(O.specularMapUv),N.push(O.specularColorMapUv),N.push(O.specularIntensityMapUv),N.push(O.transmissionMapUv),N.push(O.thicknessMapUv),N.push(O.combine),N.push(O.fogExp2),N.push(O.sizeAttenuation),N.push(O.morphTargetsCount),N.push(O.morphAttributeCount),N.push(O.numDirLights),N.push(O.numPointLights),N.push(O.numSpotLights),N.push(O.numSpotLightMaps),N.push(O.numHemiLights),N.push(O.numRectAreaLights),N.push(O.numDirLightShadows),N.push(O.numPointLightShadows),N.push(O.numSpotLightShadows),N.push(O.numSpotLightShadowsWithMaps),N.push(O.numLightProbes),N.push(O.shadowMapType),N.push(O.toneMapping),N.push(O.numClippingPlanes),N.push(O.numClipIntersection),N.push(O.depthPacking)}function R(N,O){o.disableAll(),O.supportsVertexTextures&&o.enable(0),O.instancing&&o.enable(1),O.instancingColor&&o.enable(2),O.instancingMorph&&o.enable(3),O.matcap&&o.enable(4),O.envMap&&o.enable(5),O.normalMapObjectSpace&&o.enable(6),O.normalMapTangentSpace&&o.enable(7),O.clearcoat&&o.enable(8),O.iridescence&&o.enable(9),O.alphaTest&&o.enable(10),O.vertexColors&&o.enable(11),O.vertexAlphas&&o.enable(12),O.vertexUv1s&&o.enable(13),O.vertexUv2s&&o.enable(14),O.vertexUv3s&&o.enable(15),O.vertexTangents&&o.enable(16),O.anisotropy&&o.enable(17),O.alphaHash&&o.enable(18),O.batching&&o.enable(19),O.dispersion&&o.enable(20),O.batchingColor&&o.enable(21),N.push(o.mask),o.disableAll(),O.fog&&o.enable(0),O.useFog&&o.enable(1),O.flatShading&&o.enable(2),O.logarithmicDepthBuffer&&o.enable(3),O.reverseDepthBuffer&&o.enable(4),O.skinning&&o.enable(5),O.morphTargets&&o.enable(6),O.morphNormals&&o.enable(7),O.morphColors&&o.enable(8),O.premultipliedAlpha&&o.enable(9),O.shadowMapEnabled&&o.enable(10),O.doubleSided&&o.enable(11),O.flipSided&&o.enable(12),O.useDepthPacking&&o.enable(13),O.dithering&&o.enable(14),O.transmission&&o.enable(15),O.sheen&&o.enable(16),O.opaque&&o.enable(17),O.pointsUvs&&o.enable(18),O.decodeVideoTexture&&o.enable(19),O.decodeVideoTextureEmissive&&o.enable(20),O.alphaToCoverage&&o.enable(21),N.push(o.mask)}function D(N){const O=A[N.type];let G;if(O){const oe=Xc[O];G=DG.clone(oe.uniforms)}else G=N.uniforms;return G}function P(N,O){let G;for(let oe=0,se=d.length;oe<se;oe++){const le=d[oe];if(le.cacheKey===O){G=le,++G.usedTimes;break}}return G===void 0&&(G=new Q$(i,O,N,r),d.push(G)),G}function I(N){if(--N.usedTimes===0){const O=d.indexOf(N);d[O]=d[d.length-1],d.pop(),N.destroy()}}function H(N){c.remove(N)}function U(){c.dispose()}return{getParameters:M,getProgramCacheKey:x,getUniforms:D,acquireProgram:P,releaseProgram:I,releaseShaderCache:H,programs:d,dispose:U}}function iee(){let i=new WeakMap;function e(a){return i.has(a)}function t(a){let o=i.get(a);return o===void 0&&(o={},i.set(a,o)),o}function n(a){i.delete(a)}function s(a,o,c){i.get(a)[o]=c}function r(){i=new WeakMap}return{has:e,get:t,remove:n,update:s,dispose:r}}function see(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function mF(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function gF(){const i=[];let e=0;const t=[],n=[],s=[];function r(){e=0,t.length=0,n.length=0,s.length=0}function a(m,v,y,A,E,M){let x=i[e];return x===void 0?(x={id:m.id,object:m,geometry:v,material:y,groupOrder:A,renderOrder:m.renderOrder,z:E,group:M},i[e]=x):(x.id=m.id,x.object=m,x.geometry=v,x.material=y,x.groupOrder=A,x.renderOrder=m.renderOrder,x.z=E,x.group=M),e++,x}function o(m,v,y,A,E,M){const x=a(m,v,y,A,E,M);y.transmission>0?n.push(x):y.transparent===!0?s.push(x):t.push(x)}function c(m,v,y,A,E,M){const x=a(m,v,y,A,E,M);y.transmission>0?n.unshift(x):y.transparent===!0?s.unshift(x):t.unshift(x)}function h(m,v){t.length>1&&t.sort(m||see),n.length>1&&n.sort(v||mF),s.length>1&&s.sort(v||mF)}function d(){for(let m=e,v=i.length;m<v;m++){const y=i[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:s,init:r,push:o,unshift:c,finish:d,sort:h}}function ree(){let i=new WeakMap;function e(n,s){const r=i.get(n);let a;return r===void 0?(a=new gF,i.set(n,[a])):s>=r.length?(a=new gF,r.push(a)):a=r[s],a}function t(){i=new WeakMap}return{get:e,dispose:t}}function aee(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ae,color:new Bt};break;case"SpotLight":t={position:new ae,direction:new ae,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ae,color:new Bt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ae,skyColor:new Bt,groundColor:new Bt};break;case"RectAreaLight":t={color:new Bt,position:new ae,halfWidth:new ae,halfHeight:new ae};break}return i[e.id]=t,t}}}function oee(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let lee=0;function cee(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function uee(i){const e=new aee,t=oee(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)n.probe.push(new ae);const s=new ae,r=new on,a=new on;function o(h){let d=0,m=0,v=0;for(let N=0;N<9;N++)n.probe[N].set(0,0,0);let y=0,A=0,E=0,M=0,x=0,w=0,R=0,D=0,P=0,I=0,H=0;h.sort(cee);for(let N=0,O=h.length;N<O;N++){const G=h[N],oe=G.color,se=G.intensity,le=G.distance,ue=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)d+=oe.r*se,m+=oe.g*se,v+=oe.b*se;else if(G.isLightProbe){for(let z=0;z<9;z++)n.probe[z].addScaledVector(G.sh.coefficients[z],se);H++}else if(G.isDirectionalLight){const z=e.get(G);if(z.color.copy(G.color).multiplyScalar(G.intensity),G.castShadow){const K=G.shadow,Q=t.get(G);Q.shadowIntensity=K.intensity,Q.shadowBias=K.bias,Q.shadowNormalBias=K.normalBias,Q.shadowRadius=K.radius,Q.shadowMapSize=K.mapSize,n.directionalShadow[y]=Q,n.directionalShadowMap[y]=ue,n.directionalShadowMatrix[y]=G.shadow.matrix,w++}n.directional[y]=z,y++}else if(G.isSpotLight){const z=e.get(G);z.position.setFromMatrixPosition(G.matrixWorld),z.color.copy(oe).multiplyScalar(se),z.distance=le,z.coneCos=Math.cos(G.angle),z.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),z.decay=G.decay,n.spot[E]=z;const K=G.shadow;if(G.map&&(n.spotLightMap[P]=G.map,P++,K.updateMatrices(G),G.castShadow&&I++),n.spotLightMatrix[E]=K.matrix,G.castShadow){const Q=t.get(G);Q.shadowIntensity=K.intensity,Q.shadowBias=K.bias,Q.shadowNormalBias=K.normalBias,Q.shadowRadius=K.radius,Q.shadowMapSize=K.mapSize,n.spotShadow[E]=Q,n.spotShadowMap[E]=ue,D++}E++}else if(G.isRectAreaLight){const z=e.get(G);z.color.copy(oe).multiplyScalar(se),z.halfWidth.set(G.width*.5,0,0),z.halfHeight.set(0,G.height*.5,0),n.rectArea[M]=z,M++}else if(G.isPointLight){const z=e.get(G);if(z.color.copy(G.color).multiplyScalar(G.intensity),z.distance=G.distance,z.decay=G.decay,G.castShadow){const K=G.shadow,Q=t.get(G);Q.shadowIntensity=K.intensity,Q.shadowBias=K.bias,Q.shadowNormalBias=K.normalBias,Q.shadowRadius=K.radius,Q.shadowMapSize=K.mapSize,Q.shadowCameraNear=K.camera.near,Q.shadowCameraFar=K.camera.far,n.pointShadow[A]=Q,n.pointShadowMap[A]=ue,n.pointShadowMatrix[A]=G.shadow.matrix,R++}n.point[A]=z,A++}else if(G.isHemisphereLight){const z=e.get(G);z.skyColor.copy(G.color).multiplyScalar(se),z.groundColor.copy(G.groundColor).multiplyScalar(se),n.hemi[x]=z,x++}}M>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ft.LTC_FLOAT_1,n.rectAreaLTC2=Ft.LTC_FLOAT_2):(n.rectAreaLTC1=Ft.LTC_HALF_1,n.rectAreaLTC2=Ft.LTC_HALF_2)),n.ambient[0]=d,n.ambient[1]=m,n.ambient[2]=v;const U=n.hash;(U.directionalLength!==y||U.pointLength!==A||U.spotLength!==E||U.rectAreaLength!==M||U.hemiLength!==x||U.numDirectionalShadows!==w||U.numPointShadows!==R||U.numSpotShadows!==D||U.numSpotMaps!==P||U.numLightProbes!==H)&&(n.directional.length=y,n.spot.length=E,n.rectArea.length=M,n.point.length=A,n.hemi.length=x,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=R,n.pointShadowMap.length=R,n.spotShadow.length=D,n.spotShadowMap.length=D,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=R,n.spotLightMatrix.length=D+P-I,n.spotLightMap.length=P,n.numSpotLightShadowsWithMaps=I,n.numLightProbes=H,U.directionalLength=y,U.pointLength=A,U.spotLength=E,U.rectAreaLength=M,U.hemiLength=x,U.numDirectionalShadows=w,U.numPointShadows=R,U.numSpotShadows=D,U.numSpotMaps=P,U.numLightProbes=H,n.version=lee++)}function c(h,d){let m=0,v=0,y=0,A=0,E=0;const M=d.matrixWorldInverse;for(let x=0,w=h.length;x<w;x++){const R=h[x];if(R.isDirectionalLight){const D=n.directional[m];D.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(M),m++}else if(R.isSpotLight){const D=n.spot[y];D.position.setFromMatrixPosition(R.matrixWorld),D.position.applyMatrix4(M),D.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(M),y++}else if(R.isRectAreaLight){const D=n.rectArea[A];D.position.setFromMatrixPosition(R.matrixWorld),D.position.applyMatrix4(M),a.identity(),r.copy(R.matrixWorld),r.premultiply(M),a.extractRotation(r),D.halfWidth.set(R.width*.5,0,0),D.halfHeight.set(0,R.height*.5,0),D.halfWidth.applyMatrix4(a),D.halfHeight.applyMatrix4(a),A++}else if(R.isPointLight){const D=n.point[v];D.position.setFromMatrixPosition(R.matrixWorld),D.position.applyMatrix4(M),v++}else if(R.isHemisphereLight){const D=n.hemi[E];D.direction.setFromMatrixPosition(R.matrixWorld),D.direction.transformDirection(M),E++}}}return{setup:o,setupView:c,state:n}}function vF(i){const e=new uee(i),t=[],n=[];function s(d){h.camera=d,t.length=0,n.length=0}function r(d){t.push(d)}function a(d){n.push(d)}function o(){e.setup(t)}function c(d){e.setupView(t,d)}const h={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:h,setupLights:o,setupLightsView:c,pushLight:r,pushShadow:a}}function hee(i){let e=new WeakMap;function t(s,r=0){const a=e.get(s);let o;return a===void 0?(o=new vF(i),e.set(s,[o])):r>=a.length?(o=new vF(i),a.push(o)):o=a[r],o}function n(){e=new WeakMap}return{get:t,dispose:n}}const fee=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,dee=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function pee(i,e,t){let n=new mA;const s=new Ke,r=new Ke,a=new ai,o=new ZR({depthPacking:mG}),c=new n3,h={},d=t.maxTextureSize,m={[nu]:Ar,[Ar]:nu,[ra]:ra},v=new Xi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ke},radius:{value:4}},vertexShader:fee,fragmentShader:dee}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const A=new En;A.setAttribute("position",new ui(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new ts(A,v),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=bR;let x=this.type;this.render=function(I,H,U){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||I.length===0)return;const N=i.getRenderTarget(),O=i.getActiveCubeFace(),G=i.getActiveMipmapLevel(),oe=i.state;oe.setBlending(qs),oe.buffers.color.setClear(1,1,1,1),oe.buffers.depth.setTest(!0),oe.setScissorTest(!1);const se=x!==Rc&&this.type===Rc,le=x===Rc&&this.type!==Rc;for(let ue=0,z=I.length;ue<z;ue++){const K=I[ue],Q=K.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;s.copy(Q.mapSize);const de=Q.getFrameExtents();if(s.multiply(de),r.copy(Q.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(r.x=Math.floor(d/de.x),s.x=r.x*de.x,Q.mapSize.x=r.x),s.y>d&&(r.y=Math.floor(d/de.y),s.y=r.y*de.y,Q.mapSize.y=r.y)),Q.map===null||se===!0||le===!0){const he=this.type!==Rc?{minFilter:gs,magFilter:gs}:{};Q.map!==null&&Q.map.dispose(),Q.map=new Zi(s.x,s.y,he),Q.map.texture.name=K.name+".shadowMap",Q.camera.updateProjectionMatrix()}i.setRenderTarget(Q.map),i.clear();const W=Q.getViewportCount();for(let he=0;he<W;he++){const xe=Q.getViewport(he);a.set(r.x*xe.x,r.y*xe.y,r.x*xe.z,r.y*xe.w),oe.viewport(a),Q.updateMatrices(K,he),n=Q.getFrustum(),D(H,U,Q.camera,K,this.type)}Q.isPointLightShadow!==!0&&this.type===Rc&&w(Q,U),Q.needsUpdate=!1}x=this.type,M.needsUpdate=!1,i.setRenderTarget(N,O,G)};function w(I,H){const U=e.update(E);v.defines.VSM_SAMPLES!==I.blurSamples&&(v.defines.VSM_SAMPLES=I.blurSamples,y.defines.VSM_SAMPLES=I.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Zi(s.x,s.y)),v.uniforms.shadow_pass.value=I.map.texture,v.uniforms.resolution.value=I.mapSize,v.uniforms.radius.value=I.radius,i.setRenderTarget(I.mapPass),i.clear(),i.renderBufferDirect(H,null,U,v,E,null),y.uniforms.shadow_pass.value=I.mapPass.texture,y.uniforms.resolution.value=I.mapSize,y.uniforms.radius.value=I.radius,i.setRenderTarget(I.map),i.clear(),i.renderBufferDirect(H,null,U,y,E,null)}function R(I,H,U,N){let O=null;const G=U.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(G!==void 0)O=G;else if(O=U.isPointLight===!0?c:o,i.localClippingEnabled&&H.clipShadows===!0&&Array.isArray(H.clippingPlanes)&&H.clippingPlanes.length!==0||H.displacementMap&&H.displacementScale!==0||H.alphaMap&&H.alphaTest>0||H.map&&H.alphaTest>0||H.alphaToCoverage===!0){const oe=O.uuid,se=H.uuid;let le=h[oe];le===void 0&&(le={},h[oe]=le);let ue=le[se];ue===void 0&&(ue=O.clone(),le[se]=ue,H.addEventListener("dispose",P)),O=ue}if(O.visible=H.visible,O.wireframe=H.wireframe,N===Rc?O.side=H.shadowSide!==null?H.shadowSide:H.side:O.side=H.shadowSide!==null?H.shadowSide:m[H.side],O.alphaMap=H.alphaMap,O.alphaTest=H.alphaToCoverage===!0?.5:H.alphaTest,O.map=H.map,O.clipShadows=H.clipShadows,O.clippingPlanes=H.clippingPlanes,O.clipIntersection=H.clipIntersection,O.displacementMap=H.displacementMap,O.displacementScale=H.displacementScale,O.displacementBias=H.displacementBias,O.wireframeLinewidth=H.wireframeLinewidth,O.linewidth=H.linewidth,U.isPointLight===!0&&O.isMeshDistanceMaterial===!0){const oe=i.properties.get(O);oe.light=U}return O}function D(I,H,U,N,O){if(I.visible===!1)return;if(I.layers.test(H.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&O===Rc)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,I.matrixWorld);const se=e.update(I),le=I.material;if(Array.isArray(le)){const ue=se.groups;for(let z=0,K=ue.length;z<K;z++){const Q=ue[z],de=le[Q.materialIndex];if(de&&de.visible){const W=R(I,de,N,O);I.onBeforeShadow(i,I,H,U,se,W,Q),i.renderBufferDirect(U,null,se,W,I,Q),I.onAfterShadow(i,I,H,U,se,W,Q)}}}else if(le.visible){const ue=R(I,le,N,O);I.onBeforeShadow(i,I,H,U,se,ue,null),i.renderBufferDirect(U,null,se,ue,I,null),I.onAfterShadow(i,I,H,U,se,ue,null)}}const oe=I.children;for(let se=0,le=oe.length;se<le;se++)D(oe[se],H,U,N,O)}function P(I){I.target.removeEventListener("dispose",P);for(const U in h){const N=h[U],O=I.target.uuid;O in N&&(N[O].dispose(),delete N[O])}}}const mee={[UC]:FC,[HC]:kC,[zC]:VC,[bv]:GC,[FC]:UC,[kC]:HC,[VC]:zC,[GC]:bv};function gee(i,e){function t(){let _e=!1;const Be=new ai;let He=null;const tt=new ai(0,0,0,0);return{setMask:function(wt){He!==wt&&!_e&&(i.colorMask(wt,wt,wt,wt),He=wt)},setLocked:function(wt){_e=wt},setClear:function(wt,Tt,Wt,vn,$n){$n===!0&&(wt*=vn,Tt*=vn,Wt*=vn),Be.set(wt,Tt,Wt,vn),tt.equals(Be)===!1&&(i.clearColor(wt,Tt,Wt,vn),tt.copy(Be))},reset:function(){_e=!1,He=null,tt.set(-1,0,0,0)}}}function n(){let _e=!1,Be=!1,He=null,tt=null,wt=null;return{setReversed:function(Tt){if(Be!==Tt){const Wt=e.get("EXT_clip_control");Tt?Wt.clipControlEXT(Wt.LOWER_LEFT_EXT,Wt.ZERO_TO_ONE_EXT):Wt.clipControlEXT(Wt.LOWER_LEFT_EXT,Wt.NEGATIVE_ONE_TO_ONE_EXT),Be=Tt;const vn=wt;wt=null,this.setClear(vn)}},getReversed:function(){return Be},setTest:function(Tt){Tt?Ue(i.DEPTH_TEST):Qe(i.DEPTH_TEST)},setMask:function(Tt){He!==Tt&&!_e&&(i.depthMask(Tt),He=Tt)},setFunc:function(Tt){if(Be&&(Tt=mee[Tt]),tt!==Tt){switch(Tt){case UC:i.depthFunc(i.NEVER);break;case FC:i.depthFunc(i.ALWAYS);break;case HC:i.depthFunc(i.LESS);break;case bv:i.depthFunc(i.LEQUAL);break;case zC:i.depthFunc(i.EQUAL);break;case GC:i.depthFunc(i.GEQUAL);break;case kC:i.depthFunc(i.GREATER);break;case VC:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}tt=Tt}},setLocked:function(Tt){_e=Tt},setClear:function(Tt){wt!==Tt&&(Be&&(Tt=1-Tt),i.clearDepth(Tt),wt=Tt)},reset:function(){_e=!1,He=null,tt=null,wt=null,Be=!1}}}function s(){let _e=!1,Be=null,He=null,tt=null,wt=null,Tt=null,Wt=null,vn=null,$n=null;return{setTest:function(yn){_e||(yn?Ue(i.STENCIL_TEST):Qe(i.STENCIL_TEST))},setMask:function(yn){Be!==yn&&!_e&&(i.stencilMask(yn),Be=yn)},setFunc:function(yn,os,Ui){(He!==yn||tt!==os||wt!==Ui)&&(i.stencilFunc(yn,os,Ui),He=yn,tt=os,wt=Ui)},setOp:function(yn,os,Ui){(Tt!==yn||Wt!==os||vn!==Ui)&&(i.stencilOp(yn,os,Ui),Tt=yn,Wt=os,vn=Ui)},setLocked:function(yn){_e=yn},setClear:function(yn){$n!==yn&&(i.clearStencil(yn),$n=yn)},reset:function(){_e=!1,Be=null,He=null,tt=null,wt=null,Tt=null,Wt=null,vn=null,$n=null}}}const r=new t,a=new n,o=new s,c=new WeakMap,h=new WeakMap;let d={},m={},v=new WeakMap,y=[],A=null,E=!1,M=null,x=null,w=null,R=null,D=null,P=null,I=null,H=new Bt(0,0,0),U=0,N=!1,O=null,G=null,oe=null,se=null,le=null;const ue=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,K=0;const Q=i.getParameter(i.VERSION);Q.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(Q)[1]),z=K>=1):Q.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),z=K>=2);let de=null,W={};const he=i.getParameter(i.SCISSOR_BOX),xe=i.getParameter(i.VIEWPORT),ye=new ai().fromArray(he),fe=new ai().fromArray(xe);function De(_e,Be,He,tt){const wt=new Uint8Array(4),Tt=i.createTexture();i.bindTexture(_e,Tt),i.texParameteri(_e,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(_e,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Wt=0;Wt<He;Wt++)_e===i.TEXTURE_3D||_e===i.TEXTURE_2D_ARRAY?i.texImage3D(Be,0,i.RGBA,1,1,tt,0,i.RGBA,i.UNSIGNED_BYTE,wt):i.texImage2D(Be+Wt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,wt);return Tt}const Ce={};Ce[i.TEXTURE_2D]=De(i.TEXTURE_2D,i.TEXTURE_2D,1),Ce[i.TEXTURE_CUBE_MAP]=De(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ce[i.TEXTURE_2D_ARRAY]=De(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Ce[i.TEXTURE_3D]=De(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),Ue(i.DEPTH_TEST),a.setFunc(bv),Ie(!1),ke(aL),Ue(i.CULL_FACE),$(qs);function Ue(_e){d[_e]!==!0&&(i.enable(_e),d[_e]=!0)}function Qe(_e){d[_e]!==!1&&(i.disable(_e),d[_e]=!1)}function xt(_e,Be){return m[_e]!==Be?(i.bindFramebuffer(_e,Be),m[_e]=Be,_e===i.DRAW_FRAMEBUFFER&&(m[i.FRAMEBUFFER]=Be),_e===i.FRAMEBUFFER&&(m[i.DRAW_FRAMEBUFFER]=Be),!0):!1}function lt(_e,Be){let He=y,tt=!1;if(_e){He=v.get(Be),He===void 0&&(He=[],v.set(Be,He));const wt=_e.textures;if(He.length!==wt.length||He[0]!==i.COLOR_ATTACHMENT0){for(let Tt=0,Wt=wt.length;Tt<Wt;Tt++)He[Tt]=i.COLOR_ATTACHMENT0+Tt;He.length=wt.length,tt=!0}}else He[0]!==i.BACK&&(He[0]=i.BACK,tt=!0);tt&&i.drawBuffers(He)}function mt(_e){return A!==_e?(i.useProgram(_e),A=_e,!0):!1}const it={[Kd]:i.FUNC_ADD,[H4]:i.FUNC_SUBTRACT,[z4]:i.FUNC_REVERSE_SUBTRACT};it[G4]=i.MIN,it[k4]=i.MAX;const et={[V4]:i.ZERO,[j4]:i.ONE,[X4]:i.SRC_COLOR,[PC]:i.SRC_ALPHA,[Z4]:i.SRC_ALPHA_SATURATE,[K4]:i.DST_COLOR,[Y4]:i.DST_ALPHA,[q4]:i.ONE_MINUS_SRC_COLOR,[OC]:i.ONE_MINUS_SRC_ALPHA,[J4]:i.ONE_MINUS_DST_COLOR,[W4]:i.ONE_MINUS_DST_ALPHA,[Q4]:i.CONSTANT_COLOR,[$4]:i.ONE_MINUS_CONSTANT_COLOR,[eG]:i.CONSTANT_ALPHA,[tG]:i.ONE_MINUS_CONSTANT_ALPHA};function $(_e,Be,He,tt,wt,Tt,Wt,vn,$n,yn){if(_e===qs){E===!0&&(Qe(i.BLEND),E=!1);return}if(E===!1&&(Ue(i.BLEND),E=!0),_e!==F4){if(_e!==M||yn!==N){if((x!==Kd||D!==Kd)&&(i.blendEquation(i.FUNC_ADD),x=Kd,D=Kd),yn)switch(_e){case vv:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case oL:i.blendFunc(i.ONE,i.ONE);break;case lL:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case cL:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",_e);break}else switch(_e){case vv:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case oL:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case lL:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case cL:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",_e);break}w=null,R=null,P=null,I=null,H.set(0,0,0),U=0,M=_e,N=yn}return}wt=wt||Be,Tt=Tt||He,Wt=Wt||tt,(Be!==x||wt!==D)&&(i.blendEquationSeparate(it[Be],it[wt]),x=Be,D=wt),(He!==w||tt!==R||Tt!==P||Wt!==I)&&(i.blendFuncSeparate(et[He],et[tt],et[Tt],et[Wt]),w=He,R=tt,P=Tt,I=Wt),(vn.equals(H)===!1||$n!==U)&&(i.blendColor(vn.r,vn.g,vn.b,$n),H.copy(vn),U=$n),M=_e,N=!1}function $e(_e,Be){_e.side===ra?Qe(i.CULL_FACE):Ue(i.CULL_FACE);let He=_e.side===Ar;Be&&(He=!He),Ie(He),_e.blending===vv&&_e.transparent===!1?$(qs):$(_e.blending,_e.blendEquation,_e.blendSrc,_e.blendDst,_e.blendEquationAlpha,_e.blendSrcAlpha,_e.blendDstAlpha,_e.blendColor,_e.blendAlpha,_e.premultipliedAlpha),a.setFunc(_e.depthFunc),a.setTest(_e.depthTest),a.setMask(_e.depthWrite),r.setMask(_e.colorWrite);const tt=_e.stencilWrite;o.setTest(tt),tt&&(o.setMask(_e.stencilWriteMask),o.setFunc(_e.stencilFunc,_e.stencilRef,_e.stencilFuncMask),o.setOp(_e.stencilFail,_e.stencilZFail,_e.stencilZPass)),St(_e.polygonOffset,_e.polygonOffsetFactor,_e.polygonOffsetUnits),_e.alphaToCoverage===!0?Ue(i.SAMPLE_ALPHA_TO_COVERAGE):Qe(i.SAMPLE_ALPHA_TO_COVERAGE)}function Ie(_e){O!==_e&&(_e?i.frontFace(i.CW):i.frontFace(i.CCW),O=_e)}function ke(_e){_e!==P4?(Ue(i.CULL_FACE),_e!==G&&(_e===aL?i.cullFace(i.BACK):_e===O4?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Qe(i.CULL_FACE),G=_e}function We(_e){_e!==oe&&(z&&i.lineWidth(_e),oe=_e)}function St(_e,Be,He){_e?(Ue(i.POLYGON_OFFSET_FILL),(se!==Be||le!==He)&&(i.polygonOffset(Be,He),se=Be,le=He)):Qe(i.POLYGON_OFFSET_FILL)}function nt(_e){_e?Ue(i.SCISSOR_TEST):Qe(i.SCISSOR_TEST)}function re(_e){_e===void 0&&(_e=i.TEXTURE0+ue-1),de!==_e&&(i.activeTexture(_e),de=_e)}function J(_e,Be,He){He===void 0&&(de===null?He=i.TEXTURE0+ue-1:He=de);let tt=W[He];tt===void 0&&(tt={type:void 0,texture:void 0},W[He]=tt),(tt.type!==_e||tt.texture!==Be)&&(de!==He&&(i.activeTexture(He),de=He),i.bindTexture(_e,Be||Ce[_e]),tt.type=_e,tt.texture=Be)}function Te(){const _e=W[de];_e!==void 0&&_e.type!==void 0&&(i.bindTexture(_e.type,null),_e.type=void 0,_e.texture=void 0)}function Ye(){try{i.compressedTexImage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function st(){try{i.compressedTexImage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function je(){try{i.texSubImage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function pt(){try{i.texSubImage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function vt(){try{i.compressedTexSubImage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function Mt(){try{i.compressedTexSubImage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function kt(){try{i.texStorage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function dt(){try{i.texStorage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function Dt(){try{i.texImage2D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function Ot(){try{i.texImage3D(...arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}}function Lt(_e){ye.equals(_e)===!1&&(i.scissor(_e.x,_e.y,_e.z,_e.w),ye.copy(_e))}function Et(_e){fe.equals(_e)===!1&&(i.viewport(_e.x,_e.y,_e.z,_e.w),fe.copy(_e))}function Ae(_e,Be){let He=h.get(Be);He===void 0&&(He=new WeakMap,h.set(Be,He));let tt=He.get(_e);tt===void 0&&(tt=i.getUniformBlockIndex(Be,_e.name),He.set(_e,tt))}function qe(_e,Be){const tt=h.get(Be).get(_e);c.get(Be)!==tt&&(i.uniformBlockBinding(Be,tt,_e.__bindingPointIndex),c.set(Be,tt))}function gt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),a.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},de=null,W={},m={},v=new WeakMap,y=[],A=null,E=!1,M=null,x=null,w=null,R=null,D=null,P=null,I=null,H=new Bt(0,0,0),U=0,N=!1,O=null,G=null,oe=null,se=null,le=null,ye.set(0,0,i.canvas.width,i.canvas.height),fe.set(0,0,i.canvas.width,i.canvas.height),r.reset(),a.reset(),o.reset()}return{buffers:{color:r,depth:a,stencil:o},enable:Ue,disable:Qe,bindFramebuffer:xt,drawBuffers:lt,useProgram:mt,setBlending:$,setMaterial:$e,setFlipSided:Ie,setCullFace:ke,setLineWidth:We,setPolygonOffset:St,setScissorTest:nt,activeTexture:re,bindTexture:J,unbindTexture:Te,compressedTexImage2D:Ye,compressedTexImage3D:st,texImage2D:Dt,texImage3D:Ot,updateUBOMapping:Ae,uniformBlockBinding:qe,texStorage2D:kt,texStorage3D:dt,texSubImage2D:je,texSubImage3D:pt,compressedTexSubImage2D:vt,compressedTexSubImage3D:Mt,scissor:Lt,viewport:Et,reset:gt}}function vee(i,e,t,n,s,r,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Ke,d=new WeakMap;let m;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(re,J){return y?new OffscreenCanvas(re,J):iS("canvas")}function E(re,J,Te){let Ye=1;const st=nt(re);if((st.width>Te||st.height>Te)&&(Ye=Te/Math.max(st.width,st.height)),Ye<1)if(typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&re instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&re instanceof ImageBitmap||typeof VideoFrame<"u"&&re instanceof VideoFrame){const je=Math.floor(Ye*st.width),pt=Math.floor(Ye*st.height);m===void 0&&(m=A(je,pt));const vt=J?A(je,pt):m;return vt.width=je,vt.height=pt,vt.getContext("2d").drawImage(re,0,0,je,pt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+st.width+"x"+st.height+") to ("+je+"x"+pt+")."),vt}else return"data"in re&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+st.width+"x"+st.height+")."),re;return re}function M(re){return re.generateMipmaps}function x(re){i.generateMipmap(re)}function w(re){return re.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:re.isWebGL3DRenderTarget?i.TEXTURE_3D:re.isWebGLArrayRenderTarget||re.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function R(re,J,Te,Ye,st=!1){if(re!==null){if(i[re]!==void 0)return i[re];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+re+"'")}let je=J;if(J===i.RED&&(Te===i.FLOAT&&(je=i.R32F),Te===i.HALF_FLOAT&&(je=i.R16F),Te===i.UNSIGNED_BYTE&&(je=i.R8)),J===i.RED_INTEGER&&(Te===i.UNSIGNED_BYTE&&(je=i.R8UI),Te===i.UNSIGNED_SHORT&&(je=i.R16UI),Te===i.UNSIGNED_INT&&(je=i.R32UI),Te===i.BYTE&&(je=i.R8I),Te===i.SHORT&&(je=i.R16I),Te===i.INT&&(je=i.R32I)),J===i.RG&&(Te===i.FLOAT&&(je=i.RG32F),Te===i.HALF_FLOAT&&(je=i.RG16F),Te===i.UNSIGNED_BYTE&&(je=i.RG8)),J===i.RG_INTEGER&&(Te===i.UNSIGNED_BYTE&&(je=i.RG8UI),Te===i.UNSIGNED_SHORT&&(je=i.RG16UI),Te===i.UNSIGNED_INT&&(je=i.RG32UI),Te===i.BYTE&&(je=i.RG8I),Te===i.SHORT&&(je=i.RG16I),Te===i.INT&&(je=i.RG32I)),J===i.RGB_INTEGER&&(Te===i.UNSIGNED_BYTE&&(je=i.RGB8UI),Te===i.UNSIGNED_SHORT&&(je=i.RGB16UI),Te===i.UNSIGNED_INT&&(je=i.RGB32UI),Te===i.BYTE&&(je=i.RGB8I),Te===i.SHORT&&(je=i.RGB16I),Te===i.INT&&(je=i.RGB32I)),J===i.RGBA_INTEGER&&(Te===i.UNSIGNED_BYTE&&(je=i.RGBA8UI),Te===i.UNSIGNED_SHORT&&(je=i.RGBA16UI),Te===i.UNSIGNED_INT&&(je=i.RGBA32UI),Te===i.BYTE&&(je=i.RGBA8I),Te===i.SHORT&&(je=i.RGBA16I),Te===i.INT&&(je=i.RGBA32I)),J===i.RGB&&Te===i.UNSIGNED_INT_5_9_9_9_REV&&(je=i.RGB9_E5),J===i.RGBA){const pt=st?eS:ri.getTransfer(Ye);Te===i.FLOAT&&(je=i.RGBA32F),Te===i.HALF_FLOAT&&(je=i.RGBA16F),Te===i.UNSIGNED_BYTE&&(je=pt===Pi?i.SRGB8_ALPHA8:i.RGBA8),Te===i.UNSIGNED_SHORT_4_4_4_4&&(je=i.RGBA4),Te===i.UNSIGNED_SHORT_5_5_5_1&&(je=i.RGB5_A1)}return(je===i.R16F||je===i.R32F||je===i.RG16F||je===i.RG32F||je===i.RGBA16F||je===i.RGBA32F)&&e.get("EXT_color_buffer_float"),je}function D(re,J){let Te;return re?J===null||J===iu||J===xv?Te=i.DEPTH24_STENCIL8:J===ms?Te=i.DEPTH32F_STENCIL8:J===K_&&(Te=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):J===null||J===iu||J===xv?Te=i.DEPTH_COMPONENT24:J===ms?Te=i.DEPTH_COMPONENT32F:J===K_&&(Te=i.DEPTH_COMPONENT16),Te}function P(re,J){return M(re)===!0||re.isFramebufferTexture&&re.minFilter!==gs&&re.minFilter!==li?Math.log2(Math.max(J.width,J.height))+1:re.mipmaps!==void 0&&re.mipmaps.length>0?re.mipmaps.length:re.isCompressedTexture&&Array.isArray(re.image)?J.mipmaps.length:1}function I(re){const J=re.target;J.removeEventListener("dispose",I),U(J),J.isVideoTexture&&d.delete(J)}function H(re){const J=re.target;J.removeEventListener("dispose",H),O(J)}function U(re){const J=n.get(re);if(J.__webglInit===void 0)return;const Te=re.source,Ye=v.get(Te);if(Ye){const st=Ye[J.__cacheKey];st.usedTimes--,st.usedTimes===0&&N(re),Object.keys(Ye).length===0&&v.delete(Te)}n.remove(re)}function N(re){const J=n.get(re);i.deleteTexture(J.__webglTexture);const Te=re.source,Ye=v.get(Te);delete Ye[J.__cacheKey],a.memory.textures--}function O(re){const J=n.get(re);if(re.depthTexture&&(re.depthTexture.dispose(),n.remove(re.depthTexture)),re.isWebGLCubeRenderTarget)for(let Ye=0;Ye<6;Ye++){if(Array.isArray(J.__webglFramebuffer[Ye]))for(let st=0;st<J.__webglFramebuffer[Ye].length;st++)i.deleteFramebuffer(J.__webglFramebuffer[Ye][st]);else i.deleteFramebuffer(J.__webglFramebuffer[Ye]);J.__webglDepthbuffer&&i.deleteRenderbuffer(J.__webglDepthbuffer[Ye])}else{if(Array.isArray(J.__webglFramebuffer))for(let Ye=0;Ye<J.__webglFramebuffer.length;Ye++)i.deleteFramebuffer(J.__webglFramebuffer[Ye]);else i.deleteFramebuffer(J.__webglFramebuffer);if(J.__webglDepthbuffer&&i.deleteRenderbuffer(J.__webglDepthbuffer),J.__webglMultisampledFramebuffer&&i.deleteFramebuffer(J.__webglMultisampledFramebuffer),J.__webglColorRenderbuffer)for(let Ye=0;Ye<J.__webglColorRenderbuffer.length;Ye++)J.__webglColorRenderbuffer[Ye]&&i.deleteRenderbuffer(J.__webglColorRenderbuffer[Ye]);J.__webglDepthRenderbuffer&&i.deleteRenderbuffer(J.__webglDepthRenderbuffer)}const Te=re.textures;for(let Ye=0,st=Te.length;Ye<st;Ye++){const je=n.get(Te[Ye]);je.__webglTexture&&(i.deleteTexture(je.__webglTexture),a.memory.textures--),n.remove(Te[Ye])}n.remove(re)}let G=0;function oe(){G=0}function se(){const re=G;return re>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+re+" texture units while this GPU supports only "+s.maxTextures),G+=1,re}function le(re){const J=[];return J.push(re.wrapS),J.push(re.wrapT),J.push(re.wrapR||0),J.push(re.magFilter),J.push(re.minFilter),J.push(re.anisotropy),J.push(re.internalFormat),J.push(re.format),J.push(re.type),J.push(re.generateMipmaps),J.push(re.premultiplyAlpha),J.push(re.flipY),J.push(re.unpackAlignment),J.push(re.colorSpace),J.join()}function ue(re,J){const Te=n.get(re);if(re.isVideoTexture&&We(re),re.isRenderTargetTexture===!1&&re.version>0&&Te.__version!==re.version){const Ye=re.image;if(Ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{fe(Te,re,J);return}}t.bindTexture(i.TEXTURE_2D,Te.__webglTexture,i.TEXTURE0+J)}function z(re,J){const Te=n.get(re);if(re.version>0&&Te.__version!==re.version){fe(Te,re,J);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Te.__webglTexture,i.TEXTURE0+J)}function K(re,J){const Te=n.get(re);if(re.version>0&&Te.__version!==re.version){fe(Te,re,J);return}t.bindTexture(i.TEXTURE_3D,Te.__webglTexture,i.TEXTURE0+J)}function Q(re,J){const Te=n.get(re);if(re.version>0&&Te.__version!==re.version){De(Te,re,J);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Te.__webglTexture,i.TEXTURE0+J)}const de={[Ip]:i.REPEAT,[js]:i.CLAMP_TO_EDGE,[W_]:i.MIRRORED_REPEAT},W={[gs]:i.NEAREST,[SR]:i.NEAREST_MIPMAP_NEAREST,[fg]:i.NEAREST_MIPMAP_LINEAR,[li]:i.LINEAR,[Py]:i.LINEAR_MIPMAP_NEAREST,[rl]:i.LINEAR_MIPMAP_LINEAR},he={[vG]:i.NEVER,[SG]:i.ALWAYS,[yG]:i.LESS,[HI]:i.LEQUAL,[_G]:i.EQUAL,[xG]:i.GEQUAL,[AG]:i.GREATER,[bG]:i.NOTEQUAL};function xe(re,J){if(J.type===ms&&e.has("OES_texture_float_linear")===!1&&(J.magFilter===li||J.magFilter===Py||J.magFilter===fg||J.magFilter===rl||J.minFilter===li||J.minFilter===Py||J.minFilter===fg||J.minFilter===rl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(re,i.TEXTURE_WRAP_S,de[J.wrapS]),i.texParameteri(re,i.TEXTURE_WRAP_T,de[J.wrapT]),(re===i.TEXTURE_3D||re===i.TEXTURE_2D_ARRAY)&&i.texParameteri(re,i.TEXTURE_WRAP_R,de[J.wrapR]),i.texParameteri(re,i.TEXTURE_MAG_FILTER,W[J.magFilter]),i.texParameteri(re,i.TEXTURE_MIN_FILTER,W[J.minFilter]),J.compareFunction&&(i.texParameteri(re,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(re,i.TEXTURE_COMPARE_FUNC,he[J.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(J.magFilter===gs||J.minFilter!==fg&&J.minFilter!==rl||J.type===ms&&e.has("OES_texture_float_linear")===!1)return;if(J.anisotropy>1||n.get(J).__currentAnisotropy){const Te=e.get("EXT_texture_filter_anisotropic");i.texParameterf(re,Te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(J.anisotropy,s.getMaxAnisotropy())),n.get(J).__currentAnisotropy=J.anisotropy}}}function ye(re,J){let Te=!1;re.__webglInit===void 0&&(re.__webglInit=!0,J.addEventListener("dispose",I));const Ye=J.source;let st=v.get(Ye);st===void 0&&(st={},v.set(Ye,st));const je=le(J);if(je!==re.__cacheKey){st[je]===void 0&&(st[je]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,Te=!0),st[je].usedTimes++;const pt=st[re.__cacheKey];pt!==void 0&&(st[re.__cacheKey].usedTimes--,pt.usedTimes===0&&N(J)),re.__cacheKey=je,re.__webglTexture=st[je].texture}return Te}function fe(re,J,Te){let Ye=i.TEXTURE_2D;(J.isDataArrayTexture||J.isCompressedArrayTexture)&&(Ye=i.TEXTURE_2D_ARRAY),J.isData3DTexture&&(Ye=i.TEXTURE_3D);const st=ye(re,J),je=J.source;t.bindTexture(Ye,re.__webglTexture,i.TEXTURE0+Te);const pt=n.get(je);if(je.version!==pt.__version||st===!0){t.activeTexture(i.TEXTURE0+Te);const vt=ri.getPrimaries(ri.workingColorSpace),Mt=J.colorSpace===Yc?null:ri.getPrimaries(J.colorSpace),kt=J.colorSpace===Yc||vt===Mt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,J.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,J.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,kt);let dt=E(J.image,!1,s.maxTextureSize);dt=St(J,dt);const Dt=r.convert(J.format,J.colorSpace),Ot=r.convert(J.type);let Lt=R(J.internalFormat,Dt,Ot,J.colorSpace,J.isVideoTexture);xe(Ye,J);let Et;const Ae=J.mipmaps,qe=J.isVideoTexture!==!0,gt=pt.__version===void 0||st===!0,_e=je.dataReady,Be=P(J,dt);if(J.isDepthTexture)Lt=D(J.format===Sv,J.type),gt&&(qe?t.texStorage2D(i.TEXTURE_2D,1,Lt,dt.width,dt.height):t.texImage2D(i.TEXTURE_2D,0,Lt,dt.width,dt.height,0,Dt,Ot,null));else if(J.isDataTexture)if(Ae.length>0){qe&&gt&&t.texStorage2D(i.TEXTURE_2D,Be,Lt,Ae[0].width,Ae[0].height);for(let He=0,tt=Ae.length;He<tt;He++)Et=Ae[He],qe?_e&&t.texSubImage2D(i.TEXTURE_2D,He,0,0,Et.width,Et.height,Dt,Ot,Et.data):t.texImage2D(i.TEXTURE_2D,He,Lt,Et.width,Et.height,0,Dt,Ot,Et.data);J.generateMipmaps=!1}else qe?(gt&&t.texStorage2D(i.TEXTURE_2D,Be,Lt,dt.width,dt.height),_e&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,dt.width,dt.height,Dt,Ot,dt.data)):t.texImage2D(i.TEXTURE_2D,0,Lt,dt.width,dt.height,0,Dt,Ot,dt.data);else if(J.isCompressedTexture)if(J.isCompressedArrayTexture){qe&&gt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Be,Lt,Ae[0].width,Ae[0].height,dt.depth);for(let He=0,tt=Ae.length;He<tt;He++)if(Et=Ae[He],J.format!==Xs)if(Dt!==null)if(qe){if(_e)if(J.layerUpdates.size>0){const wt=AL(Et.width,Et.height,J.format,J.type);for(const Tt of J.layerUpdates){const Wt=Et.data.subarray(Tt*wt/Et.data.BYTES_PER_ELEMENT,(Tt+1)*wt/Et.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,He,0,0,Tt,Et.width,Et.height,1,Dt,Wt)}J.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,He,0,0,0,Et.width,Et.height,dt.depth,Dt,Et.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,He,Lt,Et.width,Et.height,dt.depth,0,Et.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else qe?_e&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,He,0,0,0,Et.width,Et.height,dt.depth,Dt,Ot,Et.data):t.texImage3D(i.TEXTURE_2D_ARRAY,He,Lt,Et.width,Et.height,dt.depth,0,Dt,Ot,Et.data)}else{qe&&gt&&t.texStorage2D(i.TEXTURE_2D,Be,Lt,Ae[0].width,Ae[0].height);for(let He=0,tt=Ae.length;He<tt;He++)Et=Ae[He],J.format!==Xs?Dt!==null?qe?_e&&t.compressedTexSubImage2D(i.TEXTURE_2D,He,0,0,Et.width,Et.height,Dt,Et.data):t.compressedTexImage2D(i.TEXTURE_2D,He,Lt,Et.width,Et.height,0,Et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qe?_e&&t.texSubImage2D(i.TEXTURE_2D,He,0,0,Et.width,Et.height,Dt,Ot,Et.data):t.texImage2D(i.TEXTURE_2D,He,Lt,Et.width,Et.height,0,Dt,Ot,Et.data)}else if(J.isDataArrayTexture)if(qe){if(gt&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Be,Lt,dt.width,dt.height,dt.depth),_e)if(J.layerUpdates.size>0){const He=AL(dt.width,dt.height,J.format,J.type);for(const tt of J.layerUpdates){const wt=dt.data.subarray(tt*He/dt.data.BYTES_PER_ELEMENT,(tt+1)*He/dt.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,tt,dt.width,dt.height,1,Dt,Ot,wt)}J.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,dt.width,dt.height,dt.depth,Dt,Ot,dt.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,Lt,dt.width,dt.height,dt.depth,0,Dt,Ot,dt.data);else if(J.isData3DTexture)qe?(gt&&t.texStorage3D(i.TEXTURE_3D,Be,Lt,dt.width,dt.height,dt.depth),_e&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,dt.width,dt.height,dt.depth,Dt,Ot,dt.data)):t.texImage3D(i.TEXTURE_3D,0,Lt,dt.width,dt.height,dt.depth,0,Dt,Ot,dt.data);else if(J.isFramebufferTexture){if(gt)if(qe)t.texStorage2D(i.TEXTURE_2D,Be,Lt,dt.width,dt.height);else{let He=dt.width,tt=dt.height;for(let wt=0;wt<Be;wt++)t.texImage2D(i.TEXTURE_2D,wt,Lt,He,tt,0,Dt,Ot,null),He>>=1,tt>>=1}}else if(Ae.length>0){if(qe&&gt){const He=nt(Ae[0]);t.texStorage2D(i.TEXTURE_2D,Be,Lt,He.width,He.height)}for(let He=0,tt=Ae.length;He<tt;He++)Et=Ae[He],qe?_e&&t.texSubImage2D(i.TEXTURE_2D,He,0,0,Dt,Ot,Et):t.texImage2D(i.TEXTURE_2D,He,Lt,Dt,Ot,Et);J.generateMipmaps=!1}else if(qe){if(gt){const He=nt(dt);t.texStorage2D(i.TEXTURE_2D,Be,Lt,He.width,He.height)}_e&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Dt,Ot,dt)}else t.texImage2D(i.TEXTURE_2D,0,Lt,Dt,Ot,dt);M(J)&&x(Ye),pt.__version=je.version,J.onUpdate&&J.onUpdate(J)}re.__version=J.version}function De(re,J,Te){if(J.image.length!==6)return;const Ye=ye(re,J),st=J.source;t.bindTexture(i.TEXTURE_CUBE_MAP,re.__webglTexture,i.TEXTURE0+Te);const je=n.get(st);if(st.version!==je.__version||Ye===!0){t.activeTexture(i.TEXTURE0+Te);const pt=ri.getPrimaries(ri.workingColorSpace),vt=J.colorSpace===Yc?null:ri.getPrimaries(J.colorSpace),Mt=J.colorSpace===Yc||pt===vt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,J.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,J.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Mt);const kt=J.isCompressedTexture||J.image[0].isCompressedTexture,dt=J.image[0]&&J.image[0].isDataTexture,Dt=[];for(let tt=0;tt<6;tt++)!kt&&!dt?Dt[tt]=E(J.image[tt],!0,s.maxCubemapSize):Dt[tt]=dt?J.image[tt].image:J.image[tt],Dt[tt]=St(J,Dt[tt]);const Ot=Dt[0],Lt=r.convert(J.format,J.colorSpace),Et=r.convert(J.type),Ae=R(J.internalFormat,Lt,Et,J.colorSpace),qe=J.isVideoTexture!==!0,gt=je.__version===void 0||Ye===!0,_e=st.dataReady;let Be=P(J,Ot);xe(i.TEXTURE_CUBE_MAP,J);let He;if(kt){qe&&gt&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Be,Ae,Ot.width,Ot.height);for(let tt=0;tt<6;tt++){He=Dt[tt].mipmaps;for(let wt=0;wt<He.length;wt++){const Tt=He[wt];J.format!==Xs?Lt!==null?qe?_e&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,wt,0,0,Tt.width,Tt.height,Lt,Tt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,wt,Ae,Tt.width,Tt.height,0,Tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):qe?_e&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,wt,0,0,Tt.width,Tt.height,Lt,Et,Tt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,wt,Ae,Tt.width,Tt.height,0,Lt,Et,Tt.data)}}}else{if(He=J.mipmaps,qe&&gt){He.length>0&&Be++;const tt=nt(Dt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Be,Ae,tt.width,tt.height)}for(let tt=0;tt<6;tt++)if(dt){qe?_e&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,0,0,Dt[tt].width,Dt[tt].height,Lt,Et,Dt[tt].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,Ae,Dt[tt].width,Dt[tt].height,0,Lt,Et,Dt[tt].data);for(let wt=0;wt<He.length;wt++){const Wt=He[wt].image[tt].image;qe?_e&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,wt+1,0,0,Wt.width,Wt.height,Lt,Et,Wt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,wt+1,Ae,Wt.width,Wt.height,0,Lt,Et,Wt.data)}}else{qe?_e&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,0,0,Lt,Et,Dt[tt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,Ae,Lt,Et,Dt[tt]);for(let wt=0;wt<He.length;wt++){const Tt=He[wt];qe?_e&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,wt+1,0,0,Lt,Et,Tt.image[tt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tt,wt+1,Ae,Lt,Et,Tt.image[tt])}}}M(J)&&x(i.TEXTURE_CUBE_MAP),je.__version=st.version,J.onUpdate&&J.onUpdate(J)}re.__version=J.version}function Ce(re,J,Te,Ye,st,je){const pt=r.convert(Te.format,Te.colorSpace),vt=r.convert(Te.type),Mt=R(Te.internalFormat,pt,vt,Te.colorSpace),kt=n.get(J),dt=n.get(Te);if(dt.__renderTarget=J,!kt.__hasExternalTextures){const Dt=Math.max(1,J.width>>je),Ot=Math.max(1,J.height>>je);st===i.TEXTURE_3D||st===i.TEXTURE_2D_ARRAY?t.texImage3D(st,je,Mt,Dt,Ot,J.depth,0,pt,vt,null):t.texImage2D(st,je,Mt,Dt,Ot,0,pt,vt,null)}t.bindFramebuffer(i.FRAMEBUFFER,re),ke(J)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ye,st,dt.__webglTexture,0,Ie(J)):(st===i.TEXTURE_2D||st>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&st<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Ye,st,dt.__webglTexture,je),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Ue(re,J,Te){if(i.bindRenderbuffer(i.RENDERBUFFER,re),J.depthBuffer){const Ye=J.depthTexture,st=Ye&&Ye.isDepthTexture?Ye.type:null,je=D(J.stencilBuffer,st),pt=J.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,vt=Ie(J);ke(J)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,vt,je,J.width,J.height):Te?i.renderbufferStorageMultisample(i.RENDERBUFFER,vt,je,J.width,J.height):i.renderbufferStorage(i.RENDERBUFFER,je,J.width,J.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,pt,i.RENDERBUFFER,re)}else{const Ye=J.textures;for(let st=0;st<Ye.length;st++){const je=Ye[st],pt=r.convert(je.format,je.colorSpace),vt=r.convert(je.type),Mt=R(je.internalFormat,pt,vt,je.colorSpace),kt=Ie(J);Te&&ke(J)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,kt,Mt,J.width,J.height):ke(J)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,kt,Mt,J.width,J.height):i.renderbufferStorage(i.RENDERBUFFER,Mt,J.width,J.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Qe(re,J){if(J&&J.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,re),!(J.depthTexture&&J.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ye=n.get(J.depthTexture);Ye.__renderTarget=J,(!Ye.__webglTexture||J.depthTexture.image.width!==J.width||J.depthTexture.image.height!==J.height)&&(J.depthTexture.image.width=J.width,J.depthTexture.image.height=J.height,J.depthTexture.needsUpdate=!0),ue(J.depthTexture,0);const st=Ye.__webglTexture,je=Ie(J);if(J.depthTexture.format===J_)ke(J)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,st,0,je):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,st,0);else if(J.depthTexture.format===Sv)ke(J)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,st,0,je):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,st,0);else throw new Error("Unknown depthTexture format")}function xt(re){const J=n.get(re),Te=re.isWebGLCubeRenderTarget===!0;if(J.__boundDepthTexture!==re.depthTexture){const Ye=re.depthTexture;if(J.__depthDisposeCallback&&J.__depthDisposeCallback(),Ye){const st=()=>{delete J.__boundDepthTexture,delete J.__depthDisposeCallback,Ye.removeEventListener("dispose",st)};Ye.addEventListener("dispose",st),J.__depthDisposeCallback=st}J.__boundDepthTexture=Ye}if(re.depthTexture&&!J.__autoAllocateDepthBuffer){if(Te)throw new Error("target.depthTexture not supported in Cube render targets");const Ye=re.texture.mipmaps;Ye&&Ye.length>0?Qe(J.__webglFramebuffer[0],re):Qe(J.__webglFramebuffer,re)}else if(Te){J.__webglDepthbuffer=[];for(let Ye=0;Ye<6;Ye++)if(t.bindFramebuffer(i.FRAMEBUFFER,J.__webglFramebuffer[Ye]),J.__webglDepthbuffer[Ye]===void 0)J.__webglDepthbuffer[Ye]=i.createRenderbuffer(),Ue(J.__webglDepthbuffer[Ye],re,!1);else{const st=re.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,je=J.__webglDepthbuffer[Ye];i.bindRenderbuffer(i.RENDERBUFFER,je),i.framebufferRenderbuffer(i.FRAMEBUFFER,st,i.RENDERBUFFER,je)}}else{const Ye=re.texture.mipmaps;if(Ye&&Ye.length>0?t.bindFramebuffer(i.FRAMEBUFFER,J.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,J.__webglFramebuffer),J.__webglDepthbuffer===void 0)J.__webglDepthbuffer=i.createRenderbuffer(),Ue(J.__webglDepthbuffer,re,!1);else{const st=re.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,je=J.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,je),i.framebufferRenderbuffer(i.FRAMEBUFFER,st,i.RENDERBUFFER,je)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function lt(re,J,Te){const Ye=n.get(re);J!==void 0&&Ce(Ye.__webglFramebuffer,re,re.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),Te!==void 0&&xt(re)}function mt(re){const J=re.texture,Te=n.get(re),Ye=n.get(J);re.addEventListener("dispose",H);const st=re.textures,je=re.isWebGLCubeRenderTarget===!0,pt=st.length>1;if(pt||(Ye.__webglTexture===void 0&&(Ye.__webglTexture=i.createTexture()),Ye.__version=J.version,a.memory.textures++),je){Te.__webglFramebuffer=[];for(let vt=0;vt<6;vt++)if(J.mipmaps&&J.mipmaps.length>0){Te.__webglFramebuffer[vt]=[];for(let Mt=0;Mt<J.mipmaps.length;Mt++)Te.__webglFramebuffer[vt][Mt]=i.createFramebuffer()}else Te.__webglFramebuffer[vt]=i.createFramebuffer()}else{if(J.mipmaps&&J.mipmaps.length>0){Te.__webglFramebuffer=[];for(let vt=0;vt<J.mipmaps.length;vt++)Te.__webglFramebuffer[vt]=i.createFramebuffer()}else Te.__webglFramebuffer=i.createFramebuffer();if(pt)for(let vt=0,Mt=st.length;vt<Mt;vt++){const kt=n.get(st[vt]);kt.__webglTexture===void 0&&(kt.__webglTexture=i.createTexture(),a.memory.textures++)}if(re.samples>0&&ke(re)===!1){Te.__webglMultisampledFramebuffer=i.createFramebuffer(),Te.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Te.__webglMultisampledFramebuffer);for(let vt=0;vt<st.length;vt++){const Mt=st[vt];Te.__webglColorRenderbuffer[vt]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Te.__webglColorRenderbuffer[vt]);const kt=r.convert(Mt.format,Mt.colorSpace),dt=r.convert(Mt.type),Dt=R(Mt.internalFormat,kt,dt,Mt.colorSpace,re.isXRRenderTarget===!0),Ot=Ie(re);i.renderbufferStorageMultisample(i.RENDERBUFFER,Ot,Dt,re.width,re.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+vt,i.RENDERBUFFER,Te.__webglColorRenderbuffer[vt])}i.bindRenderbuffer(i.RENDERBUFFER,null),re.depthBuffer&&(Te.__webglDepthRenderbuffer=i.createRenderbuffer(),Ue(Te.__webglDepthRenderbuffer,re,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(je){t.bindTexture(i.TEXTURE_CUBE_MAP,Ye.__webglTexture),xe(i.TEXTURE_CUBE_MAP,J);for(let vt=0;vt<6;vt++)if(J.mipmaps&&J.mipmaps.length>0)for(let Mt=0;Mt<J.mipmaps.length;Mt++)Ce(Te.__webglFramebuffer[vt][Mt],re,J,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+vt,Mt);else Ce(Te.__webglFramebuffer[vt],re,J,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+vt,0);M(J)&&x(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(pt){for(let vt=0,Mt=st.length;vt<Mt;vt++){const kt=st[vt],dt=n.get(kt);t.bindTexture(i.TEXTURE_2D,dt.__webglTexture),xe(i.TEXTURE_2D,kt),Ce(Te.__webglFramebuffer,re,kt,i.COLOR_ATTACHMENT0+vt,i.TEXTURE_2D,0),M(kt)&&x(i.TEXTURE_2D)}t.unbindTexture()}else{let vt=i.TEXTURE_2D;if((re.isWebGL3DRenderTarget||re.isWebGLArrayRenderTarget)&&(vt=re.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(vt,Ye.__webglTexture),xe(vt,J),J.mipmaps&&J.mipmaps.length>0)for(let Mt=0;Mt<J.mipmaps.length;Mt++)Ce(Te.__webglFramebuffer[Mt],re,J,i.COLOR_ATTACHMENT0,vt,Mt);else Ce(Te.__webglFramebuffer,re,J,i.COLOR_ATTACHMENT0,vt,0);M(J)&&x(vt),t.unbindTexture()}re.depthBuffer&&xt(re)}function it(re){const J=re.textures;for(let Te=0,Ye=J.length;Te<Ye;Te++){const st=J[Te];if(M(st)){const je=w(re),pt=n.get(st).__webglTexture;t.bindTexture(je,pt),x(je),t.unbindTexture()}}}const et=[],$=[];function $e(re){if(re.samples>0){if(ke(re)===!1){const J=re.textures,Te=re.width,Ye=re.height;let st=i.COLOR_BUFFER_BIT;const je=re.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,pt=n.get(re),vt=J.length>1;if(vt)for(let kt=0;kt<J.length;kt++)t.bindFramebuffer(i.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+kt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,pt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+kt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,pt.__webglMultisampledFramebuffer);const Mt=re.texture.mipmaps;Mt&&Mt.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,pt.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,pt.__webglFramebuffer);for(let kt=0;kt<J.length;kt++){if(re.resolveDepthBuffer&&(re.depthBuffer&&(st|=i.DEPTH_BUFFER_BIT),re.stencilBuffer&&re.resolveStencilBuffer&&(st|=i.STENCIL_BUFFER_BIT)),vt){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,pt.__webglColorRenderbuffer[kt]);const dt=n.get(J[kt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,dt,0)}i.blitFramebuffer(0,0,Te,Ye,0,0,Te,Ye,st,i.NEAREST),c===!0&&(et.length=0,$.length=0,et.push(i.COLOR_ATTACHMENT0+kt),re.depthBuffer&&re.resolveDepthBuffer===!1&&(et.push(je),$.push(je),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,$)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,et))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),vt)for(let kt=0;kt<J.length;kt++){t.bindFramebuffer(i.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+kt,i.RENDERBUFFER,pt.__webglColorRenderbuffer[kt]);const dt=n.get(J[kt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,pt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+kt,i.TEXTURE_2D,dt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,pt.__webglMultisampledFramebuffer)}else if(re.depthBuffer&&re.resolveDepthBuffer===!1&&c){const J=re.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[J])}}}function Ie(re){return Math.min(s.maxSamples,re.samples)}function ke(re){const J=n.get(re);return re.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&J.__useRenderToTexture!==!1}function We(re){const J=a.render.frame;d.get(re)!==J&&(d.set(re,J),re.update())}function St(re,J){const Te=re.colorSpace,Ye=re.format,st=re.type;return re.isCompressedTexture===!0||re.isVideoTexture===!0||Te!==ll&&Te!==Yc&&(ri.getTransfer(Te)===Pi?(Ye!==Xs||st!==as)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Te)),J}function nt(re){return typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement?(h.width=re.naturalWidth||re.width,h.height=re.naturalHeight||re.height):typeof VideoFrame<"u"&&re instanceof VideoFrame?(h.width=re.displayWidth,h.height=re.displayHeight):(h.width=re.width,h.height=re.height),h}this.allocateTextureUnit=se,this.resetTextureUnits=oe,this.setTexture2D=ue,this.setTexture2DArray=z,this.setTexture3D=K,this.setTextureCube=Q,this.rebindTextures=lt,this.setupRenderTarget=mt,this.updateRenderTargetMipmap=it,this.updateMultisampleRenderTarget=$e,this.setupDepthRenderbuffer=xt,this.setupFrameBufferTexture=Ce,this.useMultisampledRTT=ke}function Tk(i,e){function t(n,s=Yc){let r;const a=ri.getTransfer(s);if(n===as)return i.UNSIGNED_BYTE;if(n===TR)return i.UNSIGNED_SHORT_4_4_4_4;if(n===CR)return i.UNSIGNED_SHORT_5_5_5_1;if(n===LI)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===ER)return i.BYTE;if(n===MR)return i.SHORT;if(n===K_)return i.UNSIGNED_SHORT;if(n===zE)return i.INT;if(n===iu)return i.UNSIGNED_INT;if(n===ms)return i.FLOAT;if(n===br)return i.HALF_FLOAT;if(n===NI)return i.ALPHA;if(n===II)return i.RGB;if(n===Xs)return i.RGBA;if(n===J_)return i.DEPTH_COMPONENT;if(n===Sv)return i.DEPTH_STENCIL;if(n===GE)return i.RED;if(n===kE)return i.RED_INTEGER;if(n===PI)return i.RG;if(n===wR)return i.RG_INTEGER;if(n===RR)return i.RGBA_INTEGER;if(n===Bx||n===Lx||n===Nx||n===Ix)if(a===Pi)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===Bx)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Lx)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Nx)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ix)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===Bx)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Lx)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Nx)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ix)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===jC||n===XC||n===qC||n===YC)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===jC)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===XC)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===qC)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===YC)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===WC||n===KC||n===JC)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(n===WC||n===KC)return a===Pi?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===JC)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===ZC||n===QC||n===$C||n===ew||n===tw||n===nw||n===iw||n===sw||n===rw||n===aw||n===ow||n===lw||n===cw||n===uw)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(n===ZC)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===QC)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===$C)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===ew)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===tw)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===nw)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===iw)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===sw)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===rw)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===aw)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===ow)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===lw)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===cw)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===uw)return a===Pi?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Px||n===hw||n===fw)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===Px)return a===Pi?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===hw)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===fw)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===OI||n===dw||n===pw||n===mw)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===Px)return r.COMPRESSED_RED_RGTC1_EXT;if(n===dw)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===pw)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===mw)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===xv?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const yee=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_ee=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Aee{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const s=new Ai,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Xi({vertexShader:yee,fragmentShader:_ee,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ts(new jf(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class bee extends ul{constructor(e,t){super();const n=this;let s=null,r=1,a=null,o="local-floor",c=1,h=null,d=null,m=null,v=null,y=null,A=null;const E=new Aee,M=t.getContextAttributes();let x=null,w=null;const R=[],D=[],P=new Ke;let I=null;const H=new es;H.viewport=new ai;const U=new es;U.viewport=new ai;const N=[H,U],O=new gk;let G=null,oe=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(fe){let De=R[fe];return De===void 0&&(De=new $T,R[fe]=De),De.getTargetRaySpace()},this.getControllerGrip=function(fe){let De=R[fe];return De===void 0&&(De=new $T,R[fe]=De),De.getGripSpace()},this.getHand=function(fe){let De=R[fe];return De===void 0&&(De=new $T,R[fe]=De),De.getHandSpace()};function se(fe){const De=D.indexOf(fe.inputSource);if(De===-1)return;const Ce=R[De];Ce!==void 0&&(Ce.update(fe.inputSource,fe.frame,h||a),Ce.dispatchEvent({type:fe.type,data:fe.inputSource}))}function le(){s.removeEventListener("select",se),s.removeEventListener("selectstart",se),s.removeEventListener("selectend",se),s.removeEventListener("squeeze",se),s.removeEventListener("squeezestart",se),s.removeEventListener("squeezeend",se),s.removeEventListener("end",le),s.removeEventListener("inputsourceschange",ue);for(let fe=0;fe<R.length;fe++){const De=D[fe];De!==null&&(D[fe]=null,R[fe].disconnect(De))}G=null,oe=null,E.reset(),e.setRenderTarget(x),y=null,v=null,m=null,s=null,w=null,ye.stop(),n.isPresenting=!1,e.setPixelRatio(I),e.setSize(P.width,P.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(fe){r=fe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(fe){o=fe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||a},this.setReferenceSpace=function(fe){h=fe},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return m},this.getFrame=function(){return A},this.getSession=function(){return s},this.setSession=async function(fe){if(s=fe,s!==null){if(x=e.getRenderTarget(),s.addEventListener("select",se),s.addEventListener("selectstart",se),s.addEventListener("selectend",se),s.addEventListener("squeeze",se),s.addEventListener("squeezestart",se),s.addEventListener("squeezeend",se),s.addEventListener("end",le),s.addEventListener("inputsourceschange",ue),M.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(P),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ce=null,Ue=null,Qe=null;M.depth&&(Qe=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ce=M.stencil?Sv:J_,Ue=M.stencil?xv:iu);const xt={colorFormat:t.RGBA8,depthFormat:Qe,scaleFactor:r};m=new XRWebGLBinding(s,t),v=m.createProjectionLayer(xt),s.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),w=new Zi(v.textureWidth,v.textureHeight,{format:Xs,type:as,depthTexture:new WE(v.textureWidth,v.textureHeight,Ue,void 0,void 0,void 0,void 0,void 0,void 0,Ce),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const Ce={antialias:M.antialias,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:r};y=new XRWebGLLayer(s,t,Ce),s.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),w=new Zi(y.framebufferWidth,y.framebufferHeight,{format:Xs,type:as,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(c),h=null,a=await s.requestReferenceSpace(o),ye.setContext(s),ye.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function ue(fe){for(let De=0;De<fe.removed.length;De++){const Ce=fe.removed[De],Ue=D.indexOf(Ce);Ue>=0&&(D[Ue]=null,R[Ue].disconnect(Ce))}for(let De=0;De<fe.added.length;De++){const Ce=fe.added[De];let Ue=D.indexOf(Ce);if(Ue===-1){for(let xt=0;xt<R.length;xt++)if(xt>=D.length){D.push(Ce),Ue=xt;break}else if(D[xt]===null){D[xt]=Ce,Ue=xt;break}if(Ue===-1)break}const Qe=R[Ue];Qe&&Qe.connect(Ce)}}const z=new ae,K=new ae;function Q(fe,De,Ce){z.setFromMatrixPosition(De.matrixWorld),K.setFromMatrixPosition(Ce.matrixWorld);const Ue=z.distanceTo(K),Qe=De.projectionMatrix.elements,xt=Ce.projectionMatrix.elements,lt=Qe[14]/(Qe[10]-1),mt=Qe[14]/(Qe[10]+1),it=(Qe[9]+1)/Qe[5],et=(Qe[9]-1)/Qe[5],$=(Qe[8]-1)/Qe[0],$e=(xt[8]+1)/xt[0],Ie=lt*$,ke=lt*$e,We=Ue/(-$+$e),St=We*-$;if(De.matrixWorld.decompose(fe.position,fe.quaternion,fe.scale),fe.translateX(St),fe.translateZ(We),fe.matrixWorld.compose(fe.position,fe.quaternion,fe.scale),fe.matrixWorldInverse.copy(fe.matrixWorld).invert(),Qe[10]===-1)fe.projectionMatrix.copy(De.projectionMatrix),fe.projectionMatrixInverse.copy(De.projectionMatrixInverse);else{const nt=lt+We,re=mt+We,J=Ie-St,Te=ke+(Ue-St),Ye=it*mt/re*nt,st=et*mt/re*nt;fe.projectionMatrix.makePerspective(J,Te,Ye,st,nt,re),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert()}}function de(fe,De){De===null?fe.matrixWorld.copy(fe.matrix):fe.matrixWorld.multiplyMatrices(De.matrixWorld,fe.matrix),fe.matrixWorldInverse.copy(fe.matrixWorld).invert()}this.updateCamera=function(fe){if(s===null)return;let De=fe.near,Ce=fe.far;E.texture!==null&&(E.depthNear>0&&(De=E.depthNear),E.depthFar>0&&(Ce=E.depthFar)),O.near=U.near=H.near=De,O.far=U.far=H.far=Ce,(G!==O.near||oe!==O.far)&&(s.updateRenderState({depthNear:O.near,depthFar:O.far}),G=O.near,oe=O.far),H.layers.mask=fe.layers.mask|2,U.layers.mask=fe.layers.mask|4,O.layers.mask=H.layers.mask|U.layers.mask;const Ue=fe.parent,Qe=O.cameras;de(O,Ue);for(let xt=0;xt<Qe.length;xt++)de(Qe[xt],Ue);Qe.length===2?Q(O,H,U):O.projectionMatrix.copy(H.projectionMatrix),W(fe,O,Ue)};function W(fe,De,Ce){Ce===null?fe.matrix.copy(De.matrixWorld):(fe.matrix.copy(Ce.matrixWorld),fe.matrix.invert(),fe.matrix.multiply(De.matrixWorld)),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.updateMatrixWorld(!0),fe.projectionMatrix.copy(De.projectionMatrix),fe.projectionMatrixInverse.copy(De.projectionMatrixInverse),fe.isPerspectiveCamera&&(fe.fov=$_*2*Math.atan(1/fe.projectionMatrix.elements[5]),fe.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(v===null&&y===null))return c},this.setFoveation=function(fe){c=fe,v!==null&&(v.fixedFoveation=fe),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=fe)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh(O)};let he=null;function xe(fe,De){if(d=De.getViewerPose(h||a),A=De,d!==null){const Ce=d.views;y!==null&&(e.setRenderTargetFramebuffer(w,y.framebuffer),e.setRenderTarget(w));let Ue=!1;Ce.length!==O.cameras.length&&(O.cameras.length=0,Ue=!0);for(let lt=0;lt<Ce.length;lt++){const mt=Ce[lt];let it=null;if(y!==null)it=y.getViewport(mt);else{const $=m.getViewSubImage(v,mt);it=$.viewport,lt===0&&(e.setRenderTargetTextures(w,$.colorTexture,$.depthStencilTexture),e.setRenderTarget(w))}let et=N[lt];et===void 0&&(et=new es,et.layers.enable(lt),et.viewport=new ai,N[lt]=et),et.matrix.fromArray(mt.transform.matrix),et.matrix.decompose(et.position,et.quaternion,et.scale),et.projectionMatrix.fromArray(mt.projectionMatrix),et.projectionMatrixInverse.copy(et.projectionMatrix).invert(),et.viewport.set(it.x,it.y,it.width,it.height),lt===0&&(O.matrix.copy(et.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),Ue===!0&&O.cameras.push(et)}const Qe=s.enabledFeatures;if(Qe&&Qe.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&m){const lt=m.getDepthInformation(Ce[0]);lt&&lt.isValid&&lt.texture&&E.init(e,lt,s.renderState)}}for(let Ce=0;Ce<R.length;Ce++){const Ue=D[Ce],Qe=R[Ce];Ue!==null&&Qe!==void 0&&Qe.update(Ue,De,h||a)}he&&he(fe,De),De.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:De}),A=null}const ye=new bk;ye.setAnimationLoop(xe),this.setAnimationLoop=function(fe){he=fe},this.dispose=function(){}}}const Jm=new cl,xee=new on;function See(i,e){function t(M,x){M.matrixAutoUpdate===!0&&M.updateMatrix(),x.value.copy(M.matrix)}function n(M,x){x.color.getRGB(M.fogColor.value,RG(i)),x.isFog?(M.fogNear.value=x.near,M.fogFar.value=x.far):x.isFogExp2&&(M.fogDensity.value=x.density)}function s(M,x,w,R,D){x.isMeshBasicMaterial||x.isMeshLambertMaterial?r(M,x):x.isMeshToonMaterial?(r(M,x),m(M,x)):x.isMeshPhongMaterial?(r(M,x),d(M,x)):x.isMeshStandardMaterial?(r(M,x),v(M,x),x.isMeshPhysicalMaterial&&y(M,x,D)):x.isMeshMatcapMaterial?(r(M,x),A(M,x)):x.isMeshDepthMaterial?r(M,x):x.isMeshDistanceMaterial?(r(M,x),E(M,x)):x.isMeshNormalMaterial?r(M,x):x.isLineBasicMaterial?(a(M,x),x.isLineDashedMaterial&&o(M,x)):x.isPointsMaterial?c(M,x,w,R):x.isSpriteMaterial?h(M,x):x.isShadowMaterial?(M.color.value.copy(x.color),M.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function r(M,x){M.opacity.value=x.opacity,x.color&&M.diffuse.value.copy(x.color),x.emissive&&M.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(M.map.value=x.map,t(x.map,M.mapTransform)),x.alphaMap&&(M.alphaMap.value=x.alphaMap,t(x.alphaMap,M.alphaMapTransform)),x.bumpMap&&(M.bumpMap.value=x.bumpMap,t(x.bumpMap,M.bumpMapTransform),M.bumpScale.value=x.bumpScale,x.side===Ar&&(M.bumpScale.value*=-1)),x.normalMap&&(M.normalMap.value=x.normalMap,t(x.normalMap,M.normalMapTransform),M.normalScale.value.copy(x.normalScale),x.side===Ar&&M.normalScale.value.negate()),x.displacementMap&&(M.displacementMap.value=x.displacementMap,t(x.displacementMap,M.displacementMapTransform),M.displacementScale.value=x.displacementScale,M.displacementBias.value=x.displacementBias),x.emissiveMap&&(M.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,M.emissiveMapTransform)),x.specularMap&&(M.specularMap.value=x.specularMap,t(x.specularMap,M.specularMapTransform)),x.alphaTest>0&&(M.alphaTest.value=x.alphaTest);const w=e.get(x),R=w.envMap,D=w.envMapRotation;R&&(M.envMap.value=R,Jm.copy(D),Jm.x*=-1,Jm.y*=-1,Jm.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(Jm.y*=-1,Jm.z*=-1),M.envMapRotation.value.setFromMatrix4(xee.makeRotationFromEuler(Jm)),M.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=x.reflectivity,M.ior.value=x.ior,M.refractionRatio.value=x.refractionRatio),x.lightMap&&(M.lightMap.value=x.lightMap,M.lightMapIntensity.value=x.lightMapIntensity,t(x.lightMap,M.lightMapTransform)),x.aoMap&&(M.aoMap.value=x.aoMap,M.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,M.aoMapTransform))}function a(M,x){M.diffuse.value.copy(x.color),M.opacity.value=x.opacity,x.map&&(M.map.value=x.map,t(x.map,M.mapTransform))}function o(M,x){M.dashSize.value=x.dashSize,M.totalSize.value=x.dashSize+x.gapSize,M.scale.value=x.scale}function c(M,x,w,R){M.diffuse.value.copy(x.color),M.opacity.value=x.opacity,M.size.value=x.size*w,M.scale.value=R*.5,x.map&&(M.map.value=x.map,t(x.map,M.uvTransform)),x.alphaMap&&(M.alphaMap.value=x.alphaMap,t(x.alphaMap,M.alphaMapTransform)),x.alphaTest>0&&(M.alphaTest.value=x.alphaTest)}function h(M,x){M.diffuse.value.copy(x.color),M.opacity.value=x.opacity,M.rotation.value=x.rotation,x.map&&(M.map.value=x.map,t(x.map,M.mapTransform)),x.alphaMap&&(M.alphaMap.value=x.alphaMap,t(x.alphaMap,M.alphaMapTransform)),x.alphaTest>0&&(M.alphaTest.value=x.alphaTest)}function d(M,x){M.specular.value.copy(x.specular),M.shininess.value=Math.max(x.shininess,1e-4)}function m(M,x){x.gradientMap&&(M.gradientMap.value=x.gradientMap)}function v(M,x){M.metalness.value=x.metalness,x.metalnessMap&&(M.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,M.metalnessMapTransform)),M.roughness.value=x.roughness,x.roughnessMap&&(M.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,M.roughnessMapTransform)),x.envMap&&(M.envMapIntensity.value=x.envMapIntensity)}function y(M,x,w){M.ior.value=x.ior,x.sheen>0&&(M.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),M.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(M.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,M.sheenColorMapTransform)),x.sheenRoughnessMap&&(M.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,M.sheenRoughnessMapTransform))),x.clearcoat>0&&(M.clearcoat.value=x.clearcoat,M.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(M.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,M.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(M.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Ar&&M.clearcoatNormalScale.value.negate())),x.dispersion>0&&(M.dispersion.value=x.dispersion),x.iridescence>0&&(M.iridescence.value=x.iridescence,M.iridescenceIOR.value=x.iridescenceIOR,M.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(M.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,M.iridescenceMapTransform)),x.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),x.transmission>0&&(M.transmission.value=x.transmission,M.transmissionSamplerMap.value=w.texture,M.transmissionSamplerSize.value.set(w.width,w.height),x.transmissionMap&&(M.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,M.transmissionMapTransform)),M.thickness.value=x.thickness,x.thicknessMap&&(M.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=x.attenuationDistance,M.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(M.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(M.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=x.specularIntensity,M.specularColor.value.copy(x.specularColor),x.specularColorMap&&(M.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,M.specularColorMapTransform)),x.specularIntensityMap&&(M.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,M.specularIntensityMapTransform))}function A(M,x){x.matcap&&(M.matcap.value=x.matcap)}function E(M,x){const w=e.get(x).light;M.referencePosition.value.setFromMatrixPosition(w.matrixWorld),M.nearDistance.value=w.shadow.camera.near,M.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function Eee(i,e,t,n){let s={},r={},a=[];const o=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function c(w,R){const D=R.program;n.uniformBlockBinding(w,D)}function h(w,R){let D=s[w.id];D===void 0&&(A(w),D=d(w),s[w.id]=D,w.addEventListener("dispose",M));const P=R.program;n.updateUBOMapping(w,P);const I=e.render.frame;r[w.id]!==I&&(v(w),r[w.id]=I)}function d(w){const R=m();w.__bindingPointIndex=R;const D=i.createBuffer(),P=w.__size,I=w.usage;return i.bindBuffer(i.UNIFORM_BUFFER,D),i.bufferData(i.UNIFORM_BUFFER,P,I),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,R,D),D}function m(){for(let w=0;w<o;w++)if(a.indexOf(w)===-1)return a.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(w){const R=s[w.id],D=w.uniforms,P=w.__cache;i.bindBuffer(i.UNIFORM_BUFFER,R);for(let I=0,H=D.length;I<H;I++){const U=Array.isArray(D[I])?D[I]:[D[I]];for(let N=0,O=U.length;N<O;N++){const G=U[N];if(y(G,I,N,P)===!0){const oe=G.__offset,se=Array.isArray(G.value)?G.value:[G.value];let le=0;for(let ue=0;ue<se.length;ue++){const z=se[ue],K=E(z);typeof z=="number"||typeof z=="boolean"?(G.__data[0]=z,i.bufferSubData(i.UNIFORM_BUFFER,oe+le,G.__data)):z.isMatrix3?(G.__data[0]=z.elements[0],G.__data[1]=z.elements[1],G.__data[2]=z.elements[2],G.__data[3]=0,G.__data[4]=z.elements[3],G.__data[5]=z.elements[4],G.__data[6]=z.elements[5],G.__data[7]=0,G.__data[8]=z.elements[6],G.__data[9]=z.elements[7],G.__data[10]=z.elements[8],G.__data[11]=0):(z.toArray(G.__data,le),le+=K.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,oe,G.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function y(w,R,D,P){const I=w.value,H=R+"_"+D;if(P[H]===void 0)return typeof I=="number"||typeof I=="boolean"?P[H]=I:P[H]=I.clone(),!0;{const U=P[H];if(typeof I=="number"||typeof I=="boolean"){if(U!==I)return P[H]=I,!0}else if(U.equals(I)===!1)return U.copy(I),!0}return!1}function A(w){const R=w.uniforms;let D=0;const P=16;for(let H=0,U=R.length;H<U;H++){const N=Array.isArray(R[H])?R[H]:[R[H]];for(let O=0,G=N.length;O<G;O++){const oe=N[O],se=Array.isArray(oe.value)?oe.value:[oe.value];for(let le=0,ue=se.length;le<ue;le++){const z=se[le],K=E(z),Q=D%P,de=Q%K.boundary,W=Q+de;D+=de,W!==0&&P-W<K.storage&&(D+=P-W),oe.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),oe.__offset=D,D+=K.storage}}}const I=D%P;return I>0&&(D+=P-I),w.__size=D,w.__cache={},this}function E(w){const R={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(R.boundary=4,R.storage=4):w.isVector2?(R.boundary=8,R.storage=8):w.isVector3||w.isColor?(R.boundary=16,R.storage=12):w.isVector4?(R.boundary=16,R.storage=16):w.isMatrix3?(R.boundary=48,R.storage=48):w.isMatrix4?(R.boundary=64,R.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),R}function M(w){const R=w.target;R.removeEventListener("dispose",M);const D=a.indexOf(R.__bindingPointIndex);a.splice(D,1),i.deleteBuffer(s[R.id]),delete s[R.id],delete r[R.id]}function x(){for(const w in s)i.deleteBuffer(s[w]);a=[],s={},r={}}return{bind:c,update:h,dispose:x}}class y3{constructor(e={}){const{canvas:t=TG(),context:n=null,depth:s=!0,stencil:r=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:m=!1,reverseDepthBuffer:v=!1}=e;this.isWebGLRenderer=!0;let y;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=n.getContextAttributes().alpha}else y=a;const A=new Uint32Array(4),E=new Int32Array(4);let M=null,x=null;const w=[],R=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=$c,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const D=this;let P=!1;this._outputColorSpace=Yn;let I=0,H=0,U=null,N=-1,O=null;const G=new ai,oe=new ai;let se=null;const le=new Bt(0);let ue=0,z=t.width,K=t.height,Q=1,de=null,W=null;const he=new ai(0,0,z,K),xe=new ai(0,0,z,K);let ye=!1;const fe=new mA;let De=!1,Ce=!1;const Ue=new on,Qe=new on,xt=new ae,lt=new ai,mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let it=!1;function et(){return U===null?Q:1}let $=n;function $e(X,ce){return t.getContext(X,ce)}try{const X={alpha:!0,depth:s,stencil:r,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:d,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${kp}`),t.addEventListener("webglcontextlost",tt,!1),t.addEventListener("webglcontextrestored",wt,!1),t.addEventListener("webglcontextcreationerror",Tt,!1),$===null){const ce="webgl2";if($=$e(ce,X),$===null)throw $e(ce)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(X){throw console.error("THREE.WebGLRenderer: "+X.message),X}let Ie,ke,We,St,nt,re,J,Te,Ye,st,je,pt,vt,Mt,kt,dt,Dt,Ot,Lt,Et,Ae,qe,gt,_e;function Be(){Ie=new OQ($),Ie.init(),qe=new Tk($,Ie),ke=new RQ($,Ie,e,qe),We=new gee($,Ie),ke.reverseDepthBuffer&&v&&We.buffers.depth.setReversed(!0),St=new HQ($),nt=new iee,re=new vee($,Ie,We,nt,ke,qe,St),J=new BQ(D),Te=new PQ(D),Ye=new XK($),gt=new CQ($,Ye),st=new UQ($,Ye,St,gt),je=new GQ($,st,Ye,St),Lt=new zQ($,ke,re),dt=new DQ(nt),pt=new nee(D,J,Te,Ie,ke,gt,dt),vt=new See(D,nt),Mt=new ree,kt=new hee(Ie),Ot=new TQ(D,J,Te,We,je,y,c),Dt=new pee(D,je,ke),_e=new Eee($,St,ke,We),Et=new wQ($,Ie,St),Ae=new FQ($,Ie,St),St.programs=pt.programs,D.capabilities=ke,D.extensions=Ie,D.properties=nt,D.renderLists=Mt,D.shadowMap=Dt,D.state=We,D.info=St}Be();const He=new bee(D,$);this.xr=He,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const X=Ie.get("WEBGL_lose_context");X&&X.loseContext()},this.forceContextRestore=function(){const X=Ie.get("WEBGL_lose_context");X&&X.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(X){X!==void 0&&(Q=X,this.setSize(z,K,!1))},this.getSize=function(X){return X.set(z,K)},this.setSize=function(X,ce,me=!0){if(He.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=X,K=ce,t.width=Math.floor(X*Q),t.height=Math.floor(ce*Q),me===!0&&(t.style.width=X+"px",t.style.height=ce+"px"),this.setViewport(0,0,X,ce)},this.getDrawingBufferSize=function(X){return X.set(z*Q,K*Q).floor()},this.setDrawingBufferSize=function(X,ce,me){z=X,K=ce,Q=me,t.width=Math.floor(X*me),t.height=Math.floor(ce*me),this.setViewport(0,0,X,ce)},this.getCurrentViewport=function(X){return X.copy(G)},this.getViewport=function(X){return X.copy(he)},this.setViewport=function(X,ce,me,ge){X.isVector4?he.set(X.x,X.y,X.z,X.w):he.set(X,ce,me,ge),We.viewport(G.copy(he).multiplyScalar(Q).round())},this.getScissor=function(X){return X.copy(xe)},this.setScissor=function(X,ce,me,ge){X.isVector4?xe.set(X.x,X.y,X.z,X.w):xe.set(X,ce,me,ge),We.scissor(oe.copy(xe).multiplyScalar(Q).round())},this.getScissorTest=function(){return ye},this.setScissorTest=function(X){We.setScissorTest(ye=X)},this.setOpaqueSort=function(X){de=X},this.setTransparentSort=function(X){W=X},this.getClearColor=function(X){return X.copy(Ot.getClearColor())},this.setClearColor=function(){Ot.setClearColor(...arguments)},this.getClearAlpha=function(){return Ot.getClearAlpha()},this.setClearAlpha=function(){Ot.setClearAlpha(...arguments)},this.clear=function(X=!0,ce=!0,me=!0){let ge=0;if(X){let Ee=!1;if(U!==null){const Ne=U.texture.format;Ee=Ne===RR||Ne===wR||Ne===kE}if(Ee){const Ne=U.texture.type,Ze=Ne===as||Ne===iu||Ne===K_||Ne===xv||Ne===TR||Ne===CR,rt=Ot.getClearColor(),ht=Ot.getClearAlpha(),Nt=rt.r,Ct=rt.g,It=rt.b;Ze?(A[0]=Nt,A[1]=Ct,A[2]=It,A[3]=ht,$.clearBufferuiv($.COLOR,0,A)):(E[0]=Nt,E[1]=Ct,E[2]=It,E[3]=ht,$.clearBufferiv($.COLOR,0,E))}else ge|=$.COLOR_BUFFER_BIT}ce&&(ge|=$.DEPTH_BUFFER_BIT),me&&(ge|=$.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",tt,!1),t.removeEventListener("webglcontextrestored",wt,!1),t.removeEventListener("webglcontextcreationerror",Tt,!1),Ot.dispose(),Mt.dispose(),kt.dispose(),nt.dispose(),J.dispose(),Te.dispose(),je.dispose(),gt.dispose(),_e.dispose(),pt.dispose(),He.dispose(),He.removeEventListener("sessionstart",ls),He.removeEventListener("sessionend",ys),_s.stop()};function tt(X){X.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function wt(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const X=St.autoReset,ce=Dt.enabled,me=Dt.autoUpdate,ge=Dt.needsUpdate,Ee=Dt.type;Be(),St.autoReset=X,Dt.enabled=ce,Dt.autoUpdate=me,Dt.needsUpdate=ge,Dt.type=Ee}function Tt(X){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",X.statusMessage)}function Wt(X){const ce=X.target;ce.removeEventListener("dispose",Wt),vn(ce)}function vn(X){$n(X),nt.remove(X)}function $n(X){const ce=nt.get(X).programs;ce!==void 0&&(ce.forEach(function(me){pt.releaseProgram(me)}),X.isShaderMaterial&&pt.releaseShaderCache(X))}this.renderBufferDirect=function(X,ce,me,ge,Ee,Ne){ce===null&&(ce=mt);const Ze=Ee.isMesh&&Ee.matrixWorld.determinant()<0,rt=be(X,ce,me,ge,Ee);We.setMaterial(ge,Ze);let ht=me.index,Nt=1;if(ge.wireframe===!0){if(ht=st.getWireframeAttribute(me),ht===void 0)return;Nt=2}const Ct=me.drawRange,It=me.attributes.position;let en=Ct.start*Nt,Kt=(Ct.start+Ct.count)*Nt;Ne!==null&&(en=Math.max(en,Ne.start*Nt),Kt=Math.min(Kt,(Ne.start+Ne.count)*Nt)),ht!==null?(en=Math.max(en,0),Kt=Math.min(Kt,ht.count)):It!=null&&(en=Math.max(en,0),Kt=Math.min(Kt,It.count));const Kn=Kt-en;if(Kn<0||Kn===1/0)return;gt.setup(Ee,ge,rt,me,ht);let Vt,Qt=Et;if(ht!==null&&(Vt=Ye.get(ht),Qt=Ae,Qt.setIndex(Vt)),Ee.isMesh)ge.wireframe===!0?(We.setLineWidth(ge.wireframeLinewidth*et()),Qt.setMode($.LINES)):Qt.setMode($.TRIANGLES);else if(Ee.isLine){let jt=ge.linewidth;jt===void 0&&(jt=1),We.setLineWidth(jt*et()),Ee.isLineSegments?Qt.setMode($.LINES):Ee.isLineLoop?Qt.setMode($.LINE_LOOP):Qt.setMode($.LINE_STRIP)}else Ee.isPoints?Qt.setMode($.POINTS):Ee.isSprite&&Qt.setMode($.TRIANGLES);if(Ee.isBatchedMesh)if(Ee._multiDrawInstances!==null)QT("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Qt.renderMultiDrawInstances(Ee._multiDrawStarts,Ee._multiDrawCounts,Ee._multiDrawCount,Ee._multiDrawInstances);else if(Ie.get("WEBGL_multi_draw"))Qt.renderMultiDraw(Ee._multiDrawStarts,Ee._multiDrawCounts,Ee._multiDrawCount);else{const jt=Ee._multiDrawStarts,bi=Ee._multiDrawCounts,fn=Ee._multiDrawCount,gn=ht?Ye.get(ht).bytesPerElement:1,Ci=nt.get(ge).currentProgram.getUniforms();for(let nn=0;nn<fn;nn++)Ci.setValue($,"_gl_DrawID",nn),Qt.render(jt[nn]/gn,bi[nn])}else if(Ee.isInstancedMesh)Qt.renderInstances(en,Kn,Ee.count);else if(me.isInstancedBufferGeometry){const jt=me._maxInstanceCount!==void 0?me._maxInstanceCount:1/0,bi=Math.min(me.instanceCount,jt);Qt.renderInstances(en,Kn,bi)}else Qt.render(en,Kn)};function yn(X,ce,me){X.transparent===!0&&X.side===ra&&X.forceSinglePass===!1?(X.side=Ar,X.needsUpdate=!0,pi(X,ce,me),X.side=nu,X.needsUpdate=!0,pi(X,ce,me),X.side=ra):pi(X,ce,me)}this.compile=function(X,ce,me=null){me===null&&(me=X),x=kt.get(me),x.init(ce),R.push(x),me.traverseVisible(function(Ee){Ee.isLight&&Ee.layers.test(ce.layers)&&(x.pushLight(Ee),Ee.castShadow&&x.pushShadow(Ee))}),X!==me&&X.traverseVisible(function(Ee){Ee.isLight&&Ee.layers.test(ce.layers)&&(x.pushLight(Ee),Ee.castShadow&&x.pushShadow(Ee))}),x.setupLights();const ge=new Set;return X.traverse(function(Ee){if(!(Ee.isMesh||Ee.isPoints||Ee.isLine||Ee.isSprite))return;const Ne=Ee.material;if(Ne)if(Array.isArray(Ne))for(let Ze=0;Ze<Ne.length;Ze++){const rt=Ne[Ze];yn(rt,me,Ee),ge.add(rt)}else yn(Ne,me,Ee),ge.add(Ne)}),x=R.pop(),ge},this.compileAsync=function(X,ce,me=null){const ge=this.compile(X,ce,me);return new Promise(Ee=>{function Ne(){if(ge.forEach(function(Ze){nt.get(Ze).currentProgram.isReady()&&ge.delete(Ze)}),ge.size===0){Ee(X);return}setTimeout(Ne,10)}Ie.get("KHR_parallel_shader_compile")!==null?Ne():setTimeout(Ne,10)})};let os=null;function Ui(X){os&&os(X)}function ls(){_s.stop()}function ys(){_s.start()}const _s=new bk;_s.setAnimationLoop(Ui),typeof self<"u"&&_s.setContext(self),this.setAnimationLoop=function(X){os=X,He.setAnimationLoop(X),X===null?_s.stop():_s.start()},He.addEventListener("sessionstart",ls),He.addEventListener("sessionend",ys),this.render=function(X,ce){if(ce!==void 0&&ce.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(X.matrixWorldAutoUpdate===!0&&X.updateMatrixWorld(),ce.parent===null&&ce.matrixWorldAutoUpdate===!0&&ce.updateMatrixWorld(),He.enabled===!0&&He.isPresenting===!0&&(He.cameraAutoUpdate===!0&&He.updateCamera(ce),ce=He.getCamera()),X.isScene===!0&&X.onBeforeRender(D,X,ce,U),x=kt.get(X,R.length),x.init(ce),R.push(x),Qe.multiplyMatrices(ce.projectionMatrix,ce.matrixWorldInverse),fe.setFromProjectionMatrix(Qe),Ce=this.localClippingEnabled,De=dt.init(this.clippingPlanes,Ce),M=Mt.get(X,w.length),M.init(),w.push(M),He.enabled===!0&&He.isPresenting===!0){const Ne=D.xr.getDepthSensingMesh();Ne!==null&&Tr(Ne,ce,-1/0,D.sortObjects)}Tr(X,ce,0,D.sortObjects),M.finish(),D.sortObjects===!0&&M.sort(de,W),it=He.enabled===!1||He.isPresenting===!1||He.hasDepthSensing()===!1,it&&Ot.addToRenderList(M,X),this.info.render.frame++,De===!0&&dt.beginShadows();const me=x.state.shadowsArray;Dt.render(me,X,ce),De===!0&&dt.endShadows(),this.info.autoReset===!0&&this.info.reset();const ge=M.opaque,Ee=M.transmissive;if(x.setupLights(),ce.isArrayCamera){const Ne=ce.cameras;if(Ee.length>0)for(let Ze=0,rt=Ne.length;Ze<rt;Ze++){const ht=Ne[Ze];ar(ge,Ee,X,ht)}it&&Ot.render(X);for(let Ze=0,rt=Ne.length;Ze<rt;Ze++){const ht=Ne[Ze];Lo(M,X,ht,ht.viewport)}}else Ee.length>0&&ar(ge,Ee,X,ce),it&&Ot.render(X),Lo(M,X,ce);U!==null&&H===0&&(re.updateMultisampleRenderTarget(U),re.updateRenderTargetMipmap(U)),X.isScene===!0&&X.onAfterRender(D,X,ce),gt.resetDefaultState(),N=-1,O=null,R.pop(),R.length>0?(x=R[R.length-1],De===!0&&dt.setGlobalState(D.clippingPlanes,x.state.camera)):x=null,w.pop(),w.length>0?M=w[w.length-1]:M=null};function Tr(X,ce,me,ge){if(X.visible===!1)return;if(X.layers.test(ce.layers)){if(X.isGroup)me=X.renderOrder;else if(X.isLOD)X.autoUpdate===!0&&X.update(ce);else if(X.isLight)x.pushLight(X),X.castShadow&&x.pushShadow(X);else if(X.isSprite){if(!X.frustumCulled||fe.intersectsSprite(X)){ge&&lt.setFromMatrixPosition(X.matrixWorld).applyMatrix4(Qe);const Ze=je.update(X),rt=X.material;rt.visible&&M.push(X,Ze,rt,me,lt.z,null)}}else if((X.isMesh||X.isLine||X.isPoints)&&(!X.frustumCulled||fe.intersectsObject(X))){const Ze=je.update(X),rt=X.material;if(ge&&(X.boundingSphere!==void 0?(X.boundingSphere===null&&X.computeBoundingSphere(),lt.copy(X.boundingSphere.center)):(Ze.boundingSphere===null&&Ze.computeBoundingSphere(),lt.copy(Ze.boundingSphere.center)),lt.applyMatrix4(X.matrixWorld).applyMatrix4(Qe)),Array.isArray(rt)){const ht=Ze.groups;for(let Nt=0,Ct=ht.length;Nt<Ct;Nt++){const It=ht[Nt],en=rt[It.materialIndex];en&&en.visible&&M.push(X,Ze,en,me,lt.z,It)}}else rt.visible&&M.push(X,Ze,rt,me,lt.z,null)}}const Ne=X.children;for(let Ze=0,rt=Ne.length;Ze<rt;Ze++)Tr(Ne[Ze],ce,me,ge)}function Lo(X,ce,me,ge){const Ee=X.opaque,Ne=X.transmissive,Ze=X.transparent;x.setupLightsView(me),De===!0&&dt.setGlobalState(D.clippingPlanes,me),ge&&We.viewport(G.copy(ge)),Ee.length>0&&rn(Ee,ce,me),Ne.length>0&&rn(Ne,ce,me),Ze.length>0&&rn(Ze,ce,me),We.buffers.depth.setTest(!0),We.buffers.depth.setMask(!0),We.buffers.color.setMask(!0),We.setPolygonOffset(!1)}function ar(X,ce,me,ge){if((me.isScene===!0?me.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[ge.id]===void 0&&(x.state.transmissionRenderTarget[ge.id]=new Zi(1,1,{generateMipmaps:!0,type:Ie.has("EXT_color_buffer_half_float")||Ie.has("EXT_color_buffer_float")?br:as,minFilter:rl,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ri.workingColorSpace}));const Ne=x.state.transmissionRenderTarget[ge.id],Ze=ge.viewport||G;Ne.setSize(Ze.z*D.transmissionResolutionScale,Ze.w*D.transmissionResolutionScale);const rt=D.getRenderTarget();D.setRenderTarget(Ne),D.getClearColor(le),ue=D.getClearAlpha(),ue<1&&D.setClearColor(16777215,.5),D.clear(),it&&Ot.render(me);const ht=D.toneMapping;D.toneMapping=$c;const Nt=ge.viewport;if(ge.viewport!==void 0&&(ge.viewport=void 0),x.setupLightsView(ge),De===!0&&dt.setGlobalState(D.clippingPlanes,ge),rn(X,me,ge),re.updateMultisampleRenderTarget(Ne),re.updateRenderTargetMipmap(Ne),Ie.has("WEBGL_multisampled_render_to_texture")===!1){let Ct=!1;for(let It=0,en=ce.length;It<en;It++){const Kt=ce[It],Kn=Kt.object,Vt=Kt.geometry,Qt=Kt.material,jt=Kt.group;if(Qt.side===ra&&Kn.layers.test(ge.layers)){const bi=Qt.side;Qt.side=Ar,Qt.needsUpdate=!0,ua(Kn,me,ge,Vt,Qt,jt),Qt.side=bi,Qt.needsUpdate=!0,Ct=!0}}Ct===!0&&(re.updateMultisampleRenderTarget(Ne),re.updateRenderTargetMipmap(Ne))}D.setRenderTarget(rt),D.setClearColor(le,ue),Nt!==void 0&&(ge.viewport=Nt),D.toneMapping=ht}function rn(X,ce,me){const ge=ce.isScene===!0?ce.overrideMaterial:null;for(let Ee=0,Ne=X.length;Ee<Ne;Ee++){const Ze=X[Ee],rt=Ze.object,ht=Ze.geometry,Nt=Ze.group;let Ct=Ze.material;Ct.allowOverride===!0&&ge!==null&&(Ct=ge),rt.layers.test(me.layers)&&ua(rt,ce,me,ht,Ct,Nt)}}function ua(X,ce,me,ge,Ee,Ne){X.onBeforeRender(D,ce,me,ge,Ee,Ne),X.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,X.matrixWorld),X.normalMatrix.getNormalMatrix(X.modelViewMatrix),Ee.onBeforeRender(D,ce,me,ge,X,Ne),Ee.transparent===!0&&Ee.side===ra&&Ee.forceSinglePass===!1?(Ee.side=Ar,Ee.needsUpdate=!0,D.renderBufferDirect(me,ce,ge,Ee,X,Ne),Ee.side=nu,Ee.needsUpdate=!0,D.renderBufferDirect(me,ce,ge,Ee,X,Ne),Ee.side=ra):D.renderBufferDirect(me,ce,ge,Ee,X,Ne),X.onAfterRender(D,ce,me,ge,Ee,Ne)}function pi(X,ce,me){ce.isScene!==!0&&(ce=mt);const ge=nt.get(X),Ee=x.state.lights,Ne=x.state.shadowsArray,Ze=Ee.state.version,rt=pt.getParameters(X,Ee.state,Ne,ce,me),ht=pt.getProgramCacheKey(rt);let Nt=ge.programs;ge.environment=X.isMeshStandardMaterial?ce.environment:null,ge.fog=ce.fog,ge.envMap=(X.isMeshStandardMaterial?Te:J).get(X.envMap||ge.environment),ge.envMapRotation=ge.environment!==null&&X.envMap===null?ce.environmentRotation:X.envMapRotation,Nt===void 0&&(X.addEventListener("dispose",Wt),Nt=new Map,ge.programs=Nt);let Ct=Nt.get(ht);if(Ct!==void 0){if(ge.currentProgram===Ct&&ge.lightsStateVersion===Ze)return ie(X,rt),Ct}else rt.uniforms=pt.getUniforms(X),X.onBeforeCompile(rt,D),Ct=pt.acquireProgram(rt,ht),Nt.set(ht,Ct),ge.uniforms=rt.uniforms;const It=ge.uniforms;return(!X.isShaderMaterial&&!X.isRawShaderMaterial||X.clipping===!0)&&(It.clippingPlanes=dt.uniform),ie(X,rt),ge.needsLights=ze(X),ge.lightsStateVersion=Ze,ge.needsLights&&(It.ambientLightColor.value=Ee.state.ambient,It.lightProbe.value=Ee.state.probe,It.directionalLights.value=Ee.state.directional,It.directionalLightShadows.value=Ee.state.directionalShadow,It.spotLights.value=Ee.state.spot,It.spotLightShadows.value=Ee.state.spotShadow,It.rectAreaLights.value=Ee.state.rectArea,It.ltc_1.value=Ee.state.rectAreaLTC1,It.ltc_2.value=Ee.state.rectAreaLTC2,It.pointLights.value=Ee.state.point,It.pointLightShadows.value=Ee.state.pointShadow,It.hemisphereLights.value=Ee.state.hemi,It.directionalShadowMap.value=Ee.state.directionalShadowMap,It.directionalShadowMatrix.value=Ee.state.directionalShadowMatrix,It.spotShadowMap.value=Ee.state.spotShadowMap,It.spotLightMatrix.value=Ee.state.spotLightMatrix,It.spotLightMap.value=Ee.state.spotLightMap,It.pointShadowMap.value=Ee.state.pointShadowMap,It.pointShadowMatrix.value=Ee.state.pointShadowMatrix),ge.currentProgram=Ct,ge.uniformsList=null,Ct}function j(X){if(X.uniformsList===null){const ce=X.currentProgram.getUniforms();X.uniformsList=eC.seqWithValue(ce.seq,X.uniforms)}return X.uniformsList}function ie(X,ce){const me=nt.get(X);me.outputColorSpace=ce.outputColorSpace,me.batching=ce.batching,me.batchingColor=ce.batchingColor,me.instancing=ce.instancing,me.instancingColor=ce.instancingColor,me.instancingMorph=ce.instancingMorph,me.skinning=ce.skinning,me.morphTargets=ce.morphTargets,me.morphNormals=ce.morphNormals,me.morphColors=ce.morphColors,me.morphTargetsCount=ce.morphTargetsCount,me.numClippingPlanes=ce.numClippingPlanes,me.numIntersection=ce.numClipIntersection,me.vertexAlphas=ce.vertexAlphas,me.vertexTangents=ce.vertexTangents,me.toneMapping=ce.toneMapping}function be(X,ce,me,ge,Ee){ce.isScene!==!0&&(ce=mt),re.resetTextureUnits();const Ne=ce.fog,Ze=ge.isMeshStandardMaterial?ce.environment:null,rt=U===null?D.outputColorSpace:U.isXRRenderTarget===!0?U.texture.colorSpace:ll,ht=(ge.isMeshStandardMaterial?Te:J).get(ge.envMap||Ze),Nt=ge.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,Ct=!!me.attributes.tangent&&(!!ge.normalMap||ge.anisotropy>0),It=!!me.morphAttributes.position,en=!!me.morphAttributes.normal,Kt=!!me.morphAttributes.color;let Kn=$c;ge.toneMapped&&(U===null||U.isXRRenderTarget===!0)&&(Kn=D.toneMapping);const Vt=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,Qt=Vt!==void 0?Vt.length:0,jt=nt.get(ge),bi=x.state.lights;if(De===!0&&(Ce===!0||X!==O)){const wi=X===O&&ge.id===N;dt.setState(ge,X,wi)}let fn=!1;ge.version===jt.__version?(jt.needsLights&&jt.lightsStateVersion!==bi.state.version||jt.outputColorSpace!==rt||Ee.isBatchedMesh&&jt.batching===!1||!Ee.isBatchedMesh&&jt.batching===!0||Ee.isBatchedMesh&&jt.batchingColor===!0&&Ee.colorTexture===null||Ee.isBatchedMesh&&jt.batchingColor===!1&&Ee.colorTexture!==null||Ee.isInstancedMesh&&jt.instancing===!1||!Ee.isInstancedMesh&&jt.instancing===!0||Ee.isSkinnedMesh&&jt.skinning===!1||!Ee.isSkinnedMesh&&jt.skinning===!0||Ee.isInstancedMesh&&jt.instancingColor===!0&&Ee.instanceColor===null||Ee.isInstancedMesh&&jt.instancingColor===!1&&Ee.instanceColor!==null||Ee.isInstancedMesh&&jt.instancingMorph===!0&&Ee.morphTexture===null||Ee.isInstancedMesh&&jt.instancingMorph===!1&&Ee.morphTexture!==null||jt.envMap!==ht||ge.fog===!0&&jt.fog!==Ne||jt.numClippingPlanes!==void 0&&(jt.numClippingPlanes!==dt.numPlanes||jt.numIntersection!==dt.numIntersection)||jt.vertexAlphas!==Nt||jt.vertexTangents!==Ct||jt.morphTargets!==It||jt.morphNormals!==en||jt.morphColors!==Kt||jt.toneMapping!==Kn||jt.morphTargetsCount!==Qt)&&(fn=!0):(fn=!0,jt.__version=ge.version);let gn=jt.currentProgram;fn===!0&&(gn=pi(ge,ce,Ee));let Ci=!1,nn=!1,Nn=!1;const Dn=gn.getUniforms(),qi=jt.uniforms;if(We.useProgram(gn.program)&&(Ci=!0,nn=!0,Nn=!0),ge.id!==N&&(N=ge.id,nn=!0),Ci||O!==X){We.buffers.depth.getReversed()?(Ue.copy(X.projectionMatrix),gY(Ue),vY(Ue),Dn.setValue($,"projectionMatrix",Ue)):Dn.setValue($,"projectionMatrix",X.projectionMatrix),Dn.setValue($,"viewMatrix",X.matrixWorldInverse);const Ks=Dn.map.cameraPosition;Ks!==void 0&&Ks.setValue($,xt.setFromMatrixPosition(X.matrixWorld)),ke.logarithmicDepthBuffer&&Dn.setValue($,"logDepthBufFC",2/(Math.log(X.far+1)/Math.LN2)),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&Dn.setValue($,"isOrthographic",X.isOrthographicCamera===!0),O!==X&&(O=X,nn=!0,Nn=!0)}if(Ee.isSkinnedMesh){Dn.setOptional($,Ee,"bindMatrix"),Dn.setOptional($,Ee,"bindMatrixInverse");const wi=Ee.skeleton;wi&&(wi.boneTexture===null&&wi.computeBoneTexture(),Dn.setValue($,"boneTexture",wi.boneTexture,re))}Ee.isBatchedMesh&&(Dn.setOptional($,Ee,"batchingTexture"),Dn.setValue($,"batchingTexture",Ee._matricesTexture,re),Dn.setOptional($,Ee,"batchingIdTexture"),Dn.setValue($,"batchingIdTexture",Ee._indirectTexture,re),Dn.setOptional($,Ee,"batchingColorTexture"),Ee._colorsTexture!==null&&Dn.setValue($,"batchingColorTexture",Ee._colorsTexture,re));const ei=me.morphAttributes;if((ei.position!==void 0||ei.normal!==void 0||ei.color!==void 0)&&Lt.update(Ee,me,gn),(nn||jt.receiveShadow!==Ee.receiveShadow)&&(jt.receiveShadow=Ee.receiveShadow,Dn.setValue($,"receiveShadow",Ee.receiveShadow)),ge.isMeshGouraudMaterial&&ge.envMap!==null&&(qi.envMap.value=ht,qi.flipEnvMap.value=ht.isCubeTexture&&ht.isRenderTargetTexture===!1?-1:1),ge.isMeshStandardMaterial&&ge.envMap===null&&ce.environment!==null&&(qi.envMapIntensity.value=ce.environmentIntensity),nn&&(Dn.setValue($,"toneMappingExposure",D.toneMappingExposure),jt.needsLights&&Oe(qi,Nn),Ne&&ge.fog===!0&&vt.refreshFogUniforms(qi,Ne),vt.refreshMaterialUniforms(qi,ge,Q,K,x.state.transmissionRenderTarget[X.id]),eC.upload($,j(jt),qi,re)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(eC.upload($,j(jt),qi,re),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&Dn.setValue($,"center",Ee.center),Dn.setValue($,"modelViewMatrix",Ee.modelViewMatrix),Dn.setValue($,"normalMatrix",Ee.normalMatrix),Dn.setValue($,"modelMatrix",Ee.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){const wi=ge.uniformsGroups;for(let Ks=0,jr=wi.length;Ks<jr;Ks++){const hl=wi[Ks];_e.update(hl,gn),_e.bind(hl,gn)}}return gn}function Oe(X,ce){X.ambientLightColor.needsUpdate=ce,X.lightProbe.needsUpdate=ce,X.directionalLights.needsUpdate=ce,X.directionalLightShadows.needsUpdate=ce,X.pointLights.needsUpdate=ce,X.pointLightShadows.needsUpdate=ce,X.spotLights.needsUpdate=ce,X.spotLightShadows.needsUpdate=ce,X.rectAreaLights.needsUpdate=ce,X.hemisphereLights.needsUpdate=ce}function ze(X){return X.isMeshLambertMaterial||X.isMeshToonMaterial||X.isMeshPhongMaterial||X.isMeshStandardMaterial||X.isShadowMaterial||X.isShaderMaterial&&X.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return H},this.getRenderTarget=function(){return U},this.setRenderTargetTextures=function(X,ce,me){const ge=nt.get(X);ge.__autoAllocateDepthBuffer=X.resolveDepthBuffer===!1,ge.__autoAllocateDepthBuffer===!1&&(ge.__useRenderToTexture=!1),nt.get(X.texture).__webglTexture=ce,nt.get(X.depthTexture).__webglTexture=ge.__autoAllocateDepthBuffer?void 0:me,ge.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(X,ce){const me=nt.get(X);me.__webglFramebuffer=ce,me.__useDefaultFramebuffer=ce===void 0};const Je=$.createFramebuffer();this.setRenderTarget=function(X,ce=0,me=0){U=X,I=ce,H=me;let ge=!0,Ee=null,Ne=!1,Ze=!1;if(X){const ht=nt.get(X);if(ht.__useDefaultFramebuffer!==void 0)We.bindFramebuffer($.FRAMEBUFFER,null),ge=!1;else if(ht.__webglFramebuffer===void 0)re.setupRenderTarget(X);else if(ht.__hasExternalTextures)re.rebindTextures(X,nt.get(X.texture).__webglTexture,nt.get(X.depthTexture).__webglTexture);else if(X.depthBuffer){const It=X.depthTexture;if(ht.__boundDepthTexture!==It){if(It!==null&&nt.has(It)&&(X.width!==It.image.width||X.height!==It.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");re.setupDepthRenderbuffer(X)}}const Nt=X.texture;(Nt.isData3DTexture||Nt.isDataArrayTexture||Nt.isCompressedArrayTexture)&&(Ze=!0);const Ct=nt.get(X).__webglFramebuffer;X.isWebGLCubeRenderTarget?(Array.isArray(Ct[ce])?Ee=Ct[ce][me]:Ee=Ct[ce],Ne=!0):X.samples>0&&re.useMultisampledRTT(X)===!1?Ee=nt.get(X).__webglMultisampledFramebuffer:Array.isArray(Ct)?Ee=Ct[me]:Ee=Ct,G.copy(X.viewport),oe.copy(X.scissor),se=X.scissorTest}else G.copy(he).multiplyScalar(Q).floor(),oe.copy(xe).multiplyScalar(Q).floor(),se=ye;if(me!==0&&(Ee=Je),We.bindFramebuffer($.FRAMEBUFFER,Ee)&&ge&&We.drawBuffers(X,Ee),We.viewport(G),We.scissor(oe),We.setScissorTest(se),Ne){const ht=nt.get(X.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+ce,ht.__webglTexture,me)}else if(Ze){const ht=nt.get(X.texture),Nt=ce;$.framebufferTextureLayer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,ht.__webglTexture,me,Nt)}else if(X!==null&&me!==0){const ht=nt.get(X.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,ht.__webglTexture,me)}N=-1},this.readRenderTargetPixels=function(X,ce,me,ge,Ee,Ne,Ze){if(!(X&&X.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let rt=nt.get(X).__webglFramebuffer;if(X.isWebGLCubeRenderTarget&&Ze!==void 0&&(rt=rt[Ze]),rt){We.bindFramebuffer($.FRAMEBUFFER,rt);try{const ht=X.texture,Nt=ht.format,Ct=ht.type;if(!ke.textureFormatReadable(Nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ke.textureTypeReadable(Ct)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ce>=0&&ce<=X.width-ge&&me>=0&&me<=X.height-Ee&&$.readPixels(ce,me,ge,Ee,qe.convert(Nt),qe.convert(Ct),Ne)}finally{const ht=U!==null?nt.get(U).__webglFramebuffer:null;We.bindFramebuffer($.FRAMEBUFFER,ht)}}},this.readRenderTargetPixelsAsync=async function(X,ce,me,ge,Ee,Ne,Ze){if(!(X&&X.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let rt=nt.get(X).__webglFramebuffer;if(X.isWebGLCubeRenderTarget&&Ze!==void 0&&(rt=rt[Ze]),rt)if(ce>=0&&ce<=X.width-ge&&me>=0&&me<=X.height-Ee){We.bindFramebuffer($.FRAMEBUFFER,rt);const ht=X.texture,Nt=ht.format,Ct=ht.type;if(!ke.textureFormatReadable(Nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ke.textureTypeReadable(Ct))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const It=$.createBuffer();$.bindBuffer($.PIXEL_PACK_BUFFER,It),$.bufferData($.PIXEL_PACK_BUFFER,Ne.byteLength,$.STREAM_READ),$.readPixels(ce,me,ge,Ee,qe.convert(Nt),qe.convert(Ct),0);const en=U!==null?nt.get(U).__webglFramebuffer:null;We.bindFramebuffer($.FRAMEBUFFER,en);const Kt=$.fenceSync($.SYNC_GPU_COMMANDS_COMPLETE,0);return $.flush(),await mY($,Kt,4),$.bindBuffer($.PIXEL_PACK_BUFFER,It),$.getBufferSubData($.PIXEL_PACK_BUFFER,0,Ne),$.deleteBuffer(It),$.deleteSync(Kt),Ne}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(X,ce=null,me=0){const ge=Math.pow(2,-me),Ee=Math.floor(X.image.width*ge),Ne=Math.floor(X.image.height*ge),Ze=ce!==null?ce.x:0,rt=ce!==null?ce.y:0;re.setTexture2D(X,0),$.copyTexSubImage2D($.TEXTURE_2D,me,0,0,Ze,rt,Ee,Ne),We.unbindTexture()};const _t=$.createFramebuffer(),ft=$.createFramebuffer();this.copyTextureToTexture=function(X,ce,me=null,ge=null,Ee=0,Ne=null){Ne===null&&(Ee!==0?(QT("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ne=Ee,Ee=0):Ne=0);let Ze,rt,ht,Nt,Ct,It,en,Kt,Kn;const Vt=X.isCompressedTexture?X.mipmaps[Ne]:X.image;if(me!==null)Ze=me.max.x-me.min.x,rt=me.max.y-me.min.y,ht=me.isBox3?me.max.z-me.min.z:1,Nt=me.min.x,Ct=me.min.y,It=me.isBox3?me.min.z:0;else{const ei=Math.pow(2,-Ee);Ze=Math.floor(Vt.width*ei),rt=Math.floor(Vt.height*ei),X.isDataArrayTexture?ht=Vt.depth:X.isData3DTexture?ht=Math.floor(Vt.depth*ei):ht=1,Nt=0,Ct=0,It=0}ge!==null?(en=ge.x,Kt=ge.y,Kn=ge.z):(en=0,Kt=0,Kn=0);const Qt=qe.convert(ce.format),jt=qe.convert(ce.type);let bi;ce.isData3DTexture?(re.setTexture3D(ce,0),bi=$.TEXTURE_3D):ce.isDataArrayTexture||ce.isCompressedArrayTexture?(re.setTexture2DArray(ce,0),bi=$.TEXTURE_2D_ARRAY):(re.setTexture2D(ce,0),bi=$.TEXTURE_2D),$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,ce.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,ce.unpackAlignment);const fn=$.getParameter($.UNPACK_ROW_LENGTH),gn=$.getParameter($.UNPACK_IMAGE_HEIGHT),Ci=$.getParameter($.UNPACK_SKIP_PIXELS),nn=$.getParameter($.UNPACK_SKIP_ROWS),Nn=$.getParameter($.UNPACK_SKIP_IMAGES);$.pixelStorei($.UNPACK_ROW_LENGTH,Vt.width),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,Vt.height),$.pixelStorei($.UNPACK_SKIP_PIXELS,Nt),$.pixelStorei($.UNPACK_SKIP_ROWS,Ct),$.pixelStorei($.UNPACK_SKIP_IMAGES,It);const Dn=X.isDataArrayTexture||X.isData3DTexture,qi=ce.isDataArrayTexture||ce.isData3DTexture;if(X.isDepthTexture){const ei=nt.get(X),wi=nt.get(ce),Ks=nt.get(ei.__renderTarget),jr=nt.get(wi.__renderTarget);We.bindFramebuffer($.READ_FRAMEBUFFER,Ks.__webglFramebuffer),We.bindFramebuffer($.DRAW_FRAMEBUFFER,jr.__webglFramebuffer);for(let hl=0;hl<ht;hl++)Dn&&($.framebufferTextureLayer($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,nt.get(X).__webglTexture,Ee,It+hl),$.framebufferTextureLayer($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,nt.get(ce).__webglTexture,Ne,Kn+hl)),$.blitFramebuffer(Nt,Ct,Ze,rt,en,Kt,Ze,rt,$.DEPTH_BUFFER_BIT,$.NEAREST);We.bindFramebuffer($.READ_FRAMEBUFFER,null),We.bindFramebuffer($.DRAW_FRAMEBUFFER,null)}else if(Ee!==0||X.isRenderTargetTexture||nt.has(X)){const ei=nt.get(X),wi=nt.get(ce);We.bindFramebuffer($.READ_FRAMEBUFFER,_t),We.bindFramebuffer($.DRAW_FRAMEBUFFER,ft);for(let Ks=0;Ks<ht;Ks++)Dn?$.framebufferTextureLayer($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,ei.__webglTexture,Ee,It+Ks):$.framebufferTexture2D($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,ei.__webglTexture,Ee),qi?$.framebufferTextureLayer($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,wi.__webglTexture,Ne,Kn+Ks):$.framebufferTexture2D($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,wi.__webglTexture,Ne),Ee!==0?$.blitFramebuffer(Nt,Ct,Ze,rt,en,Kt,Ze,rt,$.COLOR_BUFFER_BIT,$.NEAREST):qi?$.copyTexSubImage3D(bi,Ne,en,Kt,Kn+Ks,Nt,Ct,Ze,rt):$.copyTexSubImage2D(bi,Ne,en,Kt,Nt,Ct,Ze,rt);We.bindFramebuffer($.READ_FRAMEBUFFER,null),We.bindFramebuffer($.DRAW_FRAMEBUFFER,null)}else qi?X.isDataTexture||X.isData3DTexture?$.texSubImage3D(bi,Ne,en,Kt,Kn,Ze,rt,ht,Qt,jt,Vt.data):ce.isCompressedArrayTexture?$.compressedTexSubImage3D(bi,Ne,en,Kt,Kn,Ze,rt,ht,Qt,Vt.data):$.texSubImage3D(bi,Ne,en,Kt,Kn,Ze,rt,ht,Qt,jt,Vt):X.isDataTexture?$.texSubImage2D($.TEXTURE_2D,Ne,en,Kt,Ze,rt,Qt,jt,Vt.data):X.isCompressedTexture?$.compressedTexSubImage2D($.TEXTURE_2D,Ne,en,Kt,Vt.width,Vt.height,Qt,Vt.data):$.texSubImage2D($.TEXTURE_2D,Ne,en,Kt,Ze,rt,Qt,jt,Vt);$.pixelStorei($.UNPACK_ROW_LENGTH,fn),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,gn),$.pixelStorei($.UNPACK_SKIP_PIXELS,Ci),$.pixelStorei($.UNPACK_SKIP_ROWS,nn),$.pixelStorei($.UNPACK_SKIP_IMAGES,Nn),Ne===0&&ce.generateMipmaps&&$.generateMipmap(bi),We.unbindTexture()},this.copyTextureToTexture3D=function(X,ce,me=null,ge=null,Ee=0){return QT('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(X,ce,me,ge,Ee)},this.initRenderTarget=function(X){nt.get(X).__webglFramebuffer===void 0&&re.setupRenderTarget(X)},this.initTexture=function(X){X.isCubeTexture?re.setTextureCube(X,0):X.isData3DTexture?re.setTexture3D(X,0):X.isDataArrayTexture||X.isCompressedArrayTexture?re.setTexture2DArray(X,0):re.setTexture2D(X,0),We.unbindTexture()},this.resetState=function(){I=0,H=0,U=null,We.reset(),gt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return jl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=ri._getDrawingBufferColorSpace(e),t.unpackColorSpace=ri._getUnpackColorSpace()}}const Ck=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:xR,AddEquation:Kd,AddOperation:iG,AdditiveAnimationBlendMode:UI,AdditiveBlending:oL,AgXToneMapping:lG,AlphaFormat:NI,AlwaysCompare:SG,AlwaysDepth:FC,AlwaysStencilFunc:fL,AmbientLight:ck,AnimationAction:_k,AnimationClip:iA,AnimationLoader:VW,AnimationMixer:pK,AnimationObjectGroup:fK,AnimationUtils:HW,ArcCurve:FG,ArrayCamera:gk,ArrowHelper:OK,AttachedBindMode:uL,Audio:vk,AudioAnalyser:nK,AudioContext:h3,AudioListener:$W,AudioLoader:JW,AxesHelper:UK,BackSide:Ar,BasicDepthPacking:vh,BasicShadowMap:U4,BatchedMesh:PG,Bone:PR,BooleanKeyframeTrack:Vv,Box2:xK,Box3:aa,Box3Helper:IK,BoxGeometry:kv,BoxHelper:NK,BufferAttribute:ui,BufferGeometry:En,BufferGeometryLoader:pk,ByteType:ER,Cache:Lf,Camera:jE,CameraHelper:LK,CanvasTexture:oW,CapsuleGeometry:HR,CatmullRomCurve3:HG,CineonToneMapping:aG,CircleGeometry:zR,ClampToEdgeWrapping:js,Clock:f3,Color:Bt,ColorKeyframeTrack:r3,ColorManagement:ri,CompressedArrayTexture:rW,CompressedCubeTexture:aW,CompressedTexture:FR,CompressedTextureLoader:jW,ConeGeometry:JE,ConstantAlphaFactor:eG,ConstantColorFactor:Q4,Controls:HK,CubeCamera:BG,CubeReflectionMapping:mh,CubeRefractionMapping:Np,CubeTexture:XE,CubeTextureLoader:ok,CubeUVReflectionMapping:pA,CubicBezierCurve:JI,CubicBezierCurve3:zG,CubicInterpolant:ik,CullFaceBack:aL,CullFaceFront:O4,CullFaceFrontBack:_q,CullFaceNone:P4,Curve:lu,CurvePath:kG,CustomBlending:F4,CustomToneMapping:oG,CylinderGeometry:KE,Cylindrical:bK,Data3DTexture:LR,DataArrayTexture:VE,DataTexture:eu,DataTextureLoader:a3,DataUtils:mg,DecrementStencilOp:Rq,DecrementWrapStencilOp:Bq,DefaultLoadingManager:ak,DepthArrayTexture:lW,DepthFormat:J_,DepthStencilFormat:Sv,DepthTexture:WE,DetachedBindMode:uG,DirectionalLight:u3,DirectionalLightHelper:BK,DiscreteInterpolant:sk,DodecahedronGeometry:GR,DoubleSide:ra,DstAlphaFactor:Y4,DstColorFactor:K4,DynamicCopyUsage:qq,DynamicDrawUsage:zq,DynamicReadUsage:Vq,EdgesGeometry:UG,EllipseCurve:kR,EqualCompare:_G,EqualDepth:zC,EqualStencilFunc:Pq,EquirectangularReflectionMapping:Y_,EquirectangularRefractionMapping:Qx,Euler:cl,EventDispatcher:ul,ExtrudeGeometry:VR,FileLoader:oa,Float16BufferAttribute:FY,Float32BufferAttribute:Yt,FloatType:ms,Fog:IR,FogExp2:NR,FramebufferTexture:sW,FrontSide:nu,Frustum:mA,FrustumArray:OR,GLBufferAttribute:AK,GLSL1:Wq,GLSL3:dL,GreaterCompare:AG,GreaterDepth:kC,GreaterEqualCompare:xG,GreaterEqualDepth:GC,GreaterEqualStencilFunc:Hq,GreaterStencilFunc:Uq,GridHelper:RK,Group:Bf,HalfFloatType:br,HemisphereLight:lk,HemisphereLightHelper:wK,IcosahedronGeometry:ZE,ImageBitmapLoader:mk,ImageLoader:oS,ImageUtils:CG,IncrementStencilOp:wq,IncrementWrapStencilOp:Dq,InstancedBufferAttribute:Mv,InstancedBufferGeometry:dk,InstancedInterleavedBuffer:_K,InstancedMesh:qI,Int16BufferAttribute:OY,Int32BufferAttribute:UY,Int8BufferAttribute:NY,IntType:zE,InterleavedBuffer:qE,InterleavedBufferAttribute:Pp,Interpolant:vA,InterpolateDiscrete:Z_,InterpolateLinear:Q_,InterpolateSmooth:ZT,InterpolationSamplingMode:Zq,InterpolationSamplingType:Jq,InvertStencilOp:Lq,KeepStencilOp:tg,KeyframeTrack:Ql,LOD:IG,LatheGeometry:jR,Layers:eA,LessCompare:yG,LessDepth:HC,LessEqualCompare:HI,LessEqualDepth:bv,LessEqualStencilFunc:Oq,LessStencilFunc:Iq,Light:Xp,LightProbe:fk,Line:Ff,Line3:SK,LineBasicMaterial:Na,LineCurve:ZI,LineCurve3:GG,LineDashedMaterial:ek,LineLoop:YI,LineSegments:ou,LinearFilter:li,LinearInterpolant:s3,LinearMipMapLinearFilter:hL,LinearMipMapNearestFilter:xq,LinearMipmapLinearFilter:rl,LinearMipmapNearestFilter:Py,LinearSRGBColorSpace:ll,LinearToneMapping:sG,LinearTransfer:eS,Loader:ca,LoaderUtils:wp,LoadingManager:QR,LoopOnce:hG,LoopPingPong:dG,LoopRepeat:fG,MOUSE:$m,Material:Ys,MaterialLoader:$R,MathUtils:EG,Matrix2:g3,Matrix3:Ln,Matrix4:on,MaxEquation:k4,Mesh:ts,MeshBasicMaterial:Do,MeshDepthMaterial:ZR,MeshDistanceMaterial:n3,MeshLambertMaterial:QG,MeshMatcapMaterial:$G,MeshNormalMaterial:t3,MeshPhongMaterial:JG,MeshPhysicalMaterial:Zl,MeshStandardMaterial:gA,MeshToonMaterial:ZG,MinEquation:G4,MirroredRepeatWrapping:W_,MixOperation:nG,MultiplyBlending:cL,MultiplyOperation:HE,NearestFilter:gs,NearestMipMapLinearFilter:bq,NearestMipMapNearestFilter:Aq,NearestMipmapLinearFilter:fg,NearestMipmapNearestFilter:SR,NeutralToneMapping:cG,NeverCompare:vG,NeverDepth:UC,NeverStencilFunc:Nq,NoBlending:qs,NoColorSpace:Yc,NoToneMapping:$c,NormalAnimationBlendMode:DR,NormalBlending:vv,NotEqualCompare:bG,NotEqualDepth:VC,NotEqualStencilFunc:Fq,NumberKeyframeTrack:Cv,Object3D:ci,ObjectLoader:WW,ObjectSpaceNormalMap:gG,OctahedronGeometry:QE,OneFactor:j4,OneMinusConstantAlphaFactor:tG,OneMinusConstantColorFactor:$4,OneMinusDstAlphaFactor:W4,OneMinusDstColorFactor:J4,OneMinusSrcAlphaFactor:OC,OneMinusSrcColorFactor:q4,OrthographicCamera:ql,PCFShadowMap:bR,PCFSoftShadowMap:Dx,PMREMGenerator:bL,Path:Aw,PerspectiveCamera:es,Plane:sf,PlaneGeometry:jf,PlaneHelper:PK,PointLight:c3,PointLightHelper:TK,Points:WI,PointsMaterial:UR,PolarGridHelper:DK,PolyhedronGeometry:jp,PositionalAudio:tK,PropertyBinding:di,PropertyMixer:yk,QuadraticBezierCurve:QI,QuadraticBezierCurve3:$I,Quaternion:Gr,QuaternionKeyframeTrack:wv,QuaternionLinearInterpolant:rk,RED_GREEN_RGTC2_Format:pw,RED_RGTC1_Format:OI,REVISION:kp,RGBADepthPacking:mG,RGBAFormat:Xs,RGBAIntegerFormat:RR,RGBA_ASTC_10x10_Format:lw,RGBA_ASTC_10x5_Format:rw,RGBA_ASTC_10x6_Format:aw,RGBA_ASTC_10x8_Format:ow,RGBA_ASTC_12x10_Format:cw,RGBA_ASTC_12x12_Format:uw,RGBA_ASTC_4x4_Format:ZC,RGBA_ASTC_5x4_Format:QC,RGBA_ASTC_5x5_Format:$C,RGBA_ASTC_6x5_Format:ew,RGBA_ASTC_6x6_Format:tw,RGBA_ASTC_8x5_Format:nw,RGBA_ASTC_8x6_Format:iw,RGBA_ASTC_8x8_Format:sw,RGBA_BPTC_Format:Px,RGBA_ETC2_EAC_Format:JC,RGBA_PVRTC_2BPPV1_Format:YC,RGBA_PVRTC_4BPPV1_Format:qC,RGBA_S3TC_DXT1_Format:Lx,RGBA_S3TC_DXT3_Format:Nx,RGBA_S3TC_DXT5_Format:Ix,RGBDepthPacking:Eq,RGBFormat:II,RGBIntegerFormat:Sq,RGB_BPTC_SIGNED_Format:hw,RGB_BPTC_UNSIGNED_Format:fw,RGB_ETC1_Format:WC,RGB_ETC2_Format:KC,RGB_PVRTC_2BPPV1_Format:XC,RGB_PVRTC_4BPPV1_Format:jC,RGB_S3TC_DXT1_Format:Bx,RGDepthPacking:Mq,RGFormat:PI,RGIntegerFormat:wR,RawShaderMaterial:KG,Ray:Gv,Raycaster:m3,RectAreaLight:uk,RedFormat:GE,RedIntegerFormat:kE,ReinhardToneMapping:rG,RenderTarget:BR,RenderTarget3D:mK,RenderTargetArray:gK,RepeatWrapping:Ip,ReplaceStencilOp:Cq,ReverseSubtractEquation:z4,RingGeometry:XR,SIGNED_RED_GREEN_RGTC2_Format:mw,SIGNED_RED_RGTC1_Format:dw,SRGBColorSpace:Yn,SRGBTransfer:Pi,Scene:Ev,ShaderChunk:Fn,ShaderLib:Xc,ShaderMaterial:Xi,ShadowMaterial:WG,Shape:_v,ShapeGeometry:qR,ShapePath:FK,ShapeUtils:Jc,ShortType:MR,Skeleton:YE,SkeletonHelper:MK,SkinnedMesh:XI,Source:Ep,Sphere:kr,SphereGeometry:$E,Spherical:_L,SphericalHarmonics3:hk,SplineCurve:e3,SpotLight:l3,SpotLightHelper:EK,Sprite:NG,SpriteMaterial:jI,SrcAlphaFactor:PC,SrcAlphaSaturateFactor:Z4,SrcColorFactor:X4,StaticCopyUsage:Xq,StaticDrawUsage:tS,StaticReadUsage:kq,StereoCamera:ZW,StreamCopyUsage:Yq,StreamDrawUsage:Gq,StreamReadUsage:jq,StringKeyframeTrack:jv,SubtractEquation:H4,SubtractiveBlending:lL,TOUCH:eg,TangentSpaceNormalMap:Vp,TetrahedronGeometry:YR,Texture:Ai,TextureLoader:bw,TextureUtils:jK,TimestampQuery:Kq,TorusGeometry:WR,TorusKnotGeometry:KR,Triangle:Ro,TriangleFanDrawMode:gw,TriangleStripDrawMode:FI,TrianglesDrawMode:pG,TubeGeometry:JR,UVMapping:Lp,Uint16BufferAttribute:GI,Uint32BufferAttribute:kI,Uint8BufferAttribute:IY,Uint8ClampedBufferAttribute:PY,Uniform:qt,UniformsGroup:yK,UniformsLib:Ft,UniformsUtils:DG,UnsignedByteType:as,UnsignedInt248Type:xv,UnsignedInt5999Type:LI,UnsignedIntType:iu,UnsignedShort4444Type:TR,UnsignedShort5551Type:CR,UnsignedShortType:K_,VSMShadowMap:Rc,Vector2:Ke,Vector3:ae,Vector4:ai,VectorKeyframeTrack:Rv,VideoFrameTexture:iW,VideoTexture:OG,WebGL3DRenderTarget:xY,WebGLArrayRenderTarget:bY,WebGLCoordinateSystem:jl,WebGLCubeRenderTarget:VI,WebGLRenderTarget:Zi,WebGLRenderer:y3,WebGLUtils:Tk,WebGPUCoordinateSystem:nS,WebXRController:$T,WireframeGeometry:YG,WrapAroundEnding:$x,ZeroCurvatureEnding:dg,ZeroFactor:V4,ZeroSlopeEnding:pg,ZeroStencilOp:Tq,createCanvasElement:TG},Symbol.toStringTag,{value:"Module"}));var hB={exports:{}},Yh={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yF;function Mee(){return yF||(yF=1,Yh.ConcurrentRoot=1,Yh.ContinuousEventPriority=8,Yh.DefaultEventPriority=32,Yh.DiscreteEventPriority=2,Yh.IdleEventPriority=268435456,Yh.LegacyRoot=0,Yh.NoEventPriority=0),Yh}var _F;function Tee(){return _F||(_F=1,hB.exports=Mee()),hB.exports}var tC=Tee(),fB={exports:{}},dB={},pB={exports:{}},mB={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AF;function Cee(){if(AF)return mB;AF=1;var i=lA();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,s=i.useEffect,r=i.useLayoutEffect,a=i.useDebugValue;function o(m,v){var y=v(),A=n({inst:{value:y,getSnapshot:v}}),E=A[0].inst,M=A[1];return r(function(){E.value=y,E.getSnapshot=v,c(E)&&M({inst:E})},[m,y,v]),s(function(){return c(E)&&M({inst:E}),m(function(){c(E)&&M({inst:E})})},[m]),a(y),y}function c(m){var v=m.getSnapshot;m=m.value;try{var y=v();return!t(m,y)}catch{return!0}}function h(m,v){return v()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:o;return mB.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:d,mB}var bF;function wee(){return bF||(bF=1,pB.exports=Cee()),pB.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xF;function Ree(){if(xF)return dB;xF=1;var i=lA(),e=wee();function t(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=i.useRef,a=i.useEffect,o=i.useMemo,c=i.useDebugValue;return dB.useSyncExternalStoreWithSelector=function(h,d,m,v,y){var A=r(null);if(A.current===null){var E={hasValue:!1,value:null};A.current=E}else E=A.current;A=o(function(){function x(I){if(!w){if(w=!0,R=I,I=v(I),y!==void 0&&E.hasValue){var H=E.value;if(y(H,I))return D=H}return D=I}if(H=D,n(R,I))return H;var U=v(I);return y!==void 0&&y(H,U)?(R=I,H):(R=I,D=U)}var w=!1,R,D,P=m===void 0?null:m;return[function(){return x(d())},P===null?void 0:function(){return x(P())}]},[d,m,v,y]);var M=s(h,A[0],A[1]);return a(function(){E.hasValue=!0,E.value=M},[M]),c(M),M},dB}var SF;function Dee(){return SF||(SF=1,fB.exports=Ree()),fB.exports}var Bee=Dee();const Lee=PE(Bee),EF=i=>{let e;const t=new Set,n=(h,d)=>{const m=typeof h=="function"?h(e):h;if(!Object.is(m,e)){const v=e;e=d??(typeof m!="object"||m===null)?m:Object.assign({},e,m),t.forEach(y=>y(e,v))}},s=()=>e,o={setState:n,getState:s,getInitialState:()=>c,subscribe:h=>(t.add(h),()=>t.delete(h))},c=e=i(n,s,o);return o},Nee=i=>i?EF(i):EF,{useSyncExternalStoreWithSelector:Iee}=Lee,Pee=i=>i;function Oee(i,e=Pee,t){const n=Iee(i.subscribe,i.getState,i.getInitialState,e,t);return hI.useDebugValue(n),n}const MF=(i,e)=>{const t=Nee(i),n=(s,r=e)=>Oee(t,s,r);return Object.assign(n,t),n},wk=(i,e)=>i?MF(i,e):MF;var gB={exports:{}},vB={exports:{}},yB={exports:{}},_B={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TF;function Uee(){return TF||(TF=1,function(i){function e(z,K){var Q=z.length;z.push(K);e:for(;0<Q;){var de=Q-1>>>1,W=z[de];if(0<s(W,K))z[de]=K,z[Q]=W,Q=de;else break e}}function t(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var K=z[0],Q=z.pop();if(Q!==K){z[0]=Q;e:for(var de=0,W=z.length,he=W>>>1;de<he;){var xe=2*(de+1)-1,ye=z[xe],fe=xe+1,De=z[fe];if(0>s(ye,Q))fe<W&&0>s(De,ye)?(z[de]=De,z[fe]=Q,de=fe):(z[de]=ye,z[xe]=Q,de=xe);else if(fe<W&&0>s(De,Q))z[de]=De,z[fe]=Q,de=fe;else break e}}return K}function s(z,K){var Q=z.sortIndex-K.sortIndex;return Q!==0?Q:z.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var c=[],h=[],d=1,m=null,v=3,y=!1,A=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function R(z){for(var K=t(h);K!==null;){if(K.callback===null)n(h);else if(K.startTime<=z)n(h),K.sortIndex=K.expirationTime,e(c,K);else break;K=t(h)}}function D(z){if(E=!1,R(z),!A)if(t(c)!==null)A=!0,le();else{var K=t(h);K!==null&&ue(D,K.startTime-z)}}var P=!1,I=-1,H=5,U=-1;function N(){return!(i.unstable_now()-U<H)}function O(){if(P){var z=i.unstable_now();U=z;var K=!0;try{e:{A=!1,E&&(E=!1,x(I),I=-1),y=!0;var Q=v;try{t:{for(R(z),m=t(c);m!==null&&!(m.expirationTime>z&&N());){var de=m.callback;if(typeof de=="function"){m.callback=null,v=m.priorityLevel;var W=de(m.expirationTime<=z);if(z=i.unstable_now(),typeof W=="function"){m.callback=W,R(z),K=!0;break t}m===t(c)&&n(c),R(z)}else n(c);m=t(c)}if(m!==null)K=!0;else{var he=t(h);he!==null&&ue(D,he.startTime-z),K=!1}}break e}finally{m=null,v=Q,y=!1}K=void 0}}finally{K?G():P=!1}}}var G;if(typeof w=="function")G=function(){w(O)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,se=oe.port2;oe.port1.onmessage=O,G=function(){se.postMessage(null)}}else G=function(){M(O,0)};function le(){P||(P=!0,G())}function ue(z,K){I=M(function(){z(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){A||y||(A=!0,le())},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(z){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var Q=v;v=K;try{return z()}finally{v=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=v;v=z;try{return K()}finally{v=Q}},i.unstable_scheduleCallback=function(z,K,Q){var de=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?de+Q:de):Q=de,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Q+W,z={id:d++,callback:K,priorityLevel:z,startTime:Q,expirationTime:W,sortIndex:-1},Q>de?(z.sortIndex=Q,e(h,z),t(c)===null&&z===t(h)&&(E?(x(I),I=-1):E=!0,ue(D,Q-de))):(z.sortIndex=W,e(c,z),A||y||(A=!0,le())),z},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(z){var K=v;return function(){var Q=v;v=K;try{return z.apply(this,arguments)}finally{v=Q}}}}(_B)),_B}var CF;function Fee(){return CF||(CF=1,yB.exports=Uee()),yB.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wF;function Hee(){return wF||(wF=1,function(i){i.exports=function(e){function t(f,p,b,C){return new ZA(f,p,b,C)}function n(){}function s(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(f){return f===null||typeof f!="object"?null:(f=hc&&f[hc]||f["@@iterator"],typeof f=="function"?f:null)}function a(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===tb?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case Eu:return"Fragment";case uo:return"Portal";case v0:return"Profiler";case Am:return"StrictMode";case y0:return"Suspense";case ud:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case Po:return(f.displayName||"Context")+".Provider";case $A:return(f._context.displayName||"Context")+".Consumer";case xm:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case _0:return p=f.displayName||null,p!==null?p:a(f.type)||"Memo";case ho:p=f._payload,f=f._init;try{return a(f(p))}catch{}}return null}function o(f){if(gl===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);gl=p&&p[1]||"",fc=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gl+f+fc}function c(f,p){if(!f||xh)return"";xh=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(p){var Ut=function(){throw Error()};if(Object.defineProperty(Ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ut,[])}catch(An){var zt=An}Reflect.construct(f,[],Ut)}else{try{Ut.call()}catch(An){zt=An}f.call(Ut.prototype)}}else{try{throw Error()}catch(An){zt=An}(Ut=f())&&typeof Ut.catch=="function"&&Ut.catch(function(){})}}catch(An){if(An&&zt&&typeof An.stack=="string")return[An.stack,zt.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var F=C.DetermineComponentFrameRoot(),ne=F[0],ve=F[1];if(ne&&ve){var Re=ne.split(`
`),at=ve.split(`
`);for(L=C=0;C<Re.length&&!Re[C].includes("DetermineComponentFrameRoot");)C++;for(;L<at.length&&!at[L].includes("DetermineComponentFrameRoot");)L++;if(C===Re.length||L===at.length)for(C=Re.length-1,L=at.length-1;1<=C&&0<=L&&Re[C]!==at[L];)L--;for(;1<=C&&0<=L;C--,L--)if(Re[C]!==at[L]){if(C!==1||L!==1)do if(C--,L--,0>L||Re[C]!==at[L]){var bt=`
`+Re[C].replace(" at new "," at ");return f.displayName&&bt.includes("<anonymous>")&&(bt=bt.replace("<anonymous>",f.displayName)),bt}while(1<=C&&0<=L);break}}}finally{xh=!1,Error.prepareStackTrace=b}return(b=f?f.displayName||f.name:"")?o(b):""}function h(f){switch(f.tag){case 26:case 27:case 5:return o(f.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return f=c(f.type,!1),f;case 11:return f=c(f.type.render,!1),f;case 1:return f=c(f.type,!0),f;default:return""}}function d(f){try{var p="";do p+=h(f),f=f.return;while(f);return p}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}function m(f){var p=f,b=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(b=p.return),f=p.return;while(f)}return p.tag===3?b:null}function v(f){if(m(f)!==f)throw Error(s(188))}function y(f){var p=f.alternate;if(!p){if(p=m(f),p===null)throw Error(s(188));return p!==f?null:f}for(var b=f,C=p;;){var L=b.return;if(L===null)break;var F=L.alternate;if(F===null){if(C=L.return,C!==null){b=C;continue}break}if(L.child===F.child){for(F=L.child;F;){if(F===b)return v(L),f;if(F===C)return v(L),p;F=F.sibling}throw Error(s(188))}if(b.return!==C.return)b=L,C=F;else{for(var ne=!1,ve=L.child;ve;){if(ve===b){ne=!0,b=L,C=F;break}if(ve===C){ne=!0,C=L,b=F;break}ve=ve.sibling}if(!ne){for(ve=F.child;ve;){if(ve===b){ne=!0,b=F,C=L;break}if(ve===C){ne=!0,C=F,b=L;break}ve=ve.sibling}if(!ne)throw Error(s(189))}}if(b.alternate!==C)throw Error(s(190))}if(b.tag!==3)throw Error(s(188));return b.stateNode.current===b?f:p}function A(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(p=A(f),p!==null)return p;f=f.sibling}return null}function E(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(f.tag!==4&&(p=E(f),p!==null))return p;f=f.sibling}return null}function M(f){return{current:f}}function x(f){0>gc||(f.current=xs[gc],xs[gc]=null,gc--)}function w(f,p){gc++,xs[gc]=f.current,f.current=p}function R(f){return f>>>=0,f===0?32:31-(mM(f)/gM|0)|0}function D(f){var p=f&42;if(p!==0)return p;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function P(f,p){var b=f.pendingLanes;if(b===0)return 0;var C=0,L=f.suspendedLanes,F=f.pingedLanes,ne=f.warmLanes;f=f.finishedLanes!==0;var ve=b&134217727;return ve!==0?(b=ve&~L,b!==0?C=D(b):(F&=ve,F!==0?C=D(F):f||(ne=ve&~ne,ne!==0&&(C=D(ne))))):(ve=b&~L,ve!==0?C=D(ve):F!==0?C=D(F):f||(ne=b&~ne,ne!==0&&(C=D(ne)))),C===0?0:p!==0&&p!==C&&(p&L)===0&&(L=C&-C,ne=p&-p,L>=ne||L===32&&(ne&4194176)!==0)?p:C}function I(f,p){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&p)===0}function H(f,p){switch(f){case 1:case 2:case 4:case 8:return p+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var f=yl;return yl<<=1,(yl&4194176)===0&&(yl=128),f}function N(){var f=Mh;return Mh<<=1,(Mh&62914560)===0&&(Mh=4194304),f}function O(f){for(var p=[],b=0;31>b;b++)p.push(f);return p}function G(f,p){f.pendingLanes|=p,p!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function oe(f,p,b,C,L,F){var ne=f.pendingLanes;f.pendingLanes=b,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=b,f.entangledLanes&=b,f.errorRecoveryDisabledLanes&=b,f.shellSuspendCounter=0;var ve=f.entanglements,Re=f.expirationTimes,at=f.hiddenUpdates;for(b=ne&~b;0<b;){var bt=31-Jr(b),Ut=1<<bt;ve[bt]=0,Re[bt]=-1;var zt=at[bt];if(zt!==null)for(at[bt]=null,bt=0;bt<zt.length;bt++){var An=zt[bt];An!==null&&(An.lane&=-536870913)}b&=~Ut}C!==0&&se(f,C,0),F!==0&&L===0&&f.tag!==0&&(f.suspendedLanes|=F&~(ne&~p))}function se(f,p,b){f.pendingLanes|=p,f.suspendedLanes&=~p;var C=31-Jr(p);f.entangledLanes|=p,f.entanglements[C]=f.entanglements[C]|1073741824|b&4194218}function le(f,p){var b=f.entangledLanes|=p;for(f=f.entanglements;b;){var C=31-Jr(b),L=1<<C;L&p|f[C]&p&&(f[C]|=p),b&=~L}}function ue(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function z(f){if(va&&typeof va.onCommitFiberRoot=="function")try{va.onCommitFiberRoot(Ss,f,void 0,(f.current.flags&128)===128)}catch{}}function K(f){if(typeof _M=="function"&&Qs(f),va&&typeof va.setStrictMode=="function")try{va.setStrictMode(Ss,f)}catch{}}function Q(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}function de(f,p){if(typeof f=="object"&&f!==null){var b=Ab.get(f);return b!==void 0?b:(p={value:f,source:p,stack:d(p)},Ab.set(f,p),p)}return{value:f,source:p,stack:d(p)}}function W(f,p){Th[Ch++]=_d,Th[Ch++]=wh,wh=f,_d=p}function he(f,p,b){Ha[za++]=Fo,Ha[za++]=Ho,Ha[za++]=Bu,Bu=f;var C=Fo;f=Ho;var L=32-Jr(C)-1;C&=~(1<<L),b+=1;var F=32-Jr(p)+L;if(30<F){var ne=L-L%5;F=(C&(1<<ne)-1).toString(32),C>>=ne,L-=ne,Fo=1<<32-Jr(p)+L|b<<L|C,Ho=F+f}else Fo=1<<F|b<<L|C,Ho=f}function xe(f){f.return!==null&&(W(f,1),he(f,1,0))}function ye(f){for(;f===wh;)wh=Th[--Ch],Th[Ch]=null,_d=Th[--Ch],Th[Ch]=null;for(;f===Bu;)Bu=Ha[--za],Ha[za]=null,Ho=Ha[--za],Ha[za]=null,Fo=Ha[--za],Ha[za]=null}function fe(f,p){w(_l,p),w(Ad,f),w(Hs,null),f=I1(p),x(Hs),w(Hs,f)}function De(){x(Hs),x(Ad),x(_l)}function Ce(f){f.memoizedState!==null&&w(Rh,f);var p=Hs.current,b=pd(p,f.type);p!==b&&(w(Ad,f),w(Hs,b))}function Ue(f){Ad.current===f&&(x(Hs),x(Ad)),Rh.current===f&&(x(Rh),Wr?Oo._currentValue=Tu:Oo._currentValue2=Tu)}function Qe(f){var p=Error(s(418,""));throw et(de(p,f)),Bm}function xt(f,p){if(!fr)throw Error(s(175));rM(f.stateNode,f.type,f.memoizedProps,p,f)||Qe(f)}function lt(f){for(dr=f.return;dr;)switch(dr.tag){case 3:case 27:$s=!0;return;case 5:case 13:$s=!1;return;default:dr=dr.return}}function mt(f){if(!fr||f!==dr)return!1;if(!ti)return lt(f),ti=!0,!1;var p=!1;if(Ri?f.tag!==3&&f.tag!==27&&(f.tag!==5||w0(f.type)&&!Tn(f.type,f.memoizedProps))&&(p=!0):f.tag!==3&&(f.tag!==5||w0(f.type)&&!Tn(f.type,f.memoizedProps))&&(p=!0),p&&pr&&Qe(f),lt(f),f.tag===13){if(!fr)throw Error(s(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));pr=oM(f)}else pr=dr?gb(f.stateNode):null;return!0}function it(){fr&&(pr=dr=null,ti=!1)}function et(f){mo===null?mo=[f]:mo.push(f)}function $(){for(var f=Dh,p=zo=Dh=0;p<f;){var b=go[p];go[p++]=null;var C=go[p];go[p++]=null;var L=go[p];go[p++]=null;var F=go[p];if(go[p++]=null,C!==null&&L!==null){var ne=C.pending;ne===null?L.next=L:(L.next=ne.next,ne.next=L),C.pending=L}F!==0&&We(b,L,F)}}function $e(f,p,b,C){go[Dh++]=f,go[Dh++]=p,go[Dh++]=b,go[Dh++]=C,zo|=C,f.lanes|=C,f=f.alternate,f!==null&&(f.lanes|=C)}function Ie(f,p,b,C){return $e(f,p,b,C),St(f)}function ke(f,p){return $e(f,null,null,p),St(f)}function We(f,p,b){f.lanes|=b;var C=f.alternate;C!==null&&(C.lanes|=b);for(var L=!1,F=f.return;F!==null;)F.childLanes|=b,C=F.alternate,C!==null&&(C.childLanes|=b),F.tag===22&&(f=F.stateNode,f===null||f._visibility&1||(L=!0)),f=F,F=F.return;L&&p!==null&&f.tag===3&&(F=f.stateNode,L=31-Jr(b),F=F.hiddenUpdates,f=F[L],f===null?F[L]=[p]:f.push(p),p.lane=b|536870912)}function St(f){if(50<Rd)throw Rd=0,V0=null,Error(s(185));for(var p=f.return;p!==null;)f=p,p=f.return;return f.tag===3?f.stateNode:null}function nt(f){f!==vc&&f.next===null&&(vc===null?Lm=vc=f:vc=vc.next=f),Fi=!0,Bh||(Bh=!0,je(J))}function re(f,p){if(!bb&&Fi){bb=!0;do for(var b=!1,C=Lm;C!==null;){if(f!==0){var L=C.pendingLanes;if(L===0)var F=0;else{var ne=C.suspendedLanes,ve=C.pingedLanes;F=(1<<31-Jr(42|f)+1)-1,F&=L&~(ne&~ve),F=F&201326677?F&201326677|1:F?F|2:0}F!==0&&(b=!0,st(C,F))}else F=jn,F=P(C,C===vi?F:0),(F&3)===0||I(C,F)||(b=!0,st(C,F));C=C.next}while(b);bb=!1}}function J(){Fi=Bh=!1;var f=0;bd!==0&&(F1()&&(f=bd),bd=0);for(var p=po(),b=null,C=Lm;C!==null;){var L=C.next,F=Te(C,p);F===0?(C.next=null,b===null?Lm=L:b.next=L,L===null&&(vc=b)):(b=C,(f!==0||(F&3)!==0)&&(Fi=!0)),C=L}re(f)}function Te(f,p){for(var b=f.suspendedLanes,C=f.pingedLanes,L=f.expirationTimes,F=f.pendingLanes&-62914561;0<F;){var ne=31-Jr(F),ve=1<<ne,Re=L[ne];Re===-1?((ve&b)===0||(ve&C)!==0)&&(L[ne]=H(ve,p)):Re<=p&&(f.expiredLanes|=ve),F&=~ve}if(p=vi,b=jn,b=P(f,f===p?b:0),C=f.callbackNode,b===0||f===p&&Ei===2||f.cancelPendingCommit!==null)return C!==null&&C!==null&&L0(C),f.callbackNode=null,f.callbackPriority=0;if((b&3)===0||I(f,b)){if(p=b&-b,p===f.callbackPriority)return p;switch(C!==null&&L0(C),ue(b)){case 2:case 8:b=yM;break;case 32:b=P0;break;case 268435456:b=P2;break;default:b=P0}return C=Ye.bind(null,f),b=Dm(b,C),f.callbackPriority=p,f.callbackNode=b,p}return C!==null&&C!==null&&L0(C),f.callbackPriority=2,f.callbackNode=null,2}function Ye(f,p){var b=f.callbackNode;if(Io()&&f.callbackNode!==b)return null;var C=jn;return C=P(f,f===vi?C:0),C===0?null:(_u(f,C,p),Te(f,po()),f.callbackNode!=null&&f.callbackNode===b?Ye.bind(null,f):null)}function st(f,p){if(Io())return null;_u(f,p,!0)}function je(f){ab?mc(function(){(si&6)!==0?Dm(I0,f):f()}):Dm(I0,f)}function pt(){return bd===0&&(bd=U()),bd}function vt(f,p){if(xd===null){var b=xd=[];Lh=0,Ga=pt(),Nh={status:"pending",value:void 0,then:function(C){b.push(C)}}}return Lh++,p.then(Mt,Mt),p}function Mt(){if(--Lh===0&&xd!==null){Nh!==null&&(Nh.status="fulfilled");var f=xd;xd=null,Ga=0,Nh=null;for(var p=0;p<f.length;p++)(0,f[p])()}}function kt(f,p){var b=[],C={status:"pending",value:null,reason:null,then:function(L){b.push(L)}};return f.then(function(){C.status="fulfilled",C.value=p;for(var L=0;L<b.length;L++)(0,b[L])(p)},function(L){for(C.status="rejected",C.reason=L,L=0;L<b.length;L++)(0,b[L])(void 0)}),C}function dt(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dt(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function Ot(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Lt(f,p,b){var C=f.updateQueue;if(C===null)return null;if(C=C.shared,(si&2)!==0){var L=C.pending;return L===null?p.next=p:(p.next=L.next,L.next=p),C.pending=p,p=St(f),We(f,null,b),p}return $e(f,C,p,b),St(f)}function Et(f,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194176)!==0)){var C=p.lanes;C&=f.pendingLanes,b|=C,p.lanes=b,le(f,b)}}function Ae(f,p){var b=f.updateQueue,C=f.alternate;if(C!==null&&(C=C.updateQueue,b===C)){var L=null,F=null;if(b=b.firstBaseUpdate,b!==null){do{var ne={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};F===null?L=F=ne:F=F.next=ne,b=b.next}while(b!==null);F===null?L=F=p:F=F.next=p}else L=F=p;b={baseState:C.baseState,firstBaseUpdate:L,lastBaseUpdate:F,shared:C.shared,callbacks:C.callbacks},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=p:f.next=p,b.lastBaseUpdate=p}function qe(){if(Ih){var f=Nh;if(f!==null)throw f}}function gt(f,p,b,C){Ih=!1;var L=f.updateQueue;yc=!1;var F=L.firstBaseUpdate,ne=L.lastBaseUpdate,ve=L.shared.pending;if(ve!==null){L.shared.pending=null;var Re=ve,at=Re.next;Re.next=null,ne===null?F=at:ne.next=at,ne=Re;var bt=f.alternate;bt!==null&&(bt=bt.updateQueue,ve=bt.lastBaseUpdate,ve!==ne&&(ve===null?bt.firstBaseUpdate=at:ve.next=at,bt.lastBaseUpdate=Re))}if(F!==null){var Ut=L.baseState;ne=0,bt=at=Re=null,ve=F;do{var zt=ve.lane&-536870913,An=zt!==ve.lane;if(An?(jn&zt)===zt:(C&zt)===zt){zt!==0&&zt===Ga&&(Ih=!0),bt!==null&&(bt=bt.next={lane:0,tag:ve.tag,payload:ve.payload,callback:null,next:null});e:{var Ka=f,zu=ve;zt=p;var Gu=b;switch(zu.tag){case 1:if(Ka=zu.payload,typeof Ka=="function"){Ut=Ka.call(Gu,Ut,zt);break e}Ut=Ka;break e;case 3:Ka.flags=Ka.flags&-65537|128;case 0:if(Ka=zu.payload,zt=typeof Ka=="function"?Ka.call(Gu,Ut,zt):Ka,zt==null)break e;Ut=g0({},Ut,zt);break e;case 2:yc=!0}}zt=ve.callback,zt!==null&&(f.flags|=64,An&&(f.flags|=8192),An=L.callbacks,An===null?L.callbacks=[zt]:An.push(zt))}else An={lane:zt,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},bt===null?(at=bt=An,Re=Ut):bt=bt.next=An,ne|=zt;if(ve=ve.next,ve===null){if(ve=L.shared.pending,ve===null)break;An=ve,ve=An.next,An.next=null,L.lastBaseUpdate=An,L.shared.pending=null}}while(!0);bt===null&&(Re=Ut),L.baseState=Re,L.firstBaseUpdate=at,L.lastBaseUpdate=bt,F===null&&(L.shared.lanes=0),Ya|=ne,f.lanes=ne,f.memoizedState=Ut}}function _e(f,p){if(typeof f!="function")throw Error(s(191,f));f.call(p)}function Be(f,p){var b=f.callbacks;if(b!==null)for(f.callbacks=null,f=0;f<b.length;f++)_e(b[f],p)}function He(f,p){if(ya(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var b=Object.keys(f),C=Object.keys(p);if(b.length!==C.length)return!1;for(C=0;C<b.length;C++){var L=b[C];if(!Al.call(p,L)||!ya(f[L],p[L]))return!1}return!0}function tt(f){return f=f.status,f==="fulfilled"||f==="rejected"}function wt(){}function Tt(f,p,b){switch(b=f[b],b===void 0?f.push(p):b!==p&&(p.then(wt,wt),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,f===Sd?Error(s(483)):f;default:if(typeof p.status=="string")p.then(wt,wt);else{if(f=vi,f!==null&&100<f.shellSuspendCounter)throw Error(s(482));f=p,f.status="pending",f.then(function(C){if(p.status==="pending"){var L=p;L.status="fulfilled",L.value=C}},function(C){if(p.status==="pending"){var L=p;L.status="rejected",L.reason=C}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,f===Sd?Error(s(483)):f}throw Lu=p,Sd}}function Wt(){if(Lu===null)throw Error(s(459));var f=Lu;return Lu=null,f}function vn(f){var p=Iu;return Iu+=1,Nu===null&&(Nu=[]),Tt(Nu,f,p)}function $n(f,p){p=p.props.ref,f.ref=p!==void 0?p:null}function yn(f,p){throw p.$$typeof===w2?Error(s(525)):(f=Object.prototype.toString.call(p),Error(s(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f)))}function os(f){var p=f._init;return p(f._payload)}function Ui(f){function p(Fe,Se){if(f){var Xe=Fe.deletions;Xe===null?(Fe.deletions=[Se],Fe.flags|=16):Xe.push(Se)}}function b(Fe,Se){if(!f)return null;for(;Se!==null;)p(Fe,Se),Se=Se.sibling;return null}function C(Fe){for(var Se=new Map;Fe!==null;)Fe.key!==null?Se.set(Fe.key,Fe):Se.set(Fe.index,Fe),Fe=Fe.sibling;return Se}function L(Fe,Se){return Fe=co(Fe,Se),Fe.index=0,Fe.sibling=null,Fe}function F(Fe,Se,Xe){return Fe.index=Xe,f?(Xe=Fe.alternate,Xe!==null?(Xe=Xe.index,Xe<Se?(Fe.flags|=33554434,Se):Xe):(Fe.flags|=33554434,Se)):(Fe.flags|=1048576,Se)}function ne(Fe){return f&&Fe.alternate===null&&(Fe.flags|=33554434),Fe}function ve(Fe,Se,Xe,At){return Se===null||Se.tag!==6?(Se=p0(Xe,Fe.mode,At),Se.return=Fe,Se):(Se=L(Se,Xe),Se.return=Fe,Se)}function Re(Fe,Se,Xe,At){var Jt=Xe.type;return Jt===Eu?bt(Fe,Se,Xe.props.children,At,Xe.key):Se!==null&&(Se.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===ho&&os(Jt)===Se.type)?(Se=L(Se,Xe.props),$n(Se,Xe),Se.return=Fe,Se):(Se=ml(Xe.type,Xe.key,Xe.props,null,Fe.mode,At),$n(Se,Xe),Se.return=Fe,Se)}function at(Fe,Se,Xe,At){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Xe.containerInfo||Se.stateNode.implementation!==Xe.implementation?(Se=QA(Xe,Fe.mode,At),Se.return=Fe,Se):(Se=L(Se,Xe.children||[]),Se.return=Fe,Se)}function bt(Fe,Se,Xe,At,Jt){return Se===null||Se.tag!==7?(Se=cs(Xe,Fe.mode,At,Jt),Se.return=Fe,Se):(Se=L(Se,Xe),Se.return=Fe,Se)}function Ut(Fe,Se,Xe){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Se=p0(""+Se,Fe.mode,Xe),Se.return=Fe,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case _m:return Xe=ml(Se.type,Se.key,Se.props,null,Fe.mode,Xe),$n(Xe,Se),Xe.return=Fe,Xe;case uo:return Se=QA(Se,Fe.mode,Xe),Se.return=Fe,Se;case ho:var At=Se._init;return Se=At(Se._payload),Ut(Fe,Se,Xe)}if(hd(Se)||r(Se))return Se=cs(Se,Fe.mode,Xe,null),Se.return=Fe,Se;if(typeof Se.then=="function")return Ut(Fe,vn(Se),Xe);if(Se.$$typeof===Po)return Ut(Fe,sm(Fe,Se),Xe);yn(Fe,Se)}return null}function zt(Fe,Se,Xe,At){var Jt=Se!==null?Se.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Jt!==null?null:ve(Fe,Se,""+Xe,At);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case _m:return Xe.key===Jt?Re(Fe,Se,Xe,At):null;case uo:return Xe.key===Jt?at(Fe,Se,Xe,At):null;case ho:return Jt=Xe._init,Xe=Jt(Xe._payload),zt(Fe,Se,Xe,At)}if(hd(Xe)||r(Xe))return Jt!==null?null:bt(Fe,Se,Xe,At,null);if(typeof Xe.then=="function")return zt(Fe,Se,vn(Xe),At);if(Xe.$$typeof===Po)return zt(Fe,Se,sm(Fe,Xe),At);yn(Fe,Xe)}return null}function An(Fe,Se,Xe,At,Jt){if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return Fe=Fe.get(Xe)||null,ve(Se,Fe,""+At,Jt);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case _m:return Fe=Fe.get(At.key===null?Xe:At.key)||null,Re(Se,Fe,At,Jt);case uo:return Fe=Fe.get(At.key===null?Xe:At.key)||null,at(Se,Fe,At,Jt);case ho:var Wi=At._init;return At=Wi(At._payload),An(Fe,Se,Xe,At,Jt)}if(hd(At)||r(At))return Fe=Fe.get(Xe)||null,bt(Se,Fe,At,Jt,null);if(typeof At.then=="function")return An(Fe,Se,Xe,vn(At),Jt);if(At.$$typeof===Po)return An(Fe,Se,Xe,sm(Se,At),Jt);yn(Se,At)}return null}function Ka(Fe,Se,Xe,At){for(var Jt=null,Wi=null,pn=Se,fi=Se=0,Es=null;pn!==null&&fi<Xe.length;fi++){pn.index>fi?(Es=pn,pn=null):Es=pn.sibling;var kn=zt(Fe,pn,Xe[fi],At);if(kn===null){pn===null&&(pn=Es);break}f&&pn&&kn.alternate===null&&p(Fe,pn),Se=F(kn,Se,fi),Wi===null?Jt=kn:Wi.sibling=kn,Wi=kn,pn=Es}if(fi===Xe.length)return b(Fe,pn),ti&&W(Fe,fi),Jt;if(pn===null){for(;fi<Xe.length;fi++)pn=Ut(Fe,Xe[fi],At),pn!==null&&(Se=F(pn,Se,fi),Wi===null?Jt=pn:Wi.sibling=pn,Wi=pn);return ti&&W(Fe,fi),Jt}for(pn=C(pn);fi<Xe.length;fi++)Es=An(pn,Fe,fi,Xe[fi],At),Es!==null&&(f&&Es.alternate!==null&&pn.delete(Es.key===null?fi:Es.key),Se=F(Es,Se,fi),Wi===null?Jt=Es:Wi.sibling=Es,Wi=Es);return f&&pn.forEach(function(wl){return p(Fe,wl)}),ti&&W(Fe,fi),Jt}function zu(Fe,Se,Xe,At){if(Xe==null)throw Error(s(151));for(var Jt=null,Wi=null,pn=Se,fi=Se=0,Es=null,kn=Xe.next();pn!==null&&!kn.done;fi++,kn=Xe.next()){pn.index>fi?(Es=pn,pn=null):Es=pn.sibling;var wl=zt(Fe,pn,kn.value,At);if(wl===null){pn===null&&(pn=Es);break}f&&pn&&wl.alternate===null&&p(Fe,pn),Se=F(wl,Se,fi),Wi===null?Jt=wl:Wi.sibling=wl,Wi=wl,pn=Es}if(kn.done)return b(Fe,pn),ti&&W(Fe,fi),Jt;if(pn===null){for(;!kn.done;fi++,kn=Xe.next())kn=Ut(Fe,kn.value,At),kn!==null&&(Se=F(kn,Se,fi),Wi===null?Jt=kn:Wi.sibling=kn,Wi=kn);return ti&&W(Fe,fi),Jt}for(pn=C(pn);!kn.done;fi++,kn=Xe.next())kn=An(pn,Fe,fi,kn.value,At),kn!==null&&(f&&kn.alternate!==null&&pn.delete(kn.key===null?fi:kn.key),Se=F(kn,Se,fi),Wi===null?Jt=kn:Wi.sibling=kn,Wi=kn);return f&&pn.forEach(function(j0){return p(Fe,j0)}),ti&&W(Fe,fi),Jt}function Gu(Fe,Se,Xe,At){if(typeof Xe=="object"&&Xe!==null&&Xe.type===Eu&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case _m:e:{for(var Jt=Xe.key;Se!==null;){if(Se.key===Jt){if(Jt=Xe.type,Jt===Eu){if(Se.tag===7){b(Fe,Se.sibling),At=L(Se,Xe.props.children),At.return=Fe,Fe=At;break e}}else if(Se.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===ho&&os(Jt)===Se.type){b(Fe,Se.sibling),At=L(Se,Xe.props),$n(At,Xe),At.return=Fe,Fe=At;break e}b(Fe,Se);break}else p(Fe,Se);Se=Se.sibling}Xe.type===Eu?(At=cs(Xe.props.children,Fe.mode,At,Xe.key),At.return=Fe,Fe=At):(At=ml(Xe.type,Xe.key,Xe.props,null,Fe.mode,At),$n(At,Xe),At.return=Fe,Fe=At)}return ne(Fe);case uo:e:{for(Jt=Xe.key;Se!==null;){if(Se.key===Jt)if(Se.tag===4&&Se.stateNode.containerInfo===Xe.containerInfo&&Se.stateNode.implementation===Xe.implementation){b(Fe,Se.sibling),At=L(Se,Xe.children||[]),At.return=Fe,Fe=At;break e}else{b(Fe,Se);break}else p(Fe,Se);Se=Se.sibling}At=QA(Xe,Fe.mode,At),At.return=Fe,Fe=At}return ne(Fe);case ho:return Jt=Xe._init,Xe=Jt(Xe._payload),Gu(Fe,Se,Xe,At)}if(hd(Xe))return Ka(Fe,Se,Xe,At);if(r(Xe)){if(Jt=r(Xe),typeof Jt!="function")throw Error(s(150));return Xe=Jt.call(Xe),zu(Fe,Se,Xe,At)}if(typeof Xe.then=="function")return Gu(Fe,Se,vn(Xe),At);if(Xe.$$typeof===Po)return Gu(Fe,Se,sm(Fe,Xe),At);yn(Fe,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint"?(Xe=""+Xe,Se!==null&&Se.tag===6?(b(Fe,Se.sibling),At=L(Se,Xe),At.return=Fe,Fe=At):(b(Fe,Se),At=p0(Xe,Fe.mode,At),At.return=Fe,Fe=At),ne(Fe)):b(Fe,Se)}return function(Fe,Se,Xe,At){try{Iu=0;var Jt=Gu(Fe,Se,Xe,At);return Nu=null,Jt}catch(pn){if(pn===Sd)throw pn;var Wi=t(29,pn,null,Fe.mode);return Wi.lanes=At,Wi.return=Fe,Wi}finally{}}}function ls(f,p){f=Dr,w(Ed,f),w(Hi,p),Dr=f|p.baseLanes}function ys(){w(Ed,Dr),w(Hi,Hi.current)}function _s(){Dr=Ed.current,x(Hi),x(Ed)}function Tr(f){var p=f.alternate;w(zs,zs.current&1),w(ka,f),Di===null&&(p===null||Hi.current!==null||p.memoizedState!==null)&&(Di=f)}function Lo(f){if(f.tag===22){if(w(zs,zs.current),w(ka,f),Di===null){var p=f.alternate;p!==null&&p.memoizedState!==null&&(Di=f)}}else ar()}function ar(){w(zs,zs.current),w(ka,ka.current)}function rn(f){x(ka),Di===f&&(Di=null),x(zs)}function ua(f){for(var p=f;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||M0(b)||T0(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function pi(){throw Error(s(321))}function j(f,p){if(p===null)return!1;for(var b=0;b<p.length&&b<f.length;b++)if(!ya(f[b],p[b]))return!1;return!0}function ie(f,p,b,C,L,F){return _c=F,In=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,dn.H=f===null||f.memoizedState===null?Uu:Zr,Ou=!1,F=b(C,L),Ou=!1,Ph&&(F=Oe(p,b,C,L)),be(f),F}function be(f){dn.H=us;var p=an!==null&&an.next!==null;if(_c=0,ii=an=In=null,vo=!1,Oh=0,er=null,p)throw Error(s(300));f===null||Bi||(f=f.dependencies,f!==null&&im(f)&&(Bi=!0))}function Oe(f,p,b,C){In=f;var L=0;do{if(Ph&&(er=null),Oh=0,Ph=!1,25<=L)throw Error(s(301));if(L+=1,ii=an=null,f.updateQueue!=null){var F=f.updateQueue;F.lastEffect=null,F.events=null,F.stores=null,F.memoCache!=null&&(F.memoCache.index=0)}dn.H=Va,F=p(b,C)}while(Ph);return F}function ze(){var f=dn.H,p=f.useState()[0];return p=typeof p.then=="function"?me(p):p,f=f.useState()[0],(an!==null?an.memoizedState:null)!==f&&(In.flags|=1024),p}function Je(){var f=O0!==0;return O0=0,f}function _t(f,p,b){p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~b}function ft(f){if(vo){for(f=f.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}vo=!1}_c=0,ii=an=In=null,Ph=!1,Oh=O0=0,er=null}function X(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ii===null?In.memoizedState=ii=f:ii=ii.next=f,ii}function ce(){if(an===null){var f=In.alternate;f=f!==null?f.memoizedState:null}else f=an.next;var p=ii===null?In.memoizedState:ii.next;if(p!==null)ii=p,an=f;else{if(f===null)throw In.alternate===null?Error(s(467)):Error(s(310));an=f,f={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},ii===null?In.memoizedState=ii=f:ii=ii.next=f}return ii}function me(f){var p=Oh;return Oh+=1,er===null&&(er=[]),f=Tt(er,f,p),p=In,(ii===null?p.memoizedState:ii.next)===null&&(p=p.alternate,dn.H=p===null||p.memoizedState===null?Uu:Zr),f}function ge(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return me(f);if(f.$$typeof===Po)return lr(f)}throw Error(s(438,String(f)))}function Ee(f){var p=null,b=In.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var C=In.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(p={data:C.data.map(function(L){return L.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=U0(),In.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(f),C=0;C<f;C++)b[C]=N1;return p.index++,b}function Ne(f,p){return typeof p=="function"?p(f):p}function Ze(f){var p=ce();return rt(p,an,f)}function rt(f,p,b){var C=f.queue;if(C===null)throw Error(s(311));C.lastRenderedReducer=b;var L=f.baseQueue,F=C.pending;if(F!==null){if(L!==null){var ne=L.next;L.next=F.next,F.next=ne}p.baseQueue=L=F,C.pending=null}if(F=f.baseState,L===null)f.memoizedState=F;else{p=L.next;var ve=ne=null,Re=null,at=p,bt=!1;do{var Ut=at.lane&-536870913;if(Ut!==at.lane?(jn&Ut)===Ut:(_c&Ut)===Ut){var zt=at.revertLane;if(zt===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),Ut===Ga&&(bt=!0);else if((_c&zt)===zt){at=at.next,zt===Ga&&(bt=!0);continue}else Ut={lane:0,revertLane:at.revertLane,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},Re===null?(ve=Re=Ut,ne=F):Re=Re.next=Ut,In.lanes|=zt,Ya|=zt;Ut=at.action,Ou&&b(F,Ut),F=at.hasEagerState?at.eagerState:b(F,Ut)}else zt={lane:Ut,revertLane:at.revertLane,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},Re===null?(ve=Re=zt,ne=F):Re=Re.next=zt,In.lanes|=Ut,Ya|=Ut;at=at.next}while(at!==null&&at!==p);if(Re===null?ne=F:Re.next=ve,!ya(F,f.memoizedState)&&(Bi=!0,bt&&(b=Nh,b!==null)))throw b;f.memoizedState=F,f.baseState=ne,f.baseQueue=Re,C.lastRenderedState=F}return L===null&&(C.lanes=0),[f.memoizedState,C.dispatch]}function ht(f){var p=ce(),b=p.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=f;var C=b.dispatch,L=b.pending,F=p.memoizedState;if(L!==null){b.pending=null;var ne=L=L.next;do F=f(F,ne.action),ne=ne.next;while(ne!==L);ya(F,p.memoizedState)||(Bi=!0),p.memoizedState=F,p.baseQueue===null&&(p.baseState=F),b.lastRenderedState=F}return[F,C]}function Nt(f,p,b){var C=In,L=ce(),F=ti;if(F){if(b===void 0)throw Error(s(407));b=b()}else b=p();var ne=!ya((an||L).memoizedState,b);if(ne&&(L.memoizedState=b,Bi=!0),L=L.queue,SA(en.bind(null,C,L,f),[f]),L.getSnapshot!==p||ne||ii!==null&&ii.memoizedState.tag&1){if(C.flags|=2048,jr(9,It.bind(null,C,L,b,p),{destroy:void 0},null),vi===null)throw Error(s(349));F||(_c&60)!==0||Ct(C,p,b)}return b}function Ct(f,p,b){f.flags|=16384,f={getSnapshot:p,value:b},p=In.updateQueue,p===null?(p=U0(),In.updateQueue=p,p.stores=[f]):(b=p.stores,b===null?p.stores=[f]:b.push(f))}function It(f,p,b,C){p.value=b,p.getSnapshot=C,Kt(p)&&Kn(f)}function en(f,p,b){return b(function(){Kt(p)&&Kn(f)})}function Kt(f){var p=f.getSnapshot;f=f.value;try{var b=p();return!ya(f,b)}catch{return!0}}function Kn(f){var p=ke(f,2);p!==null&&Zs(p,f,2)}function Vt(f){var p=X();if(typeof f=="function"){var b=f;if(f=b(),Ou){K(!0);try{b()}finally{K(!1)}}}return p.memoizedState=p.baseState=f,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ne,lastRenderedState:f},p}function Qt(f,p,b,C){return f.baseState=b,rt(f,an,typeof C=="function"?C:Ne)}function jt(f,p,b,C,L){if(Qp(f))throw Error(s(485));if(f=p.action,f!==null){var F={payload:L,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ne){F.listeners.push(ne)}};dn.T!==null?b(!0):F.isTransition=!1,C(F),b=p.pending,b===null?(F.next=p.pending=F,bi(p,F)):(F.next=b.next,p.pending=b.next=F)}}function bi(f,p){var b=p.action,C=p.payload,L=f.state;if(p.isTransition){var F=dn.T,ne={};dn.T=ne;try{var ve=b(L,C),Re=dn.S;Re!==null&&Re(ne,ve),fn(f,p,ve)}catch(at){Ci(f,p,at)}finally{dn.T=F}}else try{F=b(L,C),fn(f,p,F)}catch(at){Ci(f,p,at)}}function fn(f,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(C){gn(f,p,C)},function(C){return Ci(f,p,C)}):gn(f,p,b)}function gn(f,p,b){p.status="fulfilled",p.value=b,nn(p),f.state=b,p=f.pending,p!==null&&(b=p.next,b===p?f.pending=null:(b=b.next,p.next=b,bi(f,b)))}function Ci(f,p,b){var C=f.pending;if(f.pending=null,C!==null){C=C.next;do p.status="rejected",p.reason=b,nn(p),p=p.next;while(p!==C)}f.action=null}function nn(f){f=f.listeners;for(var p=0;p<f.length;p++)(0,f[p])()}function Nn(f,p){return p}function Dn(f,p){if(ti){var b=vi.formState;if(b!==null){e:{var C=In;if(ti){if(pr){var L=mb(pr,$s);if(L){pr=gb(L),C=tM(L);break e}}Qe(C)}C=!1}C&&(p=b[0])}}b=X(),b.memoizedState=b.baseState=p,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:p},b.queue=C,b=CA.bind(null,In,C),C.dispatch=b,C=Vt(!1);var F=Yf.bind(null,In,!1,C.queue);return C=X(),L={state:p,dispatch:null,action:f,pending:null},C.queue=L,b=jt.bind(null,In,L,F,b),L.dispatch=b,C.memoizedState=f,[p,b,!1]}function qi(f){var p=ce();return ei(p,an,f)}function ei(f,p,b){p=rt(f,p,Nn)[0],f=Ze(Ne)[0],p=typeof p=="object"&&p!==null&&typeof p.then=="function"?me(p):p;var C=ce(),L=C.queue,F=L.dispatch;return b!==C.memoizedState&&(In.flags|=2048,jr(9,wi.bind(null,L,b),{destroy:void 0},null)),[p,F,f]}function wi(f,p){f.action=p}function Ks(f){var p=ce(),b=an;if(b!==null)return ei(p,b,f);ce(),p=p.memoizedState,b=ce();var C=b.queue.dispatch;return b.memoizedState=f,[p,C,!1]}function jr(f,p,b,C){return f={tag:f,create:p,inst:b,deps:C,next:null},p=In.updateQueue,p===null&&(p=U0(),In.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=f.next=f:(C=b.next,b.next=f,f.next=C,p.lastEffect=f),f}function hl(){return ce().memoizedState}function Yp(f,p,b,C){var L=X();In.flags|=f,L.memoizedState=jr(1|p,b,{destroy:void 0},C===void 0?null:C)}function Wp(f,p,b,C){var L=ce();C=C===void 0?null:C;var F=L.memoizedState.inst;an!==null&&C!==null&&j(C,an.memoizedState.deps)?L.memoizedState=jr(p,b,F,C):(In.flags|=f,L.memoizedState=jr(1|p,b,F,C))}function Wv(f,p){Yp(8390656,8,f,p)}function SA(f,p){Wp(2048,8,f,p)}function h1(f,p){return Wp(4,2,f,p)}function Kp(f,p){return Wp(4,4,f,p)}function Kv(f,p){if(typeof p=="function"){f=f();var b=p(f);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function Jv(f,p,b){b=b!=null?b.concat([f]):null,Wp(4,4,Kv.bind(null,p,f),b)}function cu(){}function yh(f,p){var b=ce();p=p===void 0?null:p;var C=b.memoizedState;return p!==null&&j(p,C[1])?C[0]:(b.memoizedState=[f,p],f)}function EA(f,p){var b=ce();p=p===void 0?null:p;var C=b.memoizedState;if(p!==null&&j(p,C[1]))return C[0];if(C=f(),Ou){K(!0);try{f()}finally{K(!1)}}return b.memoizedState=[C,p],C}function Jp(f,p,b){return b===void 0||(_c&1073741824)!==0?f.memoizedState=p:(f.memoizedState=b,f=qA(),In.lanes|=f,Ya|=f,b)}function MA(f,p,b,C){return ya(b,p)?b:Hi.current!==null?(f=Jp(f,b,C),ya(f,p)||(Bi=!0),f):(_c&42)===0?(Bi=!0,f.memoizedState=b):(f=qA(),In.lanes|=f,Ya|=f,p)}function Xf(f,p,b,C,L){var F=pc();wr(F!==0&&8>F?F:8);var ne=dn.T,ve={};dn.T=ve,Yf(f,!1,p,b);try{var Re=L(),at=dn.S;if(at!==null&&at(ve,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var bt=kt(Re,C);uu(f,p,bt,As(f))}else uu(f,p,C,As(f))}catch(Ut){uu(f,p,{then:function(){},status:"rejected",reason:Ut},As())}finally{wr(F),dn.T=ne}}function fl(f){var p=f.memoizedState;if(p!==null)return p;p={memoizedState:Tu,baseState:Tu,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ne,lastRenderedState:Tu},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ne,lastRenderedState:b},next:null},f.memoizedState=p,f=f.alternate,f!==null&&(f.memoizedState=p),p}function Zp(){return lr(Oo)}function qf(){return ce().memoizedState}function $l(){return ce().memoizedState}function TA(f){for(var p=f.return;p!==null;){switch(p.tag){case 24:case 3:var b=As();f=Ot(b);var C=Lt(p,f,b);C!==null&&(Zs(C,p,b),Et(C,p,b)),p={cache:pu()},f.payload=p;return}p=p.return}}function Zv(f,p,b){var C=As();b={lane:C,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null},Qp(f)?Xr(p,b):(b=Ie(f,p,b,C),b!==null&&(Zs(b,f,C),hu(b,p,C)))}function CA(f,p,b){var C=As();uu(f,p,b,C)}function uu(f,p,b,C){var L={lane:C,revertLane:0,action:b,hasEagerState:!1,eagerState:null,next:null};if(Qp(f))Xr(p,L);else{var F=f.alternate;if(f.lanes===0&&(F===null||F.lanes===0)&&(F=p.lastRenderedReducer,F!==null))try{var ne=p.lastRenderedState,ve=F(ne,b);if(L.hasEagerState=!0,L.eagerState=ve,ya(ve,ne))return $e(f,p,L,0),vi===null&&$(),!1}catch{}finally{}if(b=Ie(f,p,L,C),b!==null)return Zs(b,f,C),hu(b,p,C),!0}return!1}function Yf(f,p,b,C){if(C={lane:2,revertLane:pt(),action:C,hasEagerState:!1,eagerState:null,next:null},Qp(f)){if(p)throw Error(s(479))}else p=Ie(f,b,C,2),p!==null&&Zs(p,f,2)}function Qp(f){var p=f.alternate;return f===In||p!==null&&p===In}function Xr(f,p){Ph=vo=!0;var b=f.pending;b===null?p.next=p:(p.next=b.next,b.next=p),f.pending=p}function hu(f,p,b){if((b&4194176)!==0){var C=p.lanes;C&=f.pendingLanes,b|=C,p.lanes=b,le(f,b)}}function Wf(f,p,b,C){p=f.memoizedState,b=b(C,p),b=b==null?p:g0({},p,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}function Kf(f,p,b,C,L,F,ne){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(C,F,ne):p.prototype&&p.prototype.isPureReactComponent?!He(b,C)||!He(L,F):!0}function f1(f,p,b,C){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,C),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,C),p.state!==f&&xl.enqueueReplaceState(p,p.state,null)}function ec(f,p){var b=p;if("ref"in p){b={};for(var C in p)C!=="ref"&&(b[C]=p[C])}if(f=f.defaultProps){b===p&&(b=g0({},b));for(var L in f)b[L]===void 0&&(b[L]=f[L])}return b}function Jf(f,p){try{var b=f.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(C){setTimeout(function(){throw C})}}function Zf(f,p,b){try{var C=f.onCaughtError;C(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function Qf(f,p,b){return b=Ot(b),b.tag=3,b.payload={element:null},b.callback=function(){Jf(f,p)},b}function wA(f){return f=Ot(f),f.tag=3,f}function d1(f,p,b,C){var L=b.type.getDerivedStateFromError;if(typeof L=="function"){var F=C.value;f.payload=function(){return L(F)},f.callback=function(){Zf(p,b,C)}}var ne=b.stateNode;ne!==null&&typeof ne.componentDidCatch=="function"&&(f.callback=function(){Zf(p,b,C),typeof L!="function"&&(Fu===null?Fu=new Set([this]):Fu.add(this));var ve=C.stack;this.componentDidCatch(C.value,{componentStack:ve!==null?ve:""})})}function E2(f,p,b,C,L){if(b.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(p=b.alternate,p!==null&&nm(p,b,L,!0),b=ka.current,b!==null){switch(b.tag){case 13:return Di===null?lc():b.alternate===null&&Li===0&&(Li=3),b.flags&=-257,b.flags|=65536,b.lanes=L,C===Im?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([C]):p.add(C),bh(f,C,L)),!1;case 22:return b.flags|=65536,C===Im?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([C])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([C]):b.add(C)),bh(f,C,L)),!1}throw Error(s(435,b.tag))}return bh(f,C,L),lc(),!1}if(ti)return p=ka.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=L,C!==Bm&&(f=Error(s(422),{cause:C}),et(de(f,b)))):(C!==Bm&&(p=Error(s(423),{cause:C}),et(de(p,b))),f=f.current.alternate,f.flags|=65536,L&=-L,f.lanes|=L,C=de(C,b),L=Qf(f.stateNode,C,L),Ae(f,L),Li!==4&&(Li=2)),!1;var F=Error(s(520),{cause:C});if(F=de(F,b),Fh===null?Fh=[F]:Fh.push(F),Li!==4&&(Li=2),p===null)return!0;C=de(C,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,f=L&-L,b.lanes|=f,f=Qf(b.stateNode,C,f),Ae(b,f),!1;case 1:if(p=b.type,F=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Fu===null||!Fu.has(F))))return b.flags|=65536,L&=-L,b.lanes|=L,L=wA(L),d1(L,f,b,C),Ae(b,L),!1}b=b.return}while(b!==null);return!1}function or(f,p,b,C){p.child=f===null?bl(p,null,b,C):Pu(p,f.child,b,C)}function Qv(f,p,b,C,L){b=b.render;var F=p.ref;if("ref"in C){var ne={};for(var ve in C)ve!=="ref"&&(ne[ve]=C[ve])}else ne=C;return du(p),C=ie(f,p,b,ne,F,L),ve=Je(),f!==null&&!Bi?(_t(f,p,L),tc(f,p,L)):(ti&&ve&&xe(p),p.flags|=1,or(f,p,C,L),p.child)}function p1(f,p,b,C,L){if(f===null){var F=b.type;return typeof F=="function"&&!mm(F)&&F.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=F,m1(f,p,F,C,L)):(f=ml(b.type,null,C,p,p.mode,L),f.ref=p.ref,f.return=p,p.child=f)}if(F=f.child,!NA(f,L)){var ne=F.memoizedProps;if(b=b.compare,b=b!==null?b:He,b(ne,C)&&f.ref===p.ref)return tc(f,p,L)}return p.flags|=1,f=co(F,C),f.ref=p.ref,f.return=p,p.child=f}function m1(f,p,b,C,L){if(f!==null){var F=f.memoizedProps;if(He(F,C)&&f.ref===p.ref)if(Bi=!1,p.pendingProps=C=F,NA(f,L))(f.flags&131072)!==0&&(Bi=!0);else return p.lanes=f.lanes,tc(f,p,L)}return $v(f,p,b,C,L)}function g1(f,p,b){var C=p.pendingProps,L=C.children,F=(p.stateNode._pendingVisibility&2)!==0,ne=f!==null?f.memoizedState:null;if($p(f,p),C.mode==="hidden"||F){if((p.flags&128)!==0){if(C=ne!==null?ne.baseLanes|b:b,f!==null){for(L=p.child=f.child,F=0;L!==null;)F=F|L.lanes|L.childLanes,L=L.sibling;p.childLanes=F&~C}else p.childLanes=0,p.child=null;return v1(f,p,C,b)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},f!==null&&t0(p,ne!==null?ne.cachePool:null),ne!==null?ls(p,ne):ys(),Lo(p);else return p.lanes=p.childLanes=536870912,v1(f,p,ne!==null?ne.baseLanes|b:b,b)}else ne!==null?(t0(p,ne.cachePool),ls(p,ne),ar(),p.memoizedState=null):(f!==null&&t0(p,null),ys(),ar());return or(f,p,L,b),p.child}function v1(f,p,b,C){var L=PA();return L=L===null?null:{parent:Wr?zi._currentValue:zi._currentValue2,pool:L},p.memoizedState={baseLanes:b,cachePool:L},f!==null&&t0(p,null),ys(),Lo(p),f!==null&&nm(f,p,C,!0),null}function $p(f,p){var b=p.ref;if(b===null)f!==null&&f.ref!==null&&(p.flags|=2097664);else{if(typeof b!="function"&&typeof b!="object")throw Error(s(284));(f===null||f.ref!==b)&&(p.flags|=2097664)}}function $v(f,p,b,C,L){return du(p),b=ie(f,p,b,C,void 0,L),C=Je(),f!==null&&!Bi?(_t(f,p,L),tc(f,p,L)):(ti&&C&&xe(p),p.flags|=1,or(f,p,b,L),p.child)}function y1(f,p,b,C,L,F){return du(p),p.updateQueue=null,b=Oe(p,C,b,L),be(f),C=Je(),f!==null&&!Bi?(_t(f,p,F),tc(f,p,F)):(ti&&C&&xe(p),p.flags|=1,or(f,p,b,F),p.child)}function _1(f,p,b,C,L){if(du(p),p.stateNode===null){var F=Du,ne=b.contextType;typeof ne=="object"&&ne!==null&&(F=lr(ne)),F=new b(C,F),p.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=xl,p.stateNode=F,F._reactInternals=p,F=p.stateNode,F.props=C,F.state=p.memoizedState,F.refs={},dt(p),ne=b.contextType,F.context=typeof ne=="object"&&ne!==null?lr(ne):Du,F.state=p.memoizedState,ne=b.getDerivedStateFromProps,typeof ne=="function"&&(Wf(p,b,ne,C),F.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(ne=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),ne!==F.state&&xl.enqueueReplaceState(F,F.state,null),gt(p,C,F,L),qe(),F.state=p.memoizedState),typeof F.componentDidMount=="function"&&(p.flags|=4194308),C=!0}else if(f===null){F=p.stateNode;var ve=p.memoizedProps,Re=ec(b,ve);F.props=Re;var at=F.context,bt=b.contextType;ne=Du,typeof bt=="object"&&bt!==null&&(ne=lr(bt));var Ut=b.getDerivedStateFromProps;bt=typeof Ut=="function"||typeof F.getSnapshotBeforeUpdate=="function",ve=p.pendingProps!==ve,bt||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ve||at!==ne)&&f1(p,F,C,ne),yc=!1;var zt=p.memoizedState;F.state=zt,gt(p,C,F,L),qe(),at=p.memoizedState,ve||zt!==at||yc?(typeof Ut=="function"&&(Wf(p,b,Ut,C),at=p.memoizedState),(Re=yc||Kf(p,b,Re,C,zt,at,ne))?(bt||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(p.flags|=4194308)):(typeof F.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=C,p.memoizedState=at),F.props=C,F.state=at,F.context=ne,C=Re):(typeof F.componentDidMount=="function"&&(p.flags|=4194308),C=!1)}else{F=p.stateNode,Dt(f,p),ne=p.memoizedProps,bt=ec(b,ne),F.props=bt,Ut=p.pendingProps,zt=F.context,at=b.contextType,Re=Du,typeof at=="object"&&at!==null&&(Re=lr(at)),ve=b.getDerivedStateFromProps,(at=typeof ve=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ne!==Ut||zt!==Re)&&f1(p,F,C,Re),yc=!1,zt=p.memoizedState,F.state=zt,gt(p,C,F,L),qe();var An=p.memoizedState;ne!==Ut||zt!==An||yc||f!==null&&f.dependencies!==null&&im(f.dependencies)?(typeof ve=="function"&&(Wf(p,b,ve,C),An=p.memoizedState),(bt=yc||Kf(p,b,bt,C,zt,An,Re)||f!==null&&f.dependencies!==null&&im(f.dependencies))?(at||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(C,An,Re),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(C,An,Re)),typeof F.componentDidUpdate=="function"&&(p.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof F.componentDidUpdate!="function"||ne===f.memoizedProps&&zt===f.memoizedState||(p.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ne===f.memoizedProps&&zt===f.memoizedState||(p.flags|=1024),p.memoizedProps=C,p.memoizedState=An),F.props=C,F.state=An,F.context=Re,C=bt):(typeof F.componentDidUpdate!="function"||ne===f.memoizedProps&&zt===f.memoizedState||(p.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ne===f.memoizedProps&&zt===f.memoizedState||(p.flags|=1024),C=!1)}return F=C,$p(f,p),C=(p.flags&128)!==0,F||C?(F=p.stateNode,b=C&&typeof b.getDerivedStateFromError!="function"?null:F.render(),p.flags|=1,f!==null&&C?(p.child=Pu(p,f.child,null,L),p.child=Pu(p,null,b,L)):or(f,p,b,L),p.memoizedState=F.state,f=p.child):f=tc(f,p,L),f}function A1(f,p,b,C){return it(),p.flags|=256,or(f,p,b,C),p.child}function RA(f){return{baseLanes:f,cachePool:OA()}}function em(f,p,b){return f=f!==null?f.childLanes&~b:0,p&&(f|=Wa),f}function b1(f,p,b){var C=p.pendingProps,L=!1,F=(p.flags&128)!==0,ne;if((ne=F)||(ne=f!==null&&f.memoizedState===null?!1:(zs.current&2)!==0),ne&&(L=!0,p.flags&=-129),ne=(p.flags&32)!==0,p.flags&=-33,f===null){if(ti){if(L?Tr(p):ar(),ti){var ve=pr,Re;(Re=ve)&&(ve=sM(ve,$s),ve!==null?(p.memoizedState={dehydrated:ve,treeContext:Bu!==null?{id:Fo,overflow:Ho}:null,retryLane:536870912},Re=t(18,null,null,0),Re.stateNode=ve,Re.return=p,p.child=Re,dr=p,pr=null,Re=!0):Re=!1),Re||Qe(p)}if(ve=p.memoizedState,ve!==null&&(ve=ve.dehydrated,ve!==null))return T0(ve)?p.lanes=16:p.lanes=536870912,null;rn(p)}return ve=C.children,C=C.fallback,L?(ar(),L=p.mode,ve=BA({mode:"hidden",children:ve},L),C=cs(C,L,b,null),ve.return=p,C.return=p,ve.sibling=C,p.child=ve,L=p.child,L.memoizedState=RA(b),L.childLanes=em(f,ne,b),p.memoizedState=z0,C):(Tr(p),DA(p,ve))}if(Re=f.memoizedState,Re!==null&&(ve=Re.dehydrated,ve!==null)){if(F)p.flags&256?(Tr(p),p.flags&=-257,p=e0(f,p,b)):p.memoizedState!==null?(ar(),p.child=f.child,p.flags|=128,p=null):(ar(),L=C.fallback,ve=p.mode,C=BA({mode:"visible",children:C.children},ve),L=cs(L,ve,b,null),L.flags|=2,C.return=p,L.return=p,C.sibling=L,p.child=C,Pu(p,f.child,null,b),C=p.child,C.memoizedState=RA(b),C.childLanes=em(f,ne,b),p.memoizedState=z0,p=L);else if(Tr(p),T0(ve))ne=$1(ve).digest,C=Error(s(419)),C.stack="",C.digest=ne,et({value:C,source:null,stack:null}),p=e0(f,p,b);else if(Bi||nm(f,p,b,!1),ne=(b&f.childLanes)!==0,Bi||ne){if(ne=vi,ne!==null){if(C=b&-b,(C&42)!==0)C=1;else switch(C){case 2:C=1;break;case 8:C=4;break;case 32:C=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:C=64;break;case 268435456:C=134217728;break;default:C=0}if(C=(C&(ne.suspendedLanes|b))!==0?0:C,C!==0&&C!==Re.retryLane)throw Re.retryLane=C,ke(f,C),Zs(ne,f,C),H0}M0(ve)||lc(),p=e0(f,p,b)}else M0(ve)?(p.flags|=128,p.child=f.child,p=cc.bind(null,f),eM(ve,p),p=null):(f=Re.treeContext,fr&&(pr=iM(ve),dr=p,ti=!0,mo=null,$s=!1,f!==null&&(Ha[za++]=Fo,Ha[za++]=Ho,Ha[za++]=Bu,Fo=f.id,Ho=f.overflow,Bu=p)),p=DA(p,C.children),p.flags|=4096);return p}return L?(ar(),L=C.fallback,ve=p.mode,Re=f.child,F=Re.sibling,C=co(Re,{mode:"hidden",children:C.children}),C.subtreeFlags=Re.subtreeFlags&31457280,F!==null?L=co(F,L):(L=cs(L,ve,b,null),L.flags|=2),L.return=p,C.return=p,C.sibling=L,p.child=C,C=L,L=p.child,ve=f.child.memoizedState,ve===null?ve=RA(b):(Re=ve.cachePool,Re!==null?(F=Wr?zi._currentValue:zi._currentValue2,Re=Re.parent!==F?{parent:F,pool:F}:Re):Re=OA(),ve={baseLanes:ve.baseLanes|b,cachePool:Re}),L.memoizedState=ve,L.childLanes=em(f,ne,b),p.memoizedState=z0,C):(Tr(p),b=f.child,f=b.sibling,b=co(b,{mode:"visible",children:C.children}),b.return=p,b.sibling=null,f!==null&&(ne=p.deletions,ne===null?(p.deletions=[f],p.flags|=16):ne.push(f)),p.child=b,p.memoizedState=null,b)}function DA(f,p){return p=BA({mode:"visible",children:p},f.mode),p.return=f,f.child=p}function BA(f,p){return vm(f,p,0,null)}function e0(f,p,b){return Pu(p,f.child,null,b),f=DA(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function x1(f,p,b){f.lanes|=p;var C=f.alternate;C!==null&&(C.lanes|=p),tm(f.return,p,b)}function LA(f,p,b,C,L){var F=f.memoizedState;F===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:C,tail:b,tailMode:L}:(F.isBackwards=p,F.rendering=null,F.renderingStartTime=0,F.last=C,F.tail=b,F.tailMode=L)}function S1(f,p,b){var C=p.pendingProps,L=C.revealOrder,F=C.tail;if(or(f,p,C.children,b),C=zs.current,(C&2)!==0)C=C&1|2,p.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&x1(f,b,p);else if(f.tag===19)x1(f,b,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}C&=1}switch(w(zs,C),L){case"forwards":for(b=p.child,L=null;b!==null;)f=b.alternate,f!==null&&ua(f)===null&&(L=b),b=b.sibling;b=L,b===null?(L=p.child,p.child=null):(L=b.sibling,b.sibling=null),LA(p,!1,L,b,F);break;case"backwards":for(b=null,L=p.child,p.child=null;L!==null;){if(f=L.alternate,f!==null&&ua(f)===null){p.child=L;break}f=L.sibling,L.sibling=b,b=L,L=f}LA(p,!0,b,null,F);break;case"together":LA(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function tc(f,p,b){if(f!==null&&(p.dependencies=f.dependencies),Ya|=p.lanes,(b&p.childLanes)===0)if(f!==null){if(nm(f,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(f!==null&&p.child!==f.child)throw Error(s(153));if(p.child!==null){for(f=p.child,b=co(f,f.pendingProps),p.child=b,b.return=p;f.sibling!==null;)f=f.sibling,b=b.sibling=co(f,f.pendingProps),b.return=p;b.sibling=null}return p.child}function NA(f,p){return(f.lanes&p)!==0?!0:(f=f.dependencies,!!(f!==null&&im(f)))}function M2(f,p,b){switch(p.tag){case 3:fe(p,p.stateNode.containerInfo),fu(p,zi,f.memoizedState.cache),it();break;case 27:case 5:Ce(p);break;case 4:fe(p,p.stateNode.containerInfo);break;case 10:fu(p,p.type,p.memoizedProps.value);break;case 13:var C=p.memoizedState;if(C!==null)return C.dehydrated!==null?(Tr(p),p.flags|=128,null):(b&p.child.childLanes)!==0?b1(f,p,b):(Tr(p),f=tc(f,p,b),f!==null?f.sibling:null);Tr(p);break;case 19:var L=(f.flags&128)!==0;if(C=(b&p.childLanes)!==0,C||(nm(f,p,b,!1),C=(b&p.childLanes)!==0),L){if(C)return S1(f,p,b);p.flags|=128}if(L=p.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),w(zs,zs.current),C)break;return null;case 22:case 23:return p.lanes=0,g1(f,p,b);case 24:fu(p,zi,f.memoizedState.cache)}return tc(f,p,b)}function E1(f,p,b){if(f!==null)if(f.memoizedProps!==p.pendingProps)Bi=!0;else{if(!NA(f,b)&&(p.flags&128)===0)return Bi=!1,M2(f,p,b);Bi=(f.flags&131072)!==0}else Bi=!1,ti&&(p.flags&1048576)!==0&&he(p,_d,p.index);switch(p.lanes=0,p.tag){case 16:e:{f=p.pendingProps;var C=p.elementType,L=C._init;if(C=L(C._payload),p.type=C,typeof C=="function")mm(C)?(f=ec(C,f),p.tag=1,p=_1(null,p,C,f,b)):(p.tag=0,p=$v(null,p,C,f,b));else{if(C!=null){if(L=C.$$typeof,L===xm){p.tag=11,p=Qv(null,p,C,f,b);break e}else if(L===_0){p.tag=14,p=p1(null,p,C,f,b);break e}}throw p=a(C)||C,Error(s(306,p,""))}}return p;case 0:return $v(f,p,p.type,p.pendingProps,b);case 1:return C=p.type,L=ec(C,p.pendingProps),_1(f,p,C,L,b);case 3:e:{if(fe(p,p.stateNode.containerInfo),f===null)throw Error(s(387));var F=p.pendingProps;L=p.memoizedState,C=L.element,Dt(f,p),gt(p,F,null,b);var ne=p.memoizedState;if(F=ne.cache,fu(p,zi,F),F!==L.cache&&_h(p,[zi],b,!0),qe(),F=ne.element,fr&&L.isDehydrated)if(L={element:F,isDehydrated:!1,cache:ne.cache},p.updateQueue.baseState=L,p.memoizedState=L,p.flags&256){p=A1(f,p,F,b);break e}else if(F!==C){C=de(Error(s(424)),p),et(C),p=A1(f,p,F,b);break e}else for(fr&&(pr=nM(p.stateNode.containerInfo),dr=p,ti=!0,mo=null,$s=!0),b=bl(p,null,F,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(it(),F===C){p=tc(f,p,b);break e}or(f,p,F,b)}p=p.child}return p;case 26:if(Fa)return $p(f,p),f===null?(b=_b(p.type,null,p.pendingProps,null))?p.memoizedState=b:ti||(p.stateNode=B0(p.type,p.pendingProps,_l.current,p)):p.memoizedState=_b(p.type,f.memoizedProps,p.pendingProps,f.memoizedState),null;case 27:if(Ri)return Ce(p),f===null&&Ri&&ti&&(C=p.stateNode=Uo(p.type,p.pendingProps,_l.current,Hs.current,!1),dr=p,$s=!0,pr=C0(C)),C=p.pendingProps.children,f!==null||ti?or(f,p,C,b):p.child=Pu(p,null,C,b),$p(f,p),p.child;case 5:return f===null&&ti&&(R0(p.type,p.pendingProps,Hs.current),(L=C=pr)&&(C=L2(C,p.type,p.pendingProps,$s),C!==null?(p.stateNode=C,dr=p,pr=C0(C),$s=!1,L=!0):L=!1),L||Qe(p)),Ce(p),L=p.type,F=p.pendingProps,ne=f!==null?f.memoizedProps:null,C=F.children,Tn(L,F)?C=null:ne!==null&&Tn(L,ne)&&(p.flags|=32),p.memoizedState!==null&&(L=ie(f,p,ze,null,null,b),Wr?Oo._currentValue=L:Oo._currentValue2=L),$p(f,p),or(f,p,C,b),p.child;case 6:return f===null&&ti&&(cM(p.pendingProps,Hs.current),(f=b=pr)&&(b=vb(b,p.pendingProps,$s),b!==null?(p.stateNode=b,dr=p,pr=null,f=!0):f=!1),f||Qe(p)),null;case 13:return b1(f,p,b);case 4:return fe(p,p.stateNode.containerInfo),C=p.pendingProps,f===null?p.child=Pu(p,null,C,b):or(f,p,C,b),p.child;case 11:return Qv(f,p,p.type,p.pendingProps,b);case 7:return or(f,p,p.pendingProps,b),p.child;case 8:return or(f,p,p.pendingProps.children,b),p.child;case 12:return or(f,p,p.pendingProps.children,b),p.child;case 10:return C=p.pendingProps,fu(p,p.type,C.value),or(f,p,C.children,b),p.child;case 9:return L=p.type._context,C=p.pendingProps.children,du(p),L=lr(L),C=C(L),p.flags|=1,or(f,p,C,b),p.child;case 14:return p1(f,p,p.type,p.pendingProps,b);case 15:return m1(f,p,p.type,p.pendingProps,b);case 19:return S1(f,p,b);case 22:return g1(f,p,b);case 24:return du(p),C=lr(zi),f===null?(L=PA(),L===null&&(L=vi,F=pu(),L.pooledCache=F,F.refCount++,F!==null&&(L.pooledCacheLanes|=b),L=F),p.memoizedState={parent:C,cache:L},dt(p),fu(p,zi,L)):((f.lanes&b)!==0&&(Dt(f,p),gt(p,null,null,b),qe()),L=f.memoizedState,F=p.memoizedState,L.parent!==C?(L={parent:C,cache:C},p.memoizedState=L,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=L),fu(p,zi,C)):(C=F.cache,fu(p,zi,C),C!==L.cache&&_h(p,[zi],b,!0))),or(f,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(s(156,p.tag))}function fu(f,p,b){Wr?(w(Ac,p._currentValue),p._currentValue=b):(w(Ac,p._currentValue2),p._currentValue2=b)}function nc(f){var p=Ac.current;Wr?f._currentValue=p:f._currentValue2=p,x(Ac)}function tm(f,p,b){for(;f!==null;){var C=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,C!==null&&(C.childLanes|=p)):C!==null&&(C.childLanes&p)!==p&&(C.childLanes|=p),f===b)break;f=f.return}}function _h(f,p,b,C){var L=f.child;for(L!==null&&(L.return=f);L!==null;){var F=L.dependencies;if(F!==null){var ne=L.child;F=F.firstContext;e:for(;F!==null;){var ve=F;F=L;for(var Re=0;Re<p.length;Re++)if(ve.context===p[Re]){F.lanes|=b,ve=F.alternate,ve!==null&&(ve.lanes|=b),tm(F.return,b,f),C||(ne=null);break e}F=ve.next}}else if(L.tag===18){if(ne=L.return,ne===null)throw Error(s(341));ne.lanes|=b,F=ne.alternate,F!==null&&(F.lanes|=b),tm(ne,b,f),ne=null}else ne=L.child;if(ne!==null)ne.return=L;else for(ne=L;ne!==null;){if(ne===f){ne=null;break}if(L=ne.sibling,L!==null){L.return=ne.return,ne=L;break}ne=ne.return}L=ne}}function nm(f,p,b,C){f=null;for(var L=p,F=!1;L!==null;){if(!F){if((L.flags&524288)!==0)F=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var ne=L.alternate;if(ne===null)throw Error(s(387));if(ne=ne.memoizedProps,ne!==null){var ve=L.type;ya(L.pendingProps.value,ne.value)||(f!==null?f.push(ve):f=[ve])}}else if(L===Rh.current){if(ne=L.alternate,ne===null)throw Error(s(387));ne.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(f!==null?f.push(Oo):f=[Oo])}L=L.return}f!==null&&_h(p,f,b,C),p.flags|=262144}function im(f){for(f=f.firstContext;f!==null;){var p=f.context;if(!ya(Wr?p._currentValue:p._currentValue2,f.memoizedValue))return!0;f=f.next}return!1}function du(f){ko=f,ja=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function lr(f){return IA(ko,f)}function sm(f,p){return ko===null&&du(f),IA(f,p)}function IA(f,p){var b=Wr?p._currentValue:p._currentValue2;if(p={context:p,memoizedValue:b,next:null},ja===null){if(f===null)throw Error(s(308));ja=p,f.dependencies={lanes:0,firstContext:p},f.flags|=524288}else ja=ja.next=p;return b}function pu(){return{controller:new Md,data:new Map,refCount:0}}function rm(f){f.refCount--,f.refCount===0&&AM(bM,function(){f.controller.abort()})}function PA(){var f=Sl.current;return f!==null?f:vi.pooledCache}function t0(f,p){p===null?w(Sl,Sl.current):w(Sl,p.pool)}function OA(){var f=PA();return f===null?null:{parent:Wr?zi._currentValue:zi._currentValue2,pool:f}}function ha(f){f.flags|=4}function $f(f,p){if(f!==null&&f.child===p.child)return!1;if((p.flags&16)!==0)return!0;for(f=p.child;f!==null;){if((f.flags&13878)!==0||(f.subtreeFlags&13878)!==0)return!0;f=f.sibling}return!1}function Ah(f,p,b,C){if(Fs)for(b=p.child;b!==null;){if(b.tag===5||b.tag===6)Em(f,b.stateNode);else if(!(b.tag===4||Ri&&b.tag===27)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else if(fo)for(var L=p.child;L!==null;){if(L.tag===5){var F=L.stateNode;b&&C&&(F=db(F,L.type,L.memoizedProps)),Em(f,F)}else if(L.tag===6)F=L.stateNode,b&&C&&(F=pb(F,L.memoizedProps)),Em(f,F);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)F=L.child,F!==null&&(F.return=L),Ah(f,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===p)break;for(;L.sibling===null;){if(L.return===null||L.return===p)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function M1(f,p,b,C){if(fo)for(var L=p.child;L!==null;){if(L.tag===5){var F=L.stateNode;b&&C&&(F=db(F,L.type,L.memoizedProps)),fb(f,F)}else if(L.tag===6)F=L.stateNode,b&&C&&(F=pb(F,L.memoizedProps)),fb(f,F);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)F=L.child,F!==null&&(F.return=L),M1(f,L,!(L.memoizedProps!==null&&L.memoizedProps.mode==="manual"),!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===p)break;for(;L.sibling===null;){if(L.return===null||L.return===p)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function am(f,p){if(fo&&$f(f,p)){f=p.stateNode;var b=f.containerInfo,C=Mm();M1(C,p,!1,!1),f.pendingChildren=C,ha(p),E0(b,C)}}function n0(f,p,b,C){if(Fs)f.memoizedProps!==C&&ha(p);else if(fo){var L=f.stateNode,F=f.memoizedProps;if((f=$f(f,p))||F!==C){var ne=Hs.current;F=gd(L,b,F,C,!f,null),F===L?p.stateNode=L:(dc(F,b,C,ne)&&ha(p),p.stateNode=F,f?Ah(F,p,!1,!1):ha(p))}else p.stateNode=L}}function i0(f,p,b){if(sb(p,b)){if(f.flags|=16777216,!x0(p,b))if(Au())f.flags|=8192;else throw Lu=Im,Nm}else f.flags&=-16777217}function s0(f,p){if(fM(p)){if(f.flags|=16777216,!Eh(p))if(Au())f.flags|=8192;else throw Lu=Im,Nm}else f.flags&=-16777217}function ed(f,p){p!==null&&(f.flags|=4),f.flags&16384&&(p=f.tag!==22?N():536870912,f.lanes|=p,Tl|=p)}function td(f,p){if(!ti)switch(f.tailMode){case"hidden":p=f.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:C.sibling=null}}function Qi(f){var p=f.alternate!==null&&f.alternate.child===f.child,b=0,C=0;if(p)for(var L=f.child;L!==null;)b|=L.lanes|L.childLanes,C|=L.subtreeFlags&31457280,C|=L.flags&31457280,L.return=f,L=L.sibling;else for(L=f.child;L!==null;)b|=L.lanes|L.childLanes,C|=L.subtreeFlags,C|=L.flags,L.return=f,L=L.sibling;return f.subtreeFlags|=C,f.childLanes=b,p}function T1(f,p,b){var C=p.pendingProps;switch(ye(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qi(p),null;case 1:return Qi(p),null;case 3:return b=p.stateNode,C=null,f!==null&&(C=f.memoizedState.cache),p.memoizedState.cache!==C&&(p.flags|=2048),nc(zi),De(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(f===null||f.child===null)&&(mt(p)?ha(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,mo!==null&&(dm(mo),mo=null))),am(f,p),Qi(p),null;case 26:if(Fa){b=p.type;var L=p.memoizedState;return f===null?(ha(p),L!==null?(Qi(p),s0(p,L)):(Qi(p),i0(p,b,C))):L?L!==f.memoizedState?(ha(p),Qi(p),s0(p,L)):(Qi(p),p.flags&=-16777217):(Fs?f.memoizedProps!==C&&ha(p):n0(f,p,b,C),Qi(p),i0(p,b,C)),null}case 27:if(Ri){if(Ue(p),b=_l.current,L=p.type,f!==null&&p.stateNode!=null)Fs?f.memoizedProps!==C&&ha(p):n0(f,p,L,C);else{if(!C){if(p.stateNode===null)throw Error(s(166));return Qi(p),null}f=Hs.current,mt(p)?xt(p,f):(f=Uo(L,C,b,f,!0),p.stateNode=f,ha(p))}return Qi(p),null}case 5:if(Ue(p),b=p.type,f!==null&&p.stateNode!=null)n0(f,p,b,C);else{if(!C){if(p.stateNode===null)throw Error(s(166));return Qi(p),null}f=Hs.current,mt(p)?xt(p,f):(L=ib(b,C,_l.current,f,p),Ah(L,p,!1,!1),p.stateNode=L,dc(L,b,C,f)&&ha(p))}return Qi(p),i0(p,p.type,p.pendingProps),null;case 6:if(f&&p.stateNode!=null)b=f.memoizedProps,Fs?b!==C&&ha(p):fo&&(b!==C?(p.stateNode=xi(C,_l.current,Hs.current,p),ha(p)):p.stateNode=f.stateNode);else{if(typeof C!="string"&&p.stateNode===null)throw Error(s(166));if(f=_l.current,b=Hs.current,mt(p)){if(!fr)throw Error(s(176));if(f=p.stateNode,b=p.memoizedProps,C=null,L=dr,L!==null)switch(L.tag){case 27:case 5:C=L.memoizedProps}yb(f,b,p,C)||Qe(p)}else p.stateNode=xi(C,f,b,p)}return Qi(p),null;case 13:if(C=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(L=mt(p),C!==null&&C.dehydrated!==null){if(f===null){if(!L)throw Error(s(318));if(!fr)throw Error(s(344));if(L=p.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(s(317));aM(L,p)}else it(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Qi(p),L=!1}else mo!==null&&(dm(mo),mo=null),L=!0;if(!L)return p.flags&256?(rn(p),p):(rn(p),null)}if(rn(p),(p.flags&128)!==0)return p.lanes=b,p;if(b=C!==null,f=f!==null&&f.memoizedState!==null,b){C=p.child,L=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(L=C.alternate.memoizedState.cachePool.pool);var F=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(F=C.memoizedState.cachePool.pool),F!==L&&(C.flags|=2048)}return b!==f&&b&&(p.child.flags|=8192),ed(p,p.updateQueue),Qi(p),null;case 4:return De(),am(f,p),f===null&&bs(p.stateNode.containerInfo),Qi(p),null;case 10:return nc(p.type),Qi(p),null;case 19:if(x(zs),L=p.memoizedState,L===null)return Qi(p),null;if(C=(p.flags&128)!==0,F=L.rendering,F===null)if(C)td(L,!1);else{if(Li!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(F=ua(f),F!==null){for(p.flags|=128,td(L,!1),f=F.updateQueue,p.updateQueue=f,ed(p,f),p.subtreeFlags=0,f=b,b=p.child;b!==null;)gm(b,f),b=b.sibling;return w(zs,zs.current&1|2),p.child}f=f.sibling}L.tail!==null&&po()>wd&&(p.flags|=128,C=!0,td(L,!1),p.lanes=4194304)}else{if(!C)if(f=ua(F),f!==null){if(p.flags|=128,C=!0,f=f.updateQueue,p.updateQueue=f,ed(p,f),td(L,!0),L.tail===null&&L.tailMode==="hidden"&&!F.alternate&&!ti)return Qi(p),null}else 2*po()-L.renderingStartTime>wd&&b!==536870912&&(p.flags|=128,C=!0,td(L,!1),p.lanes=4194304);L.isBackwards?(F.sibling=p.child,p.child=F):(f=L.last,f!==null?f.sibling=F:p.child=F,L.last=F)}return L.tail!==null?(p=L.tail,L.rendering=p,L.tail=p.sibling,L.renderingStartTime=po(),p.sibling=null,f=zs.current,w(zs,C?f&1|2:f&1),p):(Qi(p),null);case 22:case 23:return rn(p),_s(),C=p.memoizedState!==null,f!==null?f.memoizedState!==null!==C&&(p.flags|=8192):C&&(p.flags|=8192),C?(b&536870912)!==0&&(p.flags&128)===0&&(Qi(p),p.subtreeFlags&6&&(p.flags|=8192)):Qi(p),b=p.updateQueue,b!==null&&ed(p,b.retryQueue),b=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),C=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==b&&(p.flags|=2048),f!==null&&x(Sl),null;case 24:return b=null,f!==null&&(b=f.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),nc(zi),Qi(p),null;case 25:return null}throw Error(s(156,p.tag))}function T2(f,p){switch(ye(p),p.tag){case 1:return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return nc(zi),De(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 26:case 27:case 5:return Ue(p),null;case 13:if(rn(p),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(s(340));it()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return x(zs),null;case 4:return De(),null;case 10:return nc(p.type),null;case 22:case 23:return rn(p),_s(),f!==null&&x(Sl),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 24:return nc(zi),null;case 25:return null;default:return null}}function C1(f,p){switch(ye(p),p.tag){case 3:nc(zi),De();break;case 26:case 27:case 5:Ue(p);break;case 4:De();break;case 13:rn(p);break;case 19:x(zs);break;case 10:nc(p.type);break;case 22:case 23:rn(p),_s(),f!==null&&x(Sl);break;case 24:nc(zi)}}function om(f,p){try{var b=p.updateQueue,C=b!==null?b.lastEffect:null;if(C!==null){var L=C.next;b=L;do{if((b.tag&f)===f){C=void 0;var F=b.create,ne=b.inst;C=F(),ne.destroy=C}b=b.next}while(b!==L)}}catch(ve){mi(p,p.return,ve)}}function mu(f,p,b){try{var C=p.updateQueue,L=C!==null?C.lastEffect:null;if(L!==null){var F=L.next;C=F;do{if((C.tag&f)===f){var ne=C.inst,ve=ne.destroy;if(ve!==void 0){ne.destroy=void 0,L=p;var Re=b;try{ve()}catch(at){mi(L,Re,at)}}}C=C.next}while(C!==F)}}catch(at){mi(p,p.return,at)}}function w1(f){var p=f.updateQueue;if(p!==null){var b=f.stateNode;try{Be(p,b)}catch(C){mi(f,f.return,C)}}}function fa(f,p,b){b.props=ec(f.type,f.memoizedProps),b.state=f.memoizedState;try{b.componentWillUnmount()}catch(C){mi(f,p,C)}}function No(f,p){try{var b=f.ref;if(b!==null){var C=f.stateNode;switch(f.tag){case 26:case 27:case 5:var L=dd(C);break;default:L=C}typeof b=="function"?f.refCleanup=b(L):b.current=L}}catch(F){mi(f,p,F)}}function da(f,p){var b=f.ref,C=f.refCleanup;if(b!==null)if(typeof C=="function")try{C()}catch(L){mi(f,p,L)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(L){mi(f,p,L)}else b.current=null}function UA(f){var p=f.type,b=f.memoizedProps,C=f.stateNode;try{D2(C,p,b,f)}catch(L){mi(f,f.return,L)}}function FA(f,p,b){try{X1(f.stateNode,f.type,b,p,f)}catch(C){mi(f,f.return,C)}}function HA(f){return f.tag===5||f.tag===3||(Fa?f.tag===26:!1)||(Ri?f.tag===27:!1)||f.tag===4}function lm(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||HA(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&(!Ri||f.tag!==27)&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function zA(f,p,b){var C=f.tag;if(C===5||C===6)f=f.stateNode,p?Y1(b,f,p):cb(b,f);else if(!(C===4||Ri&&C===27)&&(f=f.child,f!==null))for(zA(f,p,b),f=f.sibling;f!==null;)zA(f,p,b),f=f.sibling}function ic(f,p,b){var C=f.tag;if(C===5||C===6)f=f.stateNode,p?q1(b,f,p):V1(b,f);else if(!(C===4||Ri&&C===27)&&(f=f.child,f!==null))for(ic(f,p,b),f=f.sibling;f!==null;)ic(f,p,b),f=f.sibling}function r0(f,p,b){f=f.containerInfo;try{vd(f,b)}catch(C){mi(p,p.return,C)}}function cm(f,p){for(A0(f.containerInfo),_n=p;_n!==null;)if(f=_n,p=f.child,(f.subtreeFlags&1028)!==0&&p!==null)p.return=f,_n=p;else for(;_n!==null;){f=_n;var b=f.alternate;switch(p=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&b!==null){p=void 0;var C=f,L=b.memoizedProps;b=b.memoizedState;var F=C.stateNode;try{var ne=ec(C.type,L,C.elementType===C.type);p=F.getSnapshotBeforeUpdate(ne,b),F.__reactInternalSnapshotBeforeUpdate=p}catch(ve){mi(C,C.return,ve)}}break;case 3:(p&1024)!==0&&Fs&&Q1(f.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(s(163))}if(p=f.sibling,p!==null){p.return=f.return,_n=p;break}_n=f.return}return ne=zn,zn=!1,ne}function a0(f,p,b){var C=b.flags;switch(b.tag){case 0:case 11:case 15:rc(f,b),C&4&&om(5,b);break;case 1:if(rc(f,b),C&4)if(f=b.stateNode,p===null)try{f.componentDidMount()}catch(ve){mi(b,b.return,ve)}else{var L=ec(b.type,p.memoizedProps);p=p.memoizedState;try{f.componentDidUpdate(L,p,f.__reactInternalSnapshotBeforeUpdate)}catch(ve){mi(b,b.return,ve)}}C&64&&w1(b),C&512&&No(b,b.return);break;case 3:if(rc(f,b),C&64&&(C=b.updateQueue,C!==null)){if(f=null,b.child!==null)switch(b.child.tag){case 27:case 5:f=dd(b.child.stateNode);break;case 1:f=b.child.stateNode}try{Be(C,f)}catch(ve){mi(b,b.return,ve)}}break;case 26:if(Fa){rc(f,b),C&512&&No(b,b.return);break}case 27:case 5:rc(f,b),p===null&&C&4&&UA(b),C&512&&No(b,b.return);break;case 12:rc(f,b);break;case 13:rc(f,b),C&4&&o0(f,b);break;case 22:if(L=b.memoizedState!==null||El,!L){p=p!==null&&p.memoizedState!==null||hs;var F=El,ne=hs;El=L,(hs=p)&&!ne?ac(f,b,(b.subtreeFlags&8772)!==0):rc(f,b),El=F,hs=ne}C&512&&(b.memoizedProps.mode==="manual"?No(b,b.return):da(b,b.return));break;default:rc(f,b)}}function GA(f){var p=f.alternate;p!==null&&(f.alternate=null,GA(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&R2(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function cr(f,p,b){for(b=b.child;b!==null;)gu(f,p,b),b=b.sibling}function gu(f,p,b){if(va&&typeof va.onCommitFiberUnmount=="function")try{va.onCommitFiberUnmount(Ss,b)}catch{}switch(b.tag){case 26:if(Fa){hs||da(b,p),cr(f,p,b),b.memoizedState?Sh(b.memoizedState):b.stateNode&&yd(b.stateNode);break}case 27:if(Ri){hs||da(b,p);var C=tn,L=Bn;tn=b.stateNode,cr(f,p,b),Ru(b.stateNode),tn=C,Bn=L;break}case 5:hs||da(b,p);case 6:if(Fs){if(C=tn,L=Bn,tn=null,cr(f,p,b),tn=C,Bn=L,tn!==null)if(Bn)try{W1(tn,b.stateNode)}catch(F){mi(b,p,F)}else try{ub(tn,b.stateNode)}catch(F){mi(b,p,F)}}else cr(f,p,b);break;case 18:Fs&&tn!==null&&(Bn?Tm(tn,b.stateNode):lM(tn,b.stateNode));break;case 4:Fs?(C=tn,L=Bn,tn=b.stateNode.containerInfo,Bn=!0,cr(f,p,b),tn=C,Bn=L):(fo&&r0(b.stateNode,b,Mm()),cr(f,p,b));break;case 0:case 11:case 14:case 15:hs||mu(2,b,p),hs||mu(4,b,p),cr(f,p,b);break;case 1:hs||(da(b,p),C=b.stateNode,typeof C.componentWillUnmount=="function"&&fa(b,p,C)),cr(f,p,b);break;case 21:cr(f,p,b);break;case 22:hs||da(b,p),hs=(C=hs)||b.memoizedState!==null,cr(f,p,b),hs=C;break;default:cr(f,p,b)}}function o0(f,p){if(fr&&p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{I2(f)}catch(b){mi(p,p.return,b)}}function R1(f){switch(f.tag){case 13:case 19:var p=f.stateNode;return p===null&&(p=f.stateNode=new gi),p;case 22:return f=f.stateNode,p=f._retryCache,p===null&&(p=f._retryCache=new gi),p;default:throw Error(s(435,f.tag))}}function sc(f,p){var b=R1(f);p.forEach(function(C){var L=Su.bind(null,f,C);b.has(C)||(b.add(C),C.then(L,L))})}function qr(f,p){var b=p.deletions;if(b!==null)for(var C=0;C<b.length;C++){var L=b[C],F=f,ne=p;if(Fs){var ve=ne;e:for(;ve!==null;){switch(ve.tag){case 27:case 5:tn=ve.stateNode,Bn=!1;break e;case 3:tn=ve.stateNode.containerInfo,Bn=!0;break e;case 4:tn=ve.stateNode.containerInfo,Bn=!0;break e}ve=ve.return}if(tn===null)throw Error(s(160));gu(F,ne,L),tn=null,Bn=!1}else gu(F,ne,L);F=L.alternate,F!==null&&(F.return=null),L.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)kA(p,f),p=p.sibling}function kA(f,p){var b=f.alternate,C=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:qr(p,f),pa(f),C&4&&(mu(3,f,f.return),om(3,f),mu(5,f,f.return));break;case 1:qr(p,f),pa(f),C&512&&(hs||b===null||da(b,b.return)),C&64&&El&&(f=f.updateQueue,f!==null&&(C=f.callbacks,C!==null&&(b=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=b===null?C:b.concat(C))));break;case 26:if(Fa){var L=is;qr(p,f),pa(f),C&512&&(hs||b===null||da(b,b.return)),C&4&&(C=b!==null?b.memoizedState:null,p=f.memoizedState,b===null?p===null?f.stateNode===null?f.stateNode=wm(L,f.type,f.memoizedProps,f):Rm(L,f.type,f.stateNode):f.stateNode=uM(L,p,f.memoizedProps):C!==p?(C===null?b.stateNode!==null&&yd(b.stateNode):Sh(C),p===null?Rm(L,f.type,f.stateNode):uM(L,p,f.memoizedProps)):p===null&&f.stateNode!==null&&FA(f,f.memoizedProps,b.memoizedProps));break}case 27:if(Ri&&C&4&&f.alternate===null){L=f.stateNode;var F=f.memoizedProps;try{wu(L),pM(f.type,F,L,f)}catch(bt){mi(f,f.return,bt)}}case 5:if(qr(p,f),pa(f),C&512&&(hs||b===null||da(b,b.return)),Fs){if(f.flags&32){p=f.stateNode;try{hb(p)}catch(bt){mi(f,f.return,bt)}}C&4&&f.stateNode!=null&&(p=f.memoizedProps,FA(f,p,b!==null?b.memoizedProps:p)),C&1024&&(Sb=!0)}break;case 6:if(qr(p,f),pa(f),C&4&&Fs){if(f.stateNode===null)throw Error(s(162));C=f.memoizedProps,b=b!==null?b.memoizedProps:C,p=f.stateNode;try{j1(p,b,C)}catch(bt){mi(f,f.return,bt)}}break;case 3:if(Fa?(hM(),L=is,is=D0(p.containerInfo),qr(p,f),is=L):qr(p,f),pa(f),C&4){if(Fs&&fr&&b!==null&&b.memoizedState.isDehydrated)try{N2(p.containerInfo)}catch(bt){mi(f,f.return,bt)}if(fo){C=p.containerInfo,b=p.pendingChildren;try{vd(C,b)}catch(bt){mi(f,f.return,bt)}}}Sb&&(Sb=!1,D1(f));break;case 4:Fa?(b=is,is=D0(f.stateNode.containerInfo),qr(p,f),pa(f),is=b):(qr(p,f),pa(f)),C&4&&fo&&r0(f.stateNode,f,f.stateNode.pendingChildren);break;case 12:qr(p,f),pa(f);break;case 13:qr(p,f),pa(f),f.child.flags&8192&&f.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Qr=po()),C&4&&(C=f.updateQueue,C!==null&&(f.updateQueue=null,sc(f,C)));break;case 22:C&512&&(hs||b===null||da(b,b.return)),L=f.memoizedState!==null;var ne=b!==null&&b.memoizedState!==null,ve=El,Re=hs;if(El=ve||L,hs=Re||ne,qr(p,f),hs=Re,El=ve,pa(f),p=f.stateNode,p._current=f,p._visibility&=-3,p._visibility|=p._pendingVisibility&2,C&8192&&(p._visibility=L?p._visibility&-2:p._visibility|1,L&&(p=El||hs,b===null||ne||p||nd(f)),Fs&&(f.memoizedProps===null||f.memoizedProps.mode!=="manual"))){e:if(b=null,Fs)for(p=f;;){if(p.tag===5||Fa&&p.tag===26||Ri&&p.tag===27){if(b===null){ne=b=p;try{F=ne.stateNode,L?K1(F):Z1(ne.stateNode,ne.memoizedProps)}catch(bt){mi(ne,ne.return,bt)}}}else if(p.tag===6){if(b===null){ne=p;try{var at=ne.stateNode;L?J1(at):B2(at,ne.memoizedProps)}catch(bt){mi(ne,ne.return,bt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===f)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break e;for(;p.sibling===null;){if(p.return===null||p.return===f)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}}C&4&&(C=f.updateQueue,C!==null&&(b=C.retryQueue,b!==null&&(C.retryQueue=null,sc(f,b))));break;case 19:qr(p,f),pa(f),C&4&&(C=f.updateQueue,C!==null&&(f.updateQueue=null,sc(f,C)));break;case 21:break;default:qr(p,f),pa(f)}}function pa(f){var p=f.flags;if(p&2){try{if(Fs&&(!Ri||f.tag!==27)){e:{for(var b=f.return;b!==null;){if(HA(b)){var C=b;break e}b=b.return}throw Error(s(160))}switch(C.tag){case 27:if(Ri){var L=C.stateNode,F=lm(f);ic(f,F,L);break}case 5:var ne=C.stateNode;C.flags&32&&(hb(ne),C.flags&=-33);var ve=lm(f);ic(f,ve,ne);break;case 3:case 4:var Re=C.stateNode.containerInfo,at=lm(f);zA(f,at,Re);break;default:throw Error(s(161))}}}catch(bt){mi(f,f.return,bt)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function D1(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var p=f;D1(p),p.tag===5&&p.flags&1024&&S0(p.stateNode),f=f.sibling}}function rc(f,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)a0(f,p.alternate,p),p=p.sibling}function nd(f){for(f=f.child;f!==null;){var p=f;switch(p.tag){case 0:case 11:case 14:case 15:mu(4,p,p.return),nd(p);break;case 1:da(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&fa(p,p.return,b),nd(p);break;case 26:case 27:case 5:da(p,p.return),nd(p);break;case 22:da(p,p.return),p.memoizedState===null&&nd(p);break;default:nd(p)}f=f.sibling}}function ac(f,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var C=p.alternate,L=f,F=p,ne=F.flags;switch(F.tag){case 0:case 11:case 15:ac(L,F,b),om(4,F);break;case 1:if(ac(L,F,b),C=F,L=C.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(at){mi(C,C.return,at)}if(C=F,L=C.updateQueue,L!==null){var ve=C.stateNode;try{var Re=L.shared.hiddenCallbacks;if(Re!==null)for(L.shared.hiddenCallbacks=null,L=0;L<Re.length;L++)_e(Re[L],ve)}catch(at){mi(C,C.return,at)}}b&&ne&64&&w1(F),No(F,F.return);break;case 26:case 27:case 5:ac(L,F,b),b&&C===null&&ne&4&&UA(F),No(F,F.return);break;case 12:ac(L,F,b);break;case 13:ac(L,F,b),b&&ne&4&&o0(L,F);break;case 22:F.memoizedState===null&&ac(L,F,b),No(F,F.return);break;default:ac(L,F,b)}p=p.sibling}}function l0(f,p){var b=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),f=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(f=p.memoizedState.cachePool.pool),f!==b&&(f!=null&&f.refCount++,b!=null&&rm(b))}function um(f,p){f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&rm(f))}function Js(f,p,b,C){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)VA(f,p,b,C),p=p.sibling}function VA(f,p,b,C){var L=p.flags;switch(p.tag){case 0:case 11:case 15:Js(f,p,b,C),L&2048&&om(9,p);break;case 3:Js(f,p,b,C),L&2048&&(f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&rm(f)));break;case 12:if(L&2048){Js(f,p,b,C),f=p.stateNode;try{var F=p.memoizedProps,ne=F.id,ve=F.onPostCommit;typeof ve=="function"&&ve(ne,p.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Re){mi(p,p.return,Re)}}else Js(f,p,b,C);break;case 23:break;case 22:F=p.stateNode,p.memoizedState!==null?F._visibility&4?Js(f,p,b,C):Cr(f,p):F._visibility&4?Js(f,p,b,C):(F._visibility|=4,ur(f,p,b,C,(p.subtreeFlags&10256)!==0)),L&2048&&l0(p.alternate,p);break;case 24:Js(f,p,b,C),L&2048&&um(p.alternate,p);break;default:Js(f,p,b,C)}}function ur(f,p,b,C,L){for(L=L&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var F=f,ne=p,ve=b,Re=C,at=ne.flags;switch(ne.tag){case 0:case 11:case 15:ur(F,ne,ve,Re,L),om(8,ne);break;case 23:break;case 22:var bt=ne.stateNode;ne.memoizedState!==null?bt._visibility&4?ur(F,ne,ve,Re,L):Cr(F,ne):(bt._visibility|=4,ur(F,ne,ve,Re,L)),L&&at&2048&&l0(ne.alternate,ne);break;case 24:ur(F,ne,ve,Re,L),L&&at&2048&&um(ne.alternate,ne);break;default:ur(F,ne,ve,Re,L)}p=p.sibling}}function Cr(f,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=f,C=p,L=C.flags;switch(C.tag){case 22:Cr(b,C),L&2048&&l0(C.alternate,C);break;case 24:Cr(b,C),L&2048&&um(C.alternate,C);break;default:Cr(b,C)}p=p.sibling}}function oo(f){if(f.subtreeFlags&Xa)for(f=f.child;f!==null;)c0(f),f=f.sibling}function c0(f){switch(f.tag){case 26:oo(f),f.flags&Xa&&(f.memoizedState!==null?dM(is,f.memoizedState,f.memoizedProps):Kr(f.type,f.memoizedProps));break;case 5:oo(f),f.flags&Xa&&Kr(f.type,f.memoizedProps);break;case 3:case 4:if(Fa){var p=is;is=D0(f.stateNode.containerInfo),oo(f),is=p}else oo(f);break;case 22:f.memoizedState===null&&(p=f.alternate,p!==null&&p.memoizedState!==null?(p=Xa,Xa=16777216,oo(f),Xa=p):oo(f));break;default:oo(f)}}function hm(f){var p=f.alternate;if(p!==null&&(f=p.child,f!==null)){p.child=null;do p=f.sibling,f.sibling=null,f=p;while(f!==null)}}function vu(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var C=p[b];_n=C,jA(C,f)}hm(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)u0(f),f=f.sibling}function u0(f){switch(f.tag){case 0:case 11:case 15:vu(f),f.flags&2048&&mu(9,f,f.return);break;case 3:vu(f);break;case 12:vu(f);break;case 22:var p=f.stateNode;f.memoizedState!==null&&p._visibility&4&&(f.return===null||f.return.tag!==13)?(p._visibility&=-5,oc(f)):vu(f);break;default:vu(f)}}function oc(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var C=p[b];_n=C,jA(C,f)}hm(f)}for(f=f.child;f!==null;){switch(p=f,p.tag){case 0:case 11:case 15:mu(8,p,p.return),oc(p);break;case 22:b=p.stateNode,b._visibility&4&&(b._visibility&=-5,oc(p));break;default:oc(p)}f=f.sibling}}function jA(f,p){for(;_n!==null;){var b=_n;switch(b.tag){case 0:case 11:case 15:mu(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var C=b.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:rm(b.memoizedState.cache)}if(C=b.child,C!==null)C.return=b,_n=C;else e:for(b=f;_n!==null;){C=_n;var L=C.sibling,F=C.return;if(GA(C),C===b){_n=null;break e}if(L!==null){L.return=F,_n=L;break e}_n=F}}}function id(f){var p=O1(f);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(s(364));return p}if(f=ob(f),f===null)throw Error(s(362));return f.stateNode.current}function yu(f,p){var b=f.tag;switch(p.$$typeof){case Cd:if(f.type===p.value)return!0;break;case yo:e:{for(p=p.value,f=[f,0],b=0;b<f.length;){var C=f[b++],L=C.tag,F=f[b++],ne=p[F];if(L!==5&&L!==26&&L!==27||!md(C)){for(;ne!=null&&yu(C,ne);)F++,ne=p[F];if(F===p.length){p=!0;break e}else for(C=C.child;C!==null;)f.push(C,F),C=C.sibling}}p=!1}return p;case Yi:if((b===5||b===26||b===27)&&z1(f.stateNode,p.value))return!0;break;case Ml:if((b===5||b===6||b===26||b===27)&&(f=H1(f),f!==null&&0<=f.indexOf(p.value)))return!0;break;case Vo:if((b===5||b===26||b===27)&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function XA(f){switch(f.$$typeof){case Cd:return"<"+(a(f.value)||"Unknown")+">";case yo:return":has("+(XA(f)||"")+")";case Yi:return'[role="'+f.value+'"]';case Ml:return'"'+f.value+'"';case Vo:return'[data-testname="'+f.value+'"]';default:throw Error(s(365))}}function ma(f,p){var b=[];f=[f,0];for(var C=0;C<f.length;){var L=f[C++],F=L.tag,ne=f[C++],ve=p[ne];if(F!==5&&F!==26&&F!==27||!md(L)){for(;ve!=null&&yu(L,ve);)ne++,ve=p[ne];if(ne===p.length)b.push(L);else for(L=L.child;L!==null;)f.push(L,ne),L=L.sibling}}return b}function fm(f,p){if(!Cu)throw Error(s(363));f=id(f),f=ma(f,p),p=[],f=Array.from(f);for(var b=0;b<f.length;){var C=f[b++],L=C.tag;if(L===5||L===26||L===27)md(C)||p.push(C.stateNode);else for(C=C.child;C!==null;)f.push(C),C=C.sibling}return p}function As(){if((si&2)!==0&&jn!==0)return jn&-jn;if(dn.T!==null){var f=Ga;return f!==0?f:pt()}return U1()}function qA(){Wa===0&&(Wa=(jn&536870912)===0||ti?U():536870912);var f=ka.current;return f!==null&&(f.flags|=32),Wa}function Zs(f,p,b){(f===vi&&Ei===2||f.cancelPendingCommit!==null)&&(hr(f,0),ga(f,jn,Wa,!1)),G(f,b),((si&2)===0||f!==vi)&&(f===vi&&((si&2)===0&&(bc|=b),Li===4&&ga(f,jn,Wa,!1)),nt(f))}function _u(f,p,b){if((si&6)!==0)throw Error(s(327));var C=!b&&(p&60)===0&&(p&f.expiredLanes)===0||I(f,p),L=C?WA(f,p):f0(f,p,!0),F=C;do{if(L===0){qa&&!C&&ga(f,p,0,!1);break}else if(L===6)ga(f,p,0,!Ao);else{if(b=f.current.alternate,F&&!sd(b)){L=f0(f,p,!1),F=!1;continue}if(L===2){if(F=p,f.errorRecoveryDisabledLanes&F)var ne=0;else ne=f.pendingLanes&-536870913,ne=ne!==0?ne:ne&536870912?536870912:0;if(ne!==0){p=ne;e:{var ve=f;L=Fh;var Re=fr&&ve.current.memoizedState.isDehydrated;if(Re&&(hr(ve,ne).flags|=256),ne=f0(ve,ne,!1),ne!==2){if(Gs&&!Re){ve.errorRecoveryDisabledLanes|=F,bc|=F,L=4;break e}F=fs,fs=L,F!==null&&dm(F)}L=ne}if(F=!1,L!==2)continue}}if(L===1){hr(f,0),ga(f,p,0,!0);break}e:{switch(C=f,L){case 0:case 1:throw Error(s(345));case 4:if((p&4194176)===p){ga(C,p,Wa,!Ao);break e}break;case 2:fs=null;break;case 3:case 5:break;default:throw Error(s(329))}if(C.finishedWork=b,C.finishedLanes=p,(p&62914560)===p&&(F=Qr+300-po(),10<F)){if(ga(C,p,Wa,!Ao),P(C,0)!==0)break e;C.timeoutHandle=Ls(h0.bind(null,C,b,fs,Om,G0,p,Wa,bc,Tl,Ao,2,-0,0),F);break e}h0(C,b,fs,Om,G0,p,Wa,bc,Tl,Ao,0,-0,0)}}break}while(!0);nt(f)}function dm(f){fs===null?fs=f:fs.push.apply(fs,f)}function h0(f,p,b,C,L,F,ne,ve,Re,at,bt,Ut,zt){var An=p.subtreeFlags;if((An&8192||(An&16785408)===16785408)&&(rb(),c0(p),p=Ns(),p!==null)){f.cancelPendingCommit=p(bu.bind(null,f,b,C,L,ne,ve,Re,1,Ut,zt)),ga(f,F,ne,!at);return}bu(f,b,C,L,ne,ve,Re,bt,Ut,zt)}function sd(f){for(var p=f;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var C=0;C<b.length;C++){var L=b[C],F=L.getSnapshot;L=L.value;try{if(!ya(F(),L))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function ga(f,p,b,C){p&=~Pm,p&=~bc,f.suspendedLanes|=p,f.pingedLanes&=~p,C&&(f.warmLanes|=p),C=f.expirationTimes;for(var L=p;0<L;){var F=31-Jr(L),ne=1<<F;C[F]=-1,L&=~ne}b!==0&&se(f,b,p)}function pm(){return(si&6)===0?(re(0),!1):!0}function rd(){if(ln!==null){if(Ei===0)var f=ln.return;else f=ln,ja=ko=null,ft(f),Nu=null,Iu=0,f=ln;for(;f!==null;)C1(f.alternate,f),f=f.return;ln=null}}function hr(f,p){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;b!==Mu&&(f.timeoutHandle=Mu,b0(b)),b=f.cancelPendingCommit,b!==null&&(f.cancelPendingCommit=null,b()),rd(),vi=f,ln=b=co(f.current,null),jn=p,Ei=0,Rr=null,Ao=!1,qa=I(f,p),Gs=!1,Tl=Wa=Pm=bc=Ya=Li=0,fs=Fh=null,G0=!1,(p&8)!==0&&(p|=p&32);var C=f.entangledLanes;if(C!==0)for(f=f.entanglements,C&=p;0<C;){var L=31-Jr(C),F=1<<L;p|=f[L],C&=~F}return Dr=p,$(),b}function Pa(f,p){In=null,dn.H=us,p===Sd?(p=Wt(),Ei=3):p===Nm?(p=Wt(),Ei=4):Ei=p===H0?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Rr=p,ln===null&&(Li=1,Jf(f,de(p,f.current)))}function Au(){var f=ka.current;return f===null?!0:(jn&4194176)===jn?Di===null:(jn&62914560)===jn||(jn&536870912)!==0?f===Di:!1}function dl(){var f=dn.H;return dn.H=us,f===null?us:f}function pl(){var f=dn.A;return dn.A=Td,f}function lc(){Li=4,Ao||(jn&4194176)!==jn&&ka.current!==null||(qa=!0),(Ya&134217727)===0&&(bc&134217727)===0||vi===null||ga(vi,jn,Wa,!1)}function f0(f,p,b){var C=si;si|=2;var L=dl(),F=pl();(vi!==f||jn!==p)&&(Om=null,hr(f,p)),p=!1;var ne=Li;e:do try{if(Ei!==0&&ln!==null){var ve=ln,Re=Rr;switch(Ei){case 8:rd(),ne=6;break e;case 3:case 2:case 6:ka.current===null&&(p=!0);var at=Ei;if(Ei=0,Rr=null,lo(f,ve,Re,at),b&&qa){ne=0;break e}break;default:at=Ei,Ei=0,Rr=null,lo(f,ve,Re,at)}}YA(),ne=Li;break}catch(bt){Pa(f,bt)}while(!0);return p&&f.shellSuspendCounter++,ja=ko=null,si=C,dn.H=L,dn.A=F,ln===null&&(vi=null,jn=0,$()),ne}function YA(){for(;ln!==null;)ns(ln)}function WA(f,p){var b=si;si|=2;var C=dl(),L=pl();vi!==f||jn!==p?(Om=null,wd=po()+500,hr(f,p)):qa=I(f,p);e:do try{if(Ei!==0&&ln!==null){p=ln;var F=Rr;t:switch(Ei){case 1:Ei=0,Rr=null,lo(f,p,F,1);break;case 2:if(tt(F)){Ei=0,Rr=null,hi(p);break}p=function(){Ei===2&&vi===f&&(Ei=7),nt(f)},F.then(p,p);break e;case 3:Ei=7;break e;case 4:Ei=5;break e;case 7:tt(F)?(Ei=0,Rr=null,hi(p)):(Ei=0,Rr=null,lo(f,p,F,7));break;case 5:var ne=null;switch(ln.tag){case 26:ne=ln.memoizedState;case 5:case 27:var ve=ln,Re=ve.type,at=ve.pendingProps;if(ne?Eh(ne):x0(Re,at)){Ei=0,Rr=null;var bt=ve.sibling;if(bt!==null)ln=bt;else{var Ut=ve.return;Ut!==null?(ln=Ut,Oa(Ut)):ln=null}break t}}Ei=0,Rr=null,lo(f,p,F,5);break;case 6:Ei=0,Rr=null,lo(f,p,F,6);break;case 8:rd(),Li=6;break e;default:throw Error(s(462))}}Yr();break}catch(zt){Pa(f,zt)}while(!0);return ja=ko=null,dn.H=C,dn.A=L,si=b,ln!==null?0:(vi=null,jn=0,$(),Li)}function Yr(){for(;ln!==null&&!vM();)ns(ln)}function ns(f){var p=E1(f.alternate,f,Dr);f.memoizedProps=f.pendingProps,p===null?Oa(f):ln=p}function hi(f){var p=f,b=p.alternate;switch(p.tag){case 15:case 0:p=y1(b,p,p.pendingProps,p.type,void 0,jn);break;case 11:p=y1(b,p,p.pendingProps,p.type.render,p.ref,jn);break;case 5:ft(p);default:C1(b,p),p=ln=gm(p,Dr),p=E1(b,p,Dr)}f.memoizedProps=f.pendingProps,p===null?Oa(f):ln=p}function lo(f,p,b,C){ja=ko=null,ft(p),Nu=null,Iu=0;var L=p.return;try{if(E2(f,L,p,b,jn)){Li=1,Jf(f,de(b,f.current)),ln=null;return}}catch(F){if(L!==null)throw ln=L,F;Li=1,Jf(f,de(b,f.current)),ln=null;return}p.flags&32768?(ti||C===1?f=!0:qa||(jn&536870912)!==0?f=!1:(Ao=f=!0,(C===2||C===3||C===6)&&(C=ka.current,C!==null&&C.tag===13&&(C.flags|=16384))),d0(p,f)):Oa(p)}function Oa(f){var p=f;do{if((p.flags&32768)!==0){d0(p,Ao);return}f=p.return;var b=T1(p.alternate,p,Dr);if(b!==null){ln=b;return}if(p=p.sibling,p!==null){ln=p;return}ln=p=f}while(p!==null);Li===0&&(Li=5)}function d0(f,p){do{var b=T2(f.alternate,f);if(b!==null){b.flags&=32767,ln=b;return}if(b=f.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(f=f.sibling,f!==null)){ln=f;return}ln=f=b}while(f!==null);Li=6,ln=null}function bu(f,p,b,C,L,F,ne,ve,Re,at){var bt=dn.T,Ut=pc();try{wr(2),dn.T=null,B1(f,p,b,C,Ut,L,F,ne,ve,Re,at)}finally{dn.T=bt,wr(Ut)}}function B1(f,p,b,C,L,F,ne,ve){do Io();while(Cl!==null);if((si&6)!==0)throw Error(s(327));var Re=f.finishedWork;if(C=f.finishedLanes,Re===null)return null;if(f.finishedWork=null,f.finishedLanes=0,Re===f.current)throw Error(s(177));f.callbackNode=null,f.callbackPriority=0,f.cancelPendingCommit=null;var at=Re.lanes|Re.childLanes;if(at|=zo,oe(f,C,at,F,ne,ve),f===vi&&(ln=vi=null,jn=0),(Re.subtreeFlags&10256)===0&&(Re.flags&10256)===0||jo||(jo=!0,Hu=at,k0=b,uc(P0,function(){return Io(),null})),b=(Re.flags&15990)!==0,(Re.subtreeFlags&15990)!==0||b?(b=dn.T,dn.T=null,F=pc(),wr(2),ne=si,si|=4,cm(f,Re),kA(Re,f),P1(f.containerInfo),f.current=Re,a0(f,Re.alternate,Re),N0(),si=ne,wr(F),dn.T=b):f.current=Re,jo?(jo=!1,Cl=f,Hh=C):KA(f,at),at=f.pendingLanes,at===0&&(Fu=null),z(Re.stateNode),nt(f),p!==null)for(L=f.onRecoverableError,Re=0;Re<p.length;Re++)at=p[Re],L(at.value,{componentStack:at.stack});return(Hh&3)!==0&&Io(),at=f.pendingLanes,(C&4194218)!==0&&(at&42)!==0?f===V0?Rd++:(Rd=0,V0=f):Rd=0,re(0),null}function KA(f,p){(f.pooledCacheLanes&=p)===0&&(p=f.pooledCache,p!=null&&(f.pooledCache=null,rm(p)))}function Io(){if(Cl!==null){var f=Cl,p=Hu;Hu=0;var b=ue(Hh),C=32>b?32:b;b=dn.T;var L=pc();try{if(wr(C),dn.T=null,Cl===null)var F=!1;else{C=k0,k0=null;var ne=Cl,ve=Hh;if(Cl=null,Hh=0,(si&6)!==0)throw Error(s(331));var Re=si;if(si|=4,u0(ne.current),VA(ne,ne.current,ve,C),si=Re,re(0,!1),va&&typeof va.onPostCommitFiberRoot=="function")try{va.onPostCommitFiberRoot(Ss,ne)}catch{}F=!0}return F}finally{wr(L),dn.T=b,KA(f,p)}}return!1}function ad(f,p,b){p=de(b,p),p=Qf(f.stateNode,p,2),f=Lt(f,p,2),f!==null&&(G(f,2),nt(f))}function mi(f,p,b){if(f.tag===3)ad(f,f,b);else for(;p!==null;){if(p.tag===3){ad(p,f,b);break}else if(p.tag===1){var C=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Fu===null||!Fu.has(C))){f=de(b,f),b=wA(2),C=Lt(p,b,2),C!==null&&(d1(b,C,p,f),G(C,2),nt(C));break}}p=p.return}}function bh(f,p,b){var C=f.pingCache;if(C===null){C=f.pingCache=new _o;var L=new Set;C.set(p,L)}else L=C.get(p),L===void 0&&(L=new Set,C.set(p,L));L.has(b)||(Gs=!0,L.add(b),f=JA.bind(null,f,p,b),p.then(f,f))}function JA(f,p,b){var C=f.pingCache;C!==null&&C.delete(p),f.pingedLanes|=f.suspendedLanes&b,f.warmLanes&=~b,vi===f&&(jn&b)===b&&(Li===4||Li===3&&(jn&62914560)===jn&&300>po()-Qr?(si&2)===0&&hr(f,0):Pm|=b,Tl===jn&&(Tl=0)),nt(f)}function xu(f,p){p===0&&(p=N()),f=ke(f,p),f!==null&&(G(f,p),nt(f))}function cc(f){var p=f.memoizedState,b=0;p!==null&&(b=p.retryLane),xu(f,b)}function Su(f,p){var b=0;switch(f.tag){case 13:var C=f.stateNode,L=f.memoizedState;L!==null&&(b=L.retryLane);break;case 19:C=f.stateNode;break;case 22:C=f.stateNode._retryCache;break;default:throw Error(s(314))}C!==null&&C.delete(p),xu(f,b)}function uc(f,p){return Dm(f,p)}function ZA(f,p,b,C){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mm(f){return f=f.prototype,!(!f||!f.isReactComponent)}function co(f,p){var b=f.alternate;return b===null?(b=t(f.tag,p,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=p,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&31457280,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,p=f.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b.refCleanup=f.refCleanup,b}function gm(f,p){f.flags&=31457282;var b=f.alternate;return b===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=b.childLanes,f.lanes=b.lanes,f.child=b.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=b.memoizedProps,f.memoizedState=b.memoizedState,f.updateQueue=b.updateQueue,f.type=b.type,p=b.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),f}function ml(f,p,b,C,L,F){var ne=0;if(C=f,typeof f=="function")mm(f)&&(ne=1);else if(typeof f=="string")ne=Fa&&Ri?Cm(f,b,Hs.current)?26:vl(f)?27:5:Fa?Cm(f,b,Hs.current)?26:5:Ri&&vl(f)?27:5;else e:switch(f){case Eu:return cs(b.children,L,F,p);case Am:ne=8,L|=24;break;case v0:return f=t(12,b,p,L|2),f.elementType=v0,f.lanes=F,f;case y0:return f=t(13,b,p,L),f.elementType=y0,f.lanes=F,f;case ud:return f=t(19,b,p,L),f.elementType=ud,f.lanes=F,f;case eb:return vm(b,L,F,p);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case bm:case Po:ne=10;break e;case $A:ne=9;break e;case xm:ne=11;break e;case _0:ne=14;break e;case ho:ne=16,C=null;break e}ne=29,b=Error(s(130,f===null?"null":typeof f,"")),C=null}return p=t(ne,b,p,L),p.elementType=f,p.type=C,p.lanes=F,p}function cs(f,p,b,C){return f=t(7,f,C,p),f.lanes=b,f}function vm(f,p,b,C){f=t(22,f,C,p),f.elementType=eb,f.lanes=b;var L={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var F=L._current;if(F===null)throw Error(s(456));if((L._pendingVisibility&2)===0){var ne=ke(F,2);ne!==null&&(L._pendingVisibility|=2,Zs(ne,F,2))}},attach:function(){var F=L._current;if(F===null)throw Error(s(456));if((L._pendingVisibility&2)!==0){var ne=ke(F,2);ne!==null&&(L._pendingVisibility&=-3,Zs(ne,F,2))}}};return f.stateNode=L,f}function p0(f,p,b){return f=t(6,f,null,p),f.lanes=b,f}function QA(f,p,b){return p=t(4,f.children!==null?f.children:[],f.key,p),p.lanes=b,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}function C2(f,p,b,C,L,F,ne,ve){this.tag=1,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Mu,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=O(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O(0),this.hiddenUpdates=O(null),this.identifierPrefix=C,this.onUncaughtError=L,this.onCaughtError=F,this.onRecoverableError=ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ve,this.incompleteTransitions=new Map}function L1(f,p,b,C,L,F,ne,ve,Re,at,bt,Ut){return f=new C2(f,p,b,ne,ve,Re,at,Ut),p=1,F===!0&&(p|=24),F=t(3,null,null,p),f.current=F,F.stateNode=f,p=pu(),p.refCount++,f.pooledCache=p,p.refCount++,F.memoizedState={element:C,isDehydrated:b,cache:p},dt(F),f}function Bs(f){return f?(f=Du,f):Du}function m0(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(s(188)):(f=Object.keys(f).join(","),Error(s(268,f)));return f=y(p),f=f!==null?A(f):null,f===null?null:dd(f.stateNode)}function od(f,p,b,C,L,F){L=Bs(L),C.context===null?C.context=L:C.pendingContext=L,C=Ot(p),C.payload={element:b},F=F===void 0?null:F,F!==null&&(C.callback=F),b=Lt(f,C,p),b!==null&&(Zs(b,f,p),Et(b,f,p))}function ld(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<p?b:p}}function ym(f,p){ld(f,p),(f=f.alternate)&&ld(f,p)}var Mn={},cd=lA(),Ua=Fee(),g0=Object.assign,w2=Symbol.for("react.element"),_m=Symbol.for("react.transitional.element"),uo=Symbol.for("react.portal"),Eu=Symbol.for("react.fragment"),Am=Symbol.for("react.strict_mode"),v0=Symbol.for("react.profiler"),bm=Symbol.for("react.provider"),$A=Symbol.for("react.consumer"),Po=Symbol.for("react.context"),xm=Symbol.for("react.forward_ref"),y0=Symbol.for("react.suspense"),ud=Symbol.for("react.suspense_list"),_0=Symbol.for("react.memo"),ho=Symbol.for("react.lazy"),eb=Symbol.for("react.offscreen"),N1=Symbol.for("react.memo_cache_sentinel"),hc=Symbol.iterator,tb=Symbol.for("react.client.reference"),dn=cd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gl,fc,xh=!1,hd=Array.isArray,nb=e.rendererVersion,Sm=e.rendererPackageName,fd=e.extraDevToolsConfig,dd=e.getPublicInstance,I1=e.getRootHostContext,pd=e.getChildHostContext,A0=e.prepareForCommit,P1=e.resetAfterCommit,ib=e.createInstance,Em=e.appendInitialChild,dc=e.finalizeInitialChildren,Tn=e.shouldSetTextContent,xi=e.createTextInstance,Ls=e.scheduleTimeout,b0=e.cancelTimeout,Mu=e.noTimeout,Wr=e.isPrimaryRenderer;e.warnsIfNotActing;var Fs=e.supportsMutation,fo=e.supportsPersistence,fr=e.supportsHydration,O1=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var bs=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var wr=e.setCurrentUpdatePriority,pc=e.getCurrentUpdatePriority,U1=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var F1=e.shouldAttemptEagerTransition,R2=e.detachDeletedInstance;e.requestPostPaintCallback;var sb=e.maySuspendCommit,x0=e.preloadInstance,rb=e.startSuspendingCommit,Kr=e.suspendInstance,Ns=e.waitForCommitToBeReady,Tu=e.NotPendingTransition,Oo=e.HostTransitionContext,S0=e.resetFormInstance;e.bindToConsole;var ab=e.supportsMicrotasks,mc=e.scheduleMicrotask,Cu=e.supportsTestSelectors,ob=e.findFiberRoot,lb=e.getBoundingRect,H1=e.getTextContent,md=e.isHiddenSubtree,z1=e.matchAccessibilityRole,G1=e.setFocusIfFocusable,k1=e.setupIntersectionObserver,V1=e.appendChild,cb=e.appendChildToContainer,j1=e.commitTextUpdate,D2=e.commitMount,X1=e.commitUpdate,q1=e.insertBefore,Y1=e.insertInContainerBefore,ub=e.removeChild,W1=e.removeChildFromContainer,hb=e.resetTextContent,K1=e.hideInstance,J1=e.hideTextInstance,Z1=e.unhideInstance,B2=e.unhideTextInstance,Q1=e.clearContainer,gd=e.cloneInstance,Mm=e.createContainerChildSet,fb=e.appendChildToContainerChildSet,E0=e.finalizeContainerChildren,vd=e.replaceContainerChildren,db=e.cloneHiddenInstance,pb=e.cloneHiddenTextInstance,M0=e.isSuspenseInstancePending,T0=e.isSuspenseInstanceFallback,$1=e.getSuspenseInstanceFallbackErrorDetails,eM=e.registerSuspenseInstanceRetry,mb=e.canHydrateFormStateMarker,tM=e.isFormStateMarkerMatching,gb=e.getNextHydratableSibling,C0=e.getFirstHydratableChild,nM=e.getFirstHydratableChildWithinContainer,iM=e.getFirstHydratableChildWithinSuspenseInstance,L2=e.canHydrateInstance,vb=e.canHydrateTextInstance,sM=e.canHydrateSuspenseInstance,rM=e.hydrateInstance,yb=e.hydrateTextInstance,aM=e.hydrateSuspenseInstance,oM=e.getNextHydratableInstanceAfterSuspenseInstance,N2=e.commitHydratedContainer,I2=e.commitHydratedSuspenseInstance,lM=e.clearSuspenseBoundary,Tm=e.clearSuspenseBoundaryFromContainer,w0=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var R0=e.validateHydratableInstance,cM=e.validateHydratableTextInstance,Fa=e.supportsResources,Cm=e.isHostHoistableType,D0=e.getHoistableRoot,_b=e.getResource,uM=e.acquireResource,Sh=e.releaseResource,wm=e.hydrateHoistable,Rm=e.mountHoistable,yd=e.unmountHoistable,B0=e.createHoistableInstance,hM=e.prepareToCommitHoistables,fM=e.mayResourceSuspendCommit,Eh=e.preloadResource,dM=e.suspendResource,Ri=e.supportsSingletons,Uo=e.resolveSingletonInstance,wu=e.clearSingleton,pM=e.acquireSingletonInstance,Ru=e.releaseSingletonInstance,vl=e.isHostSingletonType,xs=[],gc=-1,Du={},Jr=Math.clz32?Math.clz32:R,mM=Math.log,gM=Math.LN2,yl=128,Mh=4194304,Dm=Ua.unstable_scheduleCallback,L0=Ua.unstable_cancelCallback,vM=Ua.unstable_shouldYield,N0=Ua.unstable_requestPaint,po=Ua.unstable_now,I0=Ua.unstable_ImmediatePriority,yM=Ua.unstable_UserBlockingPriority,P0=Ua.unstable_NormalPriority,P2=Ua.unstable_IdlePriority,_M=Ua.log,Qs=Ua.unstable_setDisableYieldValue,Ss=null,va=null,ya=typeof Object.is=="function"?Object.is:Q,Ab=new WeakMap,Th=[],Ch=0,wh=null,_d=0,Ha=[],za=0,Bu=null,Fo=1,Ho="",Hs=M(null),Ad=M(null),_l=M(null),Rh=M(null),dr=null,pr=null,ti=!1,mo=null,$s=!1,Bm=Error(s(519)),go=[],Dh=0,zo=0,Lm=null,vc=null,Bh=!1,Fi=!1,bb=!1,bd=0,xd=null,Lh=0,Ga=0,Nh=null,yc=!1,Ih=!1,Al=Object.prototype.hasOwnProperty,Sd=Error(s(460)),Nm=Error(s(474)),Im={then:function(){}},Lu=null,Nu=null,Iu=0,Pu=Ui(!0),bl=Ui(!1),Hi=M(null),Ed=M(0),ka=M(null),Di=null,zs=M(0),_c=0,In=null,an=null,ii=null,vo=!1,Ph=!1,Ou=!1,O0=0,Oh=0,er=null,Go=0,U0=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},us={readContext:lr,use:ge,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useLayoutEffect:pi,useInsertionEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useSyncExternalStore:pi,useId:pi};us.useCacheRefresh=pi,us.useMemoCache=pi,us.useHostTransitionStatus=pi,us.useFormState=pi,us.useActionState=pi,us.useOptimistic=pi;var Uu={readContext:lr,use:ge,useCallback:function(f,p){return X().memoizedState=[f,p===void 0?null:p],f},useContext:lr,useEffect:Wv,useImperativeHandle:function(f,p,b){b=b!=null?b.concat([f]):null,Yp(4194308,4,Kv.bind(null,p,f),b)},useLayoutEffect:function(f,p){return Yp(4194308,4,f,p)},useInsertionEffect:function(f,p){Yp(4,2,f,p)},useMemo:function(f,p){var b=X();p=p===void 0?null:p;var C=f();if(Ou){K(!0);try{f()}finally{K(!1)}}return b.memoizedState=[C,p],C},useReducer:function(f,p,b){var C=X();if(b!==void 0){var L=b(p);if(Ou){K(!0);try{b(p)}finally{K(!1)}}}else L=p;return C.memoizedState=C.baseState=L,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:L},C.queue=f,f=f.dispatch=Zv.bind(null,In,f),[C.memoizedState,f]},useRef:function(f){var p=X();return f={current:f},p.memoizedState=f},useState:function(f){f=Vt(f);var p=f.queue,b=CA.bind(null,In,p);return p.dispatch=b,[f.memoizedState,b]},useDebugValue:cu,useDeferredValue:function(f,p){var b=X();return Jp(b,f,p)},useTransition:function(){var f=Vt(!1);return f=Xf.bind(null,In,f.queue,!0,!1),X().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,p,b){var C=In,L=X();if(ti){if(b===void 0)throw Error(s(407));b=b()}else{if(b=p(),vi===null)throw Error(s(349));(jn&60)!==0||Ct(C,p,b)}L.memoizedState=b;var F={value:b,getSnapshot:p};return L.queue=F,Wv(en.bind(null,C,F,f),[f]),C.flags|=2048,jr(9,It.bind(null,C,F,b,p),{destroy:void 0},null),b},useId:function(){var f=X(),p=vi.identifierPrefix;if(ti){var b=Ho,C=Fo;b=(C&~(1<<32-Jr(C)-1)).toString(32)+b,p=":"+p+"R"+b,b=O0++,0<b&&(p+="H"+b.toString(32)),p+=":"}else b=Go++,p=":"+p+"r"+b.toString(32)+":";return f.memoizedState=p},useCacheRefresh:function(){return X().memoizedState=TA.bind(null,In)}};Uu.useMemoCache=Ee,Uu.useHostTransitionStatus=Zp,Uu.useFormState=Dn,Uu.useActionState=Dn,Uu.useOptimistic=function(f){var p=X();p.memoizedState=p.baseState=f;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=Yf.bind(null,In,!0,b),b.dispatch=p,[f,p]};var Zr={readContext:lr,use:ge,useCallback:yh,useContext:lr,useEffect:SA,useImperativeHandle:Jv,useInsertionEffect:h1,useLayoutEffect:Kp,useMemo:EA,useReducer:Ze,useRef:hl,useState:function(){return Ze(Ne)},useDebugValue:cu,useDeferredValue:function(f,p){var b=ce();return MA(b,an.memoizedState,f,p)},useTransition:function(){var f=Ze(Ne)[0],p=ce().memoizedState;return[typeof f=="boolean"?f:me(f),p]},useSyncExternalStore:Nt,useId:qf};Zr.useCacheRefresh=$l,Zr.useMemoCache=Ee,Zr.useHostTransitionStatus=Zp,Zr.useFormState=qi,Zr.useActionState=qi,Zr.useOptimistic=function(f,p){var b=ce();return Qt(b,an,f,p)};var Va={readContext:lr,use:ge,useCallback:yh,useContext:lr,useEffect:SA,useImperativeHandle:Jv,useInsertionEffect:h1,useLayoutEffect:Kp,useMemo:EA,useReducer:ht,useRef:hl,useState:function(){return ht(Ne)},useDebugValue:cu,useDeferredValue:function(f,p){var b=ce();return an===null?Jp(b,f,p):MA(b,an.memoizedState,f,p)},useTransition:function(){var f=ht(Ne)[0],p=ce().memoizedState;return[typeof f=="boolean"?f:me(f),p]},useSyncExternalStore:Nt,useId:qf};Va.useCacheRefresh=$l,Va.useMemoCache=Ee,Va.useHostTransitionStatus=Zp,Va.useFormState=Ks,Va.useActionState=Ks,Va.useOptimistic=function(f,p){var b=ce();return an!==null?Qt(b,an,f,p):(b.baseState=f,[f,b.queue.dispatch])};var xl={isMounted:function(f){return(f=f._reactInternals)?m(f)===f:!1},enqueueSetState:function(f,p,b){f=f._reactInternals;var C=As(),L=Ot(C);L.payload=p,b!=null&&(L.callback=b),p=Lt(f,L,C),p!==null&&(Zs(p,f,C),Et(p,f,C))},enqueueReplaceState:function(f,p,b){f=f._reactInternals;var C=As(),L=Ot(C);L.tag=1,L.payload=p,b!=null&&(L.callback=b),p=Lt(f,L,C),p!==null&&(Zs(p,f,C),Et(p,f,C))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var b=As(),C=Ot(b);C.tag=2,p!=null&&(C.callback=p),p=Lt(f,C,b),p!==null&&(Zs(p,f,b),Et(p,f,b))}},F0=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},H0=Error(s(461)),Bi=!1,z0={dehydrated:null,treeContext:null,retryLane:0},Ac=M(null),ko=null,ja=null,Md=typeof AbortController<"u"?AbortController:function(){var f=[],p=this.signal={aborted:!1,addEventListener:function(b,C){f.push(C)}};this.abort=function(){p.aborted=!0,f.forEach(function(b){return b()})}},AM=Ua.unstable_scheduleCallback,bM=Ua.unstable_NormalPriority,zi={$$typeof:Po,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},xb=dn.S;dn.S=function(f,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&vt(f,p),xb!==null&&xb(f,p)};var Sl=M(null),El=!1,hs=!1,Sb=!1,gi=typeof WeakSet=="function"?WeakSet:Set,_n=null,zn=!1,tn=null,Bn=!1,is=null,Xa=8192,Td={getCacheForType:function(f){var p=lr(zi),b=p.data.get(f);return b===void 0&&(b=f(),p.data.set(f,b)),b}},Cd=0,yo=1,Yi=2,Vo=3,Ml=4;if(typeof Symbol=="function"&&Symbol.for){var Uh=Symbol.for;Cd=Uh("selector.component"),yo=Uh("selector.has_pseudo_class"),Yi=Uh("selector.role"),Vo=Uh("selector.test_id"),Ml=Uh("selector.text")}var _o=typeof WeakMap=="function"?WeakMap:Map,si=0,vi=null,ln=null,jn=0,Ei=0,Rr=null,Ao=!1,qa=!1,Gs=!1,Dr=0,Li=0,Ya=0,bc=0,Pm=0,Wa=0,Tl=0,Fh=null,fs=null,G0=!1,Qr=0,wd=1/0,Om=null,Fu=null,jo=!1,Cl=null,Hh=0,Hu=0,k0=null,Rd=0,V0=null;return Mn.attemptContinuousHydration=function(f){if(f.tag===13){var p=ke(f,67108864);p!==null&&Zs(p,f,67108864),ym(f,67108864)}},Mn.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var p=As(),b=ke(f,p);b!==null&&Zs(b,f,p),ym(f,p)}},Mn.attemptSynchronousHydration=function(f){switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var p=D(f.pendingLanes);if(p!==0){for(f.pendingLanes|=2,f.entangledLanes|=2;p;){var b=1<<31-Jr(p);f.entanglements[1]|=b,p&=~b}nt(f),(si&6)===0&&(wd=po()+500,re(0))}}break;case 13:p=ke(f,2),p!==null&&Zs(p,f,2),pm(),ym(f,2)}},Mn.batchedUpdates=function(f,p){return f(p)},Mn.createComponentSelector=function(f){return{$$typeof:Cd,value:f}},Mn.createContainer=function(f,p,b,C,L,F,ne,ve,Re,at){return L1(f,p,!1,null,b,C,F,ne,ve,Re,at,null)},Mn.createHasPseudoClassSelector=function(f){return{$$typeof:yo,value:f}},Mn.createHydrationContainer=function(f,p,b,C,L,F,ne,ve,Re,at,bt,Ut,zt){return f=L1(b,C,!0,f,L,F,ve,Re,at,bt,Ut,zt),f.context=Bs(null),b=f.current,C=As(),L=Ot(C),L.callback=p??null,Lt(b,L,C),f.current.lanes=C,G(f,C),nt(f),f},Mn.createPortal=function(f,p,b){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uo,key:C==null?null:""+C,children:f,containerInfo:p,implementation:b}},Mn.createRoleSelector=function(f){return{$$typeof:Yi,value:f}},Mn.createTestNameSelector=function(f){return{$$typeof:Vo,value:f}},Mn.createTextSelector=function(f){return{$$typeof:Ml,value:f}},Mn.defaultOnCaughtError=function(f){console.error(f)},Mn.defaultOnRecoverableError=function(f){F0(f)},Mn.defaultOnUncaughtError=function(f){F0(f)},Mn.deferredUpdates=function(f){var p=dn.T,b=pc();try{return wr(32),dn.T=null,f()}finally{wr(b),dn.T=p}},Mn.discreteUpdates=function(f,p,b,C,L){var F=dn.T,ne=pc();try{return wr(2),dn.T=null,f(p,b,C,L)}finally{wr(ne),dn.T=F,si===0&&(wd=po()+500)}},Mn.findAllNodes=fm,Mn.findBoundingRects=function(f,p){if(!Cu)throw Error(s(363));p=fm(f,p),f=[];for(var b=0;b<p.length;b++)f.push(lb(p[b]));for(p=f.length-1;0<p;p--){b=f[p];for(var C=b.x,L=C+b.width,F=b.y,ne=F+b.height,ve=p-1;0<=ve;ve--)if(p!==ve){var Re=f[ve],at=Re.x,bt=at+Re.width,Ut=Re.y,zt=Ut+Re.height;if(C>=at&&F>=Ut&&L<=bt&&ne<=zt){f.splice(p,1);break}else if(C!==at||b.width!==Re.width||zt<F||Ut>ne){if(!(F!==Ut||b.height!==Re.height||bt<C||at>L)){at>C&&(Re.width+=at-C,Re.x=C),bt<L&&(Re.width=L-at),f.splice(p,1);break}}else{Ut>F&&(Re.height+=Ut-F,Re.y=F),zt<ne&&(Re.height=ne-Ut),f.splice(p,1);break}}}return f},Mn.findHostInstance=m0,Mn.findHostInstanceWithNoPortals=function(f){return f=y(f),f=f!==null?E(f):null,f===null?null:dd(f.stateNode)},Mn.findHostInstanceWithWarning=function(f){return m0(f)},Mn.flushPassiveEffects=Io,Mn.flushSyncFromReconciler=function(f){var p=si;si|=1;var b=dn.T,C=pc();try{if(wr(2),dn.T=null,f)return f()}finally{wr(C),dn.T=b,si=p,(si&6)===0&&re(0)}},Mn.flushSyncWork=pm,Mn.focusWithin=function(f,p){if(!Cu)throw Error(s(363));for(f=id(f),p=ma(f,p),p=Array.from(p),f=0;f<p.length;){var b=p[f++],C=b.tag;if(!md(b)){if((C===5||C===26||C===27)&&G1(b.stateNode))return!0;for(b=b.child;b!==null;)p.push(b),b=b.sibling}}return!1},Mn.getFindAllNodesFailureDescription=function(f,p){if(!Cu)throw Error(s(363));var b=0,C=[];f=[id(f),0];for(var L=0;L<f.length;){var F=f[L++],ne=F.tag,ve=f[L++],Re=p[ve];if((ne!==5&&ne!==26&&ne!==27||!md(F))&&(yu(F,Re)&&(C.push(XA(Re)),ve++,ve>b&&(b=ve)),ve<p.length))for(F=F.child;F!==null;)f.push(F,ve),F=F.sibling}if(b<p.length){for(f=[];b<p.length;b++)f.push(XA(p[b]));return`findAllNodes was able to match part of the selector:
  `+(C.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},Mn.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 27:case 5:return dd(f.child.stateNode);default:return f.child.stateNode}},Mn.injectIntoDevTools=function(){var f={bundleType:0,version:nb,rendererPackageName:Sm,currentDispatcherRef:dn,findFiberByHostInstance:O1,reconcilerVersion:"19.0.0"};if(fd!==null&&(f.rendererConfig=fd),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)f=!0;else{try{Ss=p.inject(f),va=p}catch{}f=!!p.checkDCE}}return f},Mn.isAlreadyRendering=function(){return!1},Mn.observeVisibleRects=function(f,p,b,C){if(!Cu)throw Error(s(363));f=fm(f,p);var L=k1(f,b,C).disconnect;return{disconnect:function(){L()}}},Mn.shouldError=function(){return null},Mn.shouldSuspend=function(){return!1},Mn.startHostTransition=function(f,p,b,C){if(f.tag!==5)throw Error(s(476));var L=fl(f).queue;Xf(f,L,p,Tu,b===null?n:function(){var F=fl(f).next.queue;return uu(f,F,{},As()),b(C)})},Mn.updateContainer=function(f,p,b,C){var L=p.current,F=As();return od(L,F,f,p,b,C),F},Mn.updateContainerSync=function(f,p,b,C){return p.tag===0&&Io(),od(p.current,2,f,p,b,C),2},Mn},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(vB)),vB.exports}var RF;function zee(){return RF||(RF=1,gB.exports=Hee()),gB.exports}var Gee=zee();const kee=PE(Gee);var AB={exports:{}},bB={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DF;function Vee(){return DF||(DF=1,function(i){function e(z,K){var Q=z.length;z.push(K);e:for(;0<Q;){var de=Q-1>>>1,W=z[de];if(0<s(W,K))z[de]=K,z[Q]=W,Q=de;else break e}}function t(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var K=z[0],Q=z.pop();if(Q!==K){z[0]=Q;e:for(var de=0,W=z.length,he=W>>>1;de<he;){var xe=2*(de+1)-1,ye=z[xe],fe=xe+1,De=z[fe];if(0>s(ye,Q))fe<W&&0>s(De,ye)?(z[de]=De,z[fe]=Q,de=fe):(z[de]=ye,z[xe]=Q,de=xe);else if(fe<W&&0>s(De,Q))z[de]=De,z[fe]=Q,de=fe;else break e}}return K}function s(z,K){var Q=z.sortIndex-K.sortIndex;return Q!==0?Q:z.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var c=[],h=[],d=1,m=null,v=3,y=!1,A=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function R(z){for(var K=t(h);K!==null;){if(K.callback===null)n(h);else if(K.startTime<=z)n(h),K.sortIndex=K.expirationTime,e(c,K);else break;K=t(h)}}function D(z){if(E=!1,R(z),!A)if(t(c)!==null)A=!0,le();else{var K=t(h);K!==null&&ue(D,K.startTime-z)}}var P=!1,I=-1,H=5,U=-1;function N(){return!(i.unstable_now()-U<H)}function O(){if(P){var z=i.unstable_now();U=z;var K=!0;try{e:{A=!1,E&&(E=!1,x(I),I=-1),y=!0;var Q=v;try{t:{for(R(z),m=t(c);m!==null&&!(m.expirationTime>z&&N());){var de=m.callback;if(typeof de=="function"){m.callback=null,v=m.priorityLevel;var W=de(m.expirationTime<=z);if(z=i.unstable_now(),typeof W=="function"){m.callback=W,R(z),K=!0;break t}m===t(c)&&n(c),R(z)}else n(c);m=t(c)}if(m!==null)K=!0;else{var he=t(h);he!==null&&ue(D,he.startTime-z),K=!1}}break e}finally{m=null,v=Q,y=!1}K=void 0}}finally{K?G():P=!1}}}var G;if(typeof w=="function")G=function(){w(O)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,se=oe.port2;oe.port1.onmessage=O,G=function(){se.postMessage(null)}}else G=function(){M(O,0)};function le(){P||(P=!0,G())}function ue(z,K){I=M(function(){z(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){A||y||(A=!0,le())},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(z){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var Q=v;v=K;try{return z()}finally{v=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=v;v=z;try{return K()}finally{v=Q}},i.unstable_scheduleCallback=function(z,K,Q){var de=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?de+Q:de):Q=de,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Q+W,z={id:d++,callback:K,priorityLevel:z,startTime:Q,expirationTime:W,sortIndex:-1},Q>de?(z.sortIndex=Q,e(h,z),t(c)===null&&z===t(h)&&(E?(x(I),I=-1):E=!0,ue(D,Q-de))):(z.sortIndex=W,e(c,z),A||y||(A=!0,le())),z},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(z){var K=v;return function(){var Q=v;v=K;try{return z.apply(this,arguments)}finally{v=Q}}}}(bB)),bB}var BF;function jee(){return BF||(BF=1,AB.exports=Vee()),AB.exports}var LF=jee();const Xee=i=>typeof i=="object"&&typeof i.then=="function",vg=[];function Rk(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let s=0;s<n;s++)if(!t(i[s],e[s]))return!1;return!0}function Dk(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const r of vg)if(Rk(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!t)throw r.promise}const s={keys:e,equal:n.equal,remove:()=>{const r=vg.indexOf(s);r!==-1&&vg.splice(r,1)},promise:(Xee(i)?i:i(...e)).then(r=>{s.response=r,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(r=>s.error=r)};if(vg.push(s),!t)throw s.promise}const qee=(i,e,t)=>Dk(i,e,!1,t),Yee=(i,e,t)=>void Dk(i,e,!0,t),Wee=i=>{if(i===void 0||i.length===0)vg.splice(0,vg.length);else{const e=vg.find(t=>Rk(i,t.keys,t.equal));e&&e.remove()}};function _3(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const s=_3(n,e,t);if(s)return s;n=e?null:n.sibling}}function Bk(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const A3=Bk(V.createContext(null));class Lk extends V.Component{render(){return V.createElement(A3.Provider,{value:this._reactInternals},this.props.children)}}function Nk(){const i=V.useContext(A3);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=V.useId();return V.useMemo(()=>{for(const t of[i,i==null?void 0:i.alternate]){if(!t)continue;const n=_3(t,!1,s=>{let r=s.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(n)return n}},[i,e])}const Kee=Symbol.for("react.context"),Jee=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===Kee;function Zee(){const i=Nk(),[e]=V.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;Jee(n)&&n!==A3&&!e.has(n)&&e.set(n,V.use(Bk(n))),t=t.return}return e}function Qee(){const i=Zee();return V.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>V.createElement(e,null,V.createElement(t.Provider,{...n,value:i.get(t)})),e=>V.createElement(Lk,{...e})),[i])}function Ik(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Pk=i=>i&&i.isOrthographicCamera,$ee=i=>i&&i.hasOwnProperty("current"),ete=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),e1=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?V.useLayoutEffect:V.useEffect;function b3(i){const e=V.useRef(i);return e1(()=>void(e.current=i),[i]),e}function tte(){const i=Nk(),e=Qee();return V.useMemo(()=>({children:t})=>{const s=!!_3(i,!0,r=>r.type===V.StrictMode)?V.StrictMode:V.Fragment;return q.jsx(s,{children:q.jsx(e,{children:t})})},[i,e])}function nte({set:i}){return e1(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const ite=(i=>(i=class extends V.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function Ok(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function yy(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const ps={obj:i=>i===Object(i)&&!ps.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(ps.str(i)||ps.num(i)||ps.boo(i))return i===e;const r=ps.obj(i);if(r&&n==="reference")return i===e;const a=ps.arr(i);if(a&&t==="reference")return i===e;if((a||r)&&i===e)return!0;let o;for(o in i)if(!(o in e))return!1;if(r&&t==="shallow"&&n==="shallow"){for(o in s?e:i)if(!ps.equ(i[o],e[o],{strict:s,objects:"reference"}))return!1}else for(o in s?e:i)if(i[o]!==e[o])return!1;if(ps.und(o)){if(a&&i.length===0&&e.length===0||r&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function ste(i){const e={nodes:{},materials:{},meshes:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function rte(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const Uk=["children","key","ref"];function ate(i){const e={};for(const t in i)Uk.includes(t)||(e[t]=i[t]);return e}function xw(i,e,t,n){const s=i;let r=s==null?void 0:s.__r3f;return r||(r={root:e,type:t,parent:null,children:[],props:ate(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=r)),r}function lS(i,e){let t=i[e];if(!e.includes("-"))return{root:i,key:e,target:t};t=i;for(const s of e.split("-")){var n;e=s,i=t,t=(n=t)==null?void 0:n[e]}return{root:i,key:e,target:t}}const NF=/-\d+$/;function Sw(i,e){if(ps.str(e.props.attach)){if(NF.test(e.props.attach)){const s=e.props.attach.replace(NF,""),{root:r,key:a}=lS(i.object,s);Array.isArray(r[a])||(r[a]=[])}const{root:t,key:n}=lS(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else ps.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function Ew(i,e){if(ps.str(e.props.attach)){const{root:t,key:n}=lS(i.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[n]:t[n]=s}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const SL=[...Uk,"args","dispose","attach","object","onUpdate","dispose"],IF=new Map;function ote(i){let e=IF.get(i.constructor);try{e||(e=new i.constructor,IF.set(i.constructor,e))}catch{}return e}function lte(i,e){const t={};for(const n in e)if(!SL.includes(n)&&!ps.equ(e[n],i.props[n])){t[n]=e[n];for(const s in e)s.startsWith(`${n}-`)&&(t[s]=e[s])}for(const n in i.props){if(SL.includes(n)||e.hasOwnProperty(n))continue;const{root:s,key:r}=lS(i.object,n);if(s.constructor&&s.constructor.length===0){const a=ote(s);ps.und(a)||(t[r]=a[r])}else t[r]=0}return t}const cte=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],ute=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Wc(i,e){var t;const n=i.__r3f,s=n&&Ik(n).getState(),r=n==null?void 0:n.eventCount;for(const o in e){let c=e[o];if(SL.includes(o))continue;if(n&&ute.test(o)){typeof c=="function"?n.handlers[o]=c:delete n.handlers[o],n.eventCount=Object.keys(n.handlers).length;continue}if(c===void 0)continue;let{root:h,key:d,target:m}=lS(i,o);if(m instanceof eA&&c instanceof eA)m.mask=c.mask;else if(m instanceof Bt&&ete(c))m.set(c);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&typeof m.copy=="function"&&c!=null&&c.constructor&&m.constructor===c.constructor)m.copy(c);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&Array.isArray(c))typeof m.fromArray=="function"?m.fromArray(c):m.set(...c);else if(m!==null&&typeof m=="object"&&typeof m.set=="function"&&typeof c=="number")typeof m.setScalar=="function"?m.setScalar(c):m.set(c);else{var a;h[d]=c,s&&!s.linear&&cte.includes(d)&&(a=h[d])!=null&&a.isTexture&&h[d].format===Xs&&h[d].type===as&&(h[d].colorSpace=Yn)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(t=n.object)!=null&&t.isObject3D&&r!==n.eventCount){const o=n.object,c=s.internal.interaction.indexOf(o);c>-1&&s.internal.interaction.splice(c,1),n.eventCount&&o.raycast!==null&&s.internal.interaction.push(o)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&_A(n),i}function _A(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function Fk(i,e){i.manual||(Pk(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const to=i=>i==null?void 0:i.isObject3D;function IT(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function Hk(i,e,t,n){const s=t.get(e);s&&(t.delete(e),t.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function hte(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,s)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((n,s)=>{Hk(t.capturedMap,e,n,s)})}function fte(i){function e(c){const{internal:h}=i.getState(),d=c.offsetX-h.initialClick[0],m=c.offsetY-h.initialClick[1];return Math.round(Math.sqrt(d*d+m*m))}function t(c){return c.filter(h=>["Move","Over","Enter","Out","Leave"].some(d=>{var m;return(m=h.__r3f)==null?void 0:m.handlers["onPointer"+d]}))}function n(c,h){const d=i.getState(),m=new Set,v=[],y=h?h(d.internal.interaction):d.internal.interaction;for(let x=0;x<y.length;x++){const w=yy(y[x]);w&&(w.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(c,d);function A(x){const w=yy(x);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var R;w.events.compute==null||w.events.compute(c,w,(R=w.previousRoot)==null?void 0:R.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(x,!0):[]}let E=y.flatMap(A).sort((x,w)=>{const R=yy(x.object),D=yy(w.object);return!R||!D?x.distance-w.distance:D.events.priority-R.events.priority||x.distance-w.distance}).filter(x=>{const w=IT(x);return m.has(w)?!1:(m.add(w),!0)});d.events.filter&&(E=d.events.filter(E,d));for(const x of E){let w=x.object;for(;w;){var M;(M=w.__r3f)!=null&&M.eventCount&&v.push({...x,eventObject:w}),w=w.parent}}if("pointerId"in c&&d.internal.capturedMap.has(c.pointerId))for(let x of d.internal.capturedMap.get(c.pointerId).values())m.has(IT(x.intersection))||v.push(x.intersection);return v}function s(c,h,d,m){if(c.length){const v={stopped:!1};for(const y of c){let A=yy(y.object);if(A||y.object.traverseAncestors(E=>{const M=yy(E);if(M)return A=M,!1}),A){const{raycaster:E,pointer:M,camera:x,internal:w}=A,R=new ae(M.x,M.y,0).unproject(x),D=N=>{var O,G;return(O=(G=w.capturedMap.get(N))==null?void 0:G.has(y.eventObject))!=null?O:!1},P=N=>{const O={intersection:y,target:h.target};w.capturedMap.has(N)?w.capturedMap.get(N).set(y.eventObject,O):w.capturedMap.set(N,new Map([[y.eventObject,O]])),h.target.setPointerCapture(N)},I=N=>{const O=w.capturedMap.get(N);O&&Hk(w.capturedMap,y.eventObject,O,N)};let H={};for(let N in h){let O=h[N];typeof O!="function"&&(H[N]=O)}let U={...y,...H,pointer:M,intersections:c,stopped:v.stopped,delta:d,unprojectedPoint:R,ray:E.ray,camera:x,stopPropagation(){const N="pointerId"in h&&w.capturedMap.get(h.pointerId);if((!N||N.has(y.eventObject))&&(U.stopped=v.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(O=>O.eventObject===y.eventObject))){const O=c.slice(0,c.indexOf(y));r([...O,y])}},target:{hasPointerCapture:D,setPointerCapture:P,releasePointerCapture:I},currentTarget:{hasPointerCapture:D,setPointerCapture:P,releasePointerCapture:I},nativeEvent:h};if(m(U),v.stopped===!0)break}}}return c}function r(c){const{internal:h}=i.getState();for(const d of h.hovered.values())if(!c.length||!c.find(m=>m.object===d.object&&m.index===d.index&&m.instanceId===d.instanceId)){const v=d.eventObject.__r3f;if(h.hovered.delete(IT(d)),v!=null&&v.eventCount){const y=v.handlers,A={...d,intersections:c};y.onPointerOut==null||y.onPointerOut(A),y.onPointerLeave==null||y.onPointerLeave(A)}}}function a(c,h){for(let d=0;d<h.length;d++){const m=h[d].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(c)}}function o(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return h=>{const{internal:d}=i.getState();"pointerId"in h&&d.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(h.pointerId)&&(d.capturedMap.delete(h.pointerId),r([]))})}}return function(d){const{onPointerMissed:m,internal:v}=i.getState();v.lastEvent.current=d;const y=c==="onPointerMove",A=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",M=n(d,y?t:void 0),x=A?e(d):0;c==="onPointerDown"&&(v.initialClick=[d.offsetX,d.offsetY],v.initialHits=M.map(R=>R.eventObject)),A&&!M.length&&x<=2&&(a(d,v.interaction),m&&m(d)),y&&r(M);function w(R){const D=R.eventObject,P=D.__r3f;if(!(P!=null&&P.eventCount))return;const I=P.handlers;if(y){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const H=IT(R),U=v.hovered.get(H);U?U.stopped&&R.stopPropagation():(v.hovered.set(H,R),I.onPointerOver==null||I.onPointerOver(R),I.onPointerEnter==null||I.onPointerEnter(R))}I.onPointerMove==null||I.onPointerMove(R)}else{const H=I[c];H?(!A||v.initialHits.includes(D))&&(a(d,v.interaction.filter(U=>!v.initialHits.includes(U))),H(R)):A&&v.initialHits.includes(D)&&a(d,v.interaction.filter(U=>!v.initialHits.includes(U)))}}s(M,d,x,w)}}return{handlePointer:o}}const PF=i=>!!(i!=null&&i.render),x3=V.createContext(null),dte=(i,e)=>{const t=wk((o,c)=>{const h=new ae,d=new ae,m=new ae;function v(x=c().camera,w=d,R=c().size){const{width:D,height:P,top:I,left:H}=R,U=D/P;w.isVector3?m.copy(w):m.set(...w);const N=x.getWorldPosition(h).distanceTo(m);if(Pk(x))return{width:D/x.zoom,height:P/x.zoom,top:I,left:H,factor:1,distance:N,aspect:U};{const O=x.fov*Math.PI/180,G=2*Math.tan(O/2)*N,oe=G*(D/P);return{width:oe,height:G,top:I,left:H,factor:D/oe,distance:N,aspect:U}}}let y;const A=x=>o(w=>({performance:{...w.performance,current:x}})),E=new Ke;return{set:o,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(x=1)=>i(c(),x),advance:(x,w)=>e(x,w,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new f3,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=c();y&&clearTimeout(y),x.performance.current!==x.performance.min&&A(x.performance.min),y=setTimeout(()=>A(c().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:x=>o(w=>({...w,events:{...w.events,...x}})),setSize:(x,w,R=0,D=0)=>{const P=c().camera,I={width:x,height:w,top:R,left:D};o(H=>({size:I,viewport:{...H.viewport,...v(P,d,I)}}))},setDpr:x=>o(w=>{const R=Ok(x);return{viewport:{...w.viewport,dpr:R,initialDpr:w.viewport.initialDpr||R}}}),setFrameloop:(x="always")=>{const w=c().clock;w.stop(),w.elapsedTime=0,x!=="never"&&(w.start(),w.elapsedTime=0),o(()=>({frameloop:x}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:V.createRef(),active:!1,frames:0,priority:0,subscribe:(x,w,R)=>{const D=c().internal;return D.priority=D.priority+(w>0?1:0),D.subscribers.push({ref:x,priority:w,store:R}),D.subscribers=D.subscribers.sort((P,I)=>P.priority-I.priority),()=>{const P=c().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(w>0?1:0),P.subscribers=P.subscribers.filter(I=>I.ref!==x))}}}}}),n=t.getState();let s=n.size,r=n.viewport.dpr,a=n.camera;return t.subscribe(()=>{const{camera:o,size:c,viewport:h,gl:d,set:m}=t.getState();if(c.width!==s.width||c.height!==s.height||h.dpr!==r){s=c,r=h.dpr,Fk(o,c),h.dpr>0&&d.setPixelRatio(h.dpr);const v=typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(c.width,c.height,v)}o!==a&&(a=o,m(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>i(o)),t};function S3(){const i=V.useContext(x3);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Hr(i=t=>t,e){return S3()(i,e)}function AA(i,e=0){const t=S3(),n=t.getState().internal.subscribe,s=b3(i);return e1(()=>n(s,e,t),[e,n,t]),null}const OF=new WeakMap,pte=i=>{var e;return typeof i=="function"&&(i==null||(e=i.prototype)==null?void 0:e.constructor)===i};function zk(i,e){return function(t,...n){let s;return pte(t)?(s=OF.get(t),s||(s=new t,OF.set(t,s))):s=t,i&&i(s),Promise.all(n.map(r=>new Promise((a,o)=>s.load(r,c=>{to(c==null?void 0:c.scene)&&Object.assign(c,ste(c.scene)),a(c)},e,c=>o(new Error(`Could not load ${r}: ${c==null?void 0:c.message}`))))))}}function su(i,e,t,n){const s=Array.isArray(e)?e:[e],r=qee(zk(t,n),[i,...s],{equal:ps.equ});return Array.isArray(e)?r:r[0]}su.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return Yee(zk(t),[i,...n])};su.clear=function(i,e){const t=Array.isArray(e)?e:[e];return Wee([i,...t])};function mte(i){const e=kee(i);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:V.version}),e}const Gk=0,sA={},gte=/^three(?=[A-Z])/,t2=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let vte=0;const yte=i=>typeof i=="function";function E3(i){if(yte(i)){const e=`${vte++}`;return sA[e]=i,e}else Object.assign(sA,i)}function kk(i,e){const t=t2(i),n=sA[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function _te(i,e,t){var n;return i=t2(i)in sA?i:i.replace(gte,""),kk(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,xw(e.object,t,i,e)}function Ate(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?Ew(i.parent,i):to(i.object)&&(i.object.visible=!1),i.isHidden=!0,_A(i)}}function Vk(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?Sw(i.parent,i):to(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,_A(i)}}function M3(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var s,r;const a=sA[t2(e.type)];e.object=(s=e.props.object)!=null?s:new a(...(r=e.props.args)!=null?r:[]),e.object.__r3f=e}if(Wc(e.object,e.props),e.props.attach)Sw(i,e);else if(to(e.object)&&to(i.object)){const a=i.object.children.indexOf(t==null?void 0:t.object);if(t&&a!==-1){const o=i.object.children.indexOf(e.object);if(o!==-1){i.object.children.splice(o,1);const c=o<a?a-1:a;i.object.children.splice(c,0,e.object)}else e.object.parent=i.object,i.object.children.splice(a,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const a of e.children)M3(e,a);_A(e)}}function xB(i,e){e&&(e.parent=i,i.children.push(e),M3(i,e))}function UF(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),M3(i,e,t)}function jk(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():LF.unstable_scheduleCallback(LF.unstable_IdlePriority,e)}}function EL(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?Ew(i,e):to(e.object)&&to(i.object)&&(i.object.remove(e.object),hte(Ik(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let r=e.children.length-1;r>=0;r--){const a=e.children[r];EL(e,a,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&jk(e.object),t===void 0&&_A(e)}function bte(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const nC=[];function xte(){for(const[t]of nC){const n=t.parent;if(n){t.props.attach?Ew(n,t):to(t.object)&&to(n.object)&&n.object.remove(t.object);for(const s of t.children)s.props.attach?Ew(t,s):to(s.object)&&to(t.object)&&t.object.remove(s.object)}t.isHidden&&Vk(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&jk(t.object)}for(const[t,n,s]of nC){t.props=n;const r=t.parent;if(r){var i,e;const a=sA[t2(t.type)];t.object=(i=t.props.object)!=null?i:new a(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,bte(s,t.object),Wc(t.object,t.props),t.props.attach?Sw(r,t):to(t.object)&&to(r.object)&&r.object.add(t.object);for(const o of t.children)o.props.attach?Sw(t,o):to(o.object)&&to(t.object)&&t.object.add(o.object);_A(t)}}nC.length=0}const SB=()=>{},FF={};let PT=Gk;const Ste=0,Ete=4,Mw=mte({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:_te,removeChild:EL,appendChild:xB,appendInitialChild:xB,insertBefore:UF,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||xB(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||EL(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||UF(n,e,t)},getRootHostContext:()=>FF,getChildHostContext:()=>FF,commitUpdate(i,e,t,n,s){var r,a,o;kk(e,n);let c=!1;if((i.type==="primitive"&&t.object!==n.object||((r=n.args)==null?void 0:r.length)!==((a=t.args)==null?void 0:a.length)||(o=n.args)!=null&&o.some((d,m)=>{var v;return d!==((v=t.args)==null?void 0:v[m])}))&&(c=!0),c)nC.push([i,{...n},s]);else{const d=lte(i,n);Object.keys(d).length&&(Object.assign(i.props,d),Wc(i.object,d))}(s.sibling===null||(s.flags&Ete)===Ste)&&xte()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i==null?void 0:i.object,prepareForCommit:()=>null,preparePortalMount:i=>xw(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Ate,unhideInstance:Vk,createTextInstance:SB,hideTextInstance:SB,unhideTextInstance:SB,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:V.createContext(null),setCurrentUpdatePriority(i){PT=i},getCurrentUpdatePriority(){return PT},resolveUpdatePriority(){var i;if(PT!==Gk)return PT;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return tC.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return tC.ContinuousEventPriority;default:return tC.DefaultEventPriority}},resetFormInstance(){}}),Dv=new Map,_y={objects:"shallow",strict:!1};function Mte(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:s,left:r}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:s,left:r}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function Tte(i){const e=Dv.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=n||dte(CL,zF),a=t||Mw.createContainer(r,tC.ConcurrentRoot,null,!1,null,"",s,s,s,null);e||Dv.set(i,{fiber:a,store:r});let o,c,h=!1,d=null;return{async configure(m={}){let v;d=new Promise(he=>v=he);let{gl:y,size:A,scene:E,events:M,onCreated:x,shadows:w=!1,linear:R=!1,flat:D=!1,legacy:P=!1,orthographic:I=!1,frameloop:H="always",dpr:U=[1,2],performance:N,raycaster:O,camera:G,onPointerMissed:oe}=m,se=r.getState(),le=se.gl;if(!se.gl){const he={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},xe=typeof y=="function"?await y(he):y;PF(xe)?le=xe:le=new y3({...he,...y}),se.set({gl:le})}let ue=se.raycaster;ue||se.set({raycaster:ue=new m3});const{params:z,...K}=O||{};if(ps.equ(K,ue,_y)||Wc(ue,{...K}),ps.equ(z,ue.params,_y)||Wc(ue,{params:{...ue.params,...z}}),!se.camera||se.camera===c&&!ps.equ(c,G,_y)){c=G;const he=G==null?void 0:G.isCamera,xe=he?G:I?new ql(0,0,0,0,.1,1e3):new es(75,0,.1,1e3);he||(xe.position.z=5,G&&(Wc(xe,G),xe.manual||("aspect"in G||"left"in G||"right"in G||"bottom"in G||"top"in G)&&(xe.manual=!0,xe.updateProjectionMatrix())),!se.camera&&!(G!=null&&G.rotation)&&xe.lookAt(0,0,0)),se.set({camera:xe}),ue.camera=xe}if(!se.scene){let he;E!=null&&E.isScene?(he=E,xw(he,r,"",{})):(he=new Ev,xw(he,r,"",{}),E&&Wc(he,E)),se.set({scene:he})}M&&!se.events.handlers&&se.set({events:M(r)});const Q=Mte(i,A);if(ps.equ(Q,se.size,_y)||se.setSize(Q.width,Q.height,Q.top,Q.left),U&&se.viewport.dpr!==Ok(U)&&se.setDpr(U),se.frameloop!==H&&se.setFrameloop(H),se.onPointerMissed||se.set({onPointerMissed:oe}),N&&!ps.equ(N,se.performance,_y)&&se.set(he=>({performance:{...he.performance,...N}})),!se.xr){var de;const he=(fe,De)=>{const Ce=r.getState();Ce.frameloop!=="never"&&zF(fe,!0,Ce,De)},xe=()=>{const fe=r.getState();fe.gl.xr.enabled=fe.gl.xr.isPresenting,fe.gl.xr.setAnimationLoop(fe.gl.xr.isPresenting?he:null),fe.gl.xr.isPresenting||CL(fe)},ye={connect(){const fe=r.getState().gl;fe.xr.addEventListener("sessionstart",xe),fe.xr.addEventListener("sessionend",xe)},disconnect(){const fe=r.getState().gl;fe.xr.removeEventListener("sessionstart",xe),fe.xr.removeEventListener("sessionend",xe)}};typeof((de=le.xr)==null?void 0:de.addEventListener)=="function"&&ye.connect(),se.set({xr:ye})}if(le.shadowMap){const he=le.shadowMap.enabled,xe=le.shadowMap.type;if(le.shadowMap.enabled=!!w,ps.boo(w))le.shadowMap.type=Dx;else if(ps.str(w)){var W;const ye={basic:U4,percentage:bR,soft:Dx,variance:Rc};le.shadowMap.type=(W=ye[w])!=null?W:Dx}else ps.obj(w)&&Object.assign(le.shadowMap,w);(he!==le.shadowMap.enabled||xe!==le.shadowMap.type)&&(le.shadowMap.needsUpdate=!0)}return ri.enabled=!P,h||(le.outputColorSpace=R?ll:Yn,le.toneMapping=D?$c:xR),se.legacy!==P&&se.set(()=>({legacy:P})),se.linear!==R&&se.set(()=>({linear:R})),se.flat!==D&&se.set(()=>({flat:D})),y&&!ps.fun(y)&&!PF(y)&&!ps.equ(y,le,_y)&&Wc(le,y),o=x,h=!0,v(),this},render(m){return!h&&!d&&this.configure(),d.then(()=>{Mw.updateContainer(q.jsx(Cte,{store:r,children:m,onCreated:o,rootElement:i}),a,null,()=>{})}),r},unmount(){Xk(i)}}}function Cte({store:i,children:e,onCreated:t,rootElement:n}){return e1(()=>{const s=i.getState();s.set(r=>({internal:{...r.internal,active:!0}})),t&&t(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),q.jsx(x3.Provider,{value:i,children:e})}function Xk(i,e){const t=Dv.get(i),n=t==null?void 0:t.fiber;if(n){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),Mw.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var r,a,o,c;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(a=r.renderLists)==null||a.dispose==null||a.dispose(),(o=s.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(c=s.gl)!=null&&c.xr&&s.xr.disconnect(),rte(s.scene),Dv.delete(i)}catch{}},500)})}}function wte(i,e,t){return q.jsx(Rte,{children:i,container:e,state:t})}function Rte({state:i={},children:e,container:t}){const{events:n,size:s,...r}=i,a=S3(),[o]=V.useState(()=>new m3),[c]=V.useState(()=>new Ke),h=b3((m,v)=>{let y;if(v.camera&&s){const A=v.camera;y=m.viewport.getCurrentViewport(A,new ae,s),A!==m.camera&&Fk(A,s)}return{...m,...v,scene:t,raycaster:o,pointer:c,mouse:c,previousRoot:a,events:{...m.events,...v.events,...n},size:{...m.size,...s},viewport:{...m.viewport,...y},setEvents:A=>v.set(E=>({...E,events:{...E.events,...A}}))}}),d=V.useMemo(()=>{const m=wk((y,A)=>({...r,set:y,get:A})),v=y=>m.setState(A=>h.current(y,A));return v(a.getState()),a.subscribe(v),m},[a,t]);return q.jsx(q.Fragment,{children:Mw.createPortal(q.jsx(x3.Provider,{value:d,children:e}),d,null)})}function Dte(i,e){const t={callback:i};return e.add(t),()=>void e.delete(t)}const qk=new Set,Bte=new Set,Lte=new Set,Nte=i=>Dte(i,qk);function EB(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Hx(i,e){switch(i){case"before":return EB(qk,e);case"after":return EB(Bte,e);case"tail":return EB(Lte,e)}}let MB,TB;function ML(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),MB=e.internal.subscribers;for(let s=0;s<MB.length;s++)TB=MB[s],TB.ref.current(TB.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let Tw=!1,TL=!1,CB,HF,Ay;function Yk(i){HF=requestAnimationFrame(Yk),Tw=!0,CB=0,Hx("before",i),TL=!0;for(const t of Dv.values()){var e;Ay=t.store.getState(),Ay.internal.active&&(Ay.frameloop==="always"||Ay.internal.frames>0)&&!((e=Ay.gl.xr)!=null&&e.isPresenting)&&(CB+=ML(i,Ay))}if(TL=!1,Hx("after",i),CB===0)return Hx("tail",i),Tw=!1,cancelAnimationFrame(HF)}function CL(i,e=1){var t;if(!i)return Dv.forEach(n=>CL(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):TL?i.internal.frames=2:i.internal.frames=1,Tw||(Tw=!0,requestAnimationFrame(Yk)))}function zF(i,e=!0,t,n){if(e&&Hx("before",i),t)ML(i,t,n);else for(const s of Dv.values())ML(i,s.store.getState());e&&Hx("after",i)}const wB={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Ite(i){const{handlePointer:e}=fte(i);return{priority:1,enabled:!0,compute(t,n,s){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(wB).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:s}=i.getState();(t=s.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(r=>({events:{...r.events,connected:t}})),s.handlers)for(const r in s.handlers){const a=s.handlers[r],[o,c]=wB[r];t.addEventListener(o,a,{passive:c})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const r=n.handlers[s],[a]=wB[s];n.connected.removeEventListener(a,r)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function GF(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function Pte({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,a]=V.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=V.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),c=i?typeof i=="number"?i:i.scroll:null,h=i?typeof i=="number"?i:i.resize:null,d=V.useRef(!1);V.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[m,v,y]=V.useMemo(()=>{const x=()=>{if(!o.current.element)return;const{left:w,top:R,width:D,height:P,bottom:I,right:H,x:U,y:N}=o.current.element.getBoundingClientRect(),O={left:w,top:R,width:D,height:P,bottom:I,right:H,x:U,y:N};o.current.element instanceof HTMLElement&&n&&(O.height=o.current.element.offsetHeight,O.width=o.current.element.offsetWidth),Object.freeze(O),d.current&&!Hte(o.current.lastBounds,O)&&a(o.current.lastBounds=O)};return[x,h?GF(x,h):x,c?GF(x,c):x]},[a,n,c,h]);function A(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",y,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function E(){o.current.element&&(o.current.resizeObserver=new s(y),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(x=>x.addEventListener("scroll",y,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const M=x=>{!x||x===o.current.element||(A(),o.current.element=x,o.current.scrollContainers=Wk(x),E())};return Ute(y,!!e),Ote(v),V.useEffect(()=>{A(),E()},[e,y,v]),V.useEffect(()=>A,[]),[M,r,m]}function Ote(i){V.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function Ute(i,e){V.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function Wk(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[t,n,s].some(r=>r==="auto"||r==="scroll")&&e.push(i),[...e,...Wk(i.parentElement)]}const Fte=["x","y","top","bottom","left","right","width","height"],Hte=(i,e)=>Fte.every(t=>i[t]===e[t]);function zte({ref:i,children:e,fallback:t,resize:n,style:s,gl:r,events:a=Ite,eventSource:o,eventPrefix:c,shadows:h,linear:d,flat:m,legacy:v,orthographic:y,frameloop:A,dpr:E,performance:M,raycaster:x,camera:w,scene:R,onPointerMissed:D,onCreated:P,...I}){V.useMemo(()=>E3(Ck),[]);const H=tte(),[U,N]=Pte({scroll:!0,debounce:{scroll:50,resize:0},...n}),O=V.useRef(null),G=V.useRef(null);V.useImperativeHandle(i,()=>O.current);const oe=b3(D),[se,le]=V.useState(!1),[ue,z]=V.useState(!1);if(se)throw se;if(ue)throw ue;const K=V.useRef(null);e1(()=>{const de=O.current;if(N.width>0&&N.height>0&&de){K.current||(K.current=Tte(de));async function W(){await K.current.configure({gl:r,scene:R,events:a,shadows:h,linear:d,flat:m,legacy:v,orthographic:y,frameloop:A,dpr:E,performance:M,raycaster:x,camera:w,size:N,onPointerMissed:(...he)=>oe.current==null?void 0:oe.current(...he),onCreated:he=>{he.events.connect==null||he.events.connect(o?$ee(o)?o.current:o:G.current),c&&he.setEvents({compute:(xe,ye)=>{const fe=xe[c+"X"],De=xe[c+"Y"];ye.pointer.set(fe/ye.size.width*2-1,-(De/ye.size.height)*2+1),ye.raycaster.setFromCamera(ye.pointer,ye.camera)}}),P==null||P(he)}}),K.current.render(q.jsx(H,{children:q.jsx(ite,{set:z,children:q.jsx(V.Suspense,{fallback:q.jsx(nte,{set:le}),children:e??null})})}))}W()}}),V.useEffect(()=>{const de=O.current;if(de)return()=>Xk(de)},[]);const Q=o?"none":"auto";return q.jsx("div",{ref:G,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Q,...s},...I,children:q.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:q.jsx("canvas",{ref:O,style:{display:"block"},children:t})})})}function Kk(i){return q.jsx(Lk,{children:q.jsx(zte,{...i})})}const Gte="/a-collection-of-cool-things/8k_earth_nightmap.jpg",kte="/a-collection-of-cool-things/8k_earth_clouds.jpg";function Vte(){const i=V.useRef(),e=V.useRef(),t=su(bw,Gte),n=su(bw,kte);return AA(()=>{i.current.rotation.y+=.002,e.current.rotation.y+=.003}),q.jsxs(q.Fragment,{children:[q.jsxs("mesh",{ref:i,children:[q.jsx("sphereGeometry",{args:[2.75,64,64]}),q.jsx("meshStandardMaterial",{map:t})]}),q.jsxs("mesh",{ref:e,children:[q.jsx("sphereGeometry",{args:[2.78,64,64]}),q.jsx("meshStandardMaterial",{map:n,transparent:!0,opacity:.2,depthWrite:!1,side:2})]})]})}const t1=new ae,T3=new ae,jte=new ae,kF=new Ke;function Xte(i,e,t){const n=t1.setFromMatrixPosition(i.matrixWorld);n.project(e);const s=t.width/2,r=t.height/2;return[n.x*s+s,-(n.y*r)+r]}function qte(i,e){const t=t1.setFromMatrixPosition(i.matrixWorld),n=T3.setFromMatrixPosition(e.matrixWorld),s=t.sub(n),r=e.getWorldDirection(jte);return s.angleTo(r)>Math.PI/2}function Yte(i,e,t,n){const s=t1.setFromMatrixPosition(i.matrixWorld),r=s.clone();r.project(e),kF.set(r.x,r.y),t.setFromCamera(kF,e);const a=t.intersectObjects(n,!0);if(a.length){const o=a[0].distance;return s.distanceTo(t.ray.origin)<o}return!0}function Wte(i,e){if(e instanceof ql)return e.zoom;if(e instanceof es){const t=t1.setFromMatrixPosition(i.matrixWorld),n=T3.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,r=t.distanceTo(n);return 1/(2*Math.tan(s/2)*r)}else return 1}function Kte(i,e,t){if(e instanceof es||e instanceof ql){const n=t1.setFromMatrixPosition(i.matrixWorld),s=T3.setFromMatrixPosition(e.matrixWorld),r=n.distanceTo(s),a=(t[1]-t[0])/(e.far-e.near),o=t[1]-a*e.far;return Math.round(a*r+o)}}const wL=i=>Math.abs(i)<1e-10?0:i;function Jk(i,e,t=""){let n="matrix3d(";for(let s=0;s!==16;s++)n+=wL(e[s]*i.elements[s])+(s!==15?",":")");return t+n}const Jte=(i=>e=>Jk(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Zte=(i=>(e,t)=>Jk(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function Qte(i){return i&&typeof i=="object"&&"current"in i}const C3=V.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:s,center:r,fullscreen:a,portal:o,distanceFactor:c,sprite:h=!1,transform:d=!1,occlude:m,onOcclude:v,castShadow:y,receiveShadow:A,material:E,geometry:M,zIndexRange:x=[16777271,0],calculatePosition:w=Xte,as:R="div",wrapperClass:D,pointerEvents:P="auto",...I},H)=>{const{gl:U,camera:N,scene:O,size:G,raycaster:oe,events:se,viewport:le}=Hr(),[ue]=V.useState(()=>document.createElement(R)),z=V.useRef(null),K=V.useRef(null),Q=V.useRef(0),de=V.useRef([0,0]),W=V.useRef(null),he=V.useRef(null),xe=(o==null?void 0:o.current)||se.connected||U.domElement.parentNode,ye=V.useRef(null),fe=V.useRef(!1),De=V.useMemo(()=>m&&m!=="blending"||Array.isArray(m)&&m.length&&Qte(m[0]),[m]);V.useLayoutEffect(()=>{const lt=U.domElement;m&&m==="blending"?(lt.style.zIndex=`${Math.floor(x[0]/2)}`,lt.style.position="absolute",lt.style.pointerEvents="none"):(lt.style.zIndex=null,lt.style.position=null,lt.style.pointerEvents=null)},[m]),V.useLayoutEffect(()=>{if(K.current){const lt=z.current=pz.createRoot(ue);if(O.updateMatrixWorld(),d)ue.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const mt=w(K.current,N,G);ue.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${mt[0]}px,${mt[1]}px,0);transform-origin:0 0;`}return xe&&(s?xe.prepend(ue):xe.appendChild(ue)),()=>{xe&&xe.removeChild(ue),lt.unmount()}}},[xe,d]),V.useLayoutEffect(()=>{D&&(ue.className=D)},[D]);const Ce=V.useMemo(()=>d?{position:"absolute",top:0,left:0,width:G.width,height:G.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:r?"translate3d(-50%,-50%,0)":"none",...a&&{top:-G.height/2,left:-G.width/2,width:G.width,height:G.height},...t},[t,r,a,G,d]),Ue=V.useMemo(()=>({position:"absolute",pointerEvents:P}),[P]);V.useLayoutEffect(()=>{if(fe.current=!1,d){var lt;(lt=z.current)==null||lt.render(V.createElement("div",{ref:W,style:Ce},V.createElement("div",{ref:he,style:Ue},V.createElement("div",{ref:H,className:n,style:t,children:i}))))}else{var mt;(mt=z.current)==null||mt.render(V.createElement("div",{ref:H,style:Ce,className:n,children:i}))}});const Qe=V.useRef(!0);AA(lt=>{if(K.current){N.updateMatrixWorld(),K.current.updateWorldMatrix(!0,!1);const mt=d?de.current:w(K.current,N,G);if(d||Math.abs(Q.current-N.zoom)>e||Math.abs(de.current[0]-mt[0])>e||Math.abs(de.current[1]-mt[1])>e){const it=qte(K.current,N);let et=!1;De&&(Array.isArray(m)?et=m.map(ke=>ke.current):m!=="blending"&&(et=[O]));const $=Qe.current;if(et){const ke=Yte(K.current,N,oe,et);Qe.current=ke&&!it}else Qe.current=!it;$!==Qe.current&&(v?v(!Qe.current):ue.style.display=Qe.current?"block":"none");const $e=Math.floor(x[0]/2),Ie=m?De?[x[0],$e]:[$e-1,0]:x;if(ue.style.zIndex=`${Kte(K.current,N,Ie)}`,d){const[ke,We]=[G.width/2,G.height/2],St=N.projectionMatrix.elements[5]*We,{isOrthographicCamera:nt,top:re,left:J,bottom:Te,right:Ye}=N,st=Jte(N.matrixWorldInverse),je=nt?`scale(${St})translate(${wL(-(Ye+J)/2)}px,${wL((re+Te)/2)}px)`:`translateZ(${St}px)`;let pt=K.current.matrixWorld;h&&(pt=N.matrixWorldInverse.clone().transpose().copyPosition(pt).scale(K.current.scale),pt.elements[3]=pt.elements[7]=pt.elements[11]=0,pt.elements[15]=1),ue.style.width=G.width+"px",ue.style.height=G.height+"px",ue.style.perspective=nt?"":`${St}px`,W.current&&he.current&&(W.current.style.transform=`${je}${st}translate(${ke}px,${We}px)`,he.current.style.transform=Zte(pt,1/((c||10)/400)))}else{const ke=c===void 0?1:Wte(K.current,N)*c;ue.style.transform=`translate3d(${mt[0]}px,${mt[1]}px,0) scale(${ke})`}de.current=mt,Q.current=N.zoom}}if(!De&&ye.current&&!fe.current)if(d){if(W.current){const mt=W.current.children[0];if(mt!=null&&mt.clientWidth&&mt!=null&&mt.clientHeight){const{isOrthographicCamera:it}=N;if(it||M)I.scale&&(Array.isArray(I.scale)?I.scale instanceof ae?ye.current.scale.copy(I.scale.clone().divideScalar(1)):ye.current.scale.set(1/I.scale[0],1/I.scale[1],1/I.scale[2]):ye.current.scale.setScalar(1/I.scale));else{const et=(c||10)/400,$=mt.clientWidth*et,$e=mt.clientHeight*et;ye.current.scale.set($,$e,1)}fe.current=!0}}}else{const mt=ue.children[0];if(mt!=null&&mt.clientWidth&&mt!=null&&mt.clientHeight){const it=1/le.factor,et=mt.clientWidth*it,$=mt.clientHeight*it;ye.current.scale.set(et,$,1),fe.current=!0}ye.current.lookAt(lt.camera.position)}});const xt=V.useMemo(()=>({vertexShader:d?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[d]);return V.createElement("group",q_({},I,{ref:K}),m&&!De&&V.createElement("mesh",{castShadow:y,receiveShadow:A,ref:ye},M||V.createElement("planeGeometry",null),E||V.createElement("shaderMaterial",{side:ra,vertexShader:xt.vertexShader,fragmentShader:xt.fragmentShader})))}),w3=parseInt(kp.replace(/\D+/g,""));function VF(i,e){if(e===pG)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===gw||e===FI){let t=i.getIndex();if(t===null){const a=[],o=i.getAttribute("position");if(o!==void 0){for(let c=0;c<o.count;c++)a.push(c);i.setIndex(a),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,s=[];if(t)if(e===gw)for(let a=1;a<=n;a++)s.push(t.getX(0)),s.push(t.getX(a)),s.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(s.push(t.getX(a)),s.push(t.getX(a+1)),s.push(t.getX(a+2))):(s.push(t.getX(a+2)),s.push(t.getX(a+1)),s.push(t.getX(a)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=i.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var zl=Uint8Array,Mp=Uint16Array,RL=Uint32Array,Zk=new zl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qk=new zl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$te=new zl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$k=function(i,e){for(var t=new Mp(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var s=new RL(t[30]),n=1;n<30;++n)for(var r=t[n];r<t[n+1];++r)s[r]=r-t[n]<<5|n;return[t,s]},e5=$k(Zk,2),t5=e5[0],ene=e5[1];t5[28]=258,ene[258]=28;var tne=$k(Qk,0),nne=tne[0],DL=new Mp(32768);for(var ss=0;ss<32768;++ss){var Vd=(ss&43690)>>>1|(ss&21845)<<1;Vd=(Vd&52428)>>>2|(Vd&13107)<<2,Vd=(Vd&61680)>>>4|(Vd&3855)<<4,DL[ss]=((Vd&65280)>>>8|(Vd&255)<<8)>>>1}var zx=function(i,e,t){for(var n=i.length,s=0,r=new Mp(e);s<n;++s)++r[i[s]-1];var a=new Mp(e);for(s=0;s<e;++s)a[s]=a[s-1]+r[s-1]<<1;var o;if(t){o=new Mp(1<<e);var c=15-e;for(s=0;s<n;++s)if(i[s])for(var h=s<<4|i[s],d=e-i[s],m=a[i[s]-1]++<<d,v=m|(1<<d)-1;m<=v;++m)o[DL[m]>>>c]=h}else for(o=new Mp(n),s=0;s<n;++s)i[s]&&(o[s]=DL[a[i[s]-1]++]>>>15-i[s]);return o},n1=new zl(288);for(var ss=0;ss<144;++ss)n1[ss]=8;for(var ss=144;ss<256;++ss)n1[ss]=9;for(var ss=256;ss<280;++ss)n1[ss]=7;for(var ss=280;ss<288;++ss)n1[ss]=8;var n5=new zl(32);for(var ss=0;ss<32;++ss)n5[ss]=5;var ine=zx(n1,9,1),sne=zx(n5,5,1),RB=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},Tc=function(i,e,t){var n=e/8|0;return(i[n]|i[n+1]<<8)>>(e&7)&t},DB=function(i,e){var t=e/8|0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>(e&7)},rne=function(i){return(i/8|0)+(i&7&&1)},ane=function(i,e,t){(t==null||t>i.length)&&(t=i.length);var n=new(i instanceof Mp?Mp:i instanceof RL?RL:zl)(t-e);return n.set(i.subarray(e,t)),n},one=function(i,e,t){var n=i.length;if(!n||t&&!t.l&&n<5)return e||new zl(0);var s=!e||t,r=!t||t.i;t||(t={}),e||(e=new zl(n*3));var a=function(Ce){var Ue=e.length;if(Ce>Ue){var Qe=new zl(Math.max(Ue*2,Ce));Qe.set(e),e=Qe}},o=t.f||0,c=t.p||0,h=t.b||0,d=t.l,m=t.d,v=t.m,y=t.n,A=n*8;do{if(!d){t.f=o=Tc(i,c,1);var E=Tc(i,c+1,3);if(c+=3,E)if(E==1)d=ine,m=sne,v=9,y=5;else if(E==2){var R=Tc(i,c,31)+257,D=Tc(i,c+10,15)+4,P=R+Tc(i,c+5,31)+1;c+=14;for(var I=new zl(P),H=new zl(19),U=0;U<D;++U)H[$te[U]]=Tc(i,c+U*3,7);c+=D*3;for(var N=RB(H),O=(1<<N)-1,G=zx(H,N,1),U=0;U<P;){var oe=G[Tc(i,c,O)];c+=oe&15;var M=oe>>>4;if(M<16)I[U++]=M;else{var se=0,le=0;for(M==16?(le=3+Tc(i,c,3),c+=2,se=I[U-1]):M==17?(le=3+Tc(i,c,7),c+=3):M==18&&(le=11+Tc(i,c,127),c+=7);le--;)I[U++]=se}}var ue=I.subarray(0,R),z=I.subarray(R);v=RB(ue),y=RB(z),d=zx(ue,v,1),m=zx(z,y,1)}else throw"invalid block type";else{var M=rne(c)+4,x=i[M-4]|i[M-3]<<8,w=M+x;if(w>n){if(r)throw"unexpected EOF";break}s&&a(h+x),e.set(i.subarray(M,w),h),t.b=h+=x,t.p=c=w*8;continue}if(c>A){if(r)throw"unexpected EOF";break}}s&&a(h+131072);for(var K=(1<<v)-1,Q=(1<<y)-1,de=c;;de=c){var se=d[DB(i,c)&K],W=se>>>4;if(c+=se&15,c>A){if(r)throw"unexpected EOF";break}if(!se)throw"invalid length/literal";if(W<256)e[h++]=W;else if(W==256){de=c,d=null;break}else{var he=W-254;if(W>264){var U=W-257,xe=Zk[U];he=Tc(i,c,(1<<xe)-1)+t5[U],c+=xe}var ye=m[DB(i,c)&Q],fe=ye>>>4;if(!ye)throw"invalid distance";c+=ye&15;var z=nne[fe];if(fe>3){var xe=Qk[fe];z+=DB(i,c)&(1<<xe)-1,c+=xe}if(c>A){if(r)throw"unexpected EOF";break}s&&a(h+131072);for(var De=h+he;h<De;h+=4)e[h]=e[h-z],e[h+1]=e[h+1-z],e[h+2]=e[h+2-z],e[h+3]=e[h+3-z];h=De}}t.l=d,t.p=de,t.b=h,d&&(o=1,t.m=v,t.d=m,t.n=y)}while(!o);return h==e.length?e:ane(e,0,h)},lne=new zl(0),cne=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function OT(i,e){return one((cne(i),i.subarray(2,-4)),e)}var une=typeof TextDecoder<"u"&&new TextDecoder,hne=0;try{une.decode(lne,{stream:!0}),hne=1}catch{}const fne=i=>i&&i.isCubeTexture;class dne extends ts{constructor(e,t){var n,s;const r=fne(e),o=((s=r?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?s:1024)/4,c=Math.floor(Math.log2(o)),h=Math.pow(2,c),d=3*Math.max(h,16*7),m=4*h,v=[r?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/m}`,`#define CUBEUV_MAX_MIP ${c}.0`],y=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,A=v.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${w3>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,E={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},M=new ZE(1,16),x=new Xi({uniforms:E,fragmentShader:A,vertexShader:y,side:ra});super(M,x)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var pne=Object.defineProperty,mne=(i,e,t)=>e in i?pne(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,gne=(i,e,t)=>(mne(i,e+"",t),t);class vne{constructor(){gne(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let r=0,a=s.length;r<a;r++)s[r].call(this,e);e.target=null}}}var yne=Object.defineProperty,_ne=(i,e,t)=>e in i?yne(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,cn=(i,e,t)=>(_ne(i,typeof e!="symbol"?e+"":e,t),t);const UT=new Gv,jF=new sf,Ane=Math.cos(70*(Math.PI/180)),XF=(i,e)=>(i%e+e)%e;let bne=class extends vne{constructor(e,t){super(),cn(this,"object"),cn(this,"domElement"),cn(this,"enabled",!0),cn(this,"target",new ae),cn(this,"minDistance",0),cn(this,"maxDistance",1/0),cn(this,"minZoom",0),cn(this,"maxZoom",1/0),cn(this,"minPolarAngle",0),cn(this,"maxPolarAngle",Math.PI),cn(this,"minAzimuthAngle",-1/0),cn(this,"maxAzimuthAngle",1/0),cn(this,"enableDamping",!1),cn(this,"dampingFactor",.05),cn(this,"enableZoom",!0),cn(this,"zoomSpeed",1),cn(this,"enableRotate",!0),cn(this,"rotateSpeed",1),cn(this,"enablePan",!0),cn(this,"panSpeed",1),cn(this,"screenSpacePanning",!0),cn(this,"keyPanSpeed",7),cn(this,"zoomToCursor",!1),cn(this,"autoRotate",!1),cn(this,"autoRotateSpeed",2),cn(this,"reverseOrbit",!1),cn(this,"reverseHorizontalOrbit",!1),cn(this,"reverseVerticalOrbit",!1),cn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),cn(this,"mouseButtons",{LEFT:$m.ROTATE,MIDDLE:$m.DOLLY,RIGHT:$m.PAN}),cn(this,"touches",{ONE:eg.ROTATE,TWO:eg.DOLLY_PAN}),cn(this,"target0"),cn(this,"position0"),cn(this,"zoom0"),cn(this,"_domElementKeyEvents",null),cn(this,"getPolarAngle"),cn(this,"getAzimuthalAngle"),cn(this,"setPolarAngle"),cn(this,"setAzimuthalAngle"),cn(this,"getDistance"),cn(this,"getZoomScale"),cn(this,"listenToKeyEvents"),cn(this,"stopListenToKeyEvents"),cn(this,"saveState"),cn(this,"reset"),cn(this,"update"),cn(this,"connect"),cn(this,"dispose"),cn(this,"dollyIn"),cn(this,"dollyOut"),cn(this,"getScale"),cn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=Ae=>{let qe=XF(Ae,2*Math.PI),gt=d.phi;gt<0&&(gt+=2*Math.PI),qe<0&&(qe+=2*Math.PI);let _e=Math.abs(qe-gt);2*Math.PI-_e<_e&&(qe<gt?qe+=2*Math.PI:gt+=2*Math.PI),m.phi=qe-gt,n.update()},this.setAzimuthalAngle=Ae=>{let qe=XF(Ae,2*Math.PI),gt=d.theta;gt<0&&(gt+=2*Math.PI),qe<0&&(qe+=2*Math.PI);let _e=Math.abs(qe-gt);2*Math.PI-_e<_e&&(qe<gt?qe+=2*Math.PI:gt+=2*Math.PI),m.theta=qe-gt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=Ae=>{Ae.addEventListener("keydown",vt),this._domElementKeyEvents=Ae},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",vt),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(s),n.update(),c=o.NONE},this.update=(()=>{const Ae=new ae,qe=new ae(0,1,0),gt=new Gr().setFromUnitVectors(e.up,qe),_e=gt.clone().invert(),Be=new ae,He=new Gr,tt=2*Math.PI;return function(){const Tt=n.object.position;gt.setFromUnitVectors(e.up,qe),_e.copy(gt).invert(),Ae.copy(Tt).sub(n.target),Ae.applyQuaternion(gt),d.setFromVector3(Ae),n.autoRotate&&c===o.NONE&&le(oe()),n.enableDamping?(d.theta+=m.theta*n.dampingFactor,d.phi+=m.phi*n.dampingFactor):(d.theta+=m.theta,d.phi+=m.phi);let Wt=n.minAzimuthAngle,vn=n.maxAzimuthAngle;isFinite(Wt)&&isFinite(vn)&&(Wt<-Math.PI?Wt+=tt:Wt>Math.PI&&(Wt-=tt),vn<-Math.PI?vn+=tt:vn>Math.PI&&(vn-=tt),Wt<=vn?d.theta=Math.max(Wt,Math.min(vn,d.theta)):d.theta=d.theta>(Wt+vn)/2?Math.max(Wt,d.theta):Math.min(vn,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&N||n.object.isOrthographicCamera?d.radius=ye(d.radius):d.radius=ye(d.radius*v),Ae.setFromSpherical(d),Ae.applyQuaternion(_e),Tt.copy(n.target).add(Ae),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(m.theta*=1-n.dampingFactor,m.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(m.set(0,0,0),y.set(0,0,0));let $n=!1;if(n.zoomToCursor&&N){let yn=null;if(n.object instanceof es&&n.object.isPerspectiveCamera){const os=Ae.length();yn=ye(os*v);const Ui=os-yn;n.object.position.addScaledVector(H,Ui),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const os=new ae(U.x,U.y,0);os.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix(),$n=!0;const Ui=new ae(U.x,U.y,0);Ui.unproject(n.object),n.object.position.sub(Ui).add(os),n.object.updateMatrixWorld(),yn=Ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;yn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(yn).add(n.object.position):(UT.origin.copy(n.object.position),UT.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(UT.direction))<Ane?e.lookAt(n.target):(jF.setFromNormalAndCoplanarPoint(n.object.up,n.target),UT.intersectPlane(jF,n.target))))}else n.object instanceof ql&&n.object.isOrthographicCamera&&($n=v!==1,$n&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix()));return v=1,N=!1,$n||Be.distanceToSquared(n.object.position)>h||8*(1-He.dot(n.object.quaternion))>h?(n.dispatchEvent(s),Be.copy(n.object.position),He.copy(n.object.quaternion),$n=!1,!0):!1}})(),this.connect=Ae=>{n.domElement=Ae,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",dt),n.domElement.addEventListener("pointerdown",J),n.domElement.addEventListener("pointercancel",Ye),n.domElement.addEventListener("wheel",pt)},this.dispose=()=>{var Ae,qe,gt,_e,Be,He;n.domElement&&(n.domElement.style.touchAction="auto"),(Ae=n.domElement)==null||Ae.removeEventListener("contextmenu",dt),(qe=n.domElement)==null||qe.removeEventListener("pointerdown",J),(gt=n.domElement)==null||gt.removeEventListener("pointercancel",Ye),(_e=n.domElement)==null||_e.removeEventListener("wheel",pt),(Be=n.domElement)==null||Be.ownerDocument.removeEventListener("pointermove",Te),(He=n.domElement)==null||He.ownerDocument.removeEventListener("pointerup",Ye),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",vt)};const n=this,s={type:"change"},r={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=o.NONE;const h=1e-6,d=new _L,m=new _L;let v=1;const y=new ae,A=new Ke,E=new Ke,M=new Ke,x=new Ke,w=new Ke,R=new Ke,D=new Ke,P=new Ke,I=new Ke,H=new ae,U=new Ke;let N=!1;const O=[],G={};function oe(){return 2*Math.PI/60/60*n.autoRotateSpeed}function se(){return Math.pow(.95,n.zoomSpeed)}function le(Ae){n.reverseOrbit||n.reverseHorizontalOrbit?m.theta+=Ae:m.theta-=Ae}function ue(Ae){n.reverseOrbit||n.reverseVerticalOrbit?m.phi+=Ae:m.phi-=Ae}const z=(()=>{const Ae=new ae;return function(gt,_e){Ae.setFromMatrixColumn(_e,0),Ae.multiplyScalar(-gt),y.add(Ae)}})(),K=(()=>{const Ae=new ae;return function(gt,_e){n.screenSpacePanning===!0?Ae.setFromMatrixColumn(_e,1):(Ae.setFromMatrixColumn(_e,0),Ae.crossVectors(n.object.up,Ae)),Ae.multiplyScalar(gt),y.add(Ae)}})(),Q=(()=>{const Ae=new ae;return function(gt,_e){const Be=n.domElement;if(Be&&n.object instanceof es&&n.object.isPerspectiveCamera){const He=n.object.position;Ae.copy(He).sub(n.target);let tt=Ae.length();tt*=Math.tan(n.object.fov/2*Math.PI/180),z(2*gt*tt/Be.clientHeight,n.object.matrix),K(2*_e*tt/Be.clientHeight,n.object.matrix)}else Be&&n.object instanceof ql&&n.object.isOrthographicCamera?(z(gt*(n.object.right-n.object.left)/n.object.zoom/Be.clientWidth,n.object.matrix),K(_e*(n.object.top-n.object.bottom)/n.object.zoom/Be.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function de(Ae){n.object instanceof es&&n.object.isPerspectiveCamera||n.object instanceof ql&&n.object.isOrthographicCamera?v=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function W(Ae){de(v/Ae)}function he(Ae){de(v*Ae)}function xe(Ae){if(!n.zoomToCursor||!n.domElement)return;N=!0;const qe=n.domElement.getBoundingClientRect(),gt=Ae.clientX-qe.left,_e=Ae.clientY-qe.top,Be=qe.width,He=qe.height;U.x=gt/Be*2-1,U.y=-(_e/He)*2+1,H.set(U.x,U.y,1).unproject(n.object).sub(n.object.position).normalize()}function ye(Ae){return Math.max(n.minDistance,Math.min(n.maxDistance,Ae))}function fe(Ae){A.set(Ae.clientX,Ae.clientY)}function De(Ae){xe(Ae),D.set(Ae.clientX,Ae.clientY)}function Ce(Ae){x.set(Ae.clientX,Ae.clientY)}function Ue(Ae){E.set(Ae.clientX,Ae.clientY),M.subVectors(E,A).multiplyScalar(n.rotateSpeed);const qe=n.domElement;qe&&(le(2*Math.PI*M.x/qe.clientHeight),ue(2*Math.PI*M.y/qe.clientHeight)),A.copy(E),n.update()}function Qe(Ae){P.set(Ae.clientX,Ae.clientY),I.subVectors(P,D),I.y>0?W(se()):I.y<0&&he(se()),D.copy(P),n.update()}function xt(Ae){w.set(Ae.clientX,Ae.clientY),R.subVectors(w,x).multiplyScalar(n.panSpeed),Q(R.x,R.y),x.copy(w),n.update()}function lt(Ae){xe(Ae),Ae.deltaY<0?he(se()):Ae.deltaY>0&&W(se()),n.update()}function mt(Ae){let qe=!1;switch(Ae.code){case n.keys.UP:Q(0,n.keyPanSpeed),qe=!0;break;case n.keys.BOTTOM:Q(0,-n.keyPanSpeed),qe=!0;break;case n.keys.LEFT:Q(n.keyPanSpeed,0),qe=!0;break;case n.keys.RIGHT:Q(-n.keyPanSpeed,0),qe=!0;break}qe&&(Ae.preventDefault(),n.update())}function it(){if(O.length==1)A.set(O[0].pageX,O[0].pageY);else{const Ae=.5*(O[0].pageX+O[1].pageX),qe=.5*(O[0].pageY+O[1].pageY);A.set(Ae,qe)}}function et(){if(O.length==1)x.set(O[0].pageX,O[0].pageY);else{const Ae=.5*(O[0].pageX+O[1].pageX),qe=.5*(O[0].pageY+O[1].pageY);x.set(Ae,qe)}}function $(){const Ae=O[0].pageX-O[1].pageX,qe=O[0].pageY-O[1].pageY,gt=Math.sqrt(Ae*Ae+qe*qe);D.set(0,gt)}function $e(){n.enableZoom&&$(),n.enablePan&&et()}function Ie(){n.enableZoom&&$(),n.enableRotate&&it()}function ke(Ae){if(O.length==1)E.set(Ae.pageX,Ae.pageY);else{const gt=Et(Ae),_e=.5*(Ae.pageX+gt.x),Be=.5*(Ae.pageY+gt.y);E.set(_e,Be)}M.subVectors(E,A).multiplyScalar(n.rotateSpeed);const qe=n.domElement;qe&&(le(2*Math.PI*M.x/qe.clientHeight),ue(2*Math.PI*M.y/qe.clientHeight)),A.copy(E)}function We(Ae){if(O.length==1)w.set(Ae.pageX,Ae.pageY);else{const qe=Et(Ae),gt=.5*(Ae.pageX+qe.x),_e=.5*(Ae.pageY+qe.y);w.set(gt,_e)}R.subVectors(w,x).multiplyScalar(n.panSpeed),Q(R.x,R.y),x.copy(w)}function St(Ae){const qe=Et(Ae),gt=Ae.pageX-qe.x,_e=Ae.pageY-qe.y,Be=Math.sqrt(gt*gt+_e*_e);P.set(0,Be),I.set(0,Math.pow(P.y/D.y,n.zoomSpeed)),W(I.y),D.copy(P)}function nt(Ae){n.enableZoom&&St(Ae),n.enablePan&&We(Ae)}function re(Ae){n.enableZoom&&St(Ae),n.enableRotate&&ke(Ae)}function J(Ae){var qe,gt;n.enabled!==!1&&(O.length===0&&((qe=n.domElement)==null||qe.ownerDocument.addEventListener("pointermove",Te),(gt=n.domElement)==null||gt.ownerDocument.addEventListener("pointerup",Ye)),Dt(Ae),Ae.pointerType==="touch"?Mt(Ae):st(Ae))}function Te(Ae){n.enabled!==!1&&(Ae.pointerType==="touch"?kt(Ae):je(Ae))}function Ye(Ae){var qe,gt,_e;Ot(Ae),O.length===0&&((qe=n.domElement)==null||qe.releasePointerCapture(Ae.pointerId),(gt=n.domElement)==null||gt.ownerDocument.removeEventListener("pointermove",Te),(_e=n.domElement)==null||_e.ownerDocument.removeEventListener("pointerup",Ye)),n.dispatchEvent(a),c=o.NONE}function st(Ae){let qe;switch(Ae.button){case 0:qe=n.mouseButtons.LEFT;break;case 1:qe=n.mouseButtons.MIDDLE;break;case 2:qe=n.mouseButtons.RIGHT;break;default:qe=-1}switch(qe){case $m.DOLLY:if(n.enableZoom===!1)return;De(Ae),c=o.DOLLY;break;case $m.ROTATE:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(n.enablePan===!1)return;Ce(Ae),c=o.PAN}else{if(n.enableRotate===!1)return;fe(Ae),c=o.ROTATE}break;case $m.PAN:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(n.enableRotate===!1)return;fe(Ae),c=o.ROTATE}else{if(n.enablePan===!1)return;Ce(Ae),c=o.PAN}break;default:c=o.NONE}c!==o.NONE&&n.dispatchEvent(r)}function je(Ae){if(n.enabled!==!1)switch(c){case o.ROTATE:if(n.enableRotate===!1)return;Ue(Ae);break;case o.DOLLY:if(n.enableZoom===!1)return;Qe(Ae);break;case o.PAN:if(n.enablePan===!1)return;xt(Ae);break}}function pt(Ae){n.enabled===!1||n.enableZoom===!1||c!==o.NONE&&c!==o.ROTATE||(Ae.preventDefault(),n.dispatchEvent(r),lt(Ae),n.dispatchEvent(a))}function vt(Ae){n.enabled===!1||n.enablePan===!1||mt(Ae)}function Mt(Ae){switch(Lt(Ae),O.length){case 1:switch(n.touches.ONE){case eg.ROTATE:if(n.enableRotate===!1)return;it(),c=o.TOUCH_ROTATE;break;case eg.PAN:if(n.enablePan===!1)return;et(),c=o.TOUCH_PAN;break;default:c=o.NONE}break;case 2:switch(n.touches.TWO){case eg.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;$e(),c=o.TOUCH_DOLLY_PAN;break;case eg.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ie(),c=o.TOUCH_DOLLY_ROTATE;break;default:c=o.NONE}break;default:c=o.NONE}c!==o.NONE&&n.dispatchEvent(r)}function kt(Ae){switch(Lt(Ae),c){case o.TOUCH_ROTATE:if(n.enableRotate===!1)return;ke(Ae),n.update();break;case o.TOUCH_PAN:if(n.enablePan===!1)return;We(Ae),n.update();break;case o.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;nt(Ae),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;re(Ae),n.update();break;default:c=o.NONE}}function dt(Ae){n.enabled!==!1&&Ae.preventDefault()}function Dt(Ae){O.push(Ae)}function Ot(Ae){delete G[Ae.pointerId];for(let qe=0;qe<O.length;qe++)if(O[qe].pointerId==Ae.pointerId){O.splice(qe,1);return}}function Lt(Ae){let qe=G[Ae.pointerId];qe===void 0&&(qe=new Ke,G[Ae.pointerId]=qe),qe.set(Ae.pageX,Ae.pageY)}function Et(Ae){const qe=Ae.pointerId===O[0].pointerId?O[1]:O[0];return G[qe.pointerId]}this.dollyIn=(Ae=se())=>{he(Ae),n.update()},this.dollyOut=(Ae=se())=>{W(Ae),n.update()},this.getScale=()=>v,this.setScale=Ae=>{de(Ae),n.update()},this.getZoomScale=()=>se(),t!==void 0&&this.connect(t),this.update()}};function Cw(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const yg="srgb",If="srgb-linear",qF=3001,xne=3e3;class R3 extends ca{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Cne(t)}),this.register(function(t){return new wne(t)}),this.register(function(t){return new Une(t)}),this.register(function(t){return new Fne(t)}),this.register(function(t){return new Hne(t)}),this.register(function(t){return new Dne(t)}),this.register(function(t){return new Bne(t)}),this.register(function(t){return new Lne(t)}),this.register(function(t){return new Nne(t)}),this.register(function(t){return new Tne(t)}),this.register(function(t){return new Ine(t)}),this.register(function(t){return new Rne(t)}),this.register(function(t){return new One(t)}),this.register(function(t){return new Pne(t)}),this.register(function(t){return new Ene(t)}),this.register(function(t){return new zne(t)}),this.register(function(t){return new Gne(t)})}load(e,t,n,s){const r=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const h=wp.extractUrlBase(e);a=wp.resolveURL(h,this.path)}else a=wp.extractUrlBase(e);this.manager.itemStart(e);const o=function(h){s?s(h):console.error(h),r.manager.itemError(e),r.manager.itemEnd(e)},c=new oa(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{r.parse(h,a,function(d){t(d),r.manager.itemEnd(e)},o)}catch(d){o(d)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let r;const a={},o={};if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Cw(new Uint8Array(e.slice(0,4)))===i5){try{a[Qn.KHR_BINARY_GLTF]=new kne(e)}catch(d){s&&s(d);return}r=JSON.parse(a[Qn.KHR_BINARY_GLTF].content)}else r=JSON.parse(Cw(new Uint8Array(e)));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new tie(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const d=this.pluginCallbacks[h](c);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[d.name]=d,a[d.name]=!0}if(r.extensionsUsed)for(let h=0;h<r.extensionsUsed.length;++h){const d=r.extensionsUsed[h],m=r.extensionsRequired||[];switch(d){case Qn.KHR_MATERIALS_UNLIT:a[d]=new Mne;break;case Qn.KHR_DRACO_MESH_COMPRESSION:a[d]=new Vne(r,this.dracoLoader);break;case Qn.KHR_TEXTURE_TRANSFORM:a[d]=new jne;break;case Qn.KHR_MESH_QUANTIZATION:a[d]=new Xne;break;default:m.indexOf(d)>=0&&o[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(a),c.setPlugins(o),c.parse(n,s)}parseAsync(e,t){const n=this;return new Promise(function(s,r){n.parse(e,t,s,r)})}}function Sne(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Qn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Ene{constructor(e){this.parser=e,this.name=Qn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const r=t.json,c=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let h;const d=new Bt(16777215);c.color!==void 0&&d.setRGB(c.color[0],c.color[1],c.color[2],If);const m=c.range!==void 0?c.range:0;switch(c.type){case"directional":h=new u3(d),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new c3(d),h.distance=m;break;case"spot":h=new l3(d),h.distance=m,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,h.angle=c.spot.outerConeAngle,h.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return h.position.set(0,0,0),h.decay=2,$h(h,c),c.intensity!==void 0&&(h.intensity=c.intensity),h.name=t.createUniqueName(c.name||"light_"+e),s=Promise.resolve(h),t.cache.add(n,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],o=(r.extensions&&r.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(c){return n._getNodeRef(t.cache,o,c)})}}class Mne{constructor(){this.name=Qn.KHR_MATERIALS_UNLIT}getMaterialType(){return Do}extendParams(e,t,n){const s=[];e.color=new Bt(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const a=r.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],If),e.opacity=a[3]}r.baseColorTexture!==void 0&&s.push(n.assignTexture(e,"map",r.baseColorTexture,yg))}return Promise.all(s)}}class Tne{constructor(e){this.parser=e,this.name=Qn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class Cne{constructor(e){this.parser=e,this.name=Qn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Zl}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ke(o,o)}return Promise.all(r)}}class wne{constructor(e){this.parser=e,this.name=Qn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Zl}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class Rne{constructor(e){this.parser=e,this.name=Qn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Zl}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}}class Dne{constructor(e){this.parser=e,this.name=Qn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Zl}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Bt(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=s.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],If)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&r.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,yg)),a.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(r)}}class Bne{constructor(e){this.parser=e,this.name=Qn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Zl}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&r.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(r)}}class Lne{constructor(e){this.parser=e,this.name=Qn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Zl}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&r.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new Bt().setRGB(o[0],o[1],o[2],If),Promise.all(r)}}class Nne{constructor(e){this.parser=e,this.name=Qn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Zl}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class Ine{constructor(e){this.parser=e,this.name=Qn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Zl}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&r.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new Bt().setRGB(o[0],o[1],o[2],If),a.specularColorTexture!==void 0&&r.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,yg)),Promise.all(r)}}class Pne{constructor(e){this.parser=e,this.name=Qn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Zl}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&r.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(r)}}class One{constructor(e){this.parser=e,this.name=Qn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Zl}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],a=s.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&r.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(r)}}class Une{constructor(e){this.parser=e,this.name=Qn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,a)}}class Fne{constructor(e){this.parser=e,this.name=Qn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],o=s.images[a.source];let c=n.textureLoader;if(o.uri){const h=n.options.manager.getHandler(o.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,a.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Hne{constructor(e){this.parser=e,this.name=Qn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const a=r.extensions[t],o=s.images[a.source];let c=n.textureLoader;if(o.uri){const h=n.options.manager.getHandler(o.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,a.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class zne{constructor(e){this.name=Qn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(o){const c=s.byteOffset||0,h=s.byteLength||0,d=s.count,m=s.byteStride,v=new Uint8Array(o,c,h);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(d,m,v,s.mode,s.filter).then(function(y){return y.buffer}):a.ready.then(function(){const y=new ArrayBuffer(d*m);return a.decodeGltfBuffer(new Uint8Array(y),d,m,v,s.mode,s.filter),y})})}else return null}}class Gne{constructor(e){this.name=Qn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const s=t.meshes[n.mesh];for(const h of s.primitives)if(h.mode!==Nl.TRIANGLES&&h.mode!==Nl.TRIANGLE_STRIP&&h.mode!==Nl.TRIANGLE_FAN&&h.mode!==void 0)return null;const a=n.extensions[this.name].attributes,o=[],c={};for(const h in a)o.push(this.parser.getDependency("accessor",a[h]).then(d=>(c[h]=d,c[h])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(h=>{const d=h.pop(),m=d.isGroup?d.children:[d],v=h[0].count,y=[];for(const A of m){const E=new on,M=new ae,x=new Gr,w=new ae(1,1,1),R=new qI(A.geometry,A.material,v);for(let D=0;D<v;D++)c.TRANSLATION&&M.fromBufferAttribute(c.TRANSLATION,D),c.ROTATION&&x.fromBufferAttribute(c.ROTATION,D),c.SCALE&&w.fromBufferAttribute(c.SCALE,D),R.setMatrixAt(D,E.compose(M,x,w));for(const D in c)if(D==="_COLOR_0"){const P=c[D];R.instanceColor=new Mv(P.array,P.itemSize,P.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&A.geometry.setAttribute(D,c[D]);ci.prototype.copy.call(R,A),this.parser.assignFinalMaterial(R),y.push(R)}return d.isGroup?(d.clear(),d.add(...y),d):y[0]}))}}const i5="glTF",$b=12,YF={JSON:1313821514,BIN:5130562};class kne{constructor(e){this.name=Qn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,$b);if(this.header={magic:Cw(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==i5)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-$b,s=new DataView(e,$b);let r=0;for(;r<n;){const a=s.getUint32(r,!0);r+=4;const o=s.getUint32(r,!0);if(r+=4,o===YF.JSON){const c=new Uint8Array(e,$b+r,a);this.content=Cw(c)}else if(o===YF.BIN){const c=$b+r;this.body=e.slice(c,c+a)}r+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Vne{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Qn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},c={},h={};for(const d in a){const m=BL[d]||d.toLowerCase();o[m]=a[d]}for(const d in e.attributes){const m=BL[d]||d.toLowerCase();if(a[d]!==void 0){const v=n.accessors[e.attributes[d]],y=Uy[v.componentType];h[m]=y.name,c[m]=v.normalized===!0}}return t.getDependency("bufferView",r).then(function(d){return new Promise(function(m,v){s.decodeDracoFile(d,function(y){for(const A in y.attributes){const E=y.attributes[A],M=c[A];M!==void 0&&(E.normalized=M)}m(y)},o,h,If,v)})})}}class jne{constructor(){this.name=Qn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Xne{constructor(){this.name=Qn.KHR_MESH_QUANTIZATION}}class s5 extends vA{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let a=0;a!==s;a++)t[a]=n[r+a];return t}interpolate_(e,t,n,s){const r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=o*2,h=o*3,d=s-t,m=(n-t)/d,v=m*m,y=v*m,A=e*h,E=A-h,M=-2*y+3*v,x=y-v,w=1-M,R=x-v+m;for(let D=0;D!==o;D++){const P=a[E+D+o],I=a[E+D+c]*d,H=a[A+D+o],U=a[A+D]*d;r[D]=w*P+R*I+M*H+x*U}return r}}const qne=new Gr;class Yne extends s5{interpolate_(e,t,n,s){const r=super.interpolate_(e,t,n,s);return qne.fromArray(r).normalize().toArray(r),r}}const Nl={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Uy={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WF={9728:gs,9729:li,9984:SR,9985:Py,9986:fg,9987:rl},KF={33071:js,33648:W_,10497:Ip},BB={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},BL={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...w3>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},jd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Wne={CUBICSPLINE:void 0,LINEAR:Q_,STEP:Z_},LB={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Kne(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new gA({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:nu})),i.DefaultMaterial}function Zm(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function $h(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Jne(i,e,t){let n=!1,s=!1,r=!1;for(let h=0,d=e.length;h<d;h++){const m=e[h];if(m.POSITION!==void 0&&(n=!0),m.NORMAL!==void 0&&(s=!0),m.COLOR_0!==void 0&&(r=!0),n&&s&&r)break}if(!n&&!s&&!r)return Promise.resolve(i);const a=[],o=[],c=[];for(let h=0,d=e.length;h<d;h++){const m=e[h];if(n){const v=m.POSITION!==void 0?t.getDependency("accessor",m.POSITION):i.attributes.position;a.push(v)}if(s){const v=m.NORMAL!==void 0?t.getDependency("accessor",m.NORMAL):i.attributes.normal;o.push(v)}if(r){const v=m.COLOR_0!==void 0?t.getDependency("accessor",m.COLOR_0):i.attributes.color;c.push(v)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(c)]).then(function(h){const d=h[0],m=h[1],v=h[2];return n&&(i.morphAttributes.position=d),s&&(i.morphAttributes.normal=m),r&&(i.morphAttributes.color=v),i.morphTargetsRelative=!0,i})}function Zne(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,s=t.length;n<s;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Qne(i){let e;const t=i.extensions&&i.extensions[Qn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+NB(t.attributes):e=i.indices+":"+NB(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,s=i.targets.length;n<s;n++)e+=":"+NB(i.targets[n]);return e}function NB(i){let e="";const t=Object.keys(i).sort();for(let n=0,s=t.length;n<s;n++)e+=t[n]+":"+i[t[n]]+";";return e}function LL(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function $ne(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const eie=new on;class tie{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Sne,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||s&&r<98?this.textureLoader=new bw(this.options.manager):this.textureLoader=new mk(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new oa(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const o={scene:a[0][s.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:s.asset,parser:n,userData:{}};return Zm(r,o,s),$h(o,s),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(o)})).then(function(){for(const c of o.scenes)c.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const a=t[s].joints;for(let o=0,c=a.length;o<c;o++)e[a[o]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const a=e[s];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone(),r=(a,o)=>{const c=this.associations.get(a);c!=null&&this.associations.set(o,c);for(const[h,d]of a.children.entries())r(d,o.children[h])};return r(n,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Qn.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,a){n.load(wp.resolveURL(t.uri,s.path),r,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteLength||0,r=t.byteOffset||0;return n.slice(r,r+s)})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const a=BB[s.type],o=Uy[s.componentType],c=s.normalized===!0,h=new o(s.count*a);return Promise.resolve(new ui(h,a,c))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(a){const o=a[0],c=BB[s.type],h=Uy[s.componentType],d=h.BYTES_PER_ELEMENT,m=d*c,v=s.byteOffset||0,y=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,A=s.normalized===!0;let E,M;if(y&&y!==m){const x=Math.floor(v/y),w="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+x+":"+s.count;let R=t.cache.get(w);R||(E=new h(o,x*y,s.count*y/d),R=new qE(E,y/d),t.cache.add(w,R)),M=new Pp(R,c,v%y/d,A)}else o===null?E=new h(s.count*c):E=new h(o,v,s.count*c),M=new ui(E,c,A);if(s.sparse!==void 0){const x=BB.SCALAR,w=Uy[s.sparse.indices.componentType],R=s.sparse.indices.byteOffset||0,D=s.sparse.values.byteOffset||0,P=new w(a[1],R,s.sparse.count*x),I=new h(a[2],D,s.sparse.count*c);o!==null&&(M=new ui(M.array.slice(),M.itemSize,M.normalized));for(let H=0,U=P.length;H<U;H++){const N=P[H];if(M.setX(N,I[H*c]),c>=2&&M.setY(N,I[H*c+1]),c>=3&&M.setZ(N,I[H*c+2]),c>=4&&M.setW(N,I[H*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return M})}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,a=t.images[r];let o=this.textureLoader;if(a.uri){const c=n.manager.getHandler(a.uri);c!==null&&(o=c)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,n){const s=this,r=this.json,a=r.textures[e],o=r.images[t],c=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[c])return this.textureCache[c];const h=this.loadImageSource(t,n).then(function(d){d.flipY=!1,d.name=a.name||o.name||"",d.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(d.name=o.uri);const v=(r.samplers||{})[a.sampler]||{};return d.magFilter=WF[v.magFilter]||li,d.minFilter=WF[v.minFilter]||rl,d.wrapS=KF[v.wrapS]||Ip,d.wrapT=KF[v.wrapT]||Ip,s.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[c]=h,h}loadImageSource(e,t){const n=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(m=>m.clone());const a=s.images[e],o=self.URL||self.webkitURL;let c=a.uri||"",h=!1;if(a.bufferView!==void 0)c=n.getDependency("bufferView",a.bufferView).then(function(m){h=!0;const v=new Blob([m],{type:a.mimeType});return c=o.createObjectURL(v),c});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(c).then(function(m){return new Promise(function(v,y){let A=v;t.isImageBitmapLoader===!0&&(A=function(E){const M=new Ai(E);M.needsUpdate=!0,v(M)}),t.load(wp.resolveURL(m,r.path),A,void 0,y)})}).then(function(m){return h===!0&&o.revokeObjectURL(c),$h(m,a),m.userData.mimeType=a.mimeType||$ne(a.uri),m}).catch(function(m){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),m});return this.sourceCache[e]=d,d}assignTexture(e,t,n,s){const r=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),r.extensions[Qn.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[Qn.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const c=r.associations.get(a);a=r.extensions[Qn.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),r.associations.set(a,c)}}return s!==void 0&&(typeof s=="number"&&(s=s===qF?yg:If),"colorSpace"in a?a.colorSpace=s:a.encoding=s===yg?qF:xne),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+n.uuid;let c=this.cache.get(o);c||(c=new UR,Ys.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(o,c)),n=c}else if(e.isLine){const o="LineBasicMaterial:"+n.uuid;let c=this.cache.get(o);c||(c=new Na,Ys.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,this.cache.add(o,c)),n=c}if(s||r||a){let o="ClonedMaterial:"+n.uuid+":";s&&(o+="derivative-tangents:"),r&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let c=this.cache.get(o);c||(c=n.clone(),r&&(c.vertexColors=!0),a&&(c.flatShading=!0),s&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(o,c),this.associations.set(c,this.associations.get(n))),n=c}e.material=n}getMaterialType(){return gA}loadMaterial(e){const t=this,n=this.json,s=this.extensions,r=n.materials[e];let a;const o={},c=r.extensions||{},h=[];if(c[Qn.KHR_MATERIALS_UNLIT]){const m=s[Qn.KHR_MATERIALS_UNLIT];a=m.getMaterialType(),h.push(m.extendParams(o,r,t))}else{const m=r.pbrMetallicRoughness||{};if(o.color=new Bt(1,1,1),o.opacity=1,Array.isArray(m.baseColorFactor)){const v=m.baseColorFactor;o.color.setRGB(v[0],v[1],v[2],If),o.opacity=v[3]}m.baseColorTexture!==void 0&&h.push(t.assignTexture(o,"map",m.baseColorTexture,yg)),o.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,o.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(o,"metalnessMap",m.metallicRoughnessTexture)),h.push(t.assignTexture(o,"roughnessMap",m.metallicRoughnessTexture))),a=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,o)})))}r.doubleSided===!0&&(o.side=ra);const d=r.alphaMode||LB.OPAQUE;if(d===LB.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,d===LB.MASK&&(o.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&a!==Do&&(h.push(t.assignTexture(o,"normalMap",r.normalTexture)),o.normalScale=new Ke(1,1),r.normalTexture.scale!==void 0)){const m=r.normalTexture.scale;o.normalScale.set(m,m)}if(r.occlusionTexture!==void 0&&a!==Do&&(h.push(t.assignTexture(o,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&a!==Do){const m=r.emissiveFactor;o.emissive=new Bt().setRGB(m[0],m[1],m[2],If)}return r.emissiveTexture!==void 0&&a!==Do&&h.push(t.assignTexture(o,"emissiveMap",r.emissiveTexture,yg)),Promise.all(h).then(function(){const m=new a(o);return r.name&&(m.name=r.name),$h(m,r),t.associations.set(m,{materials:e}),r.extensions&&Zm(s,m,r),m})}createUniqueName(e){const t=di.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function r(o){return n[Qn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(c){return JF(c,o,t)})}const a=[];for(let o=0,c=e.length;o<c;o++){const h=e[o],d=Qne(h),m=s[d];if(m)a.push(m.promise);else{let v;h.extensions&&h.extensions[Qn.KHR_DRACO_MESH_COMPRESSION]?v=r(h):v=JF(new En,h,t),s[d]={primitive:h,promise:v},a.push(v)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,s=this.extensions,r=n.meshes[e],a=r.primitives,o=[];for(let c=0,h=a.length;c<h;c++){const d=a[c].material===void 0?Kne(this.cache):this.getDependency("material",a[c].material);o.push(d)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(c){const h=c.slice(0,c.length-1),d=c[c.length-1],m=[];for(let y=0,A=d.length;y<A;y++){const E=d[y],M=a[y];let x;const w=h[y];if(M.mode===Nl.TRIANGLES||M.mode===Nl.TRIANGLE_STRIP||M.mode===Nl.TRIANGLE_FAN||M.mode===void 0)x=r.isSkinnedMesh===!0?new XI(E,w):new ts(E,w),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),M.mode===Nl.TRIANGLE_STRIP?x.geometry=VF(x.geometry,FI):M.mode===Nl.TRIANGLE_FAN&&(x.geometry=VF(x.geometry,gw));else if(M.mode===Nl.LINES)x=new ou(E,w);else if(M.mode===Nl.LINE_STRIP)x=new Ff(E,w);else if(M.mode===Nl.LINE_LOOP)x=new YI(E,w);else if(M.mode===Nl.POINTS)x=new WI(E,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(x.geometry.morphAttributes).length>0&&Zne(x,r),x.name=t.createUniqueName(r.name||"mesh_"+e),$h(x,r),M.extensions&&Zm(s,x,M),t.assignFinalMaterial(x),m.push(x)}for(let y=0,A=m.length;y<A;y++)t.associations.set(m[y],{meshes:e,primitives:y});if(m.length===1)return r.extensions&&Zm(s,m[0],r),m[0];const v=new Bf;r.extensions&&Zm(s,v,r),t.associations.set(v,{meshes:e});for(let y=0,A=m.length;y<A;y++)v.add(m[y]);return v})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new es(EG.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(t=new ql(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),$h(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let s=0,r=t.joints.length;s<r;s++)n.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const r=s.pop(),a=s,o=[],c=[];for(let h=0,d=a.length;h<d;h++){const m=a[h];if(m){o.push(m);const v=new on;r!==null&&v.fromArray(r.array,h*16),c.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new YE(o,c)})}loadAnimation(e){const t=this.json,n=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,a=[],o=[],c=[],h=[],d=[];for(let m=0,v=s.channels.length;m<v;m++){const y=s.channels[m],A=s.samplers[y.sampler],E=y.target,M=E.node,x=s.parameters!==void 0?s.parameters[A.input]:A.input,w=s.parameters!==void 0?s.parameters[A.output]:A.output;E.node!==void 0&&(a.push(this.getDependency("node",M)),o.push(this.getDependency("accessor",x)),c.push(this.getDependency("accessor",w)),h.push(A),d.push(E))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(c),Promise.all(h),Promise.all(d)]).then(function(m){const v=m[0],y=m[1],A=m[2],E=m[3],M=m[4],x=[];for(let w=0,R=v.length;w<R;w++){const D=v[w],P=y[w],I=A[w],H=E[w],U=M[w];if(D===void 0)continue;D.updateMatrix&&D.updateMatrix();const N=n._createAnimationTracks(D,P,I,H,U);if(N)for(let O=0;O<N.length;O++)x.push(N[O])}return new iA(r,void 0,x)})}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(r){const a=n._getNodeRef(n.meshCache,s.mesh,r);return s.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let c=0,h=s.weights.length;c<h;c++)o.morphTargetInfluences[c]=s.weights[c]}),a})}loadNode(e){const t=this.json,n=this,s=t.nodes[e],r=n._loadNodeShallow(e),a=[],o=s.children||[];for(let h=0,d=o.length;h<d;h++)a.push(n.getDependency("node",o[h]));const c=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([r,Promise.all(a),c]).then(function(h){const d=h[0],m=h[1],v=h[2];v!==null&&d.traverse(function(y){y.isSkinnedMesh&&y.bind(v,eie)});for(let y=0,A=m.length;y<A;y++)d.add(m[y]);return d})}_loadNodeShallow(e){const t=this.json,n=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],a=r.name?s.createUniqueName(r.name):"",o=[],c=s._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return c&&o.push(c),r.camera!==void 0&&o.push(s.getDependency("camera",r.camera).then(function(h){return s._getNodeRef(s.cameraCache,r.camera,h)})),s._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){o.push(h)}),this.nodeCache[e]=Promise.all(o).then(function(h){let d;if(r.isBone===!0?d=new PR:h.length>1?d=new Bf:h.length===1?d=h[0]:d=new ci,d!==h[0])for(let m=0,v=h.length;m<v;m++)d.add(h[m]);if(r.name&&(d.userData.name=r.name,d.name=a),$h(d,r),r.extensions&&Zm(n,d,r),r.matrix!==void 0){const m=new on;m.fromArray(r.matrix),d.applyMatrix4(m)}else r.translation!==void 0&&d.position.fromArray(r.translation),r.rotation!==void 0&&d.quaternion.fromArray(r.rotation),r.scale!==void 0&&d.scale.fromArray(r.scale);return s.associations.has(d)||s.associations.set(d,{}),s.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],s=this,r=new Bf;n.name&&(r.name=s.createUniqueName(n.name)),$h(r,n),n.extensions&&Zm(t,r,n);const a=n.nodes||[],o=[];for(let c=0,h=a.length;c<h;c++)o.push(s.getDependency("node",a[c]));return Promise.all(o).then(function(c){for(let d=0,m=c.length;d<m;d++)r.add(c[d]);const h=d=>{const m=new Map;for(const[v,y]of s.associations)(v instanceof Ys||v instanceof Ai)&&m.set(v,y);return d.traverse(v=>{const y=s.associations.get(v);y!=null&&m.set(v,y)}),m};return s.associations=h(r),r})}_createAnimationTracks(e,t,n,s,r){const a=[],o=e.name?e.name:e.uuid,c=[];jd[r.path]===jd.weights?e.traverse(function(v){v.morphTargetInfluences&&c.push(v.name?v.name:v.uuid)}):c.push(o);let h;switch(jd[r.path]){case jd.weights:h=Cv;break;case jd.rotation:h=wv;break;case jd.position:case jd.scale:h=Rv;break;default:switch(n.itemSize){case 1:h=Cv;break;case 2:case 3:default:h=Rv;break}break}const d=s.interpolation!==void 0?Wne[s.interpolation]:Q_,m=this._getArrayFromAccessor(n);for(let v=0,y=c.length;v<y;v++){const A=new h(c[v]+"."+jd[r.path],t.array,m,d);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(A),a.push(A)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=LL(t.constructor),s=new Float32Array(t.length);for(let r=0,a=t.length;r<a;r++)s[r]=t[r]*n;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const s=this instanceof wv?Yne:s5;return new s(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function nie(i,e,t){const n=e.attributes,s=new aa;if(n.POSITION!==void 0){const o=t.json.accessors[n.POSITION],c=o.min,h=o.max;if(c!==void 0&&h!==void 0){if(s.set(new ae(c[0],c[1],c[2]),new ae(h[0],h[1],h[2])),o.normalized){const d=LL(Uy[o.componentType]);s.min.multiplyScalar(d),s.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const o=new ae,c=new ae;for(let h=0,d=r.length;h<d;h++){const m=r[h];if(m.POSITION!==void 0){const v=t.json.accessors[m.POSITION],y=v.min,A=v.max;if(y!==void 0&&A!==void 0){if(c.setX(Math.max(Math.abs(y[0]),Math.abs(A[0]))),c.setY(Math.max(Math.abs(y[1]),Math.abs(A[1]))),c.setZ(Math.max(Math.abs(y[2]),Math.abs(A[2]))),v.normalized){const E=LL(Uy[v.componentType]);c.multiplyScalar(E)}o.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(o)}i.boundingBox=s;const a=new kr;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=a}function JF(i,e,t){const n=e.attributes,s=[];function r(a,o){return t.getDependency("accessor",a).then(function(c){i.setAttribute(o,c)})}for(const a in n){const o=BL[a]||a.toLowerCase();o in i.attributes||s.push(r(n[a],o))}if(e.indices!==void 0&&!i.index){const a=t.getDependency("accessor",e.indices).then(function(o){i.setIndex(o)});s.push(a)}return $h(i,e),nie(i,e,t),Promise.all(s).then(function(){return e.targets!==void 0?Jne(i,e.targets,t):i})}const iie={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},sie={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class rie extends a3{constructor(e){super(e),this.type=br}parse(e){const a=function(U,N){switch(U){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(N||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(N||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(N||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(N||""))}},d=`
`,m=function(U,N,O){N=N||1024;let oe=U.pos,se=-1,le=0,ue="",z=String.fromCharCode.apply(null,new Uint16Array(U.subarray(oe,oe+128)));for(;0>(se=z.indexOf(d))&&le<N&&oe<U.byteLength;)ue+=z,le+=z.length,oe+=128,z+=String.fromCharCode.apply(null,new Uint16Array(U.subarray(oe,oe+128)));return-1<se?(U.pos+=le+se+1,ue+z.slice(0,se)):!1},v=function(U){const N=/^#\?(\S+)/,O=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,G=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,oe=/^\s*FORMAT=(\S+)\s*$/,se=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,le={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ue,z;for((U.pos>=U.byteLength||!(ue=m(U)))&&a(1,"no header found"),(z=ue.match(N))||a(3,"bad initial token"),le.valid|=1,le.programtype=z[1],le.string+=ue+`
`;ue=m(U),ue!==!1;){if(le.string+=ue+`
`,ue.charAt(0)==="#"){le.comments+=ue+`
`;continue}if((z=ue.match(O))&&(le.gamma=parseFloat(z[1])),(z=ue.match(G))&&(le.exposure=parseFloat(z[1])),(z=ue.match(oe))&&(le.valid|=2,le.format=z[1]),(z=ue.match(se))&&(le.valid|=4,le.height=parseInt(z[1],10),le.width=parseInt(z[2],10)),le.valid&2&&le.valid&4)break}return le.valid&2||a(3,"missing format specifier"),le.valid&4||a(3,"missing image size specifier"),le},y=function(U,N,O){const G=N;if(G<8||G>32767||U[0]!==2||U[1]!==2||U[2]&128)return new Uint8Array(U);G!==(U[2]<<8|U[3])&&a(3,"wrong scanline width");const oe=new Uint8Array(4*N*O);oe.length||a(4,"unable to allocate buffer space");let se=0,le=0;const ue=4*G,z=new Uint8Array(4),K=new Uint8Array(ue);let Q=O;for(;Q>0&&le<U.byteLength;){le+4>U.byteLength&&a(1),z[0]=U[le++],z[1]=U[le++],z[2]=U[le++],z[3]=U[le++],(z[0]!=2||z[1]!=2||(z[2]<<8|z[3])!=G)&&a(3,"bad rgbe scanline format");let de=0,W;for(;de<ue&&le<U.byteLength;){W=U[le++];const xe=W>128;if(xe&&(W-=128),(W===0||de+W>ue)&&a(3,"bad scanline data"),xe){const ye=U[le++];for(let fe=0;fe<W;fe++)K[de++]=ye}else K.set(U.subarray(le,le+W),de),de+=W,le+=W}const he=G;for(let xe=0;xe<he;xe++){let ye=0;oe[se]=K[xe+ye],ye+=G,oe[se+1]=K[xe+ye],ye+=G,oe[se+2]=K[xe+ye],ye+=G,oe[se+3]=K[xe+ye],se+=4}Q--}return oe},A=function(U,N,O,G){const oe=U[N+3],se=Math.pow(2,oe-128)/255;O[G+0]=U[N+0]*se,O[G+1]=U[N+1]*se,O[G+2]=U[N+2]*se,O[G+3]=1},E=function(U,N,O,G){const oe=U[N+3],se=Math.pow(2,oe-128)/255;O[G+0]=mg.toHalfFloat(Math.min(U[N+0]*se,65504)),O[G+1]=mg.toHalfFloat(Math.min(U[N+1]*se,65504)),O[G+2]=mg.toHalfFloat(Math.min(U[N+2]*se,65504)),O[G+3]=mg.toHalfFloat(1)},M=new Uint8Array(e);M.pos=0;const x=v(M),w=x.width,R=x.height,D=y(M.subarray(M.pos),w,R);let P,I,H;switch(this.type){case ms:H=D.length/4;const U=new Float32Array(H*4);for(let O=0;O<H;O++)A(D,O*4,U,O*4);P=U,I=ms;break;case br:H=D.length/4;const N=new Uint16Array(H*4);for(let O=0;O<H;O++)E(D,O*4,N,O*4);P=N,I=br;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:w,height:R,data:P,header:x.string,gamma:x.gamma,exposure:x.exposure,type:I}}setDataType(e){return this.type=e,this}load(e,t,n,s){function r(a,o){switch(a.type){case ms:case br:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=li,a.magFilter=li,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,o)}return super.load(e,r,n,s)}}const ex=w3>=152;class aie extends a3{constructor(e){super(e),this.type=br}parse(e){const N=Math.pow(2.7182818,2.2);function O(j,ie){for(var be=0,Oe=0;Oe<65536;++Oe)(Oe==0||j[Oe>>3]&1<<(Oe&7))&&(ie[be++]=Oe);for(var ze=be-1;be<65536;)ie[be++]=0;return ze}function G(j){for(var ie=0;ie<16384;ie++)j[ie]={},j[ie].len=0,j[ie].lit=0,j[ie].p=null}const oe={l:0,c:0,lc:0};function se(j,ie,be,Oe,ze){for(;be<j;)ie=ie<<8|Et(Oe,ze),be+=8;be-=j,oe.l=ie>>be&(1<<j)-1,oe.c=ie,oe.lc=be}const le=new Array(59);function ue(j){for(var ie=0;ie<=58;++ie)le[ie]=0;for(var ie=0;ie<65537;++ie)le[j[ie]]+=1;for(var be=0,ie=58;ie>0;--ie){var Oe=be+le[ie]>>1;le[ie]=be,be=Oe}for(var ie=0;ie<65537;++ie){var ze=j[ie];ze>0&&(j[ie]=ze|le[ze]++<<6)}}function z(j,ie,be,Oe,ze,Je,_t){for(var ft=be,X=0,ce=0;ze<=Je;ze++){if(ft.value-be.value>Oe)return!1;se(6,X,ce,j,ft);var me=oe.l;if(X=oe.c,ce=oe.lc,_t[ze]=me,me==63){if(ft.value-be.value>Oe)throw"Something wrong with hufUnpackEncTable";se(8,X,ce,j,ft);var ge=oe.l+6;if(X=oe.c,ce=oe.lc,ze+ge>Je+1)throw"Something wrong with hufUnpackEncTable";for(;ge--;)_t[ze++]=0;ze--}else if(me>=59){var ge=me-59+2;if(ze+ge>Je+1)throw"Something wrong with hufUnpackEncTable";for(;ge--;)_t[ze++]=0;ze--}}ue(_t)}function K(j){return j&63}function Q(j){return j>>6}function de(j,ie,be,Oe){for(;ie<=be;ie++){var ze=Q(j[ie]),Je=K(j[ie]);if(ze>>Je)throw"Invalid table entry";if(Je>14){var _t=Oe[ze>>Je-14];if(_t.len)throw"Invalid table entry";if(_t.lit++,_t.p){var ft=_t.p;_t.p=new Array(_t.lit);for(var X=0;X<_t.lit-1;++X)_t.p[X]=ft[X]}else _t.p=new Array(1);_t.p[_t.lit-1]=ie}else if(Je)for(var ce=0,X=1<<14-Je;X>0;X--){var _t=Oe[(ze<<14-Je)+ce];if(_t.len||_t.p)throw"Invalid table entry";_t.len=Je,_t.lit=ie,ce++}}return!0}const W={c:0,lc:0};function he(j,ie,be,Oe){j=j<<8|Et(be,Oe),ie+=8,W.c=j,W.lc=ie}const xe={c:0,lc:0};function ye(j,ie,be,Oe,ze,Je,_t,ft,X,ce){if(j==ie){Oe<8&&(he(be,Oe,ze,_t),be=W.c,Oe=W.lc),Oe-=8;var me=be>>Oe,me=new Uint8Array([me])[0];if(X.value+me>ce)return!1;for(var ge=ft[X.value-1];me-- >0;)ft[X.value++]=ge}else if(X.value<ce)ft[X.value++]=j;else return!1;xe.c=be,xe.lc=Oe}function fe(j){return j&65535}function De(j){var ie=fe(j);return ie>32767?ie-65536:ie}const Ce={a:0,b:0};function Ue(j,ie){var be=De(j),Oe=De(ie),ze=Oe,Je=be+(ze&1)+(ze>>1),_t=Je,ft=Je-ze;Ce.a=_t,Ce.b=ft}function Qe(j,ie){var be=fe(j),Oe=fe(ie),ze=be-(Oe>>1)&65535,Je=Oe+ze-32768&65535;Ce.a=Je,Ce.b=ze}function xt(j,ie,be,Oe,ze,Je,_t){for(var ft=_t<16384,X=be>ze?ze:be,ce=1,me;ce<=X;)ce<<=1;for(ce>>=1,me=ce,ce>>=1;ce>=1;){for(var ge=0,Ee=ge+Je*(ze-me),Ne=Je*ce,Ze=Je*me,rt=Oe*ce,ht=Oe*me,Nt,Ct,It,en;ge<=Ee;ge+=Ze){for(var Kt=ge,Kn=ge+Oe*(be-me);Kt<=Kn;Kt+=ht){var Vt=Kt+rt,Qt=Kt+Ne,jt=Qt+rt;ft?(Ue(j[Kt+ie],j[Qt+ie]),Nt=Ce.a,It=Ce.b,Ue(j[Vt+ie],j[jt+ie]),Ct=Ce.a,en=Ce.b,Ue(Nt,Ct),j[Kt+ie]=Ce.a,j[Vt+ie]=Ce.b,Ue(It,en),j[Qt+ie]=Ce.a,j[jt+ie]=Ce.b):(Qe(j[Kt+ie],j[Qt+ie]),Nt=Ce.a,It=Ce.b,Qe(j[Vt+ie],j[jt+ie]),Ct=Ce.a,en=Ce.b,Qe(Nt,Ct),j[Kt+ie]=Ce.a,j[Vt+ie]=Ce.b,Qe(It,en),j[Qt+ie]=Ce.a,j[jt+ie]=Ce.b)}if(be&ce){var Qt=Kt+Ne;ft?Ue(j[Kt+ie],j[Qt+ie]):Qe(j[Kt+ie],j[Qt+ie]),Nt=Ce.a,j[Qt+ie]=Ce.b,j[Kt+ie]=Nt}}if(ze&ce)for(var Kt=ge,Kn=ge+Oe*(be-me);Kt<=Kn;Kt+=ht){var Vt=Kt+rt;ft?Ue(j[Kt+ie],j[Vt+ie]):Qe(j[Kt+ie],j[Vt+ie]),Nt=Ce.a,j[Vt+ie]=Ce.b,j[Kt+ie]=Nt}me=ce,ce>>=1}return ge}function lt(j,ie,be,Oe,ze,Je,_t,ft,X,ce){for(var me=0,ge=0,Ee=ft,Ne=Math.trunc(ze.value+(Je+7)/8);ze.value<Ne;)for(he(me,ge,be,ze),me=W.c,ge=W.lc;ge>=14;){var Ze=me>>ge-14&16383,rt=ie[Ze];if(rt.len)ge-=rt.len,ye(rt.lit,_t,me,ge,be,Oe,ze,X,ce,Ee),me=xe.c,ge=xe.lc;else{if(!rt.p)throw"hufDecode issues";var ht;for(ht=0;ht<rt.lit;ht++){for(var Nt=K(j[rt.p[ht]]);ge<Nt&&ze.value<Ne;)he(me,ge,be,ze),me=W.c,ge=W.lc;if(ge>=Nt&&Q(j[rt.p[ht]])==(me>>ge-Nt&(1<<Nt)-1)){ge-=Nt,ye(rt.p[ht],_t,me,ge,be,Oe,ze,X,ce,Ee),me=xe.c,ge=xe.lc;break}}if(ht==rt.lit)throw"hufDecode issues"}}var Ct=8-Je&7;for(me>>=Ct,ge-=Ct;ge>0;){var rt=ie[me<<14-ge&16383];if(rt.len)ge-=rt.len,ye(rt.lit,_t,me,ge,be,Oe,ze,X,ce,Ee),me=xe.c,ge=xe.lc;else throw"hufDecode issues"}return!0}function mt(j,ie,be,Oe,ze,Je){var _t={value:0},ft=be.value,X=Lt(ie,be),ce=Lt(ie,be);be.value+=4;var me=Lt(ie,be);if(be.value+=4,X<0||X>=65537||ce<0||ce>=65537)throw"Something wrong with HUF_ENCSIZE";var ge=new Array(65537),Ee=new Array(16384);G(Ee);var Ne=Oe-(be.value-ft);if(z(j,ie,be,Ne,X,ce,ge),me>8*(Oe-(be.value-ft)))throw"Something wrong with hufUncompress";de(ge,X,ce,Ee),lt(ge,Ee,j,ie,be,me,ce,Je,ze,_t)}function it(j,ie,be){for(var Oe=0;Oe<be;++Oe)ie[Oe]=j[ie[Oe]]}function et(j){for(var ie=1;ie<j.length;ie++){var be=j[ie-1]+j[ie]-128;j[ie]=be}}function $(j,ie){for(var be=0,Oe=Math.floor((j.length+1)/2),ze=0,Je=j.length-1;!(ze>Je||(ie[ze++]=j[be++],ze>Je));)ie[ze++]=j[Oe++]}function $e(j){for(var ie=j.byteLength,be=new Array,Oe=0,ze=new DataView(j);ie>0;){var Je=ze.getInt8(Oe++);if(Je<0){var _t=-Je;ie-=_t+1;for(var ft=0;ft<_t;ft++)be.push(ze.getUint8(Oe++))}else{var _t=Je;ie-=2;for(var X=ze.getUint8(Oe++),ft=0;ft<_t+1;ft++)be.push(X)}}return be}function Ie(j,ie,be,Oe,ze,Je){var Vt=new DataView(Je.buffer),_t=be[j.idx[0]].width,ft=be[j.idx[0]].height,X=3,ce=Math.floor(_t/8),me=Math.ceil(_t/8),ge=Math.ceil(ft/8),Ee=_t-(me-1)*8,Ne=ft-(ge-1)*8,Ze={value:0},rt=new Array(X),ht=new Array(X),Nt=new Array(X),Ct=new Array(X),It=new Array(X);for(let gn=0;gn<X;++gn)It[gn]=ie[j.idx[gn]],rt[gn]=gn<1?0:rt[gn-1]+me*ge,ht[gn]=new Float32Array(64),Nt[gn]=new Uint16Array(64),Ct[gn]=new Uint16Array(me*64);for(let gn=0;gn<ge;++gn){var en=8;gn==ge-1&&(en=Ne);var Kt=8;for(let nn=0;nn<me;++nn){nn==me-1&&(Kt=Ee);for(let Nn=0;Nn<X;++Nn)Nt[Nn].fill(0),Nt[Nn][0]=ze[rt[Nn]++],ke(Ze,Oe,Nt[Nn]),We(Nt[Nn],ht[Nn]),St(ht[Nn]);nt(ht);for(let Nn=0;Nn<X;++Nn)re(ht[Nn],Ct[Nn],nn*64)}let Ci=0;for(let nn=0;nn<X;++nn){const Nn=be[j.idx[nn]].type;for(let Dn=8*gn;Dn<8*gn+en;++Dn){Ci=It[nn][Dn];for(let qi=0;qi<ce;++qi){const ei=qi*64+(Dn&7)*8;Vt.setUint16(Ci+0*2*Nn,Ct[nn][ei+0],!0),Vt.setUint16(Ci+1*2*Nn,Ct[nn][ei+1],!0),Vt.setUint16(Ci+2*2*Nn,Ct[nn][ei+2],!0),Vt.setUint16(Ci+3*2*Nn,Ct[nn][ei+3],!0),Vt.setUint16(Ci+4*2*Nn,Ct[nn][ei+4],!0),Vt.setUint16(Ci+5*2*Nn,Ct[nn][ei+5],!0),Vt.setUint16(Ci+6*2*Nn,Ct[nn][ei+6],!0),Vt.setUint16(Ci+7*2*Nn,Ct[nn][ei+7],!0),Ci+=8*2*Nn}}if(ce!=me)for(let Dn=8*gn;Dn<8*gn+en;++Dn){const qi=It[nn][Dn]+8*ce*2*Nn,ei=ce*64+(Dn&7)*8;for(let wi=0;wi<Kt;++wi)Vt.setUint16(qi+wi*2*Nn,Ct[nn][ei+wi],!0)}}}for(var Kn=new Uint16Array(_t),Vt=new DataView(Je.buffer),Qt=0;Qt<X;++Qt){be[j.idx[Qt]].decoded=!0;var jt=be[j.idx[Qt]].type;if(be[Qt].type==2)for(var bi=0;bi<ft;++bi){const gn=It[Qt][bi];for(var fn=0;fn<_t;++fn)Kn[fn]=Vt.getUint16(gn+fn*2*jt,!0);for(var fn=0;fn<_t;++fn)Vt.setFloat32(gn+fn*2*jt,Be(Kn[fn]),!0)}}}function ke(j,ie,be){for(var Oe,ze=1;ze<64;)Oe=ie[j.value],Oe==65280?ze=64:Oe>>8==255?ze+=Oe&255:(be[ze]=Oe,ze++),j.value++}function We(j,ie){ie[0]=Be(j[0]),ie[1]=Be(j[1]),ie[2]=Be(j[5]),ie[3]=Be(j[6]),ie[4]=Be(j[14]),ie[5]=Be(j[15]),ie[6]=Be(j[27]),ie[7]=Be(j[28]),ie[8]=Be(j[2]),ie[9]=Be(j[4]),ie[10]=Be(j[7]),ie[11]=Be(j[13]),ie[12]=Be(j[16]),ie[13]=Be(j[26]),ie[14]=Be(j[29]),ie[15]=Be(j[42]),ie[16]=Be(j[3]),ie[17]=Be(j[8]),ie[18]=Be(j[12]),ie[19]=Be(j[17]),ie[20]=Be(j[25]),ie[21]=Be(j[30]),ie[22]=Be(j[41]),ie[23]=Be(j[43]),ie[24]=Be(j[9]),ie[25]=Be(j[11]),ie[26]=Be(j[18]),ie[27]=Be(j[24]),ie[28]=Be(j[31]),ie[29]=Be(j[40]),ie[30]=Be(j[44]),ie[31]=Be(j[53]),ie[32]=Be(j[10]),ie[33]=Be(j[19]),ie[34]=Be(j[23]),ie[35]=Be(j[32]),ie[36]=Be(j[39]),ie[37]=Be(j[45]),ie[38]=Be(j[52]),ie[39]=Be(j[54]),ie[40]=Be(j[20]),ie[41]=Be(j[22]),ie[42]=Be(j[33]),ie[43]=Be(j[38]),ie[44]=Be(j[46]),ie[45]=Be(j[51]),ie[46]=Be(j[55]),ie[47]=Be(j[60]),ie[48]=Be(j[21]),ie[49]=Be(j[34]),ie[50]=Be(j[37]),ie[51]=Be(j[47]),ie[52]=Be(j[50]),ie[53]=Be(j[56]),ie[54]=Be(j[59]),ie[55]=Be(j[61]),ie[56]=Be(j[35]),ie[57]=Be(j[36]),ie[58]=Be(j[48]),ie[59]=Be(j[49]),ie[60]=Be(j[57]),ie[61]=Be(j[58]),ie[62]=Be(j[62]),ie[63]=Be(j[63])}function St(j){const ie=.5*Math.cos(.7853975),be=.5*Math.cos(3.14159/16),Oe=.5*Math.cos(3.14159/8),ze=.5*Math.cos(3*3.14159/16),Je=.5*Math.cos(5*3.14159/16),_t=.5*Math.cos(3*3.14159/8),ft=.5*Math.cos(7*3.14159/16);for(var X=new Array(4),ce=new Array(4),me=new Array(4),ge=new Array(4),Ee=0;Ee<8;++Ee){var Ne=Ee*8;X[0]=Oe*j[Ne+2],X[1]=_t*j[Ne+2],X[2]=Oe*j[Ne+6],X[3]=_t*j[Ne+6],ce[0]=be*j[Ne+1]+ze*j[Ne+3]+Je*j[Ne+5]+ft*j[Ne+7],ce[1]=ze*j[Ne+1]-ft*j[Ne+3]-be*j[Ne+5]-Je*j[Ne+7],ce[2]=Je*j[Ne+1]-be*j[Ne+3]+ft*j[Ne+5]+ze*j[Ne+7],ce[3]=ft*j[Ne+1]-Je*j[Ne+3]+ze*j[Ne+5]-be*j[Ne+7],me[0]=ie*(j[Ne+0]+j[Ne+4]),me[3]=ie*(j[Ne+0]-j[Ne+4]),me[1]=X[0]+X[3],me[2]=X[1]-X[2],ge[0]=me[0]+me[1],ge[1]=me[3]+me[2],ge[2]=me[3]-me[2],ge[3]=me[0]-me[1],j[Ne+0]=ge[0]+ce[0],j[Ne+1]=ge[1]+ce[1],j[Ne+2]=ge[2]+ce[2],j[Ne+3]=ge[3]+ce[3],j[Ne+4]=ge[3]-ce[3],j[Ne+5]=ge[2]-ce[2],j[Ne+6]=ge[1]-ce[1],j[Ne+7]=ge[0]-ce[0]}for(var Ze=0;Ze<8;++Ze)X[0]=Oe*j[16+Ze],X[1]=_t*j[16+Ze],X[2]=Oe*j[48+Ze],X[3]=_t*j[48+Ze],ce[0]=be*j[8+Ze]+ze*j[24+Ze]+Je*j[40+Ze]+ft*j[56+Ze],ce[1]=ze*j[8+Ze]-ft*j[24+Ze]-be*j[40+Ze]-Je*j[56+Ze],ce[2]=Je*j[8+Ze]-be*j[24+Ze]+ft*j[40+Ze]+ze*j[56+Ze],ce[3]=ft*j[8+Ze]-Je*j[24+Ze]+ze*j[40+Ze]-be*j[56+Ze],me[0]=ie*(j[Ze]+j[32+Ze]),me[3]=ie*(j[Ze]-j[32+Ze]),me[1]=X[0]+X[3],me[2]=X[1]-X[2],ge[0]=me[0]+me[1],ge[1]=me[3]+me[2],ge[2]=me[3]-me[2],ge[3]=me[0]-me[1],j[0+Ze]=ge[0]+ce[0],j[8+Ze]=ge[1]+ce[1],j[16+Ze]=ge[2]+ce[2],j[24+Ze]=ge[3]+ce[3],j[32+Ze]=ge[3]-ce[3],j[40+Ze]=ge[2]-ce[2],j[48+Ze]=ge[1]-ce[1],j[56+Ze]=ge[0]-ce[0]}function nt(j){for(var ie=0;ie<64;++ie){var be=j[0][ie],Oe=j[1][ie],ze=j[2][ie];j[0][ie]=be+1.5747*ze,j[1][ie]=be-.1873*Oe-.4682*ze,j[2][ie]=be+1.8556*Oe}}function re(j,ie,be){for(var Oe=0;Oe<64;++Oe)ie[be+Oe]=mg.toHalfFloat(J(j[Oe]))}function J(j){return j<=1?Math.sign(j)*Math.pow(Math.abs(j),2.2):Math.sign(j)*Math.pow(N,Math.abs(j)-1)}function Te(j){return new DataView(j.array.buffer,j.offset.value,j.size)}function Ye(j){var ie=j.viewer.buffer.slice(j.offset.value,j.offset.value+j.size),be=new Uint8Array($e(ie)),Oe=new Uint8Array(be.length);return et(be),$(be,Oe),new DataView(Oe.buffer)}function st(j){var ie=j.array.slice(j.offset.value,j.offset.value+j.size),be=OT(ie),Oe=new Uint8Array(be.length);return et(be),$(be,Oe),new DataView(Oe.buffer)}function je(j){for(var ie=j.viewer,be={value:j.offset.value},Oe=new Uint16Array(j.width*j.scanlineBlockSize*(j.channels*j.type)),ze=new Uint8Array(8192),Je=0,_t=new Array(j.channels),ft=0;ft<j.channels;ft++)_t[ft]={},_t[ft].start=Je,_t[ft].end=_t[ft].start,_t[ft].nx=j.width,_t[ft].ny=j.lines,_t[ft].size=j.type,Je+=_t[ft].nx*_t[ft].ny*_t[ft].size;var X=He(ie,be),ce=He(ie,be);if(ce>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(X<=ce)for(var ft=0;ft<ce-X+1;ft++)ze[ft+X]=Ae(ie,be);var me=new Uint16Array(65536),ge=O(ze,me),Ee=Lt(ie,be);mt(j.array,ie,be,Ee,Oe,Je);for(var ft=0;ft<j.channels;++ft)for(var Ne=_t[ft],Ze=0;Ze<_t[ft].size;++Ze)xt(Oe,Ne.start+Ze,Ne.nx,Ne.size,Ne.ny,Ne.nx*Ne.size,ge);it(me,Oe,Je);for(var rt=0,ht=new Uint8Array(Oe.buffer.byteLength),Nt=0;Nt<j.lines;Nt++)for(var Ct=0;Ct<j.channels;Ct++){var Ne=_t[Ct],It=Ne.nx*Ne.size,en=new Uint8Array(Oe.buffer,Ne.end*2,It*2);ht.set(en,rt),rt+=It*2,Ne.end+=It}return new DataView(ht.buffer)}function pt(j){var ie=j.array.slice(j.offset.value,j.offset.value+j.size),be=OT(ie);const Oe=j.lines*j.channels*j.width,ze=j.type==1?new Uint16Array(Oe):new Uint32Array(Oe);let Je=0,_t=0;const ft=new Array(4);for(let X=0;X<j.lines;X++)for(let ce=0;ce<j.channels;ce++){let me=0;switch(j.type){case 1:ft[0]=Je,ft[1]=ft[0]+j.width,Je=ft[1]+j.width;for(let ge=0;ge<j.width;++ge){const Ee=be[ft[0]++]<<8|be[ft[1]++];me+=Ee,ze[_t]=me,_t++}break;case 2:ft[0]=Je,ft[1]=ft[0]+j.width,ft[2]=ft[1]+j.width,Je=ft[2]+j.width;for(let ge=0;ge<j.width;++ge){const Ee=be[ft[0]++]<<24|be[ft[1]++]<<16|be[ft[2]++]<<8;me+=Ee,ze[_t]=me,_t++}break}}return new DataView(ze.buffer)}function vt(j){var ie=j.viewer,be={value:j.offset.value},Oe=new Uint8Array(j.width*j.lines*(j.channels*j.type*2)),ze={version:qe(ie,be),unknownUncompressedSize:qe(ie,be),unknownCompressedSize:qe(ie,be),acCompressedSize:qe(ie,be),dcCompressedSize:qe(ie,be),rleCompressedSize:qe(ie,be),rleUncompressedSize:qe(ie,be),rleRawSize:qe(ie,be),totalAcUncompressedCount:qe(ie,be),totalDcUncompressedCount:qe(ie,be),acCompression:qe(ie,be)};if(ze.version<2)throw"EXRLoader.parse: "+ar.compression+" version "+ze.version+" is unsupported";for(var Je=new Array,_t=He(ie,be)-2;_t>0;){var ft=Mt(ie.buffer,be),X=Ae(ie,be),ce=X>>2&3,me=(X>>4)-1,ge=new Int8Array([me])[0],Ee=Ae(ie,be);Je.push({name:ft,index:ge,type:Ee,compression:ce}),_t-=ft.length+3}for(var Ne=ar.channels,Ze=new Array(j.channels),rt=0;rt<j.channels;++rt){var ht=Ze[rt]={},Nt=Ne[rt];ht.name=Nt.name,ht.compression=0,ht.decoded=!1,ht.type=Nt.pixelType,ht.pLinear=Nt.pLinear,ht.width=j.width,ht.height=j.lines}for(var Ct={idx:new Array(3)},It=0;It<j.channels;++It)for(var ht=Ze[It],rt=0;rt<Je.length;++rt){var en=Je[rt];ht.name==en.name&&(ht.compression=en.compression,en.index>=0&&(Ct.idx[en.index]=It),ht.offset=It)}if(ze.acCompressedSize>0)switch(ze.acCompression){case 0:var Vt=new Uint16Array(ze.totalAcUncompressedCount);mt(j.array,ie,be,ze.acCompressedSize,Vt,ze.totalAcUncompressedCount);break;case 1:var Kt=j.array.slice(be.value,be.value+ze.totalAcUncompressedCount),Kn=OT(Kt),Vt=new Uint16Array(Kn.buffer);be.value+=ze.totalAcUncompressedCount;break}if(ze.dcCompressedSize>0){var Qt={array:j.array,offset:be,size:ze.dcCompressedSize},jt=new Uint16Array(st(Qt).buffer);be.value+=ze.dcCompressedSize}if(ze.rleRawSize>0){var Kt=j.array.slice(be.value,be.value+ze.rleCompressedSize),Kn=OT(Kt),bi=$e(Kn.buffer);be.value+=ze.rleCompressedSize}for(var fn=0,gn=new Array(Ze.length),rt=0;rt<gn.length;++rt)gn[rt]=new Array;for(var Ci=0;Ci<j.lines;++Ci)for(var nn=0;nn<Ze.length;++nn)gn[nn].push(fn),fn+=Ze[nn].width*j.type*2;Ie(Ct,gn,Ze,Vt,jt,Oe);for(var rt=0;rt<Ze.length;++rt){var ht=Ze[rt];if(!ht.decoded)switch(ht.compression){case 2:for(var Nn=0,Dn=0,Ci=0;Ci<j.lines;++Ci){for(var qi=gn[rt][Nn],ei=0;ei<ht.width;++ei){for(var wi=0;wi<2*ht.type;++wi)Oe[qi++]=bi[Dn+wi*ht.width*ht.height];Dn++}Nn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Oe.buffer)}function Mt(j,ie){for(var be=new Uint8Array(j),Oe=0;be[ie.value+Oe]!=0;)Oe+=1;var ze=new TextDecoder().decode(be.slice(ie.value,ie.value+Oe));return ie.value=ie.value+Oe+1,ze}function kt(j,ie,be){var Oe=new TextDecoder().decode(new Uint8Array(j).slice(ie.value,ie.value+be));return ie.value=ie.value+be,Oe}function dt(j,ie){var be=Ot(j,ie),Oe=Lt(j,ie);return[be,Oe]}function Dt(j,ie){var be=Lt(j,ie),Oe=Lt(j,ie);return[be,Oe]}function Ot(j,ie){var be=j.getInt32(ie.value,!0);return ie.value=ie.value+4,be}function Lt(j,ie){var be=j.getUint32(ie.value,!0);return ie.value=ie.value+4,be}function Et(j,ie){var be=j[ie.value];return ie.value=ie.value+1,be}function Ae(j,ie){var be=j.getUint8(ie.value);return ie.value=ie.value+1,be}const qe=function(j,ie){let be;return"getBigInt64"in DataView.prototype?be=Number(j.getBigInt64(ie.value,!0)):be=j.getUint32(ie.value+4,!0)+Number(j.getUint32(ie.value,!0)<<32),ie.value+=8,be};function gt(j,ie){var be=j.getFloat32(ie.value,!0);return ie.value+=4,be}function _e(j,ie){return mg.toHalfFloat(gt(j,ie))}function Be(j){var ie=(j&31744)>>10,be=j&1023;return(j>>15?-1:1)*(ie?ie===31?be?NaN:1/0:Math.pow(2,ie-15)*(1+be/1024):6103515625e-14*(be/1024))}function He(j,ie){var be=j.getUint16(ie.value,!0);return ie.value+=2,be}function tt(j,ie){return Be(He(j,ie))}function wt(j,ie,be,Oe){for(var ze=be.value,Je=[];be.value<ze+Oe-1;){var _t=Mt(ie,be),ft=Ot(j,be),X=Ae(j,be);be.value+=3;var ce=Ot(j,be),me=Ot(j,be);Je.push({name:_t,pixelType:ft,pLinear:X,xSampling:ce,ySampling:me})}return be.value+=1,Je}function Tt(j,ie){var be=gt(j,ie),Oe=gt(j,ie),ze=gt(j,ie),Je=gt(j,ie),_t=gt(j,ie),ft=gt(j,ie),X=gt(j,ie),ce=gt(j,ie);return{redX:be,redY:Oe,greenX:ze,greenY:Je,blueX:_t,blueY:ft,whiteX:X,whiteY:ce}}function Wt(j,ie){var be=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Oe=Ae(j,ie);return be[Oe]}function vn(j,ie){var be=Lt(j,ie),Oe=Lt(j,ie),ze=Lt(j,ie),Je=Lt(j,ie);return{xMin:be,yMin:Oe,xMax:ze,yMax:Je}}function $n(j,ie){var be=["INCREASING_Y"],Oe=Ae(j,ie);return be[Oe]}function yn(j,ie){var be=gt(j,ie),Oe=gt(j,ie);return[be,Oe]}function os(j,ie){var be=gt(j,ie),Oe=gt(j,ie),ze=gt(j,ie);return[be,Oe,ze]}function Ui(j,ie,be,Oe,ze){if(Oe==="string"||Oe==="stringvector"||Oe==="iccProfile")return kt(ie,be,ze);if(Oe==="chlist")return wt(j,ie,be,ze);if(Oe==="chromaticities")return Tt(j,be);if(Oe==="compression")return Wt(j,be);if(Oe==="box2i")return vn(j,be);if(Oe==="lineOrder")return $n(j,be);if(Oe==="float")return gt(j,be);if(Oe==="v2f")return yn(j,be);if(Oe==="v3f")return os(j,be);if(Oe==="int")return Ot(j,be);if(Oe==="rational")return dt(j,be);if(Oe==="timecode")return Dt(j,be);if(Oe==="preview")return be.value+=ze,"skipped";be.value+=ze}function ls(j,ie,be){const Oe={};if(j.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Oe.version=j.getUint8(4);const ze=j.getUint8(5);Oe.spec={singleTile:!!(ze&2),longName:!!(ze&4),deepFormat:!!(ze&8),multiPart:!!(ze&16)},be.value=8;for(var Je=!0;Je;){var _t=Mt(ie,be);if(_t==0)Je=!1;else{var ft=Mt(ie,be),X=Lt(j,be),ce=Ui(j,ie,be,ft,X);ce===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ft}'.`):Oe[_t]=ce}}if((ze&-5)!=0)throw console.error("EXRHeader:",Oe),"THREE.EXRLoader: provided file is currently unsupported.";return Oe}function ys(j,ie,be,Oe,ze){const Je={size:0,viewer:ie,array:be,offset:Oe,width:j.dataWindow.xMax-j.dataWindow.xMin+1,height:j.dataWindow.yMax-j.dataWindow.yMin+1,channels:j.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:j.channels[0].pixelType,uncompress:null,getter:null,format:null,[ex?"colorSpace":"encoding"]:null};switch(j.compression){case"NO_COMPRESSION":Je.lines=1,Je.uncompress=Te;break;case"RLE_COMPRESSION":Je.lines=1,Je.uncompress=Ye;break;case"ZIPS_COMPRESSION":Je.lines=1,Je.uncompress=st;break;case"ZIP_COMPRESSION":Je.lines=16,Je.uncompress=st;break;case"PIZ_COMPRESSION":Je.lines=32,Je.uncompress=je;break;case"PXR24_COMPRESSION":Je.lines=16,Je.uncompress=pt;break;case"DWAA_COMPRESSION":Je.lines=32,Je.uncompress=vt;break;case"DWAB_COMPRESSION":Je.lines=256,Je.uncompress=vt;break;default:throw"EXRLoader.parse: "+j.compression+" is unsupported"}if(Je.scanlineBlockSize=Je.lines,Je.type==1)switch(ze){case ms:Je.getter=tt,Je.inputSize=2;break;case br:Je.getter=He,Je.inputSize=2;break}else if(Je.type==2)switch(ze){case ms:Je.getter=gt,Je.inputSize=4;break;case br:Je.getter=_e,Je.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Je.type+" for "+j.compression+".";Je.blockCount=(j.dataWindow.yMax+1)/Je.scanlineBlockSize;for(var _t=0;_t<Je.blockCount;_t++)qe(ie,Oe);Je.outputChannels=Je.channels==3?4:Je.channels;const ft=Je.width*Je.height*Je.outputChannels;switch(ze){case ms:Je.byteArray=new Float32Array(ft),Je.channels<Je.outputChannels&&Je.byteArray.fill(1,0,ft);break;case br:Je.byteArray=new Uint16Array(ft),Je.channels<Je.outputChannels&&Je.byteArray.fill(15360,0,ft);break;default:console.error("THREE.EXRLoader: unsupported type: ",ze);break}return Je.bytesPerLine=Je.width*Je.inputSize*Je.channels,Je.outputChannels==4?Je.format=Xs:Je.format=GE,ex?Je.colorSpace="srgb-linear":Je.encoding=3e3,Je}const _s=new DataView(e),Tr=new Uint8Array(e),Lo={value:0},ar=ls(_s,e,Lo),rn=ys(ar,_s,Tr,Lo,this.type),ua={value:0},pi={R:0,G:1,B:2,A:3,Y:0};for(let j=0;j<rn.height/rn.scanlineBlockSize;j++){const ie=Lt(_s,Lo);rn.size=Lt(_s,Lo),rn.lines=ie+rn.scanlineBlockSize>rn.height?rn.height-ie:rn.scanlineBlockSize;const Oe=rn.size<rn.lines*rn.bytesPerLine?rn.uncompress(rn):Te(rn);Lo.value+=rn.size;for(let ze=0;ze<rn.scanlineBlockSize;ze++){const Je=ze+j*rn.scanlineBlockSize;if(Je>=rn.height)break;for(let _t=0;_t<rn.channels;_t++){const ft=pi[ar.channels[_t].name];for(let X=0;X<rn.width;X++){ua.value=(ze*(rn.channels*rn.width)+_t*rn.width+X)*rn.inputSize;const ce=(rn.height-1-Je)*(rn.width*rn.outputChannels)+X*rn.outputChannels+ft;rn.byteArray[ce]=rn.getter(Oe,ua)}}}}return{header:ar,width:rn.width,height:rn.height,data:rn.byteArray,format:rn.format,[ex?"colorSpace":"encoding"]:rn[ex?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,s){function r(a,o){ex?a.colorSpace=o.colorSpace:a.encoding=o.encoding,a.minFilter=li,a.magFilter=li,a.generateMipmaps=!1,a.flipY=!1,t&&t(a,o)}return super.load(e,r,n,s)}}const IB=new WeakMap;class oie extends ca{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,s){const r=new oa(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,a=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,o).then(t).catch(s)},n,s)}decodeDracoFile(e,t,n,s){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const h=t.attributeTypes[c];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=h.name)}const n=JSON.stringify(t);if(IB.has(e)){const c=IB.get(e);if(c.key===n)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(r,a).then(c=>(s=c,new Promise((h,d)=>{s._callbacks[r]={resolve:h,reject:d},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return o.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),IB.set(e,{key:n,promise:o}),o}_createGeometry(e){const t=new En;e.index&&t.setIndex(new ui(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const s=e.attributes[n],r=s.name,a=s.array,o=s.itemSize;t.setAttribute(r,new ui(a,o))}return t}_loadLibrary(e,t){const n=new oa(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((s,r)=>{n.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const s=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const r=lie.toString(),a=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const a=r.data;switch(a.type){case"decode":s._callbacks[a.id].resolve(a);break;case"error":s._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function lie(){let i,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":i=o.decoderConfig,e=new Promise(function(d){i.onModuleLoaded=function(m){d({draco:m})},DracoDecoderModule(i)});break;case"decode":const c=o.buffer,h=o.taskConfig;e.then(d=>{const m=d.draco,v=new m.Decoder,y=new m.DecoderBuffer;y.Init(new Int8Array(c),c.byteLength);try{const A=t(m,v,y,h),E=A.attributes.map(M=>M.array.buffer);A.index&&E.push(A.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:A},E)}catch(A){console.error(A),self.postMessage({type:"error",id:o.id,error:A.message})}finally{m.destroy(y),m.destroy(v)}});break}};function t(a,o,c,h){const d=h.attributeIDs,m=h.attributeTypes;let v,y;const A=o.GetEncodedGeometryType(c);if(A===a.TRIANGULAR_MESH)v=new a.Mesh,y=o.DecodeBufferToMesh(c,v);else if(A===a.POINT_CLOUD)v=new a.PointCloud,y=o.DecodeBufferToPointCloud(c,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!y.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const E={index:null,attributes:[]};for(const M in d){const x=self[m[M]];let w,R;if(h.useUniqueIDs)R=d[M],w=o.GetAttributeByUniqueId(v,R);else{if(R=o.GetAttributeId(v,a[d[M]]),R===-1)continue;w=o.GetAttribute(v,R)}E.attributes.push(s(a,o,v,M,x,w))}return A===a.TRIANGULAR_MESH&&(E.index=n(a,o,v)),a.destroy(v),E}function n(a,o,c){const d=c.num_faces()*3,m=d*4,v=a._malloc(m);o.GetTrianglesUInt32Array(c,m,v);const y=new Uint32Array(a.HEAPF32.buffer,v,d).slice();return a._free(v),{array:y,itemSize:1}}function s(a,o,c,h,d,m){const v=m.num_components(),A=c.num_points()*v,E=A*d.BYTES_PER_ELEMENT,M=r(a,d),x=a._malloc(E);o.GetAttributeDataArrayForAllPoints(c,m,M,E,x);const w=new d(a.HEAPF32.buffer,x,A).slice();return a._free(x),{name:h,array:w,itemSize:v}}function r(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let FT;const PB=()=>{if(FT)return FT;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=i;WebAssembly.validate(t)&&(s=e);let r;const a=WebAssembly.instantiate(o(s),{}).then(m=>{r=m.instance,r.exports.__wasm_call_ctors()});function o(m){const v=new Uint8Array(m.length);for(let A=0;A<m.length;++A){const E=m.charCodeAt(A);v[A]=E>96?E-71:E>64?E-65:E>47?E+4:E>46?63:62}let y=0;for(let A=0;A<m.length;++A)v[y++]=v[A]<60?n[v[A]]:(v[A]-60)*64+v[++A];return v.buffer.slice(0,y)}function c(m,v,y,A,E,M){const x=r.exports.sbrk,w=y+3&-4,R=x(w*A),D=x(E.length),P=new Uint8Array(r.exports.memory.buffer);P.set(E,D);const I=m(R,y,A,D,E.length);if(I===0&&M&&M(R,w,A),v.set(P.subarray(R,R+y*A)),x(R-x(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return FT={ready:a,supported:!0,decodeVertexBuffer(m,v,y,A,E){c(r.exports.meshopt_decodeVertexBuffer,m,v,y,A,r.exports[h[E]])},decodeIndexBuffer(m,v,y,A){c(r.exports.meshopt_decodeIndexBuffer,m,v,y,A)},decodeIndexSequence(m,v,y,A){c(r.exports.meshopt_decodeIndexSequence,m,v,y,A)},decodeGltfBuffer(m,v,y,A,E,M){c(r.exports[d[E]],m,v,y,A,r.exports[h[M]])}},FT};let HT=null,r5="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function a5(i=!0,e=!0,t){return n=>{t&&t(n),i&&(HT||(HT=new oie),HT.setDecoderPath(typeof i=="string"?i:r5),n.setDRACOLoader(HT)),e&&n.setMeshoptDecoder(typeof PB=="function"?PB():PB)}}const bA=(i,e,t,n)=>su(R3,i,a5(e,t,n));bA.preload=(i,e,t,n)=>su.preload(R3,i,a5(e,t,n));bA.clear=i=>su.clear(R3,i);bA.setDecoderPath=i=>{r5=i};const o5=V.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:s=!0,keyEvents:r=!1,onChange:a,onStart:o,onEnd:c,...h},d)=>{const m=Hr(I=>I.invalidate),v=Hr(I=>I.camera),y=Hr(I=>I.gl),A=Hr(I=>I.events),E=Hr(I=>I.setEvents),M=Hr(I=>I.set),x=Hr(I=>I.get),w=Hr(I=>I.performance),R=e||v,D=n||A.connected||y.domElement,P=V.useMemo(()=>new bne(R),[R]);return AA(()=>{P.enabled&&P.update()},-1),V.useEffect(()=>(r&&P.connect(r===!0?D:r),P.connect(D),()=>void P.dispose()),[r,D,t,P,m]),V.useEffect(()=>{const I=N=>{m(),t&&w.regress(),a&&a(N)},H=N=>{o&&o(N)},U=N=>{c&&c(N)};return P.addEventListener("change",I),P.addEventListener("start",H),P.addEventListener("end",U),()=>{P.removeEventListener("start",H),P.removeEventListener("end",U),P.removeEventListener("change",I)}},[a,o,c,P,m,E]),V.useEffect(()=>{if(i){const I=x().controls;return M({controls:P}),()=>M({controls:I})}},[i,P]),V.createElement("primitive",q_({ref:d,object:P,enableDamping:s},h))}),cie="modulepreload",uie=function(i){return"/a-collection-of-cool-things/"+i},ZF={},zT=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let a=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=a(t.map(h=>{if(h=uie(h),h in ZF)return;ZF[h]=!0;const d=h.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const v=document.createElement("link");if(v.rel=d?"stylesheet":cie,d||(v.as="script"),v.crossOrigin="",v.href=h,c&&v.setAttribute("nonce",c),document.head.appendChild(v),d)return new Promise((y,A)=>{v.addEventListener("load",y),v.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})},l5=(i,e,t)=>{let n;switch(i){case as:n=new Uint8ClampedArray(e*t*4);break;case br:n=new Uint16Array(e*t*4);break;case iu:n=new Uint32Array(e*t*4);break;case ER:n=new Int8Array(e*t*4);break;case MR:n=new Int16Array(e*t*4);break;case zE:n=new Int32Array(e*t*4);break;case ms:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let GT;const hie=(i,e,t,n)=>{if(GT!==void 0)return GT;const s=new Zi(1,1,n);e.setRenderTarget(s);const r=new ts(new jf,new Do({color:16777215}));e.render(r,t),e.setRenderTarget(null);const a=l5(i,s.width,s.height);return e.readRenderTargetPixels(s,0,0,s.width,s.height,a),s.dispose(),r.geometry.dispose(),r.material.dispose(),GT=a[0]!==0,GT};class D3{constructor(e){var t,n,s,r,a,o,c,h,d,m,v,y,A,E,M,x;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(R){throw this._renderer.setRenderTarget(null),R}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const w={format:Xs,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter:li,minFilter:((c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.minFilter:li,samples:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.samples:void 0,wrapS:((v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapS)!==void 0?(y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapS:js,wrapT:((A=e.renderTargetOptions)===null||A===void 0?void 0:A.wrapT)!==void 0?(E=e.renderTargetOptions)===null||E===void 0?void 0:E.wrapT:js};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=D3.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Ev,this._camera=new ql,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!hie(this._type,this._renderer,this._camera,w)){let R;switch(this._type){case br:R=this._renderer.extensions.has("EXT_color_buffer_float")?ms:void 0;break}R!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ms}`),this._type=R):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new ts(new jf,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Zi(this.width,this.height,w),this._renderTarget.texture.mapping=((M=e.renderTargetOptions)===null||M===void 0?void 0:M.mapping)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.mapping:Lp}static instantiateRenderer(){const e=new y3;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=l5(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new eu(this.toArray(),this.width,this.height,Xs,this._type,(e==null?void 0:e.mapping)||Lp,(e==null?void 0:e.wrapS)||js,(e==null?void 0:e.wrapT)||js,(e==null?void 0:e.magFilter)||li,(e==null?void 0:e.minFilter)||li,(e==null?void 0:e.anisotropy)||1,ll);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Xi&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Ai&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Ai&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const fie=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,die=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class pie extends Xi{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:s,gainMapMax:r,maxDisplayBoost:a,hdrCapacityMin:o,hdrCapacityMax:c,sdr:h,gainMap:d}){super({name:"GainMapDecoderMaterial",vertexShader:fie,fragmentShader:die,uniforms:{sdr:{value:h},gainMap:{value:d},gamma:{value:new ae(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new ae().fromArray(t)},offsetSdr:{value:new ae().fromArray(n)},gainMapMin:{value:new ae().fromArray(s)},gainMapMax:{value:new ae().fromArray(r)},weightFactor:{value:(Math.log2(a)-o)/(c-o)}},blending:qs,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=o,this._hdrCapacityMax=c,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class c5 extends Error{}class u5 extends Error{}const tx=(i,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(i);if(n)return n[1];const s=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(i);if(s){const r=s[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return r&&r.length===3?r.map(a=>a.replace(/<\/?rdf:li>/g,"")):s[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},mie=i=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(i):e=i.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),s=e.slice(t,n+10);try{const r=tx(s,"hdrgm:GainMapMin","0"),a=tx(s,"hdrgm:GainMapMax"),o=tx(s,"hdrgm:Gamma","1"),c=tx(s,"hdrgm:OffsetSDR","0.015625"),h=tx(s,"hdrgm:OffsetHDR","0.015625"),d=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(s),m=d?d[1]:"0",v=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(s);if(!v)throw new Error("Incomplete gainmap metadata");const y=v[1];return{gainMapMin:Array.isArray(r)?r.map(A=>parseFloat(A)):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(a)?a.map(A=>parseFloat(A)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(o)?o.map(A=>parseFloat(A)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(c)?c.map(A=>parseFloat(A)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetHdr:Array.isArray(h)?h.map(A=>parseFloat(A)):[parseFloat(h),parseFloat(h),parseFloat(h)],hdrCapacityMin:parseFloat(m),hdrCapacityMax:parseFloat(y)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class gie{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const s=this.options.debug,r=new DataView(e.buffer);if(r.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const a=r.byteLength;let o=2,c=0,h;for(;o<a;){if(++c>250){n(new Error(`Found no marker after ${c} loops `));return}if(r.getUint8(o)!==255){n(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${r.getUint8(o).toString(16)}`));return}if(h=r.getUint8(o+1),s&&console.log(`Marker: ${h.toString(16)}`),h===226){s&&console.log("Found APP2 marker (0xffe2)");const d=o+4;if(r.getUint32(d)===1297106432){const m=d+4;let v;if(r.getUint16(m)===18761)v=!1;else if(r.getUint16(m)===19789)v=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(r.getUint16(m+2,!v)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const y=r.getUint32(m+4,!v);if(y<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const A=m+y,E=r.getUint16(A,!v),M=A+2;let x=0;for(let P=M;P<M+12*E;P+=12)r.getUint16(P,!v)===45057&&(x=r.getUint32(P+8,!v));const R=A+2+E*12+4,D=[];for(let P=R;P<R+x*16;P+=16){const I={MPType:r.getUint32(P,!v),size:r.getUint32(P+4,!v),dataOffset:r.getUint32(P+8,!v),dependantImages:r.getUint32(P+12,!v),start:-1,end:-1,isFII:!1};I.dataOffset?(I.start=m+I.dataOffset,I.isFII=!1):(I.start=0,I.isFII=!0),I.end=I.start+I.size,D.push(I)}if(this.options.extractNonFII&&D.length){const P=new Blob([r]),I=[];for(const H of D){if(H.isFII&&!this.options.extractFII)continue;const U=P.slice(H.start,H.end+1,"image/jpeg");I.push(U)}t(I)}}}o+=2+r.getUint16(o+2)}})}}const vie=async i=>{const e=mie(i);if(!e)throw new u5("Gain map XMP metadata not found");const n=await new gie({extractFII:!0,extractNonFII:!0}).extract(i);if(n.length!==2)throw new c5("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},QF=i=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=s=>{t(s)},n.src=URL.createObjectURL(i)});class h5 extends ca{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new QR}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new pie({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Ai,sdr:new Ai});return new D3({width:16,height:16,type:br,colorSpace:ll,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,s){const r=s?new Blob([s],{type:"image/jpeg"}):void 0,a=new Blob([n],{type:"image/jpeg"});let o,c,h=!1;if(typeof createImageBitmap>"u"){const v=await Promise.all([r?QF(r):Promise.resolve(void 0),QF(a)]);c=v[0],o=v[1],h=!0}else{const v=await Promise.all([r?createImageBitmap(r,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);c=v[0],o=v[1]}const d=new Ai(c||new ImageData(2,2),Lp,js,js,li,hL,Xs,as,1,ll);d.flipY=h,d.needsUpdate=!0;const m=new Ai(o,Lp,js,js,li,hL,Xs,as,1,Yn);m.flipY=h,m.needsUpdate=!0,e.width=o.width,e.height=o.height,e.material.gainMap=d,e.material.sdr=m,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class yie extends h5{load([e,t,n],s,r,a){const o=this.prepareQuadRenderer();let c,h,d;const m=async()=>{if(c&&h&&d){try{await this.render(o,d,c,h)}catch(N){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof a=="function"&&a(N),o.disposeOnDemandRenderer();return}typeof s=="function"&&s(o),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),o.disposeOnDemandRenderer()}};let v=!0,y=0,A=0,E=!0,M=0,x=0,w=!0,R=0,D=0;const P=()=>{if(typeof r=="function"){const N=y+M+R,O=A+x+D,G=v&&E&&w;r(new ProgressEvent("progress",{lengthComputable:G,loaded:O,total:N}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const I=new oa(this._internalLoadingManager);I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(e,async N=>{if(typeof N=="string")throw new Error("Invalid sdr buffer");c=N,await m()},N=>{v=N.lengthComputable,A=N.loaded,y=N.total,P()},N=>{this.manager.itemError(e),typeof a=="function"&&a(N)});const H=new oa(this._internalLoadingManager);H.setResponseType("arraybuffer"),H.setRequestHeader(this.requestHeader),H.setPath(this.path),H.setWithCredentials(this.withCredentials),H.load(t,async N=>{if(typeof N=="string")throw new Error("Invalid gainmap buffer");h=N,await m()},N=>{E=N.lengthComputable,x=N.loaded,M=N.total,P()},N=>{this.manager.itemError(t),typeof a=="function"&&a(N)});const U=new oa(this._internalLoadingManager);return U.setRequestHeader(this.requestHeader),U.setPath(this.path),U.setWithCredentials(this.withCredentials),U.load(n,async N=>{if(typeof N!="string")throw new Error("Invalid metadata string");d=JSON.parse(N),await m()},N=>{w=N.lengthComputable,D=N.loaded,R=N.total,P()},N=>{this.manager.itemError(n),typeof a=="function"&&a(N)}),o}}class _ie extends h5{load(e,t,n,s){const r=this.prepareQuadRenderer(),a=new oa(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const c=new Uint8Array(o);let h,d,m;try{const v=await vie(c);h=v.sdr,d=v.gainMap,m=v.metadata}catch(v){if(v instanceof u5||v instanceof c5)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),m={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},h=c;else throw v}try{await this.render(r,m,h,d)}catch(v){this.manager.itemError(e),typeof s=="function"&&s(v),r.disposeOnDemandRenderer();return}typeof t=="function"&&t(r),this.manager.itemEnd(e),r.disposeOnDemandRenderer()},n,o=>{this.manager.itemError(e),typeof s=="function"&&s(o)}),r}}const cS={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},f5="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Fy=i=>Array.isArray(i),B3=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function n2({files:i=B3,path:e="",preset:t=void 0,colorSpace:n=void 0,extensions:s}={}){t&&(L3(t),i=cS[t],e=f5);const r=Fy(i),{extension:a,isCubemap:o}=N3(i),c=I3(a);if(!c)throw new Error("useEnvironment: Unrecognized file extension: "+i);const h=Hr(y=>y.gl);V.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function y(){su.clear(c,r?[i]:i)}h.domElement.addEventListener("webglcontextlost",y,{once:!0})},[i,h.domElement]);const d=su(c,r?[i]:i,y=>{(a==="webp"||a==="jpg"||a==="jpeg")&&y.setRenderer(h),y.setPath==null||y.setPath(e),s&&s(y)});let m=r?d[0]:d;if(a==="jpg"||a==="jpeg"||a==="webp"){var v;m=(v=m.renderTarget)==null?void 0:v.texture}return m.mapping=o?mh:Y_,m.colorSpace=n??(o?"srgb":"srgb-linear"),m}const Aie={files:B3,path:"",preset:void 0,extensions:void 0};n2.preload=i=>{const e={...Aie,...i};let{files:t,path:n=""}=e;const{preset:s,extensions:r}=e;s&&(L3(s),t=cS[s],n=f5);const{extension:a}=N3(t);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=I3(a);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);su.preload(o,Fy(t)?[t]:t,c=>{c.setPath==null||c.setPath(n),r&&r(c)})};const bie={files:B3,preset:void 0};n2.clear=i=>{const e={...bie,...i};let{files:t}=e;const{preset:n}=e;n&&(L3(n),t=cS[n]);const{extension:s}=N3(t),r=I3(s);if(!r)throw new Error("useEnvironment: Unrecognized file extension: "+t);su.clear(r,Fy(t)?[t]:t)};function L3(i){if(!(i in cS))throw new Error("Preset must be one of: "+Object.keys(cS).join(", "))}function N3(i){var e;const t=Fy(i)&&i.length===6,n=Fy(i)&&i.length===3&&i.some(a=>a.endsWith("json")),s=Fy(i)?i[0]:i;return{extension:t?"cube":n?"webp":s.startsWith("data:application/exr")?"exr":s.startsWith("data:application/hdr")?"hdr":s.startsWith("data:image/jpeg")?"jpg":(e=s.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function I3(i){return i==="cube"?ok:i==="hdr"?rie:i==="exr"?aie:i==="jpg"||i==="jpeg"?_ie:i==="webp"?yie:null}const xie=i=>i.current&&i.current.isScene,Sie=i=>xie(i)?i.current:i;function P3(i,e,t,n,s={}){var r,a,o,c;s={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...s};const h=Sie(e||t),d=h.background,m=h.environment,v={backgroundBlurriness:h.backgroundBlurriness,backgroundIntensity:h.backgroundIntensity,backgroundRotation:(r=(a=h.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&r!==void 0?r:[0,0,0],environmentIntensity:h.environmentIntensity,environmentRotation:(o=(c=h.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&o!==void 0?o:[0,0,0]};return i!=="only"&&(h.environment=n),i&&(h.background=n),Wc(h,s),()=>{i!=="only"&&(h.environment=m),i&&(h.background=d),Wc(h,v)}}function O3({scene:i,background:e=!1,map:t,...n}){const s=Hr(r=>r.scene);return V.useLayoutEffect(()=>{if(t)return P3(e,i,s,t,n)}),null}function d5({background:i=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:s,backgroundRotation:r,environmentIntensity:a,environmentRotation:o,...c}){const h=n2(c),d=Hr(m=>m.scene);return V.useLayoutEffect(()=>P3(i,e,d,h,{backgroundBlurriness:t??n,backgroundIntensity:s,backgroundRotation:r,environmentIntensity:a,environmentRotation:o})),V.useEffect(()=>()=>{h.dispose()},[h]),null}function Eie({children:i,near:e=.1,far:t=1e3,resolution:n=256,frames:s=1,map:r,background:a=!1,blur:o,backgroundBlurriness:c,backgroundIntensity:h,backgroundRotation:d,environmentIntensity:m,environmentRotation:v,scene:y,files:A,path:E,preset:M=void 0,extensions:x}){const w=Hr(U=>U.gl),R=Hr(U=>U.scene),D=V.useRef(null),[P]=V.useState(()=>new Ev),I=V.useMemo(()=>{const U=new VI(n);return U.texture.type=br,U},[n]);V.useEffect(()=>()=>{I.dispose()},[I]),V.useLayoutEffect(()=>{if(s===1){const U=w.autoClear;w.autoClear=!0,D.current.update(w,P),w.autoClear=U}return P3(a,y,R,I.texture,{backgroundBlurriness:o??c,backgroundIntensity:h,backgroundRotation:d,environmentIntensity:m,environmentRotation:v})},[i,P,I.texture,y,R,a,s,w]);let H=1;return AA(()=>{if(s===1/0||H<s){const U=w.autoClear;w.autoClear=!0,D.current.update(w,P),w.autoClear=U,H++}}),V.createElement(V.Fragment,null,wte(V.createElement(V.Fragment,null,i,V.createElement("cubeCamera",{ref:D,args:[e,t,I]}),A||M?V.createElement(d5,{background:!0,files:A,preset:M,path:E,extensions:x}):r?V.createElement(O3,{background:!0,map:r,extensions:x}):null),P))}function Mie(i){var e,t,n,s;const r=n2(i),a=i.map||r;V.useMemo(()=>E3({GroundProjectedEnvImpl:dne}),[]),V.useEffect(()=>()=>{r.dispose()},[r]);const o=V.useMemo(()=>[a],[a]),c=(e=i.ground)==null?void 0:e.height,h=(t=i.ground)==null?void 0:t.radius,d=(n=(s=i.ground)==null?void 0:s.scale)!==null&&n!==void 0?n:1e3;return V.createElement(V.Fragment,null,V.createElement(O3,q_({},i,{map:a})),V.createElement("groundProjectedEnvImpl",{args:o,scale:d,height:c,radius:h}))}function Tie(i){return i.ground?V.createElement(Mie,i):i.map?V.createElement(O3,i):i.children?V.createElement(Eie,i):V.createElement(d5,i)}const Cie=V.forwardRef(({scale:i=10,frames:e=1/0,opacity:t=1,width:n=1,height:s=1,blur:r=1,near:a=0,far:o=10,resolution:c=512,smooth:h=!0,color:d="#000000",depthWrite:m=!1,renderOrder:v,...y},A)=>{const E=V.useRef(null),M=Hr(le=>le.scene),x=Hr(le=>le.gl),w=V.useRef(null);n=n*(Array.isArray(i)?i[0]:i||1),s=s*(Array.isArray(i)?i[1]:i||1);const[R,D,P,I,H,U,N]=V.useMemo(()=>{const le=new Zi(c,c),ue=new Zi(c,c);ue.texture.generateMipmaps=le.texture.generateMipmaps=!1;const z=new jf(n,s).rotateX(Math.PI/2),K=new ts(z),Q=new ZR;Q.depthTest=Q.depthWrite=!1,Q.onBeforeCompile=he=>{he.uniforms={...he.uniforms,ucolor:{value:new Bt(d)}},he.fragmentShader=he.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),he.fragmentShader=he.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const de=new Xi(iie),W=new Xi(sie);return W.depthTest=de.depthTest=!1,[le,z,Q,K,de,W,ue]},[c,n,s,i,d]),O=le=>{I.visible=!0,I.material=H,H.uniforms.tDiffuse.value=R.texture,H.uniforms.h.value=le*1/256,x.setRenderTarget(N),x.render(I,w.current),I.material=U,U.uniforms.tDiffuse.value=N.texture,U.uniforms.v.value=le*1/256,x.setRenderTarget(R),x.render(I,w.current),I.visible=!1};let G=0,oe,se;return AA(()=>{w.current&&(e===1/0||G<e)&&(G++,oe=M.background,se=M.overrideMaterial,E.current.visible=!1,M.background=null,M.overrideMaterial=P,x.setRenderTarget(R),x.render(M,w.current),O(r),h&&O(r*.4),x.setRenderTarget(null),E.current.visible=!0,M.overrideMaterial=se,M.background=oe)}),V.useImperativeHandle(A,()=>E.current,[]),V.createElement("group",q_({"rotation-x":Math.PI/2},y,{ref:E}),V.createElement("mesh",{renderOrder:v,geometry:D,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},V.createElement("meshBasicMaterial",{transparent:!0,map:R.texture,opacity:t,depthWrite:m})),V.createElement("orthographicCamera",{ref:w,args:[-n/2,n/2,s/2,-s/2,a,o]}))});var U3=s1(),wn=i=>i1(i,U3),F3=s1();wn.write=i=>i1(i,F3);var i2=s1();wn.onStart=i=>i1(i,i2);var H3=s1();wn.onFrame=i=>i1(i,H3);var z3=s1();wn.onFinish=i=>i1(i,z3);var Hy=[];wn.setTimeout=(i,e)=>{const t=wn.now()+e,n=()=>{const r=Hy.findIndex(a=>a.cancel==n);~r&&Hy.splice(r,1),Cp-=~r?1:0},s={time:t,handler:i,cancel:n};return Hy.splice(p5(t),0,s),Cp+=1,m5(),s};var p5=i=>~(~Hy.findIndex(e=>e.time>i)||~Hy.length);wn.cancel=i=>{i2.delete(i),H3.delete(i),z3.delete(i),U3.delete(i),F3.delete(i)};wn.sync=i=>{NL=!0,wn.batchedUpdates(i),NL=!1};wn.throttle=i=>{let e;function t(){try{i(...e)}finally{e=null}}function n(...s){e=s,wn.onStart(t)}return n.handler=i,n.cancel=()=>{i2.delete(t),e=null},n};var G3=typeof window<"u"?window.requestAnimationFrame:()=>{};wn.use=i=>G3=i;wn.now=typeof performance<"u"?()=>performance.now():Date.now;wn.batchedUpdates=i=>i();wn.catch=console.error;wn.frameLoop="always";wn.advance=()=>{wn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):v5()};var Tp=-1,Cp=0,NL=!1;function i1(i,e){NL?(e.delete(i),i(0)):(e.add(i),m5())}function m5(){Tp<0&&(Tp=0,wn.frameLoop!=="demand"&&G3(g5))}function wie(){Tp=-1}function g5(){~Tp&&(G3(g5),wn.batchedUpdates(v5))}function v5(){const i=Tp;Tp=wn.now();const e=p5(Tp);if(e&&(y5(Hy.splice(0,e),t=>t.handler()),Cp-=e),!Cp){wie();return}i2.flush(),U3.flush(i?Math.min(64,Tp-i):16.667),H3.flush(),F3.flush(),z3.flush()}function s1(){let i=new Set,e=i;return{add(t){Cp+=e==i&&!i.has(t)?1:0,i.add(t)},delete(t){return Cp-=e==i&&i.has(t)?1:0,i.delete(t)},flush(t){e.size&&(i=new Set,Cp-=e.size,y5(e,n=>n(t)&&i.add(n)),Cp+=i.size,e=i)}}}function y5(i,e){i.forEach(t=>{try{e(t)}catch(n){wn.catch(n)}})}var Rie=Object.defineProperty,Die=(i,e)=>{for(var t in e)Rie(i,t,{get:e[t],enumerable:!0})},ru={};Die(ru,{assign:()=>Lie,colors:()=>Rp,createStringInterpolator:()=>V3,skipAnimation:()=>A5,to:()=>_5,willAdvance:()=>j3});function IL(){}var Bie=(i,e,t)=>Object.defineProperty(i,e,{value:t,writable:!0,configurable:!0}),Rt={arr:Array.isArray,obj:i=>!!i&&i.constructor.name==="Object",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",und:i=>i===void 0};function ef(i,e){if(Rt.arr(i)){if(!Rt.arr(e)||i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}return i===e}var Ti=(i,e)=>i.forEach(e);function Hf(i,e,t){if(Rt.arr(i)){for(let n=0;n<i.length;n++)e.call(t,i[n],`${n}`);return}for(const n in i)i.hasOwnProperty(n)&&e.call(t,i[n],n)}var Xl=i=>Rt.und(i)?[]:Rt.arr(i)?i:[i];function Gx(i,e){if(i.size){const t=Array.from(i);i.clear(),Ti(t,e)}}var fx=(i,...e)=>Gx(i,t=>t(...e)),k3=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),V3,_5,Rp=null,A5=!1,j3=IL,Lie=i=>{i.to&&(_5=i.to),i.now&&(wn.now=i.now),i.colors!==void 0&&(Rp=i.colors),i.skipAnimation!=null&&(A5=i.skipAnimation),i.createStringInterpolator&&(V3=i.createStringInterpolator),i.requestAnimationFrame&&wn.use(i.requestAnimationFrame),i.batchedUpdates&&(wn.batchedUpdates=i.batchedUpdates),i.willAdvance&&(j3=i.willAdvance),i.frameLoop&&(wn.frameLoop=i.frameLoop)},kx=new Set,Gl=[],OB=[],ww=0,s2={get idle(){return!kx.size&&!Gl.length},start(i){ww>i.priority?(kx.add(i),wn.onStart(Nie)):(b5(i),wn(PL))},advance:PL,sort(i){if(ww)wn.onFrame(()=>s2.sort(i));else{const e=Gl.indexOf(i);~e&&(Gl.splice(e,1),x5(i))}},clear(){Gl=[],kx.clear()}};function Nie(){kx.forEach(b5),kx.clear(),wn(PL)}function b5(i){Gl.includes(i)||x5(i)}function x5(i){Gl.splice(Iie(Gl,e=>e.priority>i.priority),0,i)}function PL(i){const e=OB;for(let t=0;t<Gl.length;t++){const n=Gl[t];ww=n.priority,n.idle||(j3(n),n.advance(i),n.idle||e.push(n))}return ww=0,OB=Gl,OB.length=0,Gl=e,Gl.length>0}function Iie(i,e){const t=i.findIndex(e);return t<0?i.length:t}var Pie={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Zc="[-+]?\\d*\\.?\\d+",Rw=Zc+"%";function r2(...i){return"\\(\\s*("+i.join(")\\s*,\\s*(")+")\\s*\\)"}var Oie=new RegExp("rgb"+r2(Zc,Zc,Zc)),Uie=new RegExp("rgba"+r2(Zc,Zc,Zc,Zc)),Fie=new RegExp("hsl"+r2(Zc,Rw,Rw)),Hie=new RegExp("hsla"+r2(Zc,Rw,Rw,Zc)),zie=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Gie=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,kie=/^#([0-9a-fA-F]{6})$/,Vie=/^#([0-9a-fA-F]{8})$/;function jie(i){let e;return typeof i=="number"?i>>>0===i&&i>=0&&i<=4294967295?i:null:(e=kie.exec(i))?parseInt(e[1]+"ff",16)>>>0:Rp&&Rp[i]!==void 0?Rp[i]:(e=Oie.exec(i))?(by(e[1])<<24|by(e[2])<<16|by(e[3])<<8|255)>>>0:(e=Uie.exec(i))?(by(e[1])<<24|by(e[2])<<16|by(e[3])<<8|tH(e[4]))>>>0:(e=zie.exec(i))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Vie.exec(i))?parseInt(e[1],16)>>>0:(e=Gie.exec(i))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Fie.exec(i))?($F(eH(e[1]),kT(e[2]),kT(e[3]))|255)>>>0:(e=Hie.exec(i))?($F(eH(e[1]),kT(e[2]),kT(e[3]))|tH(e[4]))>>>0:null}function UB(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function $F(i,e,t){const n=t<.5?t*(1+e):t+e-t*e,s=2*t-n,r=UB(s,n,i+1/3),a=UB(s,n,i),o=UB(s,n,i-1/3);return Math.round(r*255)<<24|Math.round(a*255)<<16|Math.round(o*255)<<8}function by(i){const e=parseInt(i,10);return e<0?0:e>255?255:e}function eH(i){return(parseFloat(i)%360+360)%360/360}function tH(i){const e=parseFloat(i);return e<0?0:e>1?255:Math.round(e*255)}function kT(i){const e=parseFloat(i);return e<0?0:e>100?1:e/100}function nH(i){let e=jie(i);if(e===null)return i;e=e||0;const t=(e&4278190080)>>>24,n=(e&16711680)>>>16,s=(e&65280)>>>8,r=(e&255)/255;return`rgba(${t}, ${n}, ${s}, ${r})`}var uS=(i,e,t)=>{if(Rt.fun(i))return i;if(Rt.arr(i))return uS({range:i,output:e,extrapolate:t});if(Rt.str(i.output[0]))return V3(i);const n=i,s=n.output,r=n.range||[0,1],a=n.extrapolateLeft||n.extrapolate||"extend",o=n.extrapolateRight||n.extrapolate||"extend",c=n.easing||(h=>h);return h=>{const d=qie(h,r);return Xie(h,r[d],r[d+1],s[d],s[d+1],c,a,o,n.map)}};function Xie(i,e,t,n,s,r,a,o,c){let h=c?c(i):i;if(h<e){if(a==="identity")return h;a==="clamp"&&(h=e)}if(h>t){if(o==="identity")return h;o==="clamp"&&(h=t)}return n===s?n:e===t?i<=e?n:s:(e===-1/0?h=-h:t===1/0?h=h-e:h=(h-e)/(t-e),h=r(h),n===-1/0?h=-h:s===1/0?h=h+n:h=h*(s-n)+n,h)}function qie(i,e){for(var t=1;t<e.length-1&&!(e[t]>=i);++t);return t-1}var Yie={linear:i=>i},hS=Symbol.for("FluidValue.get"),rA=Symbol.for("FluidValue.observers"),fh=i=>!!(i&&i[hS]),Hl=i=>i&&i[hS]?i[hS]():i,iH=i=>i[rA]||null;function Wie(i,e){i.eventObserved?i.eventObserved(e):i(e)}function Dw(i,e){const t=i[rA];t&&t.forEach(n=>{Wie(n,e)})}var Kie=class{constructor(i){if(!i&&!(i=this.get))throw Error("Unknown getter");Jie(this,i)}},Jie=(i,e)=>S5(i,hS,e);function r1(i,e){if(i[hS]){let t=i[rA];t||S5(i,rA,t=new Set),t.has(e)||(t.add(e),i.observerAdded&&i.observerAdded(t.size,e))}return e}function Bw(i,e){const t=i[rA];if(t&&t.has(e)){const n=t.size-1;n?t.delete(e):i[rA]=null,i.observerRemoved&&i.observerRemoved(n,e)}}var S5=(i,e,t)=>Object.defineProperty(i,e,{value:t,writable:!0,configurable:!0}),iC=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Zie=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,sH=new RegExp(`(${iC.source})(%|[a-z]+)`,"i"),Qie=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,a2=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,E5=i=>{const[e,t]=$ie(i);if(!e||k3())return i;const n=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(n)return n.trim();if(t&&t.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(t);return s||i}else{if(t&&a2.test(t))return E5(t);if(t)return t}return i},$ie=i=>{const e=a2.exec(i);if(!e)return[,];const[,t,n]=e;return[t,n]},FB,ese=(i,e,t,n,s)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(n)}, ${s})`,M5=i=>{FB||(FB=Rp?new RegExp(`(${Object.keys(Rp).join("|")})(?!\\w)`,"g"):/^\b$/);const e=i.output.map(r=>Hl(r).replace(a2,E5).replace(Zie,nH).replace(FB,nH)),t=e.map(r=>r.match(iC).map(Number)),s=t[0].map((r,a)=>t.map(o=>{if(!(a in o))throw Error('The arity of each "output" value must be equal');return o[a]})).map(r=>uS({...i,output:r}));return r=>{var c;const a=!sH.test(e[0])&&((c=e.find(h=>sH.test(h)))==null?void 0:c.replace(iC,""));let o=0;return e[0].replace(iC,()=>`${s[o++](r)}${a||""}`).replace(Qie,ese)}},X3="react-spring: ",T5=i=>{const e=i;let t=!1;if(typeof e!="function")throw new TypeError(`${X3}once requires a function parameter`);return(...n)=>{t||(e(...n),t=!0)}},tse=T5(console.warn);function nse(){tse(`${X3}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var ise=T5(console.warn);function sse(){ise(`${X3}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function o2(i){return Rt.str(i)&&(i[0]=="#"||/\d/.test(i)||!k3()&&a2.test(i)||i in(Rp||{}))}var q3=k3()?V.useEffect:V.useLayoutEffect,rse=()=>{const i=V.useRef(!1);return q3(()=>(i.current=!0,()=>{i.current=!1}),[]),i};function C5(){const i=V.useState()[1],e=rse();return()=>{e.current&&i(Math.random())}}var w5=i=>V.useEffect(i,ase),ase=[];function rH(i){const e=V.useRef(void 0);return V.useEffect(()=>{e.current=i}),e.current}var fS=Symbol.for("Animated:node"),ose=i=>!!i&&i[fS]===i,Yu=i=>i&&i[fS],Y3=(i,e)=>Bie(i,fS,e),l2=i=>i&&i[fS]&&i[fS].getPayload(),R5=class{constructor(){Y3(this,this)}getPayload(){return this.payload||[]}},c2=class D5 extends R5{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Rt.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new D5(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Rt.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Rt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Lw=class B5 extends c2{constructor(e){super(0),this._string=null,this._toString=uS({output:[e,e]})}static create(e){return new B5(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Rt.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=uS({output:[this.getValue(),e]})),this._value=0,super.reset()}},Nw={dependencies:null},W3=class extends R5{constructor(i){super(),this.source=i,this.setValue(i)}getValue(i){const e={};return Hf(this.source,(t,n)=>{ose(t)?e[n]=t.getValue(i):fh(t)?e[n]=Hl(t):i||(e[n]=t)}),e}setValue(i){this.source=i,this.payload=this._makePayload(i)}reset(){this.payload&&Ti(this.payload,i=>i.reset())}_makePayload(i){if(i){const e=new Set;return Hf(i,this._addToPayload,e),Array.from(e)}}_addToPayload(i){Nw.dependencies&&fh(i)&&Nw.dependencies.add(i);const e=l2(i);e&&Ti(e,t=>this.add(t))}},lse=class L5 extends W3{constructor(e){super(e)}static create(e){return new L5(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,s)=>n.setValue(e[s])).some(Boolean):(super.setValue(e.map(cse)),!0)}};function cse(i){return(o2(i)?Lw:c2).create(i)}function OL(i){const e=Yu(i);return e?e.constructor:Rt.arr(i)?lse:o2(i)?Lw:c2}var aH=(i,e)=>{const t=!Rt.fun(i)||i.prototype&&i.prototype.isReactComponent;return V.forwardRef((n,s)=>{const r=V.useRef(null),a=t&&V.useCallback(A=>{r.current=fse(s,A)},[s]),[o,c]=hse(n,e),h=C5(),d=()=>{const A=r.current;if(t&&!A)return;(A?e.applyAnimatedValues(A,o.getValue(!0)):!1)===!1&&h()},m=new use(d,c),v=V.useRef(void 0);q3(()=>(v.current=m,Ti(c,A=>r1(A,m)),()=>{v.current&&(Ti(v.current.deps,A=>Bw(A,v.current)),wn.cancel(v.current.update))})),V.useEffect(d,[]),w5(()=>()=>{const A=v.current;Ti(A.deps,E=>Bw(E,A))});const y=e.getComponentProps(o.getValue());return V.createElement(i,{...y,ref:a})})},use=class{constructor(i,e){this.update=i,this.deps=e}eventObserved(i){i.type=="change"&&wn.write(this.update)}};function hse(i,e){const t=new Set;return Nw.dependencies=t,i.style&&(i={...i,style:e.createAnimatedStyle(i.style)}),i=new W3(i),Nw.dependencies=null,[i,t]}function fse(i,e){return i&&(Rt.fun(i)?i(e):i.current=e),e}var oH=Symbol.for("AnimatedComponent"),dse=(i,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=s=>new W3(s),getComponentProps:n=s=>s}={})=>{const s={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:n},r=a=>{const o=lH(a)||"Anonymous";return Rt.str(a)?a=r[a]||(r[a]=aH(a,s)):a=a[oH]||(a[oH]=aH(a,s)),a.displayName=`Animated(${o})`,a};return Hf(i,(a,o)=>{Rt.arr(i)&&(o=lH(a)),r[o]=r(a)}),{animated:r}},lH=i=>Rt.str(i)?i:i&&Rt.str(i.displayName)?i.displayName:Rt.fun(i)&&i.name||null;function cg(i,...e){return Rt.fun(i)?i(...e):i}var Vx=(i,e)=>i===!0||!!(e&&i&&(Rt.fun(i)?i(e):Xl(i).includes(e))),N5=(i,e)=>Rt.obj(i)?e&&i[e]:i,I5=(i,e)=>i.default===!0?i[e]:i.default?i.default[e]:void 0,pse=i=>i,K3=(i,e=pse)=>{let t=mse;i.default&&i.default!==!0&&(i=i.default,t=Object.keys(i));const n={};for(const s of t){const r=e(i[s],s);Rt.und(r)||(n[s]=r)}return n},mse=["config","onProps","onStart","onChange","onPause","onResume","onRest"],gse={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function vse(i){const e={};let t=0;if(Hf(i,(n,s)=>{gse[s]||(e[s]=n,t++)}),t)return e}function P5(i){const e=vse(i);if(e){const t={to:e};return Hf(i,(n,s)=>s in e||(t[s]=n)),t}return{...i}}function dS(i){return i=Hl(i),Rt.arr(i)?i.map(dS):o2(i)?ru.createStringInterpolator({range:[0,1],output:[i,i]})(1):i}function yse(i){for(const e in i)return!0;return!1}function UL(i){return Rt.fun(i)||Rt.arr(i)&&Rt.obj(i[0])}function _se(i,e){var t;(t=i.ref)==null||t.delete(i),e==null||e.delete(i)}function Ase(i,e){var t;e&&i.ref!==e&&((t=i.ref)==null||t.delete(i),e.add(i),i.ref=e)}var bse={default:{tension:170,friction:26}},FL={...bse.default,mass:1,damping:1,easing:Yie.linear,clamp:!1},xse=class{constructor(){this.velocity=0,Object.assign(this,FL)}};function Sse(i,e,t){t&&(t={...t},cH(t,e),e={...t,...e}),cH(i,e),Object.assign(i,e);for(const a in FL)i[a]==null&&(i[a]=FL[a]);let{frequency:n,damping:s}=i;const{mass:r}=i;return Rt.und(n)||(n<.01&&(n=.01),s<0&&(s=0),i.tension=Math.pow(2*Math.PI/n,2)*r,i.friction=4*Math.PI*s*r/n),i}function cH(i,e){if(!Rt.und(e.decay))i.duration=void 0;else{const t=!Rt.und(e.tension)||!Rt.und(e.friction);(t||!Rt.und(e.frequency)||!Rt.und(e.damping)||!Rt.und(e.mass))&&(i.duration=void 0,i.decay=void 0),t&&(i.frequency=void 0)}}var uH=[],Ese=class{constructor(){this.changed=!1,this.values=uH,this.toValues=null,this.fromValues=uH,this.config=new xse,this.immediate=!1}};function O5(i,{key:e,props:t,defaultProps:n,state:s,actions:r}){return new Promise((a,o)=>{let c,h,d=Vx(t.cancel??(n==null?void 0:n.cancel),e);if(d)y();else{Rt.und(t.pause)||(s.paused=Vx(t.pause,e));let A=n==null?void 0:n.pause;A!==!0&&(A=s.paused||Vx(A,e)),c=cg(t.delay||0,e),A?(s.resumeQueue.add(v),r.pause()):(r.resume(),v())}function m(){s.resumeQueue.add(v),s.timeouts.delete(h),h.cancel(),c=h.time-wn.now()}function v(){c>0&&!ru.skipAnimation?(s.delayed=!0,h=wn.setTimeout(y,c),s.pauseQueue.add(m),s.timeouts.add(h)):y()}function y(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(m),s.timeouts.delete(h),i<=(s.cancelId||0)&&(d=!0);try{r.start({...t,callId:i,cancel:d},a)}catch(A){o(A)}}})}var J3=(i,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?zy(i.get()):e.every(t=>t.noop)?U5(i.get()):qc(i.get(),e.every(t=>t.finished)),U5=i=>({value:i,noop:!0,finished:!0,cancelled:!1}),qc=(i,e,t=!1)=>({value:i,finished:e,cancelled:t}),zy=i=>({value:i,cancelled:!0,finished:!1});function F5(i,e,t,n){const{callId:s,parentId:r,onRest:a}=e,{asyncTo:o,promise:c}=t;return!r&&i===o&&!e.reset?c:t.promise=(async()=>{t.asyncId=s,t.asyncTo=i;const h=K3(e,(M,x)=>x==="onRest"?void 0:M);let d,m;const v=new Promise((M,x)=>(d=M,m=x)),y=M=>{const x=s<=(t.cancelId||0)&&zy(n)||s!==t.asyncId&&qc(n,!1);if(x)throw M.result=x,m(M),M},A=(M,x)=>{const w=new hH,R=new fH;return(async()=>{if(ru.skipAnimation)throw pS(t),R.result=qc(n,!1),m(R),R;y(w);const D=Rt.obj(M)?{...M}:{...x,to:M};D.parentId=s,Hf(h,(I,H)=>{Rt.und(D[H])&&(D[H]=I)});const P=await n.start(D);return y(w),t.paused&&await new Promise(I=>{t.resumeQueue.add(I)}),P})()};let E;if(ru.skipAnimation)return pS(t),qc(n,!1);try{let M;Rt.arr(i)?M=(async x=>{for(const w of x)await A(w)})(i):M=Promise.resolve(i(A,n.stop.bind(n))),await Promise.all([M.then(d),v]),E=qc(n.get(),!0,!1)}catch(M){if(M instanceof hH)E=M.result;else if(M instanceof fH)E=M.result;else throw M}finally{s==t.asyncId&&(t.asyncId=r,t.asyncTo=r?o:void 0,t.promise=r?c:void 0)}return Rt.fun(a)&&wn.batchedUpdates(()=>{a(E,n,n.item)}),E})()}function pS(i,e){Gx(i.timeouts,t=>t.cancel()),i.pauseQueue.clear(),i.resumeQueue.clear(),i.asyncId=i.asyncTo=i.promise=void 0,e&&(i.cancelId=e)}var hH=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},fH=class extends Error{constructor(){super("SkipAnimationSignal")}},HL=i=>i instanceof Z3,Mse=1,Z3=class extends Kie{constructor(){super(...arguments),this.id=Mse++,this._priority=0}get priority(){return this._priority}set priority(i){this._priority!=i&&(this._priority=i,this._onPriorityChange(i))}get(){const i=Yu(this);return i&&i.getValue()}to(...i){return ru.to(this,i)}interpolate(...i){return nse(),ru.to(this,i)}toJSON(){return this.get()}observerAdded(i){i==1&&this._attach()}observerRemoved(i){i==0&&this._detach()}_attach(){}_detach(){}_onChange(i,e=!1){Dw(this,{type:"change",parent:this,value:i,idle:e})}_onPriorityChange(i){this.idle||s2.sort(this),Dw(this,{type:"priority",parent:this,priority:i})}},Bv=Symbol.for("SpringPhase"),H5=1,z5=2,G5=4,HB=i=>(i[Bv]&H5)>0,Xd=i=>(i[Bv]&z5)>0,nx=i=>(i[Bv]&G5)>0,dH=(i,e)=>e?i[Bv]|=z5|H5:i[Bv]&=-3,pH=(i,e)=>e?i[Bv]|=G5:i[Bv]&=-5,Tse=class extends Z3{constructor(i,e){if(super(),this.animation=new Ese,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Rt.und(i)||!Rt.und(e)){const t=Rt.obj(i)?{...i}:{...e,from:i};Rt.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(Xd(this)||this._state.asyncTo)||nx(this)}get goal(){return Hl(this.animation.to)}get velocity(){const i=Yu(this);return i instanceof c2?i.lastVelocity||0:i.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return HB(this)}get isAnimating(){return Xd(this)}get isPaused(){return nx(this)}get isDelayed(){return this._state.delayed}advance(i){let e=!0,t=!1;const n=this.animation;let{toValues:s}=n;const{config:r}=n,a=l2(n.to);!a&&fh(n.to)&&(s=Xl(Hl(n.to))),n.values.forEach((h,d)=>{if(h.done)return;const m=h.constructor==Lw?1:a?a[d].lastPosition:s[d];let v=n.immediate,y=m;if(!v){if(y=h.lastPosition,r.tension<=0){h.done=!0;return}let A=h.elapsedTime+=i;const E=n.fromValues[d],M=h.v0!=null?h.v0:h.v0=Rt.arr(r.velocity)?r.velocity[d]:r.velocity;let x;const w=r.precision||(E==m?.005:Math.min(1,Math.abs(m-E)*.001));if(Rt.und(r.duration))if(r.decay){const R=r.decay===!0?.998:r.decay,D=Math.exp(-(1-R)*A);y=E+M/(1-R)*(1-D),v=Math.abs(h.lastPosition-y)<=w,x=M*D}else{x=h.lastVelocity==null?M:h.lastVelocity;const R=r.restVelocity||w/10,D=r.clamp?0:r.bounce,P=!Rt.und(D),I=E==m?h.v0>0:E<m;let H,U=!1;const N=1,O=Math.ceil(i/N);for(let G=0;G<O&&(H=Math.abs(x)>R,!(!H&&(v=Math.abs(m-y)<=w,v)));++G){P&&(U=y==m||y>m==I,U&&(x=-x*D,y=m));const oe=-r.tension*1e-6*(y-m),se=-r.friction*.001*x,le=(oe+se)/r.mass;x=x+le*N,y=y+x*N}}else{let R=1;r.duration>0&&(this._memoizedDuration!==r.duration&&(this._memoizedDuration=r.duration,h.durationProgress>0&&(h.elapsedTime=r.duration*h.durationProgress,A=h.elapsedTime+=i)),R=(r.progress||0)+A/this._memoizedDuration,R=R>1?1:R<0?0:R,h.durationProgress=R),y=E+r.easing(R)*(m-E),x=(y-h.lastPosition)/i,v=R==1}h.lastVelocity=x,Number.isNaN(y)&&(console.warn("Got NaN while animating:",this),v=!0)}a&&!a[d].done&&(v=!1),v?h.done=!0:e=!1,h.setValue(y,r.round)&&(t=!0)});const o=Yu(this),c=o.getValue();if(e){const h=Hl(n.to);(c!==h||t)&&!r.decay?(o.setValue(h),this._onChange(h)):t&&r.decay&&this._onChange(c),this._stop()}else t&&this._onChange(c)}set(i){return wn.batchedUpdates(()=>{this._stop(),this._focus(i),this._set(i)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Xd(this)){const{to:i,config:e}=this.animation;wn.batchedUpdates(()=>{this._onStart(),e.decay||this._set(i,!1),this._stop()})}return this}update(i){return(this.queue||(this.queue=[])).push(i),this}start(i,e){let t;return Rt.und(i)?(t=this.queue||[],this.queue=[]):t=[Rt.obj(i)?i:{...e,to:i}],Promise.all(t.map(n=>this._update(n))).then(n=>J3(this,n))}stop(i){const{to:e}=this.animation;return this._focus(this.get()),pS(this._state,i&&this._lastCallId),wn.batchedUpdates(()=>this._stop(e,i)),this}reset(){this._update({reset:!0})}eventObserved(i){i.type=="change"?this._start():i.type=="priority"&&(this.priority=i.priority+1)}_prepareNode(i){const e=this.key||"";let{to:t,from:n}=i;t=Rt.obj(t)?t[e]:t,(t==null||UL(t))&&(t=void 0),n=Rt.obj(n)?n[e]:n,n==null&&(n=void 0);const s={to:t,from:n};return HB(this)||(i.reverse&&([t,n]=[n,t]),n=Hl(n),Rt.und(n)?Yu(this)||this._set(t):this._set(n)),s}_update({...i},e){const{key:t,defaultProps:n}=this;i.default&&Object.assign(n,K3(i,(a,o)=>/^on/.test(o)?N5(a,t):a)),gH(this,i,"onProps"),sx(this,"onProps",i,this);const s=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const r=this._state;return O5(++this._lastCallId,{key:t,props:i,defaultProps:n,state:r,actions:{pause:()=>{nx(this)||(pH(this,!0),fx(r.pauseQueue),sx(this,"onPause",qc(this,ix(this,this.animation.to)),this))},resume:()=>{nx(this)&&(pH(this,!1),Xd(this)&&this._resume(),fx(r.resumeQueue),sx(this,"onResume",qc(this,ix(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(a=>{if(i.loop&&a.finished&&!(e&&a.noop)){const o=k5(i);if(o)return this._update(o,!0)}return a})}_merge(i,e,t){if(e.cancel)return this.stop(!0),t(zy(this));const n=!Rt.und(i.to),s=!Rt.und(i.from);if(n||s)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(zy(this));const{key:r,defaultProps:a,animation:o}=this,{to:c,from:h}=o;let{to:d=c,from:m=h}=i;s&&!n&&(!e.default||Rt.und(d))&&(d=m),e.reverse&&([d,m]=[m,d]);const v=!ef(m,h);v&&(o.from=m),m=Hl(m);const y=!ef(d,c);y&&this._focus(d);const A=UL(e.to),{config:E}=o,{decay:M,velocity:x}=E;(n||s)&&(E.velocity=0),e.config&&!A&&Sse(E,cg(e.config,r),e.config!==a.config?cg(a.config,r):void 0);let w=Yu(this);if(!w||Rt.und(d))return t(qc(this,!0));const R=Rt.und(e.reset)?s&&!e.default:!Rt.und(m)&&Vx(e.reset,r),D=R?m:this.get(),P=dS(d),I=Rt.num(P)||Rt.arr(P)||o2(P),H=!A&&(!I||Vx(a.immediate||e.immediate,r));if(y){const G=OL(d);if(G!==w.constructor)if(H)w=this._set(P);else throw Error(`Cannot animate between ${w.constructor.name} and ${G.name}, as the "to" prop suggests`)}const U=w.constructor;let N=fh(d),O=!1;if(!N){const G=R||!HB(this)&&v;(y||G)&&(O=ef(dS(D),P),N=!O),(!ef(o.immediate,H)&&!H||!ef(E.decay,M)||!ef(E.velocity,x))&&(N=!0)}if(O&&Xd(this)&&(o.changed&&!R?N=!0:N||this._stop(c)),!A&&((N||fh(c))&&(o.values=w.getPayload(),o.toValues=fh(d)?null:U==Lw?[1]:Xl(P)),o.immediate!=H&&(o.immediate=H,!H&&!R&&this._set(c)),N)){const{onRest:G}=o;Ti(wse,se=>gH(this,e,se));const oe=qc(this,ix(this,c));fx(this._pendingCalls,oe),this._pendingCalls.add(t),o.changed&&wn.batchedUpdates(()=>{var se;o.changed=!R,G==null||G(oe,this),R?cg(a.onRest,oe):(se=o.onStart)==null||se.call(o,oe,this)})}R&&this._set(D),A?t(F5(e.to,e,this._state,this)):N?this._start():Xd(this)&&!y?this._pendingCalls.add(t):t(U5(D))}_focus(i){const e=this.animation;i!==e.to&&(iH(this)&&this._detach(),e.to=i,iH(this)&&this._attach())}_attach(){let i=0;const{to:e}=this.animation;fh(e)&&(r1(e,this),HL(e)&&(i=e.priority+1)),this.priority=i}_detach(){const{to:i}=this.animation;fh(i)&&Bw(i,this)}_set(i,e=!0){const t=Hl(i);if(!Rt.und(t)){const n=Yu(this);if(!n||!ef(t,n.getValue())){const s=OL(t);!n||n.constructor!=s?Y3(this,s.create(t)):n.setValue(t),n&&wn.batchedUpdates(()=>{this._onChange(t,e)})}}return Yu(this)}_onStart(){const i=this.animation;i.changed||(i.changed=!0,sx(this,"onStart",qc(this,ix(this,i.to)),this))}_onChange(i,e){e||(this._onStart(),cg(this.animation.onChange,i,this)),cg(this.defaultProps.onChange,i,this),super._onChange(i,e)}_start(){const i=this.animation;Yu(this).reset(Hl(i.to)),i.immediate||(i.fromValues=i.values.map(e=>e.lastPosition)),Xd(this)||(dH(this,!0),nx(this)||this._resume())}_resume(){ru.skipAnimation?this.finish():s2.start(this)}_stop(i,e){if(Xd(this)){dH(this,!1);const t=this.animation;Ti(t.values,s=>{s.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),Dw(this,{type:"idle",parent:this});const n=e?zy(this.get()):qc(this.get(),ix(this,i??t.to));fx(this._pendingCalls,n),t.changed&&(t.changed=!1,sx(this,"onRest",n,this))}}};function ix(i,e){const t=dS(e),n=dS(i.get());return ef(n,t)}function k5(i,e=i.loop,t=i.to){const n=cg(e);if(n){const s=n!==!0&&P5(n),r=(s||i).reverse,a=!s||s.reset;return mS({...i,loop:e,default:!1,pause:void 0,to:!r||UL(t)?t:void 0,from:a?i.from:void 0,reset:a,...s})}}function mS(i){const{to:e,from:t}=i=P5(i),n=new Set;return Rt.obj(e)&&mH(e,n),Rt.obj(t)&&mH(t,n),i.keys=n.size?Array.from(n):null,i}function Cse(i){const e=mS(i);return Rt.und(e.default)&&(e.default=K3(e)),e}function mH(i,e){Hf(i,(t,n)=>t!=null&&e.add(n))}var wse=["onStart","onRest","onChange","onPause","onResume"];function gH(i,e,t){i.animation[t]=e[t]!==I5(e,t)?N5(e[t],i.key):void 0}function sx(i,e,...t){var n,s,r,a;(s=(n=i.animation)[e])==null||s.call(n,...t),(a=(r=i.defaultProps)[e])==null||a.call(r,...t)}var Rse=["onStart","onChange","onRest"],Dse=1,Bse=class{constructor(i,e){this.id=Dse++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),i&&this.start({default:!0,...i})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(i=>i.idle&&!i.isDelayed&&!i.isPaused)}get item(){return this._item}set item(i){this._item=i}get(){const i={};return this.each((e,t)=>i[t]=e.get()),i}set(i){for(const e in i){const t=i[e];Rt.und(t)||this.springs[e].set(t)}}update(i){return i&&this.queue.push(mS(i)),this}start(i){let{queue:e}=this;return i?e=Xl(i).map(mS):this.queue=[],this._flush?this._flush(this,e):(Y5(this,e),zL(this,e))}stop(i,e){if(i!==!!i&&(e=i),e){const t=this.springs;Ti(Xl(e),n=>t[n].stop(!!i))}else pS(this._state,this._lastAsyncId),this.each(t=>t.stop(!!i));return this}pause(i){if(Rt.und(i))this.start({pause:!0});else{const e=this.springs;Ti(Xl(i),t=>e[t].pause())}return this}resume(i){if(Rt.und(i))this.start({pause:!1});else{const e=this.springs;Ti(Xl(i),t=>e[t].resume())}return this}each(i){Hf(this.springs,i)}_onFrame(){const{onStart:i,onChange:e,onRest:t}=this._events,n=this._active.size>0,s=this._changed.size>0;(n&&!this._started||s&&!this._started)&&(this._started=!0,Gx(i,([o,c])=>{c.value=this.get(),o(c,this,this._item)}));const r=!n&&this._started,a=s||r&&t.size?this.get():null;s&&e.size&&Gx(e,([o,c])=>{c.value=a,o(c,this,this._item)}),r&&(this._started=!1,Gx(t,([o,c])=>{c.value=a,o(c,this,this._item)}))}eventObserved(i){if(i.type=="change")this._changed.add(i.parent),i.idle||this._active.add(i.parent);else if(i.type=="idle")this._active.delete(i.parent);else return;wn.onFrame(this._onFrame)}};function zL(i,e){return Promise.all(e.map(t=>V5(i,t))).then(t=>J3(i,t))}async function V5(i,e,t){const{keys:n,to:s,from:r,loop:a,onRest:o,onResolve:c}=e,h=Rt.obj(e.default)&&e.default;a&&(e.loop=!1),s===!1&&(e.to=null),r===!1&&(e.from=null);const d=Rt.arr(s)||Rt.fun(s)?s:void 0;d?(e.to=void 0,e.onRest=void 0,h&&(h.onRest=void 0)):Ti(Rse,E=>{const M=e[E];if(Rt.fun(M)){const x=i._events[E];e[E]=({finished:w,cancelled:R})=>{const D=x.get(M);D?(w||(D.finished=!1),R&&(D.cancelled=!0)):x.set(M,{value:null,finished:w||!1,cancelled:R||!1})},h&&(h[E]=e[E])}});const m=i._state;e.pause===!m.paused?(m.paused=e.pause,fx(e.pause?m.pauseQueue:m.resumeQueue)):m.paused&&(e.pause=!0);const v=(n||Object.keys(i.springs)).map(E=>i.springs[E].start(e)),y=e.cancel===!0||I5(e,"cancel")===!0;(d||y&&m.asyncId)&&v.push(O5(++i._lastAsyncId,{props:e,state:m,actions:{pause:IL,resume:IL,start(E,M){y?(pS(m,i._lastAsyncId),M(zy(i))):(E.onRest=o,M(F5(d,E,m,i)))}}})),m.paused&&await new Promise(E=>{m.resumeQueue.add(E)});const A=J3(i,await Promise.all(v));if(a&&A.finished&&!(t&&A.noop)){const E=k5(e,a,s);if(E)return Y5(i,[E]),V5(i,E,!0)}return c&&wn.batchedUpdates(()=>c(A,i,i.item)),A}function vH(i,e){const t={...i.springs};return e&&Ti(Xl(e),n=>{Rt.und(n.keys)&&(n=mS(n)),Rt.obj(n.to)||(n={...n,to:void 0}),q5(t,n,s=>X5(s))}),j5(i,t),t}function j5(i,e){Hf(e,(t,n)=>{i.springs[n]||(i.springs[n]=t,r1(t,i))})}function X5(i,e){const t=new Tse;return t.key=i,e&&r1(t,e),t}function q5(i,e,t){e.keys&&Ti(e.keys,n=>{(i[n]||(i[n]=t(n)))._prepareNode(e)})}function Y5(i,e){Ti(e,t=>{q5(i.springs,t,n=>X5(n,i))})}var Lse=V.createContext({pause:!1,immediate:!1}),Nse=()=>{const i=[],e=function(n){sse();const s=[];return Ti(i,(r,a)=>{if(Rt.und(n))s.push(r.start());else{const o=t(n,r,a);o&&s.push(r.start(o))}}),s};e.current=i,e.add=function(n){i.includes(n)||i.push(n)},e.delete=function(n){const s=i.indexOf(n);~s&&i.splice(s,1)},e.pause=function(){return Ti(i,n=>n.pause(...arguments)),this},e.resume=function(){return Ti(i,n=>n.resume(...arguments)),this},e.set=function(n){Ti(i,(s,r)=>{const a=Rt.fun(n)?n(r,s):n;a&&s.set(a)})},e.start=function(n){const s=[];return Ti(i,(r,a)=>{if(Rt.und(n))s.push(r.start());else{const o=this._getProps(n,r,a);o&&s.push(r.start(o))}}),s},e.stop=function(){return Ti(i,n=>n.stop(...arguments)),this},e.update=function(n){return Ti(i,(s,r)=>s.update(this._getProps(n,s,r))),this};const t=function(n,s,r){return Rt.fun(n)?n(r,s):n};return e._getProps=t,e};function Ise(i,e,t){const n=Rt.fun(e)&&e;n&&!t&&(t=[]);const s=V.useMemo(()=>n||arguments.length==3?Nse():void 0,[]),r=V.useRef(0),a=C5(),o=V.useMemo(()=>({ctrls:[],queue:[],flush(x,w){const R=vH(x,w);return r.current>0&&!o.queue.length&&!Object.keys(R).some(P=>!x.springs[P])?zL(x,w):new Promise(P=>{j5(x,R),o.queue.push(()=>{P(zL(x,w))}),a()})}}),[]),c=V.useRef([...o.ctrls]),h=V.useRef([]),d=rH(i)||0;V.useMemo(()=>{Ti(c.current.slice(i,d),x=>{_se(x,s),x.stop(!0)}),c.current.length=i,m(d,i)},[i]),V.useMemo(()=>{m(0,Math.min(d,i))},t);function m(x,w){for(let R=x;R<w;R++){const D=c.current[R]||(c.current[R]=new Bse(null,o.flush)),P=n?n(R,D):e[R];P&&(h.current[R]=Cse(P))}}const v=c.current.map((x,w)=>vH(x,h.current[w])),y=V.useContext(Lse),A=rH(y),E=y!==A&&yse(y);q3(()=>{r.current++,o.ctrls=c.current;const{queue:x}=o;x.length&&(o.queue=[],Ti(x,w=>w())),Ti(c.current,(w,R)=>{s==null||s.add(w),E&&w.start({default:y});const D=h.current[R];D&&(Ase(w,D.ref),w.ref?w.queue.push(D):w.start(D))})}),w5(()=>()=>{Ti(o.ctrls,x=>x.stop(!0))});const M=v.map(x=>({...x}));return s?[M,s]:M}function Q3(i,e){const t=Rt.fun(i),[[n],s]=Ise(1,t?i:[i],t?[]:e);return t||arguments.length==2?[n,s]:n}var Pse=class extends Z3{constructor(i,e){super(),this.source=i,this.idle=!0,this._active=new Set,this.calc=uS(...e);const t=this._get(),n=OL(t);Y3(this,n.create(t))}advance(i){const e=this._get(),t=this.get();ef(e,t)||(Yu(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&yH(this._active)&&zB(this)}_get(){const i=Rt.arr(this.source)?this.source.map(Hl):Xl(Hl(this.source));return this.calc(...i)}_start(){this.idle&&!yH(this._active)&&(this.idle=!1,Ti(l2(this),i=>{i.done=!1}),ru.skipAnimation?(wn.batchedUpdates(()=>this.advance()),zB(this)):s2.start(this))}_attach(){let i=1;Ti(Xl(this.source),e=>{fh(e)&&r1(e,this),HL(e)&&(e.idle||this._active.add(e),i=Math.max(i,e.priority+1))}),this.priority=i,this._start()}_detach(){Ti(Xl(this.source),i=>{fh(i)&&Bw(i,this)}),this._active.clear(),zB(this)}eventObserved(i){i.type=="change"?i.idle?this.advance():(this._active.add(i.parent),this._start()):i.type=="idle"?this._active.delete(i.parent):i.type=="priority"&&(this.priority=Xl(this.source).reduce((e,t)=>Math.max(e,(HL(t)?t.priority:0)+1),0))}};function Ose(i){return i.idle!==!1}function yH(i){return!i.size||Array.from(i).every(Ose)}function zB(i){i.idle||(i.idle=!0,Ti(l2(i),e=>{e.done=!0}),Dw(i,{type:"idle",parent:i}))}ru.assign({createStringInterpolator:M5,to:(i,e)=>new Pse(i,e)});var Use=["primitive"].concat(Object.keys(Ck).filter(i=>/^[A-Z]/.test(i)).map(i=>i[0].toLowerCase()+i.slice(1)));ru.assign({createStringInterpolator:M5,colors:Pie,frameLoop:"demand"});Nte(()=>{wn.advance()});var Fse=dse(Use,{applyAnimatedValues:Wc}),$3=Fse.animated;/**
 * postprocessing v6.37.3 build Sun Apr 27 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var GB=1/1e3,Hse=1e3,zse=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(i){typeof document<"u"&&document.hidden!==void 0&&(i?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=i)}get delta(){return this._delta*GB}get fixedDelta(){return this._fixedDelta*GB}set fixedDelta(i){this._fixedDelta=i*Hse}get elapsed(){return this._elapsed*GB}update(i){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(i!==void 0?i:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(i){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},Gse=(()=>{const i=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new En;return t.setAttribute("position",new ui(i,3)),t.setAttribute("uv",new ui(e,2)),t})(),Ia=class GL{static get fullscreenGeometry(){return Gse}constructor(e="Pass",t=new Ev,n=new jE){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new ts(GL.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Ev),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=vh){}render(e,t,n,s,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Zi||t instanceof Ys||t instanceof Ai||t instanceof GL)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},kse=class extends Ia{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(i,e,t,n,s){const r=i.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},Vse=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,xA="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",W5=class extends Xi{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new qt(null),opacity:new qt(1)},blending:qs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Vse,vertexShader:xA})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}getOpacity(i){return this.uniforms.opacity.value}setOpacity(i){this.uniforms.opacity.value=i}},K5=class extends Ia{constructor(i,e=!0){super("CopyPass"),this.fullscreenMaterial=new W5,this.needsSwap=!1,this.renderTarget=i,i===void 0&&(this.renderTarget=new Zi(1,1,{minFilter:li,magFilter:li,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(i){this.autoResize=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(i){this.autoResize=i}render(i,e,t,n,s){this.fullscreenMaterial.inputBuffer=e.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,e){this.autoResize&&this.renderTarget.setSize(i,e)}initialize(i,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==as?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":i!==null&&i.outputColorSpace===Yn&&(this.renderTarget.texture.colorSpace=Yn))}},_H=new Bt,J5=class extends Ia{constructor(i=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=i,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(i,e,t){this.color=i,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(i){this.overrideClearColor=i}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(i){this.overrideClearAlpha=i}render(i,e,t,n,s){const r=this.overrideClearColor,a=this.overrideClearAlpha,o=i.getClearAlpha(),c=r!==null,h=a>=0;c?(i.getClearColor(_H),i.setClearColor(r,h?a:o)):h&&i.setClearAlpha(a),i.setRenderTarget(this.renderToScreen?null:e),i.clear(this.color,this.depth,this.stencil),c?i.setClearColor(_H,o):h&&i.setClearAlpha(o)}},jse=class extends Ia{constructor(i,e){super("MaskPass",i,e),this.needsSwap=!1,this.clearPass=new J5(!1,!1,!0),this.inverse=!1}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get inverted(){return this.inverse}set inverted(i){this.inverse=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(i){this.inverted=i}render(i,e,t,n,s){const r=i.getContext(),a=i.state.buffers,o=this.scene,c=this.camera,h=this.clearPass,d=this.inverted?0:1,m=1-d;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),a.stencil.setFunc(r.ALWAYS,d,4294967295),a.stencil.setClear(m),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?h.render(i,null):(h.render(i,e),h.render(i,t))),this.renderToScreen?(i.setRenderTarget(null),i.render(o,c)):(i.setRenderTarget(e),i.render(o,c),i.setRenderTarget(t),i.render(o,c)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(r.EQUAL,1,4294967295),a.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),a.stencil.setLocked(!0)}},Xse=class{constructor(i=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:n=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new K5,this.depthTexture=null,this.passes=[],this.timer=new zse,this.autoRenderToScreen=!0,this.setRenderer(i)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(i){const e=this.inputBuffer,t=this.multisampling;t>0&&i>0?(this.inputBuffer.samples=i,this.outputBuffer.samples=i,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==i&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,i),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(i){if(this.renderer=i,i!==null){const e=i.getSize(new Ke),t=i.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===as&&i.outputColorSpace===Yn&&(this.inputBuffer.texture.colorSpace=Yn,this.outputBuffer.texture.colorSpace=Yn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),i.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(i,t,n)}}replaceRenderer(i,e=!0){const t=this.renderer,n=t.domElement.parentNode;return this.setRenderer(i),e&&n!==null&&(n.removeChild(t.domElement),n.appendChild(i.domElement)),t}createDepthTexture(){const i=this.depthTexture=new WE;return this.inputBuffer.depthTexture=i,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(i.format=Sv,i.type=xv):i.type=iu,i}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const i of this.passes)i.setDepthTexture(null)}}createBuffer(i,e,t,n){const s=this.renderer,r=s===null?new Ke:s.getDrawingBufferSize(new Ke),a={minFilter:li,magFilter:li,stencilBuffer:e,depthBuffer:i,type:t},o=new Zi(r.width,r.height,a);return n>0&&(o.ignoreDepthForMultisampleCopy=!1,o.samples=n),t===as&&s!==null&&s.outputColorSpace===Yn&&(o.texture.colorSpace=Yn),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}setMainScene(i){for(const e of this.passes)e.mainScene=i}setMainCamera(i){for(const e of this.passes)e.mainCamera=i}addPass(i,e){const t=this.passes,n=this.renderer,s=n.getDrawingBufferSize(new Ke),r=n.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(i.setRenderer(n),i.setSize(s.width,s.height),i.initialize(n,r,a),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),i.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,i):t.push(i),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),i.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const o=this.createDepthTexture();for(i of t)i.setDepthTexture(o)}else i.setDepthTexture(this.depthTexture)}removePass(i){const e=this.passes,t=e.indexOf(i);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const r=(o,c)=>o||c.needsDepthTexture;e.reduce(r,!1)||(i.getDepthTexture()===this.depthTexture&&i.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(i.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const i=this.passes;this.deleteDepthTexture(),i.length>0&&(this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!1),this.passes=[])}render(i){const e=this.renderer,t=this.copyPass;let n=this.inputBuffer,s=this.outputBuffer,r=!1,a,o,c;i===void 0&&(this.timer.update(),i=this.timer.getDelta());for(const h of this.passes)h.enabled&&(h.render(e,n,s,i,r),h.needsSwap&&(r&&(t.renderToScreen=h.renderToScreen,a=e.getContext(),o=e.state.buffers.stencil,o.setFunc(a.NOTEQUAL,1,4294967295),t.render(e,n,s,i,r),o.setFunc(a.EQUAL,1,4294967295)),c=n,n=s,s=c),h instanceof jse?r=!0:h instanceof kse&&(r=!1))}setSize(i,e,t){const n=this.renderer,s=n.getSize(new Ke);(i===void 0||e===void 0)&&(i=s.width,e=s.height),(s.width!==i||s.height!==e)&&n.setSize(i,e,t);const r=n.getDrawingBufferSize(new Ke);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const a of this.passes)a.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const i of this.passes)i.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Ia.fullscreenGeometry.dispose()}},Dp={NONE:0,DEPTH:1,CONVOLUTION:2},_i={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},qse=class{constructor(){this.shaderParts=new Map([[_i.FRAGMENT_HEAD,null],[_i.FRAGMENT_MAIN_UV,null],[_i.FRAGMENT_MAIN_IMAGE,null],[_i.VERTEX_HEAD,null],[_i.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Dp.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=ll}},kB=!1,AH=class{constructor(i=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(i),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case ra:t=this.materialsFlatShadedDoubleSide;break;case Ar:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case ra:t=this.materialsDoubleSide;break;case Ar:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(i){if(!(i instanceof Xi))return i.clone();const e=i.uniforms,t=new Map;for(const s in e){const r=e[s].value;r.isRenderTargetTexture&&(e[s].value=null,t.set(s,r))}const n=i.clone();for(const s of t)e[s[0]].value=s[1],n.uniforms[s[0]].value=s[1];return n}setMaterial(i){if(this.disposeMaterials(),this.material=i,i!==null){const e=this.materials=[this.cloneMaterial(i),this.cloneMaterial(i),this.cloneMaterial(i)];for(const t of e)t.uniforms=Object.assign({},i.uniforms),t.side=nu;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.side=Ar,n}),this.materialsDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.side=ra,n}),this.materialsFlatShaded=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=Ar,n}),this.materialsFlatShadedDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=ra,n})}}render(i,e,t){const n=i.shadowMap.enabled;if(i.shadowMap.enabled=!1,kB){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),i.render(e,t);for(const r of s)r[0].material=r[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,i.render(e,t),e.overrideMaterial=s}i.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const i=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of i)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return kB}static set workaroundEnabled(i){kB=i}},qd=-1,xr=class extends ul{constructor(i,e=qd,t=qd,n=1){super(),this.resizable=i,this.baseSize=new Ke(1,1),this.preferredSize=new Ke(e,t),this.target=this.preferredSize,this.s=n,this.effectiveSize=new Ke,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const i=this.baseSize,e=this.preferredSize,t=this.effectiveSize,n=this.scale;e.width!==qd?t.width=e.width:e.height!==qd?t.width=Math.round(e.height*(i.width/Math.max(i.height,1))):t.width=Math.round(i.width*n),e.height!==qd?t.height=e.height:e.width!==qd?t.height=Math.round(e.width/Math.max(i.width/Math.max(i.height,1),1)):t.height=Math.round(i.height*n)}get width(){return this.effectiveSize.width}set width(i){this.preferredWidth=i}get height(){return this.effectiveSize.height}set height(i){this.preferredHeight=i}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(i){this.s!==i&&(this.s=i,this.preferredSize.setScalar(qd),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(i){this.scale=i}get baseWidth(){return this.baseSize.width}set baseWidth(i){this.baseSize.width!==i&&(this.baseSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(i){this.baseWidth=i}get baseHeight(){return this.baseSize.height}set baseHeight(i){this.baseSize.height!==i&&(this.baseSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(i){this.baseHeight=i}setBaseSize(i,e){(this.baseSize.width!==i||this.baseSize.height!==e)&&(this.baseSize.set(i,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(i){this.preferredSize.width!==i&&(this.preferredSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(i){this.preferredWidth=i}get preferredHeight(){return this.preferredSize.height}set preferredHeight(i){this.preferredSize.height!==i&&(this.preferredSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(i){this.preferredHeight=i}setPreferredSize(i,e){(this.preferredSize.width!==i||this.preferredSize.height!==e)&&(this.preferredSize.set(i,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(i){this.s=i.scale,this.baseSize.set(i.baseWidth,i.baseHeight),this.preferredSize.set(i.preferredWidth,i.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return qd}},Zn={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Yse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",Wse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",Kse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",Jse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Zse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",Qse="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",$se="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",ere="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",tre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",nre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",ire="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",sre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",rre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",are="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",ore="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",lre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",cre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",ure="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",hre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",fre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",dre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",pre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",mre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",gre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",vre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",yre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",_re="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Are="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",bre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",xre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Sre="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",Ere="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Mre=new Map([[Zn.ADD,Yse],[Zn.ALPHA,Wse],[Zn.AVERAGE,Kse],[Zn.COLOR,Jse],[Zn.COLOR_BURN,Zse],[Zn.COLOR_DODGE,Qse],[Zn.DARKEN,$se],[Zn.DIFFERENCE,ere],[Zn.DIVIDE,tre],[Zn.DST,null],[Zn.EXCLUSION,nre],[Zn.HARD_LIGHT,ire],[Zn.HARD_MIX,sre],[Zn.HUE,rre],[Zn.INVERT,are],[Zn.INVERT_RGB,ore],[Zn.LIGHTEN,lre],[Zn.LINEAR_BURN,cre],[Zn.LINEAR_DODGE,ure],[Zn.LINEAR_LIGHT,hre],[Zn.LUMINOSITY,fre],[Zn.MULTIPLY,dre],[Zn.NEGATION,pre],[Zn.NORMAL,mre],[Zn.OVERLAY,gre],[Zn.PIN_LIGHT,vre],[Zn.REFLECT,yre],[Zn.SATURATION,_re],[Zn.SCREEN,Are],[Zn.SOFT_LIGHT,bre],[Zn.SRC,xre],[Zn.SUBTRACT,Sre],[Zn.VIVID_LIGHT,Ere]]),Tre=class extends ul{constructor(i,e=1){super(),this._blendFunction=i,this.opacity=new qt(e)}getOpacity(){return this.opacity.value}setOpacity(i){this.opacity.value=i}get blendFunction(){return this._blendFunction}set blendFunction(i){this._blendFunction=i,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(i){this.blendFunction=i}getShaderCode(){return Mre.get(this.blendFunction)}},aA=class extends ul{constructor(i,e,{attributes:t=Dp.NONE,blendFunction:n=Zn.NORMAL,defines:s=new Map,uniforms:r=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=i,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=o,this.defines=s,this.uniforms=r,this.extensions=a,this.blendMode=new Tre(n),this.blendMode.addEventListener("change",c=>this.setChanged()),this._inputColorSpace=ll,this._outputColorSpace=Yc}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(i){this._inputColorSpace=i,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(i){this._outputColorSpace=i,this.setChanged()}set mainScene(i){}set mainCamera(i){}getName(){return this.name}setRenderer(i){this.renderer=i}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(i){this.attributes=i,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(i){this.fragmentShader=i,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(i){this.vertexShader=i,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(i,e=vh){}update(i,e,t){}setSize(i,e){}initialize(i,e,t){}dispose(){for(const i of Object.keys(this)){const e=this[i];(e instanceof Zi||e instanceof Ys||e instanceof Ai||e instanceof Ia)&&this[i].dispose()}}},u2={MEDIUM:2,LARGE:3},Cre=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,wre="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Rre=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Dre=class extends Xi{constructor(i=new ai){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new qt(null),texelSize:new qt(new ai),scale:new qt(1),kernel:new qt(0)},blending:qs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Cre,vertexShader:wre}),this.setTexelSize(i.x,i.y),this.kernelSize=u2.MEDIUM}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.inputBuffer=i}get kernelSequence(){return Rre[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(i){this.uniforms.scale.value=i}getScale(){return this.uniforms.scale.value}setScale(i){this.uniforms.scale.value=i}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(i){this.uniforms.kernel.value=i}setKernel(i){this.kernel=i}setTexelSize(i,e){this.uniforms.texelSize.value.set(i,e,i*.5,e*.5)}setSize(i,e){const t=1/i,n=1/e;this.uniforms.texelSize.value.set(t,n,t*.5,n*.5)}},Z5=class extends Ia{constructor({kernelSize:i=u2.MEDIUM,resolutionScale:e=.5,width:t=xr.AUTO_SIZE,height:n=xr.AUTO_SIZE,resolutionX:s=t,resolutionY:r=n}={}){super("KawaseBlurPass"),this.renderTargetA=new Zi(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new xr(this,s,r,e);a.addEventListener("change",o=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new Dre,this._blurMaterial.kernelSize=i,this.copyMaterial=new W5}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(i){this._blurMaterial=i}get dithering(){return this.copyMaterial.dithering}set dithering(i){this.copyMaterial.dithering=i}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(i){this.blurMaterial.kernelSize=i}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get scale(){return this.blurMaterial.scale}set scale(i){this.blurMaterial.scale=i}getScale(){return this.blurMaterial.scale}setScale(i){this.blurMaterial.scale=i}getKernelSize(){return this.kernelSize}setKernelSize(i){this.kernelSize=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,e,t,n,s){const r=this.scene,a=this.camera,o=this.renderTargetA,c=this.renderTargetB,h=this.blurMaterial,d=h.kernelSequence;let m=e;this.fullscreenMaterial=h;for(let v=0,y=d.length;v<y;++v){const A=(v&1)===0?o:c;h.kernel=d[v],h.inputBuffer=m.texture,i.setRenderTarget(A),i.render(r,a),m=A}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=m.texture,i.setRenderTarget(this.renderToScreen?null:t),i.render(r,a)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e);const n=t.width,s=t.height;this.renderTargetA.setSize(n,s),this.renderTargetB.setSize(n,s),this.blurMaterial.setSize(i,e)}initialize(i,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==as?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):i!==null&&i.outputColorSpace===Yn&&(this.renderTargetA.texture.colorSpace=Yn,this.renderTargetB.texture.colorSpace=Yn))}static get AUTO_SIZE(){return xr.AUTO_SIZE}},Bre=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,Lre=class extends Xi{constructor(i=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:kp.replace(/\D+/g,"")},uniforms:{inputBuffer:new qt(null),threshold:new qt(0),smoothing:new qt(1),range:new qt(null)},blending:qs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Bre,vertexShader:xA}),this.colorOutput=i,this.luminanceRange=e}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get threshold(){return this.uniforms.threshold.value}set threshold(i){this.smoothing>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=i}getThreshold(){return this.threshold}setThreshold(i){this.threshold=i}get smoothing(){return this.uniforms.smoothing.value}set smoothing(i){this.threshold>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=i}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(i){this.smoothing=i}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(i){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(i){i?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(i){return this.colorOutput}setColorOutputEnabled(i){this.colorOutput=i}get useRange(){return this.luminanceRange!==null}set useRange(i){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(i){i!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=i,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(i){this.luminanceRange=i}},Q5=class extends Ia{constructor({renderTarget:i,luminanceRange:e,colorOutput:t,resolutionScale:n=1,width:s=xr.AUTO_SIZE,height:r=xr.AUTO_SIZE,resolutionX:a=s,resolutionY:o=r}={}){super("LuminancePass"),this.fullscreenMaterial=new Lre(t,e),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new Zi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const c=this.resolution=new xr(this,a,o,n);c.addEventListener("change",h=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(i,e,t,n,s){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height)}initialize(i,e,t){t!==void 0&&t!==as&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Nre=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Ire="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",Pre=class extends Xi{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new qt(null),texelSize:new qt(new Ke)},blending:qs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Nre,vertexShader:Ire})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}},Ore=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,Ure="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Fre=class extends Xi{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new qt(null),supportBuffer:new qt(null),texelSize:new qt(new Ke),radius:new qt(.85)},blending:qs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ore,vertexShader:Ure})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}set supportBuffer(i){this.uniforms.supportBuffer.value=i}get radius(){return this.uniforms.radius.value}set radius(i){this.uniforms.radius.value=i}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}},Hre=class extends Ia{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Zi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Pre,this.upsamplingMaterial=new Fre,this.resolution=new Ke}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(i){if(this.levels!==i){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<i;++t){const n=e.clone();n.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(e);for(let t=1,n=i-1;t<n;++t){const s=e.clone();s.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(i){this.upsamplingMaterial.radius=i}render(i,e,t,n,s){const{scene:r,camera:a}=this,{downsamplingMaterial:o,upsamplingMaterial:c}=this,{downsamplingMipmaps:h,upsamplingMipmaps:d}=this;let m=e;this.fullscreenMaterial=o;for(let v=0,y=h.length;v<y;++v){const A=h[v];o.setSize(m.width,m.height),o.inputBuffer=m.texture,i.setRenderTarget(A),i.render(r,a),m=A}this.fullscreenMaterial=c;for(let v=d.length-1;v>=0;--v){const y=d[v];c.setSize(m.width,m.height),c.inputBuffer=m.texture,c.supportBuffer=h[v].texture,i.setRenderTarget(y),i.render(r,a),m=y}}setSize(i,e){const t=this.resolution;t.set(i,e);let n=t.width,s=t.height;for(let r=0,a=this.downsamplingMipmaps.length;r<a;++r)n=Math.round(n*.5),s=Math.round(s*.5),this.downsamplingMipmaps[r].setSize(n,s),r<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[r].setSize(n,s)}initialize(i,e,t){if(t!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of n)s.texture.type=t;if(t!==as)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(i!==null&&i.outputColorSpace===Yn)for(const s of n)s.texture.colorSpace=Yn}}dispose(){super.dispose();for(const i of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))i.dispose()}},zre=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,Gre=class extends aA{constructor({blendFunction:i=Zn.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:n=!1,intensity:s=1,radius:r=.85,levels:a=8,kernelSize:o=u2.LARGE,resolutionScale:c=.5,width:h=xr.AUTO_SIZE,height:d=xr.AUTO_SIZE,resolutionX:m=h,resolutionY:v=d}={}){super("BloomEffect",zre,{blendFunction:i,uniforms:new Map([["map",new qt(null)],["intensity",new qt(s)]])}),this.renderTarget=new Zi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Z5({kernelSize:o}),this.luminancePass=new Q5({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new Hre,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=r,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const y=this.resolution=new xr(this,m,v,c);y.addEventListener("change",A=>this.setSize(y.baseWidth,y.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get dithering(){return this.blurPass.dithering}set dithering(i){this.blurPass.dithering=i}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(i){this.blurPass.kernelSize=i}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(i){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(i){this.uniforms.get("intensity").value=i}getIntensity(){return this.intensity}setIntensity(i){this.intensity=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}update(i,e,t){const n=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(i,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,s.renderTarget):this.blurPass.render(i,s.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,e):this.blurPass.render(i,e,n)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(i,e),this.mipmapBlurPass.setSize(i,e)}initialize(i,e,t){this.blurPass.initialize(i,e,t),this.luminancePass.initialize(i,e,t),this.mipmapBlurPass.initialize(i,e,t),t!==void 0&&(this.renderTarget.texture.type=t,i!==null&&i.outputColorSpace===Yn&&(this.renderTarget.texture.colorSpace=Yn))}},$5={RED:0,GREEN:1},eP={DISCARD:0,MULTIPLY_RGB_SET_ALPHA:2,MULTIPLY_RGB:3},kre=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 cocNearFar=texture2D(cocBuffer,vUv).rg*scale;float coc=cocNearFar.x;
#else
float coc=texture2D(cocBuffer,vUv).g*scale;
#endif
if(coc==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(cocNearFar.x,cocNearFar.y);
#else
vec2 step=texelSize*coc;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,VT=class extends Xi{constructor(i=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:i?"2":"1"},uniforms:{inputBuffer:new qt(null),cocBuffer:new qt(null),texelSize:new qt(new Ke),kernel64:new qt(null),kernel16:new qt(null),scale:new qt(1)},blending:qs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:kre,vertexShader:xA}),e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}set cocBuffer(i){this.uniforms.cocBuffer.value=i}setCoCBuffer(i){this.uniforms.cocBuffer.value=i}get scale(){return this.uniforms.scale.value}set scale(i){this.uniforms.scale.value=i}getScale(i){return this.scale}setScale(i){this.scale=i}generateKernel(){const i=2.39996323,e=new Float64Array(128),t=new Float64Array(32);let n=0,s=0;for(let r=0,a=Math.sqrt(80);r<80;++r){const o=r*i,c=Math.sqrt(r)/a,h=c*Math.cos(o),d=c*Math.sin(o);r%5===0?(t[s++]=h,t[s++]=d):(e[n++]=h,e[n++]=d)}this.uniforms.kernel64.value=e,this.uniforms.kernel16.value=t}setTexelSize(i,e){this.uniforms.texelSize.value.set(i,e)}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}};function bH(i,e,t){return i*(e-t)-e}function kL(i,e,t){return Math.min(Math.max((i+e)/(e-t),0),1)}var Vre=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#ifdef LOG_DEPTH
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#endif
return depth;}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,jre=class extends Xi{constructor(i){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new qt(null),focusDistance:new qt(0),focusRange:new qt(0),cameraNear:new qt(.3),cameraFar:new qt(1e3)},blending:qs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Vre,vertexShader:xA}),this.uniforms.focalLength=this.uniforms.focusRange,this.copyCameraSettings(i)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(i){this.uniforms.depthBuffer.value=i}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,e=vh){this.depthBuffer=i,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(i){this.uniforms.focusDistance.value=i}get worldFocusDistance(){return-bH(this.focusDistance,this.near,this.far)}set worldFocusDistance(i){this.focusDistance=kL(-i,this.near,this.far)}getFocusDistance(i){this.uniforms.focusDistance.value=i}setFocusDistance(i){this.uniforms.focusDistance.value=i}get focalLength(){return this.focusRange}set focalLength(i){this.focusRange=i}get focusRange(){return this.uniforms.focusRange.value}set focusRange(i){this.uniforms.focusRange.value=i}get worldFocusRange(){return-bH(this.focusRange,this.near,this.far)}set worldFocusRange(i){this.focusRange=kL(-i,this.near,this.far)}getFocalLength(i){return this.focusRange}setFocalLength(i){this.focusRange=i}adoptCameraSettings(i){this.copyCameraSettings(i)}copyCameraSettings(i){i&&(this.uniforms.cameraNear.value=i.near,this.uniforms.cameraFar.value=i.far,i instanceof es?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Xre=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 3
vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=vec4(mask*texel.rgb,texel.a);
#elif MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,qre=class extends Xi{constructor(i=null){super({name:"MaskMaterial",uniforms:{maskTexture:new qt(i),inputBuffer:new qt(null),strength:new qt(1)},blending:qs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Xre,vertexShader:xA}),this.colorChannel=$5.RED,this.maskFunction=eP.DISCARD}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}set maskTexture(i){this.uniforms.maskTexture.value=i,delete this.defines.MASK_PRECISION_HIGH,i.type!==as&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(i){this.maskTexture=i}set colorChannel(i){this.defines.COLOR_CHANNEL=i.toFixed(0),this.needsUpdate=!0}setColorChannel(i){this.colorChannel=i}set maskFunction(i){this.defines.MASK_FUNCTION=i.toFixed(0),this.needsUpdate=!0}setMaskFunction(i){this.maskFunction=i}get inverted(){return this.defines.INVERTED!==void 0}set inverted(i){this.inverted&&!i?delete this.defines.INVERTED:i&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(i){this.inverted=i}get strength(){return this.uniforms.strength.value}set strength(i){this.uniforms.strength.value=i}getStrength(){return this.strength}setStrength(i){this.strength=i}},xy=class extends Ia{constructor(i,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=i,this.input=e}setInput(i){this.input=i}render(i,e,t,n,s){const r=this.fullscreenMaterial.uniforms;e!==null&&r!==void 0&&r[this.input]!==void 0&&(r[this.input].value=e.texture),i.setRenderTarget(this.renderToScreen?null:t),i.render(this.scene,this.camera)}initialize(i,e,t){t!==void 0&&t!==as&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Yre=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform lowp sampler2D farCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);
#if MASK_FUNCTION == 1
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,colorFar.a);cocNearFar.x=min(cocNearFar.x*scale,1.0);
#else
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,texture2D(farCoCBuffer,uv).g);cocNearFar=min(cocNearFar*scale,1.0);
#endif
vec4 result=inputColor*(1.0-cocNearFar.y)+colorFar;result=mix(result,colorNear,cocNearFar.x);outputColor=result;}`,Wre=class extends aA{constructor(i,{blendFunction:e,worldFocusDistance:t,worldFocusRange:n,focusDistance:s=0,focalLength:r=.1,focusRange:a=r,bokehScale:o=1,resolutionScale:c=1,width:h=xr.AUTO_SIZE,height:d=xr.AUTO_SIZE,resolutionX:m=h,resolutionY:v=d}={}){super("DepthOfFieldEffect",Yre,{blendFunction:e,attributes:Dp.DEPTH,uniforms:new Map([["nearColorBuffer",new qt(null)],["farColorBuffer",new qt(null)],["nearCoCBuffer",new qt(null)],["farCoCBuffer",new qt(null)],["scale",new qt(1)]])}),this.camera=i,this.renderTarget=new Zi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.uniforms.get("farCoCBuffer").value=this.renderTargetCoC.texture,this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new xy(new jre(i));const y=this.cocMaterial;y.focusDistance=s,y.focusRange=a,t!==void 0&&(y.worldFocusDistance=t),n!==void 0&&(y.worldFocusRange=n),this.blurPass=new Z5({resolutionScale:c,resolutionX:m,resolutionY:v,kernelSize:u2.MEDIUM}),this.maskPass=new xy(new qre(this.renderTargetCoC.texture));const A=this.maskPass.fullscreenMaterial;A.colorChannel=$5.GREEN,this.maskFunction=eP.MULTIPLY_RGB,this.bokehNearBasePass=new xy(new VT(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new xy(new VT(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new xy(new VT(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new xy(new VT(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const E=this.resolution=new xr(this,m,v,c);E.addEventListener("change",M=>this.setSize(E.baseWidth,E.baseHeight)),this.bokehScale=o}set mainCamera(i){this.camera=i,this.cocMaterial.copyCameraSettings(i)}get cocTexture(){return this.renderTargetCoC.texture}get maskFunction(){return this.maskPass.fullscreenMaterial.maskFunction}set maskFunction(i){this.maskFunction!==i&&(this.defines.set("MASK_FUNCTION",i.toFixed(0)),this.maskPass.fullscreenMaterial.maskFunction=i,this.setChanged())}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.cocMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(i){this.bokehNearBasePass.fullscreenMaterial.scale=i,this.bokehNearFillPass.fullscreenMaterial.scale=i,this.bokehFarBasePass.fullscreenMaterial.scale=i,this.bokehFarFillPass.fullscreenMaterial.scale=i,this.maskPass.fullscreenMaterial.strength=i,this.uniforms.get("scale").value=i}getBokehScale(){return this.bokehScale}setBokehScale(i){this.bokehScale=i}getTarget(){return this.target}setTarget(i){this.target=i}calculateFocusDistance(i){const e=this.camera,t=e.position.distanceTo(i);return kL(-t,e.near,e.far)}setDepthTexture(i,e=vh){this.cocMaterial.depthBuffer=i,this.cocMaterial.depthPacking=e}update(i,e,t){const n=this.renderTarget,s=this.renderTargetCoC,r=this.renderTargetCoCBlurred,a=this.renderTargetMasked;if(this.target!==null){const o=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=o}this.cocPass.render(i,null,s),this.blurPass.render(i,s,r),this.maskPass.render(i,e,a),this.bokehFarBasePass.render(i,a,n),this.bokehFarFillPass.render(i,n,this.renderTargetFar),this.bokehNearBasePass.render(i,e,n),this.bokehNearFillPass.render(i,n,this.renderTargetNear)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e);const n=t.width,s=t.height;this.cocPass.setSize(i,e),this.blurPass.setSize(i,e),this.maskPass.setSize(i,e),this.renderTargetFar.setSize(i,e),this.renderTargetCoC.setSize(i,e),this.renderTargetMasked.setSize(i,e),this.renderTarget.setSize(n,s),this.renderTargetNear.setSize(n,s),this.renderTargetCoCBlurred.setSize(n,s),this.bokehNearBasePass.fullscreenMaterial.setSize(i,e),this.bokehNearFillPass.fullscreenMaterial.setSize(i,e),this.bokehFarBasePass.fullscreenMaterial.setSize(i,e),this.bokehFarFillPass.fullscreenMaterial.setSize(i,e)}initialize(i,e,t){this.cocPass.initialize(i,e,t),this.maskPass.initialize(i,e,t),this.bokehNearBasePass.initialize(i,e,t),this.bokehNearFillPass.initialize(i,e,t),this.bokehFarBasePass.initialize(i,e,t),this.bokehFarFillPass.initialize(i,e,t),this.blurPass.initialize(i,e,as),i.capabilities.logarithmicDepthBuffer&&(this.cocPass.fullscreenMaterial.defines.LOG_DEPTH="1"),t!==void 0&&(this.renderTarget.texture.type=t,this.renderTargetNear.texture.type=t,this.renderTargetFar.texture.type=t,this.renderTargetMasked.texture.type=t,i!==null&&i.outputColorSpace===Yn&&(this.renderTarget.texture.colorSpace=Yn,this.renderTargetNear.texture.colorSpace=Yn,this.renderTargetFar.texture.colorSpace=Yn,this.renderTargetMasked.texture.colorSpace=Yn))}},e6=class extends Ia{constructor(i,e,t=null){super("RenderPass",i,e),this.needsSwap=!1,this.clearPass=new J5,this.overrideMaterialManager=t===null?null:new AH(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get renderToScreen(){return super.renderToScreen}set renderToScreen(i){super.renderToScreen=i,this.clearPass.renderToScreen=i}get overrideMaterial(){const i=this.overrideMaterialManager;return i!==null?i.material:null}set overrideMaterial(i){const e=this.overrideMaterialManager;i!==null?e!==null?e.setMaterial(i):this.overrideMaterialManager=new AH(i):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(i){this.overrideMaterial=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getSelection(){return this.selection}setSelection(i){this.selection=i}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(i){this.ignoreBackground=i}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(i){this.skipShadowMapUpdate=i}getClearPass(){return this.clearPass}render(i,e,t,n,s){const r=this.scene,a=this.camera,o=this.selection,c=a.layers.mask,h=r.background,d=i.shadowMap.autoUpdate,m=this.renderToScreen?null:e;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(i.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(i,e),i.setRenderTarget(m),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(i,r,a):i.render(r,a),a.layers.mask=c,r.background=h,i.shadowMap.autoUpdate=d}},Yo={LINEAR:0,REINHARD:1,REINHARD2:2,REINHARD2_ADAPTIVE:3,OPTIMIZED_CINEON:5,CINEON:5,ACES_FILMIC:6,AGX:7,NEUTRAL:8},rx={DEFAULT:0,ESKIL:1},Kre=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Jre="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Zre=class extends Xi{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new qt(null),normalBuffer:new qt(null),texelSize:new qt(new Ke)},blending:qs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Kre,vertexShader:Jre})}set depthBuffer(i){this.uniforms.depthBuffer.value=i}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,e=vh){this.depthBuffer=i,this.depthPacking=e}set normalBuffer(i){this.uniforms.normalBuffer.value=i,i!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(i){this.normalBuffer=i}setTexelSize(i,e){this.uniforms.texelSize.value.set(i,e)}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}},Qre=class extends Ia{constructor({normalBuffer:i=null,resolutionScale:e=.5,width:t=xr.AUTO_SIZE,height:n=xr.AUTO_SIZE,resolutionX:s=t,resolutionY:r=n}={}){super("DepthDownsamplingPass");const a=new Zre;a.normalBuffer=i,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Zi(1,1,{minFilter:gs,magFilter:gs,depthBuffer:!1,type:ms}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new xr(this,s,r,e);o.addEventListener("change",c=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(i,e=vh){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=e}render(i,e,t,n,s){i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(i,e)}initialize(i,e,t){const n=i.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},$re=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,eae=class extends Xi{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new qt(null),luminanceBuffer1:new qt(null),minLuminance:new qt(.01),deltaTime:new qt(0),tau:new qt(1)},extensions:{shaderTextureLOD:!0},blending:qs,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:$re,vertexShader:xA})}set luminanceBuffer0(i){this.uniforms.luminanceBuffer0.value=i}setLuminanceBuffer0(i){this.uniforms.luminanceBuffer0.value=i}set luminanceBuffer1(i){this.uniforms.luminanceBuffer1.value=i}setLuminanceBuffer1(i){this.uniforms.luminanceBuffer1.value=i}set mipLevel1x1(i){this.defines.MIP_LEVEL_1X1=i.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(i){this.mipLevel1x1=i}set deltaTime(i){this.uniforms.deltaTime.value=i}setDeltaTime(i){this.uniforms.deltaTime.value=i}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(i){this.uniforms.minLuminance.value=i}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(i){this.uniforms.minLuminance.value=i}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(i){this.uniforms.tau.value=i}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(i){this.uniforms.tau.value=i}},tae=class extends Ia{constructor(i,{minLuminance:e=.01,adaptationRate:t=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new eae,this.needsSwap=!1,this.renderTargetPrevious=new Zi(1,1,{minFilter:gs,magFilter:gs,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const n=this.fullscreenMaterial;n.luminanceBuffer0=this.renderTargetPrevious.texture,n.luminanceBuffer1=i,n.minLuminance=e,n.adaptationRate=t,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new K5(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(i){this.fullscreenMaterial.mipLevel1x1=i}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(i){this.fullscreenMaterial.adaptationRate=i}render(i,e,t,n,s){this.fullscreenMaterial.deltaTime=n,i.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),i.render(this.scene,this.camera),this.copyPass.render(i,this.renderTargetAdapted)}},nae=`#include <tonemapping_pars_fragment>
uniform float whitePoint;
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
uniform float middleGrey;
#if TONE_MAPPING_MODE == 3
uniform lowp sampler2D luminanceBuffer;
#else
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 3
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}
#elif TONE_MAPPING_MODE == 4
#define A 0.15
#define B 0.50
#define C 0.10
#define D 0.20
#define E 0.02
#define F 0.30
vec3 Uncharted2Helper(const in vec3 x){return((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}vec3 Uncharted2ToneMapping(vec3 color){color*=toneMappingExposure;return clamp(Uncharted2Helper(color)/Uncharted2Helper(vec3(whitePoint)),0.0,1.0);}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#elif TONE_MAPPING_MODE == 4
outputColor=vec4(Uncharted2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,iae=class extends aA{constructor({blendFunction:i=Zn.SRC,adaptive:e=!1,mode:t=e?Yo.REINHARD2_ADAPTIVE:Yo.AGX,resolution:n=256,maxLuminance:s=4,whitePoint:r=s,middleGrey:a=.6,minLuminance:o=.01,averageLuminance:c=1,adaptationRate:h=1}={}){super("ToneMappingEffect",nae,{blendFunction:i,uniforms:new Map([["luminanceBuffer",new qt(null)],["maxLuminance",new qt(s)],["whitePoint",new qt(r)],["middleGrey",new qt(a)],["averageLuminance",new qt(c)]])}),this.renderTargetLuminance=new Zi(1,1,{minFilter:rl,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new Q5({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new tae(this.luminancePass.texture,{minLuminance:o,adaptationRate:h}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=n,this.mode=t}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(i){if(this.mode===i)return;const t=kp.replace(/\D+/g,"")>=168?"CineonToneMapping(texel)":"OptimizedCineonToneMapping(texel)";switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",i.toFixed(0)),i){case Yo.LINEAR:this.defines.set("toneMapping(texel)","LinearToneMapping(texel)");break;case Yo.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case Yo.CINEON:case Yo.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)",t);break;case Yo.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;case Yo.AGX:this.defines.set("toneMapping(texel)","AgXToneMapping(texel)");break;case Yo.NEUTRAL:this.defines.set("toneMapping(texel)","NeutralToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=i===Yo.REINHARD2_ADAPTIVE,this.setChanged()}getMode(){return this.mode}setMode(i){this.mode=i}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(i){this.uniforms.get("whitePoint").value=i}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(i){this.uniforms.get("middleGrey").value=i}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(i){this.uniforms.get("averageLuminance").value=i}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(i){const e=Math.max(0,Math.ceil(Math.log2(i))),t=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(t,t),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(i){this.resolution=i}get adaptive(){return this.mode===Yo.REINHARD2_ADAPTIVE}set adaptive(i){this.mode=i?Yo.REINHARD2_ADAPTIVE:Yo.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(i){this.adaptiveLuminanceMaterial.adaptationRate=i}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(i){console.warn(this.name,"distinction was removed.")}update(i,e,t){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(i,e),this.adaptiveLuminancePass.render(i,null,null,t))}initialize(i,e,t){this.adaptiveLuminancePass.initialize(i,e,t)}},sae=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,rae=class extends aA{constructor({blendFunction:i,eskil:e=!1,technique:t=e?rx.ESKIL:rx.DEFAULT,offset:n=.5,darkness:s=.5}={}){super("VignetteEffect",sae,{blendFunction:i,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new qt(n)],["darkness",new qt(s)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(i){this.technique!==i&&(this.defines.set("VIGNETTE_TECHNIQUE",i.toFixed(0)),this.setChanged())}get eskil(){return this.technique===rx.ESKIL}set eskil(i){this.technique=i?rx.ESKIL:rx.DEFAULT}getTechnique(){return this.technique}setTechnique(i){this.technique=i}get offset(){return this.uniforms.get("offset").value}set offset(i){this.uniforms.get("offset").value=i}getOffset(){return this.offset}setOffset(i){this.offset=i}get darkness(){return this.uniforms.get("darkness").value}set darkness(i){this.uniforms.get("darkness").value=i}getDarkness(){return this.darkness}setDarkness(i){this.darkness=i}},aae=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,oae="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",lae=class extends Xi{constructor(i,e,t,n,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:kp.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new qt(null),depthBuffer:new qt(null),resolution:new qt(new Ke),texelSize:new qt(new Ke),cameraNear:new qt(.3),cameraFar:new qt(1e3),aspect:new qt(1),time:new qt(0)},blending:qs,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),i&&this.setShaderParts(i),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(n)}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(i){this.uniforms.depthBuffer.value=i}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,e=vh){this.depthBuffer=i,this.depthPacking=e}setShaderData(i){this.setShaderParts(i.shaderParts),this.setDefines(i.defines),this.setUniforms(i.uniforms),this.setExtensions(i.extensions)}setShaderParts(i){return this.fragmentShader=aae.replace(_i.FRAGMENT_HEAD,i.get(_i.FRAGMENT_HEAD)||"").replace(_i.FRAGMENT_MAIN_UV,i.get(_i.FRAGMENT_MAIN_UV)||"").replace(_i.FRAGMENT_MAIN_IMAGE,i.get(_i.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=oae.replace(_i.VERTEX_HEAD,i.get(_i.VERTEX_HEAD)||"").replace(_i.VERTEX_MAIN_SUPPORT,i.get(_i.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(i){for(const e of i.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(i){for(const e of i.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(i){this.extensions={};for(const e of i)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(i){this.encodeOutput!==i&&(i?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(i){return this.encodeOutput}setOutputEncodingEnabled(i){this.encodeOutput=i}get time(){return this.uniforms.time.value}set time(i){this.uniforms.time.value=i}setDeltaTime(i){this.uniforms.time.value+=i}adoptCameraSettings(i){this.copyCameraSettings(i)}copyCameraSettings(i){i&&(this.uniforms.cameraNear.value=i.near,this.uniforms.cameraFar.value=i.far,i instanceof es?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(i,e){const t=this.uniforms;t.resolution.value.set(i,e),t.texelSize.value.set(1/i,1/e),t.aspect.value=i/e}static get Section(){return _i}};function xH(i,e,t){for(const n of e){const s="$1"+i+n.charAt(0).toUpperCase()+n.slice(1),r=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const a of t.entries())a[1]!==null&&t.set(a[0],a[1].replace(r,s))}}function cae(i,e,t){let n=e.getFragmentShader(),s=e.getVertexShader();const r=n!==void 0&&/mainImage/.test(n),a=n!==void 0&&/mainUv/.test(n);if(t.attributes|=e.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(a&&(t.attributes&Dp.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!r&&!a)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,c=t.shaderParts;let h=c.get(_i.FRAGMENT_HEAD)||"",d=c.get(_i.FRAGMENT_MAIN_UV)||"",m=c.get(_i.FRAGMENT_MAIN_IMAGE)||"",v=c.get(_i.VERTEX_HEAD)||"",y=c.get(_i.VERTEX_MAIN_SUPPORT)||"";const A=new Set,E=new Set;if(a&&(d+=`	${i}MainUv(UV);
`,t.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const w=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);y+=`	${i}MainSupport(`,y+=w?`vUv);
`:`);
`;for(const R of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const D of R[1].split(/\s*,\s*/))t.varyings.add(D),A.add(D),E.add(D);for(const R of s.matchAll(o))E.add(R[1])}for(const w of n.matchAll(o))E.add(w[1]);for(const w of e.defines.keys())E.add(w.replace(/\([\w\s,]*\)/g,""));for(const w of e.uniforms.keys())E.add(w);E.delete("while"),E.delete("for"),E.delete("if"),e.uniforms.forEach((w,R)=>t.uniforms.set(i+R.charAt(0).toUpperCase()+R.slice(1),w)),e.defines.forEach((w,R)=>t.defines.set(i+R.charAt(0).toUpperCase()+R.slice(1),w));const M=new Map([["fragment",n],["vertex",s]]);xH(i,E,t.defines),xH(i,E,M),n=M.get("fragment"),s=M.get("vertex");const x=e.blendMode;if(t.blendModes.set(x.blendFunction,x),r){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(m+=e.inputColorSpace===Yn?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==Yc?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const w=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;m+=`${i}MainImage(color0, UV, `,(t.attributes&Dp.DEPTH)!==0&&w.test(n)&&(m+="depth, ",t.readDepth=!0),m+=`color1);
	`;const R=i+"BlendOpacity";t.uniforms.set(R,x.opacity),m+=`color0 = blend${x.blendFunction}(color0, color1, ${R});

	`,h+=`uniform float ${R};

`}if(h+=n+`
`,s!==null&&(v+=s+`
`),c.set(_i.FRAGMENT_HEAD,h),c.set(_i.FRAGMENT_MAIN_UV,d),c.set(_i.FRAGMENT_MAIN_IMAGE,m),c.set(_i.VERTEX_HEAD,v),c.set(_i.VERTEX_MAIN_SUPPORT,y),e.extensions!==null)for(const w of e.extensions)t.extensions.add(w)}}var uae=class extends Ia{constructor(i,...e){super("EffectPass"),this.fullscreenMaterial=new lae(null,null,null,i),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(i){for(const e of this.effects)e.mainScene=i}set mainCamera(i){this.fullscreenMaterial.copyCameraSettings(i);for(const e of this.effects)e.mainCamera=i}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(i){this.fullscreenMaterial.encodeOutput=i}get dithering(){return this.fullscreenMaterial.dithering}set dithering(i){const e=this.fullscreenMaterial;e.dithering=i,e.needsUpdate=!0}setEffects(i){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=i.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const i=new qse;let e=0;for(const a of this.effects)if(a.blendMode.blendFunction===Zn.DST)i.attributes|=a.getAttributes()&Dp.DEPTH;else{if((i.attributes&a.getAttributes()&Dp.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${a.name})`);cae("e"+e++,a,i)}let t=i.shaderParts.get(_i.FRAGMENT_HEAD),n=i.shaderParts.get(_i.FRAGMENT_MAIN_IMAGE),s=i.shaderParts.get(_i.FRAGMENT_MAIN_UV);const r=/\bblend\b/g;for(const a of i.blendModes.values())t+=a.getShaderCode().replace(r,`blend${a.blendFunction}`)+`
`;(i.attributes&Dp.DEPTH)!==0?(i.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,i.colorSpace===Yn&&(n+=`color0 = sRGBToLinear(color0);
	`),i.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,i.defines.set("UV","transformedUv")):i.defines.set("UV","vUv"),i.shaderParts.set(_i.FRAGMENT_HEAD,t),i.shaderParts.set(_i.FRAGMENT_MAIN_IMAGE,n),i.shaderParts.set(_i.FRAGMENT_MAIN_UV,s);for(const[a,o]of i.shaderParts)o!==null&&i.shaderParts.set(a,o.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(i)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(i,e=vh){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(i,e)}render(i,e,t,n,s){for(const r of this.effects)r.update(i,e,n);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,r.time+=n*this.timeScale,i.setRenderTarget(this.renderToScreen?null:t),i.render(this.scene,this.camera)}}setSize(i,e){this.fullscreenMaterial.setSize(i,e);for(const t of this.effects)t.setSize(i,e)}initialize(i,e,t){this.renderer=i;for(const n of this.effects)n.initialize(i,e,t);this.updateMaterial(),t!==void 0&&t!==as&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const i of this.effects)i.removeEventListener("change",this.listener),i.dispose()}handleEvent(i){switch(i.type){case"change":this.recompile();break}}},hae=class extends Ia{constructor(i,e,{renderTarget:t,resolutionScale:n=1,width:s=xr.AUTO_SIZE,height:r=xr.AUTO_SIZE,resolutionX:a=s,resolutionY:o=r}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new e6(i,e,new t3);const c=this.renderPass;c.ignoreBackground=!0,c.skipShadowMapUpdate=!0;const h=c.getClearPass();h.overrideClearColor=new Bt(7829503),h.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Zi(1,1,{minFilter:gs,magFilter:gs}),this.renderTarget.texture.name="NormalPass.Target");const d=this.resolution=new xr(this,a,o,n);d.addEventListener("change",m=>this.setSize(d.baseWidth,d.baseHeight))}set mainScene(i){this.renderPass.mainScene=i}set mainCamera(i){this.renderPass.mainCamera=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,e,t,n,s){const r=this.renderToScreen?null:this.renderTarget;this.renderPass.render(i,r,r)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height)}};function jx(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}new Ke;new Ke;function t6(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var Bl=function i(e,t,n){var s=this;t6(this,i),jx(this,"dot2",function(r,a){return s.x*r+s.y*a}),jx(this,"dot3",function(r,a,o){return s.x*r+s.y*a+s.z*o}),this.x=e,this.y=t,this.z=n},fae=[new Bl(1,1,0),new Bl(-1,1,0),new Bl(1,-1,0),new Bl(-1,-1,0),new Bl(1,0,1),new Bl(-1,0,1),new Bl(1,0,-1),new Bl(-1,0,-1),new Bl(0,1,1),new Bl(0,-1,1),new Bl(0,1,-1),new Bl(0,-1,-1)],SH=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],EH=new Array(512),MH=new Array(512),dae=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;t&1?n=SH[t]^e&255:n=SH[t]^e>>8&255,EH[t]=EH[t+256]=n,MH[t]=MH[t+256]=fae[n%12]}};dae(0);function pae(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var e=i;i=0;for(var t=0;t<e.length;t++)i=(i+(t+1)*(e.charCodeAt(t)%96))%2147483647}return i===0&&(i=311),i}function TH(i){var e=pae(i);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var mae=function i(e){var t=this;t6(this,i),jx(this,"seed",0),jx(this,"init",function(n){t.seed=n,t.value=TH(n)}),jx(this,"value",TH(this.seed)),this.init(e)};new mae(Math.random());const n6=V.createContext(null),CH=i=>(i.getAttributes()&2)===2,gae=V.memo(V.forwardRef(({children:i,camera:e,scene:t,resolutionScale:n,enabled:s=!0,renderPriority:r=1,autoClear:a=!0,depthBuffer:o,enableNormalPass:c,stencilBuffer:h,multisampling:d=8,frameBufferType:m=br},v)=>{const{gl:y,scene:A,camera:E,size:M}=Hr(),x=t||A,w=e||E,[R,D,P]=V.useMemo(()=>{const U=new Xse(y,{depthBuffer:o,stencilBuffer:h,multisampling:d,frameBufferType:m});U.addPass(new e6(x,w));let N=null,O=null;return c&&(O=new hae(x,w),O.enabled=!1,U.addPass(O),n!==void 0&&(N=new Qre({normalBuffer:O.texture,resolutionScale:n}),N.enabled=!1,U.addPass(N))),[U,O,N]},[w,y,o,h,d,m,x,c,n]);V.useEffect(()=>R==null?void 0:R.setSize(M.width,M.height),[R,M]),AA((U,N)=>{if(s){const O=y.autoClear;y.autoClear=a,h&&!a&&y.clearStencil(),R.render(N),y.autoClear=O}},s?r:0);const I=V.useRef(null);V.useLayoutEffect(()=>{var O;const U=[],N=I.current.__r3f;if(N&&R){const G=N.children;for(let oe=0;oe<G.length;oe++){const se=G[oe].object;if(se instanceof aA){const le=[se];if(!CH(se)){let z=null;for(;(z=(O=G[oe+1])==null?void 0:O.object)instanceof aA&&!CH(z);)le.push(z),oe++}const ue=new uae(w,...le);U.push(ue)}else se instanceof Ia&&U.push(se)}for(const oe of U)R==null||R.addPass(oe);D&&(D.enabled=!0),P&&(P.enabled=!0)}return()=>{for(const G of U)R==null||R.removePass(G);D&&(D.enabled=!1),P&&(P.enabled=!1)}},[R,i,w,D,P]),V.useEffect(()=>{const U=y.toneMapping;return y.toneMapping=$c,()=>{y.toneMapping=U}},[y]);const H=V.useMemo(()=>({composer:R,normalPass:D,downSamplingPass:P,resolutionScale:n,camera:w,scene:x}),[R,D,P,n,w,x]);return V.useImperativeHandle(v,()=>R,[R]),q.jsx(n6.Provider,{value:H,children:q.jsx("group",{ref:I,children:i})})}));let vae=0;const wH=new WeakMap,tP=(i,e)=>function({blendFunction:t=e==null?void 0:e.blendFunction,opacity:n=e==null?void 0:e.opacity,...s}){let r=wH.get(i);if(!r){const c=`@react-three/postprocessing/${i.name}-${vae++}`;E3({[c]:i}),wH.set(i,r=c)}const a=Hr(c=>c.camera),o=hI.useMemo(()=>[...(e==null?void 0:e.args)??[],...s.args??[{...e,...s}]],[JSON.stringify(s)]);return q.jsx(r,{camera:a,"blendMode-blendFunction":t,"blendMode-opacity-value":n,...s,args:o})},yae=V.forwardRef(function({blendFunction:i,worldFocusDistance:e,worldFocusRange:t,focusDistance:n,focusRange:s,focalLength:r,bokehScale:a,resolutionScale:o,resolutionX:c,resolutionY:h,width:d,height:m,target:v,depthTexture:y,...A},E){const{camera:M}=V.useContext(n6),x=v!=null,w=V.useMemo(()=>{const R=new Wre(M,{blendFunction:i,worldFocusDistance:e,worldFocusRange:t,focusDistance:n,focusRange:s,focalLength:r,bokehScale:a,resolutionScale:o,resolutionX:c,resolutionY:h,width:d,height:m});x&&(R.target=new ae),y&&R.setDepthTexture(y.texture,y.packing);const D=R.maskPass;return D.maskFunction=eP.MULTIPLY_RGB_SET_ALPHA,R},[M,i,e,t,n,s,r,a,o,c,h,d,m,x,y]);return V.useEffect(()=>()=>{w.dispose()},[w]),q.jsx("primitive",{...A,ref:E,object:w,target:v})}),_ae=tP(Gre,{blendFunction:0}),Aae=tP(iae),bae=tP(rae);function xae(i){return Object.prototype.toString.call(i)==="[object Object]"}function RH(i){return xae(i)||Array.isArray(i)}function Sae(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function nP(i,e){const t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;const s=JSON.stringify(Object.keys(i.breakpoints||{})),r=JSON.stringify(Object.keys(e.breakpoints||{}));return s!==r?!1:t.every(a=>{const o=i[a],c=e[a];return typeof o=="function"?`${o}`==`${c}`:!RH(o)||!RH(c)?o===c:nP(o,c)})}function DH(i){return i.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function Eae(i,e){if(i.length!==e.length)return!1;const t=DH(i),n=DH(e);return t.every((s,r)=>{const a=n[r];return nP(s,a)})}function iP(i){return typeof i=="number"}function VL(i){return typeof i=="string"}function h2(i){return typeof i=="boolean"}function BH(i){return Object.prototype.toString.call(i)==="[object Object]"}function Ds(i){return Math.abs(i)}function sP(i){return Math.sign(i)}function Xx(i,e){return Ds(i-e)}function Mae(i,e){if(i===0||e===0||Ds(i)<=Ds(e))return 0;const t=Xx(Ds(i),Ds(e));return Ds(t/i)}function Tae(i){return Math.round(i*100)/100}function gS(i){return vS(i).map(Number)}function tu(i){return i[a1(i)]}function a1(i){return Math.max(0,i.length-1)}function rP(i,e){return e===a1(i)}function LH(i,e=0){return Array.from(Array(i),(t,n)=>e+n)}function vS(i){return Object.keys(i)}function i6(i,e){return[i,e].reduce((t,n)=>(vS(n).forEach(s=>{const r=t[s],a=n[s],o=BH(r)&&BH(a);t[s]=o?i6(r,a):a}),t),{})}function jL(i,e){return typeof e.MouseEvent<"u"&&i instanceof e.MouseEvent}function Cae(i,e){const t={start:n,center:s,end:r};function n(){return 0}function s(c){return r(c)/2}function r(c){return e-c}function a(c,h){return VL(i)?t[i](c):i(e,c,h)}return{measure:a}}function yS(){let i=[];function e(s,r,a,o={passive:!0}){let c;if("addEventListener"in s)s.addEventListener(r,a,o),c=()=>s.removeEventListener(r,a,o);else{const h=s;h.addListener(a),c=()=>h.removeListener(a)}return i.push(c),n}function t(){i=i.filter(s=>s())}const n={add:e,clear:t};return n}function wae(i,e,t,n){const s=yS(),r=1e3/60;let a=null,o=0,c=0;function h(){s.add(i,"visibilitychange",()=>{i.hidden&&A()})}function d(){y(),s.clear()}function m(M){if(!c)return;a||(a=M,t(),t());const x=M-a;for(a=M,o+=x;o>=r;)t(),o-=r;const w=o/r;n(w),c&&(c=e.requestAnimationFrame(m))}function v(){c||(c=e.requestAnimationFrame(m))}function y(){e.cancelAnimationFrame(c),a=null,o=0,c=0}function A(){a=null,o=0}return{init:h,destroy:d,start:v,stop:y,update:t,render:n}}function Rae(i,e){const t=e==="rtl",n=i==="y",s=n?"y":"x",r=n?"x":"y",a=!n&&t?-1:1,o=d(),c=m();function h(A){const{height:E,width:M}=A;return n?E:M}function d(){return n?"top":t?"right":"left"}function m(){return n?"bottom":t?"left":"right"}function v(A){return A*a}return{scroll:s,cross:r,startEdge:o,endEdge:c,measureSize:h,direction:v}}function Lv(i=0,e=0){const t=Ds(i-e);function n(h){return h<i}function s(h){return h>e}function r(h){return n(h)||s(h)}function a(h){return r(h)?n(h)?i:e:h}function o(h){return t?h-t*Math.ceil((h-e)/t):h}return{length:t,max:e,min:i,constrain:a,reachedAny:r,reachedMax:s,reachedMin:n,removeOffset:o}}function s6(i,e,t){const{constrain:n}=Lv(0,i),s=i+1;let r=a(e);function a(v){return t?Ds((s+v)%s):n(v)}function o(){return r}function c(v){return r=a(v),m}function h(v){return d().set(o()+v)}function d(){return s6(i,o(),t)}const m={get:o,set:c,add:h,clone:d};return m}function Dae(i,e,t,n,s,r,a,o,c,h,d,m,v,y,A,E,M,x,w){const{cross:R,direction:D}=i,P=["INPUT","SELECT","TEXTAREA"],I={passive:!1},H=yS(),U=yS(),N=Lv(50,225).constrain(y.measure(20)),O={mouse:300,touch:400},G={mouse:500,touch:600},oe=A?43:25;let se=!1,le=0,ue=0,z=!1,K=!1,Q=!1,de=!1;function W(it){if(!w)return;function et($e){(h2(w)||w(it,$e))&&Ce($e)}const $=e;H.add($,"dragstart",$e=>$e.preventDefault(),I).add($,"touchmove",()=>{},I).add($,"touchend",()=>{}).add($,"touchstart",et).add($,"mousedown",et).add($,"touchcancel",Qe).add($,"contextmenu",Qe).add($,"click",xt,!0)}function he(){H.clear(),U.clear()}function xe(){const it=de?t:e;U.add(it,"touchmove",Ue,I).add(it,"touchend",Qe).add(it,"mousemove",Ue,I).add(it,"mouseup",Qe)}function ye(it){const et=it.nodeName||"";return P.includes(et)}function fe(){return(A?G:O)[de?"mouse":"touch"]}function De(it,et){const $=m.add(sP(it)*-1),$e=d.byDistance(it,!A).distance;return A||Ds(it)<N?$e:M&&et?$e*.5:d.byIndex($.get(),0).distance}function Ce(it){const et=jL(it,n);de=et,Q=A&&et&&!it.buttons&&se,se=Xx(s.get(),a.get())>=2,!(et&&it.button!==0)&&(ye(it.target)||(z=!0,r.pointerDown(it),h.useFriction(0).useDuration(0),s.set(a),xe(),le=r.readPoint(it),ue=r.readPoint(it,R),v.emit("pointerDown")))}function Ue(it){if(!jL(it,n)&&it.touches.length>=2)return Qe(it);const $=r.readPoint(it),$e=r.readPoint(it,R),Ie=Xx($,le),ke=Xx($e,ue);if(!K&&!de&&(!it.cancelable||(K=Ie>ke,!K)))return Qe(it);const We=r.pointerMove(it);Ie>E&&(Q=!0),h.useFriction(.3).useDuration(.75),o.start(),s.add(D(We)),it.preventDefault()}function Qe(it){const $=d.byDistance(0,!1).index!==m.get(),$e=r.pointerUp(it)*fe(),Ie=De(D($e),$),ke=Mae($e,Ie),We=oe-10*ke,St=x+ke/50;K=!1,z=!1,U.clear(),h.useDuration(We).useFriction(St),c.distance(Ie,!A),de=!1,v.emit("pointerUp")}function xt(it){Q&&(it.stopPropagation(),it.preventDefault(),Q=!1)}function lt(){return z}return{init:W,destroy:he,pointerDown:lt}}function Bae(i,e){let n,s;function r(m){return m.timeStamp}function a(m,v){const A=`client${(v||i.scroll)==="x"?"X":"Y"}`;return(jL(m,e)?m:m.touches[0])[A]}function o(m){return n=m,s=m,a(m)}function c(m){const v=a(m)-a(s),y=r(m)-r(n)>170;return s=m,y&&(n=m),v}function h(m){if(!n||!s)return 0;const v=a(s)-a(n),y=r(m)-r(n),A=r(m)-r(s)>170,E=v/y;return y&&!A&&Ds(E)>.1?E:0}return{pointerDown:o,pointerMove:c,pointerUp:h,readPoint:a}}function Lae(){function i(t){const{offsetTop:n,offsetLeft:s,offsetWidth:r,offsetHeight:a}=t;return{top:n,right:s+r,bottom:n+a,left:s,width:r,height:a}}return{measure:i}}function Nae(i){function e(n){return i*(n/100)}return{measure:e}}function Iae(i,e,t,n,s,r,a){const o=[i].concat(n);let c,h,d=[],m=!1;function v(M){return s.measureSize(a.measure(M))}function y(M){if(!r)return;h=v(i),d=n.map(v);function x(w){for(const R of w){if(m)return;const D=R.target===i,P=n.indexOf(R.target),I=D?h:d[P],H=v(D?i:n[P]);if(Ds(H-I)>=.5){M.reInit(),e.emit("resize");break}}}c=new ResizeObserver(w=>{(h2(r)||r(M,w))&&x(w)}),t.requestAnimationFrame(()=>{o.forEach(w=>c.observe(w))})}function A(){m=!0,c&&c.disconnect()}return{init:y,destroy:A}}function Pae(i,e,t,n,s,r){let a=0,o=0,c=s,h=r,d=i.get(),m=0;function v(){const I=n.get()-i.get(),H=!c;let U=0;return H?(a=0,t.set(n),i.set(n),U=I):(t.set(i),a+=I/c,a*=h,d+=a,i.add(a),U=d-m),o=sP(U),m=d,P}function y(){const I=n.get()-e.get();return Ds(I)<.001}function A(){return c}function E(){return o}function M(){return a}function x(){return R(s)}function w(){return D(r)}function R(I){return c=I,P}function D(I){return h=I,P}const P={direction:E,duration:A,velocity:M,seek:v,settled:y,useBaseFriction:w,useBaseDuration:x,useFriction:D,useDuration:R};return P}function Oae(i,e,t,n,s){const r=s.measure(10),a=s.measure(50),o=Lv(.1,.99);let c=!1;function h(){return!(c||!i.reachedAny(t.get())||!i.reachedAny(e.get()))}function d(y){if(!h())return;const A=i.reachedMin(e.get())?"min":"max",E=Ds(i[A]-e.get()),M=t.get()-e.get(),x=o.constrain(E/a);t.subtract(M*x),!y&&Ds(M)<r&&(t.set(i.constrain(t.get())),n.useDuration(25).useBaseFriction())}function m(y){c=!y}return{shouldConstrain:h,constrain:d,toggleActive:m}}function Uae(i,e,t,n,s){const r=Lv(-e+i,0),a=m(),o=d(),c=v();function h(A,E){return Xx(A,E)<=1}function d(){const A=a[0],E=tu(a),M=a.lastIndexOf(A),x=a.indexOf(E)+1;return Lv(M,x)}function m(){return t.map((A,E)=>{const{min:M,max:x}=r,w=r.constrain(A),R=!E,D=rP(t,E);return R?x:D||h(M,w)?M:h(x,w)?x:w}).map(A=>parseFloat(A.toFixed(3)))}function v(){if(e<=i+s)return[r.max];if(n==="keepSnaps")return a;const{min:A,max:E}=o;return a.slice(A,E)}return{snapsContained:c,scrollContainLimit:o}}function Fae(i,e,t){const n=e[0],s=t?n-i:tu(e);return{limit:Lv(s,n)}}function Hae(i,e,t,n){const r=e.min+.1,a=e.max+.1,{reachedMin:o,reachedMax:c}=Lv(r,a);function h(v){return v===1?c(t.get()):v===-1?o(t.get()):!1}function d(v){if(!h(v))return;const y=i*(v*-1);n.forEach(A=>A.add(y))}return{loop:d}}function zae(i){const{max:e,length:t}=i;function n(r){const a=r-e;return t?a/-t:0}return{get:n}}function Gae(i,e,t,n,s){const{startEdge:r,endEdge:a}=i,{groupSlides:o}=s,c=m().map(e.measure),h=v(),d=y();function m(){return o(n).map(E=>tu(E)[a]-E[0][r]).map(Ds)}function v(){return n.map(E=>t[r]-E[r]).map(E=>-Ds(E))}function y(){return o(h).map(E=>E[0]).map((E,M)=>E+c[M])}return{snaps:h,snapsAligned:d}}function kae(i,e,t,n,s,r){const{groupSlides:a}=s,{min:o,max:c}=n,h=d();function d(){const v=a(r),y=!i||e==="keepSnaps";return t.length===1?[r]:y?v:v.slice(o,c).map((A,E,M)=>{const x=!E,w=rP(M,E);if(x){const R=tu(M[0])+1;return LH(R)}if(w){const R=a1(r)-tu(M)[0]+1;return LH(R,tu(M)[0])}return A})}return{slideRegistry:h}}function Vae(i,e,t,n,s){const{reachedAny:r,removeOffset:a,constrain:o}=n;function c(A){return A.concat().sort((E,M)=>Ds(E)-Ds(M))[0]}function h(A){const E=i?a(A):o(A),M=e.map((w,R)=>({diff:d(w-E,0),index:R})).sort((w,R)=>Ds(w.diff)-Ds(R.diff)),{index:x}=M[0];return{index:x,distance:E}}function d(A,E){const M=[A,A+t,A-t];if(!i)return A;if(!E)return c(M);const x=M.filter(w=>sP(w)===E);return x.length?c(x):tu(M)-t}function m(A,E){const M=e[A]-s.get(),x=d(M,E);return{index:A,distance:x}}function v(A,E){const M=s.get()+A,{index:x,distance:w}=h(M),R=!i&&r(M);if(!E||R)return{index:x,distance:A};const D=e[x]-w,P=A+d(D,0);return{index:x,distance:P}}return{byDistance:v,byIndex:m,shortcut:d}}function jae(i,e,t,n,s,r,a){function o(m){const v=m.distance,y=m.index!==e.get();r.add(v),v&&(n.duration()?i.start():(i.update(),i.render(1),i.update())),y&&(t.set(e.get()),e.set(m.index),a.emit("select"))}function c(m,v){const y=s.byDistance(m,v);o(y)}function h(m,v){const y=e.clone().set(m),A=s.byIndex(y.get(),v);o(A)}return{distance:c,index:h}}function Xae(i,e,t,n,s,r,a,o){const c={passive:!0,capture:!0};let h=0;function d(y){if(!o)return;function A(E){if(new Date().getTime()-h>10)return;a.emit("slideFocusStart"),i.scrollLeft=0;const w=t.findIndex(R=>R.includes(E));iP(w)&&(s.useDuration(0),n.index(w,0),a.emit("slideFocus"))}r.add(document,"keydown",m,!1),e.forEach((E,M)=>{r.add(E,"focus",x=>{(h2(o)||o(y,x))&&A(M)},c)})}function m(y){y.code==="Tab"&&(h=new Date().getTime())}return{init:d}}function dx(i){let e=i;function t(){return e}function n(c){e=a(c)}function s(c){e+=a(c)}function r(c){e-=a(c)}function a(c){return iP(c)?c:c.get()}return{get:t,set:n,add:s,subtract:r}}function r6(i,e){const t=i.scroll==="x"?a:o,n=e.style;let s=null,r=!1;function a(v){return`translate3d(${v}px,0px,0px)`}function o(v){return`translate3d(0px,${v}px,0px)`}function c(v){if(r)return;const y=Tae(i.direction(v));y!==s&&(n.transform=t(y),s=y)}function h(v){r=!v}function d(){r||(n.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:d,to:c,toggleActive:h}}function qae(i,e,t,n,s,r,a,o,c){const d=gS(s),m=gS(s).reverse(),v=x().concat(w());function y(H,U){return H.reduce((N,O)=>N-s[O],U)}function A(H,U){return H.reduce((N,O)=>y(N,U)>0?N.concat([O]):N,[])}function E(H){return r.map((U,N)=>({start:U-n[N]+.5+H,end:U+e-.5+H}))}function M(H,U,N){const O=E(U);return H.map(G=>{const oe=N?0:-t,se=N?t:0,le=N?"end":"start",ue=O[G][le];return{index:G,loopPoint:ue,slideLocation:dx(-1),translate:r6(i,c[G]),target:()=>o.get()>ue?oe:se}})}function x(){const H=a[0],U=A(m,H);return M(U,t,!1)}function w(){const H=e-a[0]-1,U=A(d,H);return M(U,-t,!0)}function R(){return v.every(({index:H})=>{const U=d.filter(N=>N!==H);return y(U,e)<=.1})}function D(){v.forEach(H=>{const{target:U,translate:N,slideLocation:O}=H,G=U();G!==O.get()&&(N.to(G),O.set(G))})}function P(){v.forEach(H=>H.translate.clear())}return{canLoop:R,clear:P,loop:D,loopPoints:v}}function Yae(i,e,t){let n,s=!1;function r(c){if(!t)return;function h(d){for(const m of d)if(m.type==="childList"){c.reInit(),e.emit("slidesChanged");break}}n=new MutationObserver(d=>{s||(h2(t)||t(c,d))&&h(d)}),n.observe(i,{childList:!0})}function a(){n&&n.disconnect(),s=!0}return{init:r,destroy:a}}function Wae(i,e,t,n){const s={};let r=null,a=null,o,c=!1;function h(){o=new IntersectionObserver(A=>{c||(A.forEach(E=>{const M=e.indexOf(E.target);s[M]=E}),r=null,a=null,t.emit("slidesInView"))},{root:i.parentElement,threshold:n}),e.forEach(A=>o.observe(A))}function d(){o&&o.disconnect(),c=!0}function m(A){return vS(s).reduce((E,M)=>{const x=parseInt(M),{isIntersecting:w}=s[x];return(A&&w||!A&&!w)&&E.push(x),E},[])}function v(A=!0){if(A&&r)return r;if(!A&&a)return a;const E=m(A);return A&&(r=E),A||(a=E),E}return{init:h,destroy:d,get:v}}function Kae(i,e,t,n,s,r){const{measureSize:a,startEdge:o,endEdge:c}=i,h=t[0]&&s,d=A(),m=E(),v=t.map(a),y=M();function A(){if(!h)return 0;const w=t[0];return Ds(e[o]-w[o])}function E(){if(!h)return 0;const w=r.getComputedStyle(tu(n));return parseFloat(w.getPropertyValue(`margin-${c}`))}function M(){return t.map((w,R,D)=>{const P=!R,I=rP(D,R);return P?v[R]+d:I?v[R]+m:D[R+1][o]-w[o]}).map(Ds)}return{slideSizes:v,slideSizesWithGaps:y,startGap:d,endGap:m}}function Jae(i,e,t,n,s,r,a,o,c){const{startEdge:h,endEdge:d,direction:m}=i,v=iP(t);function y(x,w){return gS(x).filter(R=>R%w===0).map(R=>x.slice(R,R+w))}function A(x){return x.length?gS(x).reduce((w,R,D)=>{const P=tu(w)||0,I=P===0,H=R===a1(x),U=s[h]-r[P][h],N=s[h]-r[R][d],O=!n&&I?m(a):0,G=!n&&H?m(o):0,oe=Ds(N-G-(U+O));return D&&oe>e+c&&w.push(R),H&&w.push(x.length),w},[]).map((w,R,D)=>{const P=Math.max(D[R-1]||0);return x.slice(P,w)}):[]}function E(x){return v?y(x,t):A(x)}return{groupSlides:E}}function Zae(i,e,t,n,s,r,a){const{align:o,axis:c,direction:h,startIndex:d,loop:m,duration:v,dragFree:y,dragThreshold:A,inViewThreshold:E,slidesToScroll:M,skipSnaps:x,containScroll:w,watchResize:R,watchSlides:D,watchDrag:P,watchFocus:I}=r,H=2,U=Lae(),N=U.measure(e),O=t.map(U.measure),G=Rae(c,h),oe=G.measureSize(N),se=Nae(oe),le=Cae(o,oe),ue=!m&&!!w,z=m||!!w,{slideSizes:K,slideSizesWithGaps:Q,startGap:de,endGap:W}=Kae(G,N,O,t,z,s),he=Jae(G,oe,M,m,N,O,de,W,H),{snaps:xe,snapsAligned:ye}=Gae(G,le,N,O,he),fe=-tu(xe)+tu(Q),{snapsContained:De,scrollContainLimit:Ce}=Uae(oe,fe,ye,w,H),Ue=ue?De:ye,{limit:Qe}=Fae(fe,Ue,m),xt=s6(a1(Ue),d,m),lt=xt.clone(),mt=gS(t),it=({dragHandler:kt,scrollBody:dt,scrollBounds:Dt,options:{loop:Ot}})=>{Ot||Dt.constrain(kt.pointerDown()),dt.seek()},et=({scrollBody:kt,translate:dt,location:Dt,offsetLocation:Ot,previousLocation:Lt,scrollLooper:Et,slideLooper:Ae,dragHandler:qe,animation:gt,eventHandler:_e,scrollBounds:Be,options:{loop:He}},tt)=>{const wt=kt.settled(),Tt=!Be.shouldConstrain(),Wt=He?wt:wt&&Tt,vn=Wt&&!qe.pointerDown();vn&&gt.stop();const $n=Dt.get()*tt+Lt.get()*(1-tt);Ot.set($n),He&&(Et.loop(kt.direction()),Ae.loop()),dt.to(Ot.get()),vn&&_e.emit("settle"),Wt||_e.emit("scroll")},$=wae(n,s,()=>it(Mt),kt=>et(Mt,kt)),$e=.68,Ie=Ue[xt.get()],ke=dx(Ie),We=dx(Ie),St=dx(Ie),nt=dx(Ie),re=Pae(ke,St,We,nt,v,$e),J=Vae(m,Ue,fe,Qe,nt),Te=jae($,xt,lt,re,J,nt,a),Ye=zae(Qe),st=yS(),je=Wae(e,t,a,E),{slideRegistry:pt}=kae(ue,w,Ue,Ce,he,mt),vt=Xae(i,t,pt,Te,re,st,a,I),Mt={ownerDocument:n,ownerWindow:s,eventHandler:a,containerRect:N,slideRects:O,animation:$,axis:G,dragHandler:Dae(G,i,n,s,nt,Bae(G,s),ke,$,Te,re,J,xt,a,se,y,A,x,$e,P),eventStore:st,percentOfView:se,index:xt,indexPrevious:lt,limit:Qe,location:ke,offsetLocation:St,previousLocation:We,options:r,resizeHandler:Iae(e,a,s,t,G,R,U),scrollBody:re,scrollBounds:Oae(Qe,St,nt,re,se),scrollLooper:Hae(fe,Qe,St,[ke,St,We,nt]),scrollProgress:Ye,scrollSnapList:Ue.map(Ye.get),scrollSnaps:Ue,scrollTarget:J,scrollTo:Te,slideLooper:qae(G,oe,fe,K,Q,xe,Ue,St,t),slideFocus:vt,slidesHandler:Yae(e,a,D),slidesInView:je,slideIndexes:mt,slideRegistry:pt,slidesToScroll:he,target:nt,translate:r6(G,e)};return Mt}function Qae(){let i={},e;function t(h){e=h}function n(h){return i[h]||[]}function s(h){return n(h).forEach(d=>d(e,h)),c}function r(h,d){return i[h]=n(h).concat([d]),c}function a(h,d){return i[h]=n(h).filter(m=>m!==d),c}function o(){i={}}const c={init:t,emit:s,off:a,on:r,clear:o};return c}const $ae={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function eoe(i){function e(r,a){return i6(r,a||{})}function t(r){const a=r.breakpoints||{},o=vS(a).filter(c=>i.matchMedia(c).matches).map(c=>a[c]).reduce((c,h)=>e(c,h),{});return e(r,o)}function n(r){return r.map(a=>vS(a.breakpoints||{})).reduce((a,o)=>a.concat(o),[]).map(i.matchMedia)}return{mergeOptions:e,optionsAtMedia:t,optionsMediaQueries:n}}function toe(i){let e=[];function t(r,a){return e=a.filter(({options:o})=>i.optionsAtMedia(o).active!==!1),e.forEach(o=>o.init(r,i)),a.reduce((o,c)=>Object.assign(o,{[c.name]:c}),{})}function n(){e=e.filter(r=>r.destroy())}return{init:t,destroy:n}}function Iw(i,e,t){const n=i.ownerDocument,s=n.defaultView,r=eoe(s),a=toe(r),o=yS(),c=Qae(),{mergeOptions:h,optionsAtMedia:d,optionsMediaQueries:m}=r,{on:v,off:y,emit:A}=c,E=G;let M=!1,x,w=h($ae,Iw.globalOptions),R=h(w),D=[],P,I,H;function U(){const{container:mt,slides:it}=R;I=(VL(mt)?i.querySelector(mt):mt)||i.children[0];const $=VL(it)?I.querySelectorAll(it):it;H=[].slice.call($||I.children)}function N(mt){const it=Zae(i,I,H,n,s,mt,c);if(mt.loop&&!it.slideLooper.canLoop()){const et=Object.assign({},mt,{loop:!1});return N(et)}return it}function O(mt,it){M||(w=h(w,mt),R=d(w),D=it||D,U(),x=N(R),m([w,...D.map(({options:et})=>et)]).forEach(et=>o.add(et,"change",G)),R.active&&(x.translate.to(x.location.get()),x.animation.init(),x.slidesInView.init(),x.slideFocus.init(lt),x.eventHandler.init(lt),x.resizeHandler.init(lt),x.slidesHandler.init(lt),x.options.loop&&x.slideLooper.loop(),I.offsetParent&&H.length&&x.dragHandler.init(lt),P=a.init(lt,D)))}function G(mt,it){const et=he();oe(),O(h({startIndex:et},mt),it),c.emit("reInit")}function oe(){x.dragHandler.destroy(),x.eventStore.clear(),x.translate.clear(),x.slideLooper.clear(),x.resizeHandler.destroy(),x.slidesHandler.destroy(),x.slidesInView.destroy(),x.animation.destroy(),a.destroy(),o.clear()}function se(){M||(M=!0,o.clear(),oe(),c.emit("destroy"),c.clear())}function le(mt,it,et){!R.active||M||(x.scrollBody.useBaseFriction().useDuration(it===!0?0:R.duration),x.scrollTo.index(mt,et||0))}function ue(mt){const it=x.index.add(1).get();le(it,mt,-1)}function z(mt){const it=x.index.add(-1).get();le(it,mt,1)}function K(){return x.index.add(1).get()!==he()}function Q(){return x.index.add(-1).get()!==he()}function de(){return x.scrollSnapList}function W(){return x.scrollProgress.get(x.offsetLocation.get())}function he(){return x.index.get()}function xe(){return x.indexPrevious.get()}function ye(){return x.slidesInView.get()}function fe(){return x.slidesInView.get(!1)}function De(){return P}function Ce(){return x}function Ue(){return i}function Qe(){return I}function xt(){return H}const lt={canScrollNext:K,canScrollPrev:Q,containerNode:Qe,internalEngine:Ce,destroy:se,off:y,on:v,emit:A,plugins:De,previousScrollSnap:xe,reInit:E,rootNode:Ue,scrollNext:ue,scrollPrev:z,scrollProgress:W,scrollSnapList:de,scrollTo:le,selectedScrollSnap:he,slideNodes:xt,slidesInView:ye,slidesNotInView:fe};return O(e,t),setTimeout(()=>c.emit("init"),0),lt}Iw.globalOptions=void 0;function aP(i={},e=[]){const t=V.useRef(i),n=V.useRef(e),[s,r]=V.useState(),[a,o]=V.useState(),c=V.useCallback(()=>{s&&s.reInit(t.current,n.current)},[s]);return V.useEffect(()=>{nP(t.current,i)||(t.current=i,c())},[i,c]),V.useEffect(()=>{Eae(n.current,e)||(n.current=e,c())},[e,c]),V.useEffect(()=>{if(Sae()&&a){Iw.globalOptions=aP.globalOptions;const h=Iw(a,t.current,n.current);return r(h),()=>h.destroy()}else r(void 0)},[a,r]),[o,s]}aP.globalOptions=void 0;const[noe,ioe]=cA("Carousel component was not found in tree");var oP={root:"m_17884d0f",viewport:"m_a2dae653",container:"m_fcd81474",controls:"m_39bc3463",control:"m_64f58e10",indicators:"m_71ea3ab1",indicator:"m_eae68602",slide:"m_d98df724"};const soe={},lP=vs((i,e)=>{const{classNames:t,className:n,style:s,styles:r,vars:a,mod:o,...c}=Wn("CarouselSlide",soe,i),h=ioe();return q.jsx(Sn,{ref:e,mod:[{orientation:h.orientation},o],...h.getStyles("slide",{className:n,style:s,classNames:t,styles:r}),...c})});lP.classes=oP;lP.displayName="@mantine/carousel/CarouselSlide";function roe({slideGap:i,slideSize:e,selector:t}){const n=gh(),s=zp({"--carousel-slide-gap":sr(ph(i)),"--carousel-slide-size":yt(ph(e))}),r=zr(n.breakpoints).reduce((c,h)=>(c[h]||(c[h]={}),typeof i=="object"&&i[h]!==void 0&&(c[h]["--carousel-slide-gap"]=sr(i[h])),typeof e=="object"&&e[h]!==void 0&&(c[h]["--carousel-slide-size"]=sr(e[h])),c),{}),o=Tz(zr(r),n.breakpoints).filter(c=>zr(r[c.value]).length>0).map(c=>({query:`(min-width: ${n.breakpoints[c.value]})`,styles:r[c.value]}));return q.jsx(hA,{styles:s,media:o,selector:t})}function NH(i){return typeof i=="object"&&i!==null?zr(i):[]}function aoe(i){return i.sort((e,t)=>Av(e)-Av(t))}function ooe({slideGap:i,slideSize:e}){const t=Array.from(new Set([...NH(i),...NH(e)]));return aoe(t)}function loe({slideGap:i,slideSize:e,selector:t}){const n=zp({"--carousel-slide-gap":sr(ph(i)),"--carousel-slide-size":yt(ph(e))}),s=ooe({slideGap:i,slideSize:e}).reduce((a,o)=>(a[o]||(a[o]={}),typeof i=="object"&&i[o]!==void 0&&(a[o]["--carousel-slide-gap"]=sr(i[o])),typeof e=="object"&&e[o]!==void 0&&(a[o]["--carousel-slide-size"]=sr(e[o])),a),{}),r=Object.keys(s).map(a=>({query:`carousel (min-width: ${a})`,styles:s[a]}));return q.jsx(hA,{styles:n,container:r,selector:t})}function IH({dir:i,orientation:e,direction:t}){return t==="previous"?e==="horizontal"?90*(i==="ltr"?1:-1):-180:e==="horizontal"?90*(i==="ltr"?-1:1):0}const coe={controlSize:26,controlsOffset:"sm",slideSize:"100%",slideGap:0,orientation:"horizontal",includeGapInSize:!0,initialSlide:0,withControls:!0,withIndicators:!1,withKeyboardEvents:!0,type:"media"},uoe={align:"center",loop:!1,slidesToScroll:1,dragFree:!1,inViewThreshold:0,skipSnaps:!1,containScroll:"trimSnaps"},hoe=(i,{height:e,controlSize:t,controlsOffset:n})=>({root:{"--carousel-height":yt(e),"--carousel-control-size":yt(t),"--carousel-controls-offset":sr(n)}}),Dc=vs((i,e)=>{const t=Wn("Carousel",coe,i),{classNames:n,className:s,style:r,styles:a,unstyled:o,vars:c,children:h,getEmblaApi:d,onNextSlide:m,onPreviousSlide:v,onSlideChange:y,nextControlProps:A,previousControlProps:E,controlSize:M,controlsOffset:x,slideSize:w,slideGap:R,orientation:D,height:P,includeGapInSize:I,draggable:H,initialSlide:U,withControls:N,withIndicators:O,plugins:G,nextControlIcon:oe,previousControlIcon:se,withKeyboardEvents:le,mod:ue,type:z,emblaOptions:K,...Q}=t,de=Us({name:"Carousel",classes:oP,props:t,className:s,style:r,classNames:n,styles:a,unstyled:o,vars:c,varsResolver:hoe}),W=rR(),{dir:he}=_I(),[xe,ye]=aP({axis:D==="horizontal"?"x":"y",direction:D==="horizontal"?he:void 0,startIndex:U,...uoe,...K},G),[fe,De]=V.useState(0),[Ce,Ue]=V.useState(0),Qe=V.useCallback(Ie=>ye&&ye.scrollTo(Ie),[ye]),xt=V.useCallback(()=>{if(!ye)return;const Ie=ye.selectedScrollSnap();De(Ie),Ie!==fe&&(y==null||y(Ie))},[ye,De,y,fe]),lt=V.useCallback(()=>{ye==null||ye.scrollPrev(),v==null||v()},[ye]),mt=V.useCallback(()=>{ye==null||ye.scrollNext(),m==null||m()},[ye]),it=V.useCallback(Ie=>{le&&(Ie.key==="ArrowRight"&&(Ie.preventDefault(),mt()),Ie.key==="ArrowLeft"&&(Ie.preventDefault(),lt()))},[ye]);V.useEffect(()=>{if(ye)return d==null||d(ye),xt(),Ue(ye.scrollSnapList().length),ye.on("select",xt),()=>{ye.off("select",xt)}},[ye,K==null?void 0:K.slidesToScroll,xt]),V.useEffect(()=>{ye&&(ye.reInit(),Ue(ye.scrollSnapList().length),De(Ie=>u7(Ie,0,V.Children.toArray(h).length-1)))},[V.Children.toArray(h).length,K==null?void 0:K.slidesToScroll]);const et=(ye==null?void 0:ye.canScrollPrev())||!1,$=(ye==null?void 0:ye.canScrollNext())||!1,$e=Array(Ce).fill(0).map((Ie,ke)=>V.createElement(gv,{...de("indicator"),key:ke,"data-active":ke===fe||void 0,"aria-hidden":!0,tabIndex:-1,onClick:()=>Qe(ke),"data-orientation":D,onMouseDown:We=>We.preventDefault()}));return q.jsxs(noe,{value:{getStyles:de,orientation:D},children:[z==="container"?q.jsx(loe,{...t,selector:`.${W}`}):q.jsx(roe,{...t,selector:`.${W}`}),q.jsxs(Sn,{ref:e,...de("root",{className:"responsiveClassName"}),...Q,mod:[{orientation:D,"include-gap-in-size":I},ue],onKeyDownCapture:it,children:[q.jsx("div",{...de("viewport"),ref:xe,"data-type":z,children:q.jsx("div",{...de("container",{className:W}),"data-orientation":D,children:h})}),O&&q.jsx("div",{...de("indicators"),"data-orientation":D,children:$e}),N&&q.jsxs("div",{...de("controls"),"data-orientation":D,children:[q.jsx(gv,{...E,...de("control",{className:E==null?void 0:E.className,style:E==null?void 0:E.style}),onClick:Ie=>{var ke;lt(),(ke=E==null?void 0:E.onClick)==null||ke.call(E,Ie)},"data-inactive":!et||void 0,tabIndex:et?0:-1,children:typeof se<"u"?se:q.jsx(rL,{style:{transform:`rotate(${IH({dir:he,orientation:D,direction:"previous"})}deg)`}})}),q.jsx(gv,{...de("control",{className:A==null?void 0:A.className,style:A==null?void 0:A.style}),...A,onClick:Ie=>{var ke;mt(),(ke=A==null?void 0:A.onClick)==null||ke.call(A,Ie)},"data-inactive":!$||void 0,tabIndex:$?0:-1,children:typeof oe<"u"?oe:q.jsx(rL,{style:{transform:`rotate(${IH({dir:he,orientation:D,direction:"next"})}deg)`}})})]})]})]})});Dc.classes=oP;Dc.displayName="@mantine/carousel/Carousel";Dc.Slide=lP;var qx={};qx.d=(i,e)=>{for(var t in e)qx.o(e,t)&&!qx.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})};qx.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var Rn=globalThis.pdfjsLib={};qx.d(Rn,{AbortException:()=>qv,AnnotationEditorLayer:()=>nI,AnnotationEditorParamsType:()=>xn,AnnotationEditorType:()=>Hn,AnnotationEditorUIManager:()=>Iv,AnnotationLayer:()=>cce,AnnotationMode:()=>Jd,ColorPicker:()=>Fw,DOMSVGFactory:()=>AP,DrawLayer:()=>aI,FeatureTest:()=>so,GlobalWorkerOptions:()=>Df,ImageKind:()=>sC,InvalidPDFException:()=>o6,MissingPDFException:()=>Xv,OPS:()=>Bc,OutputScale:()=>KL,PDFDataRangeTransport:()=>i8,PDFDateString:()=>dP,PDFWorker:()=>ky,PasswordResponses:()=>moe,PermissionFlag:()=>poe,PixelsPerInch:()=>Op,RenderingCancelledException:()=>hP,TextLayer:()=>SN,UnexpectedResponseException:()=>m2,Util:()=>Zt,VerbosityLevel:()=>f2,XfaLayer:()=>r8,build:()=>Vle,createValidAbsoluteUrl:()=>_oe,fetchData:()=>v2,getDocument:()=>Ile,getFilenameFromUrl:()=>woe,getPdfFilenameFromUrl:()=>Roe,getXfaPageViewport:()=>Doe,isDataScheme:()=>y2,isPdfFile:()=>fP,noContextMenu:()=>Wl,normalizeUnicode:()=>Moe,setLayerDimensions:()=>Nv,shadow:()=>oi,version:()=>kle});const Ba=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),a6=[1,0,0,1,0,0],XL=[.001,0,0,.001,0,0],foe=1e7,VB=1.35,il={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Jd={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},doe="pdfjs_internal_editor_",Hn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},xn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},poe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Sa={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},sC={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},mr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},ax={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},f2={ERRORS:0,WARNINGS:1,INFOS:5},Bc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},moe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let d2=f2.WARNINGS;function goe(i){Number.isInteger(i)&&(d2=i)}function voe(){return d2}function p2(i){d2>=f2.INFOS&&console.log(`Info: ${i}`)}function Vn(i){d2>=f2.WARNINGS&&console.log(`Warning: ${i}`)}function rs(i){throw new Error(i)}function _r(i,e){i||rs(e)}function yoe(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _oe(i,e=null,t=null){if(!i)return null;try{if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=Eoe(i)}catch{}}const n=e?new URL(i,e):new URL(i);if(yoe(n))return n}catch{}return null}function oi(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const qp=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class qL extends qp{constructor(e,t){super(e,"PasswordException"),this.code=t}}class YL extends qp{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class o6 extends qp{constructor(e){super(e,"InvalidPDFException")}}class Xv extends qp{constructor(e){super(e,"MissingPDFException")}}class m2 extends qp{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Aoe extends qp{constructor(e){super(e,"FormatError")}}class qv extends qp{constructor(e){super(e,"AbortException")}}function l6(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&rs("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),a=i.subarray(s,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function g2(i){typeof i!="string"&&rs("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function boe(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function cP(i){const e=Object.create(null);for(const[t,n]of i)e[t]=n;return e}function xoe(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function Soe(){try{return new Function(""),!0}catch{return!1}}class so{static get isLittleEndian(){return oi(this,"isLittleEndian",xoe())}static get isEvalSupported(){return oi(this,"isEvalSupported",Soe())}static get isOffscreenCanvasSupported(){return oi(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?oi(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):oi(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return oi(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const jB=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Of,rC,WL;class Zt{static makeHexColor(e,t,n){return`#${jB[e]}${jB[t]}${jB[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[n,s]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[s,r]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],s[0],r[0],a[0]),Math.min(n[1],s[1],r[1],a[1]),Math.max(n[0],s[0],r[0],a[0]),Math.max(n[1],s[1],r[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(n+a)/2,c=Math.sqrt((n+a)**2-4*(n*a-r*s))/2,h=o+c||1,d=o-c||1;return[Math.sqrt(h),Math.sqrt(d)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[n,r,s,a]}static bezierBoundingBox(e,t,n,s,r,a,o,c,h){return h?(h[0]=Math.min(h[0],e,o),h[1]=Math.min(h[1],t,c),h[2]=Math.max(h[2],e,o),h[3]=Math.max(h[3],t,c)):h=[Math.min(e,o),Math.min(t,c),Math.max(e,o),Math.max(t,c)],Z(this,Of,WL).call(this,e,n,r,o,t,s,a,c,3*(-e+3*(n-r)+o),6*(e-2*n+r),3*(n-e),h),Z(this,Of,WL).call(this,e,n,r,o,t,s,a,c,3*(-t+3*(s-a)+c),6*(t-2*s+a),3*(s-t),h),h}}Of=new WeakSet,rC=function(e,t,n,s,r,a,o,c,h,d){if(h<=0||h>=1)return;const m=1-h,v=h*h,y=v*h,A=m*(m*(m*e+3*h*t)+3*v*n)+y*s,E=m*(m*(m*r+3*h*a)+3*v*o)+y*c;d[0]=Math.min(d[0],A),d[1]=Math.min(d[1],E),d[2]=Math.max(d[2],A),d[3]=Math.max(d[3],E)},WL=function(e,t,n,s,r,a,o,c,h,d,m,v){if(Math.abs(h)<1e-12){Math.abs(d)>=1e-12&&Z(this,Of,rC).call(this,e,t,n,s,r,a,o,c,-m/d,v);return}const y=d**2-4*m*h;if(y<0)return;const A=Math.sqrt(y),E=2*h;Z(this,Of,rC).call(this,e,t,n,s,r,a,o,c,(-d+A)/E,v),Z(this,Of,rC).call(this,e,t,n,s,r,a,o,c,(-d-A)/E,v)},te(Zt,Of);function Eoe(i){return decodeURIComponent(escape(i))}let XB=null,PH=null;function Moe(i){return XB||(XB=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,PH=new Map([["","t"]])),i.replaceAll(XB,(e,t,n)=>t?t.normalize("NFKC"):PH.get(n))}function Toe(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let e=0;e<32;e++)i[e]=Math.floor(Math.random()*255);return l6(i)}const uP="pdfjs_internal_id_",Wh={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function Coe(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(l6(i))}const Jh="http://www.w3.org/2000/svg",ug=class ug{};bn(ug,"CSS",96),bn(ug,"PDF",72),bn(ug,"PDF_TO_CSS_UNITS",ug.CSS/ug.PDF);let Op=ug;async function v2(i,e="text"){if(px(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class o1{constructor({viewBox:e,scale:t,rotation:n,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=s,this.offsetY=r;const o=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let h,d,m,v;switch(n%=360,n<0&&(n+=360),n){case 180:h=-1,d=0,m=0,v=1;break;case 90:h=0,d=1,m=1,v=0;break;case 270:h=0,d=-1,m=-1,v=0;break;case 0:h=1,d=0,m=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(m=-m,v=-v);let y,A,E,M;h===0?(y=Math.abs(c-e[1])*t+s,A=Math.abs(o-e[0])*t+r,E=(e[3]-e[1])*t,M=(e[2]-e[0])*t):(y=Math.abs(o-e[0])*t+s,A=Math.abs(c-e[1])*t+r,E=(e[2]-e[0])*t,M=(e[3]-e[1])*t),this.transform=[h*t,d*t,m*t,v*t,y-h*t*o-m*t*c,A-d*t*o-v*t*c],this.width=E,this.height=M}get rawDims(){const{viewBox:e}=this;return oi(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new o1({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){return Zt.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Zt.applyTransform([e[0],e[1]],this.transform),n=Zt.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return Zt.applyInverseTransform([e,t],this.transform)}}class hP extends qp{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function y2(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function fP(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function woe(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function Roe(i,e="document.pdf"){if(typeof i!="string")return e;if(y2(i))return Vn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(i);let r=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||e}class OH{constructor(){bn(this,"started",Object.create(null));bn(this,"times",[])}time(e){e in this.started&&Vn(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Vn(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:r}of this.times)e.push(`${n.padEnd(t)} ${r-s}ms
`);return e.join("")}}function px(i,e){try{const{protocol:t}=e?new URL(i,e):new URL(i);return t==="http:"||t==="https:"}catch{return!1}}function Wl(i){i.preventDefault()}function UH(i){console.log("Deprecated API usage: "+i)}var AS;class dP{static toDateObject(e){if(!e||typeof e!="string")return null;S(this,AS)||Y(this,AS,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=S(this,AS).exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const h=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,h==="-"?(a+=d,o+=m):h==="+"&&(a-=d,o-=m),new Date(Date.UTC(n,s,r,a,o,c))}}AS=new WeakMap,te(dP,AS);function Doe(i,{scale:e=1,rotation:t=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new o1({viewBox:r,scale:e,rotation:t})}function pP(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Vn(`Not a valid color format: "${i}"`),[0,0,0])}function Boe(i){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,pP(n))}e.remove()}function ws(i){const{a:e,b:t,c:n,d:s,e:r,f:a}=i.getTransform();return[e,t,n,s,r,a]}function Kh(i){const{a:e,b:t,c:n,d:s,e:r,f:a}=i.getTransform().invertSelf();return[e,t,n,s,r,a]}function Nv(i,e,t=!1,n=!0){if(e instanceof o1){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:a}=i,o=so.isCSSRoundSupported,c=`var(--scale-factor) * ${s}px`,h=`var(--scale-factor) * ${r}px`,d=o?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,m=o?`round(down, ${h}, var(--scale-round-y, 1px))`:`calc(${h})`;!t||e.rotation%180===0?(a.width=d,a.height=m):(a.width=m,a.height=d)}n&&i.setAttribute("data-main-rotation",e.rotation)}class KL{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Zd,_g,Lc,Ag,bS,xS,zw,c6,ro,u6,h6,aC,f6,ZL;const tf=class tf{constructor(e){te(this,ro);te(this,Zd,null);te(this,_g,null);te(this,Lc);te(this,Ag,null);te(this,bS,null);Y(this,Lc,e),S(tf,xS)||Y(tf,xS,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=Y(this,Zd,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=S(this,Lc)._uiManager._signal;e.addEventListener("contextmenu",Wl,{signal:t}),e.addEventListener("pointerdown",Z(tf,zw,c6),{signal:t});const n=Y(this,Ag,document.createElement("div"));n.className="buttons",e.append(n);const s=S(this,Lc).toolbarPosition;if(s){const{style:r}=e,a=S(this,Lc)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return Z(this,ro,f6).call(this),e}get div(){return S(this,Zd)}hide(){var e;S(this,Zd).classList.add("hidden"),(e=S(this,_g))==null||e.hideDropdown()}show(){var e;S(this,Zd).classList.remove("hidden"),(e=S(this,bS))==null||e.shown()}async addAltText(e){const t=await e.render();Z(this,ro,aC).call(this,t),S(this,Ag).prepend(t,S(this,ro,ZL)),Y(this,bS,e)}addColorPicker(e){Y(this,_g,e);const t=e.renderButton();Z(this,ro,aC).call(this,t),S(this,Ag).prepend(t,S(this,ro,ZL))}remove(){var e;S(this,Zd).remove(),(e=S(this,_g))==null||e.destroy(),Y(this,_g,null)}};Zd=new WeakMap,_g=new WeakMap,Lc=new WeakMap,Ag=new WeakMap,bS=new WeakMap,xS=new WeakMap,zw=new WeakSet,c6=function(e){e.stopPropagation()},ro=new WeakSet,u6=function(e){S(this,Lc)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},h6=function(e){S(this,Lc)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},aC=function(e){const t=S(this,Lc)._uiManager._signal;e.addEventListener("focusin",Z(this,ro,u6).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",Z(this,ro,h6).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Wl,{signal:t})},f6=function(){const{editorType:e,_uiManager:t}=S(this,Lc),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",S(tf,xS)[e]),Z(this,ro,aC).call(this,n),n.addEventListener("click",s=>{t.delete()},{signal:t._signal}),S(this,Ag).append(n)},ZL=function(){const e=document.createElement("div");return e.className="divider",e},te(tf,zw),te(tf,xS,null);let JL=tf;var SS,bg,xg,Fp,d6,p6,m6;class Loe{constructor(e){te(this,Fp);te(this,SS,null);te(this,bg,null);te(this,xg);Y(this,xg,e)}show(e,t,n){const[s,r]=Z(this,Fp,p6).call(this,t,n),{style:a}=S(this,bg)||Y(this,bg,Z(this,Fp,d6).call(this));e.append(S(this,bg)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){S(this,bg).remove()}}SS=new WeakMap,bg=new WeakMap,xg=new WeakMap,Fp=new WeakSet,d6=function(){const e=Y(this,bg,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Wl,{signal:S(this,xg)._signal});const t=Y(this,SS,document.createElement("div"));return t.className="buttons",e.append(t),Z(this,Fp,m6).call(this),e},p6=function(e,t){let n=0,s=0;for(const r of e){const a=r.y+r.height;if(a<n)continue;const o=r.x+(t?r.width:0);if(a>n){s=o,n=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,n]},m6=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=S(this,xg)._signal;e.addEventListener("contextmenu",Wl,{signal:n}),e.addEventListener("click",()=>{S(this,xg).highlightSelection("floating_button")},{signal:n}),S(this,SS).append(e)};function Pw(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}function Noe(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var Gw;class Ioe{constructor(){te(this,Gw,0)}get id(){return`${doe}${Ja(this,Gw)._++}`}}Gw=new WeakMap;var Xy,ES,Ta,qy,oC;const SP=class SP{constructor(){te(this,qy);te(this,Xy,Toe());te(this,ES,0);te(this,Ta,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return oi(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:n,size:s,type:r}=e;return Z(this,qy,oC).call(this,`${t}_${n}_${s}_${r}`,e)}async getFromUrl(e){return Z(this,qy,oC).call(this,e,e)}async getFromBlob(e,t){const n=await t;return Z(this,qy,oC).call(this,e,n)}async getFromId(e){S(this,Ta)||Y(this,Ta,new Map);const t=S(this,Ta).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){S(this,Ta)||Y(this,Ta,new Map);let n=S(this,Ta).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${S(this,Xy)}_${Ja(this,ES)._++}`,refCounter:1,isSvg:!1},S(this,Ta).set(e,n),S(this,Ta).set(n.id,n),n}getSvgUrl(e){const t=S(this,Ta).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;S(this,Ta)||Y(this,Ta,new Map);const t=S(this,Ta).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=r.convertToBlob()}(s=n.close)==null||s.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${S(this,Xy)}_`)}};Xy=new WeakMap,ES=new WeakMap,Ta=new WeakMap,qy=new WeakSet,oC=async function(e,t){S(this,Ta)||Y(this,Ta,new Map);let n=S(this,Ta).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${S(this,Xy)}_${Ja(this,ES)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(n.url=t,s=await v2(t,"blob")):t instanceof File?s=n.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=SP._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((h,d)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,h()},a.onload=async()=>{const m=n.svgUrl=a.result;o.src=await r?`${m}#svgView(preserveAspectRatio(none))`:m},o.onerror=a.onerror=d});a.readAsDataURL(s),await c}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){console.error(s),n=null}return S(this,Ta).set(e,n),n&&S(this,Ta).set(n.id,n),n};let QL=SP;var Ir,Qd,MS,Pr;class Poe{constructor(e=128){te(this,Ir,[]);te(this,Qd,!1);te(this,MS);te(this,Pr,-1);Y(this,MS,e)}add({cmd:e,undo:t,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),S(this,Qd))return;const c={cmd:e,undo:t,post:n,type:r};if(S(this,Pr)===-1){S(this,Ir).length>0&&(S(this,Ir).length=0),Y(this,Pr,0),S(this,Ir).push(c);return}if(a&&S(this,Ir)[S(this,Pr)].type===r){o&&(c.undo=S(this,Ir)[S(this,Pr)].undo),S(this,Ir)[S(this,Pr)]=c;return}const h=S(this,Pr)+1;h===S(this,MS)?S(this,Ir).splice(0,1):(Y(this,Pr,h),h<S(this,Ir).length&&S(this,Ir).splice(h)),S(this,Ir).push(c)}undo(){if(S(this,Pr)===-1)return;Y(this,Qd,!0);const{undo:e,post:t}=S(this,Ir)[S(this,Pr)];e(),t==null||t(),Y(this,Qd,!1),Y(this,Pr,S(this,Pr)-1)}redo(){if(S(this,Pr)<S(this,Ir).length-1){Y(this,Pr,S(this,Pr)+1),Y(this,Qd,!0);const{cmd:e,post:t}=S(this,Ir)[S(this,Pr)];e(),t==null||t(),Y(this,Qd,!1)}}hasSomethingToUndo(){return S(this,Pr)!==-1}hasSomethingToRedo(){return S(this,Pr)<S(this,Ir).length-1}destroy(){Y(this,Ir,null)}}Ir=new WeakMap,Qd=new WeakMap,MS=new WeakMap,Pr=new WeakMap;var kw,g6;class l1{constructor(e){te(this,kw);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=so.platform;for(const[n,s,r={}]of e)for(const a of n){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(Z(this,kw,g6).call(this,t));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:o=null}}=n;o&&!o(e,t)||(s.bind(e,...a,t)(),r||(t.stopPropagation(),t.preventDefault()))}}kw=new WeakSet,g6=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Vw=class Vw{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Boe(e),oi(this,"_colors",e)}convert(e){const t=pP(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((r,a)=>r===t[a]))return Vw._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Zt.makeHexColor(...t):e}};bn(Vw,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let $L=Vw;var Yy,Ko,gr,na,Wy,rf,Ky,Nc,$d,Jy,Sg,Wu,Ic,Eg,TS,CS,Zy,wS,Ku,ep,Qy,tp,Ju,jw,np,RS,ip,Mg,DS,BS,Or,Ni,af,Tg,LS,NS,sp,Zu,of,IS,Il,Ht,lC,eN,v6,y6,cC,_6,A6,b6,tN,x6,nN,iN,S6,Qa,Yd,E6,M6,sN,T6,mx,rN;const Ny=class Ny{constructor(e,t,n,s,r,a,o,c,h,d,m){te(this,Ht);te(this,Yy,new AbortController);te(this,Ko,null);te(this,gr,new Map);te(this,na,new Map);te(this,Wy,null);te(this,rf,null);te(this,Ky,null);te(this,Nc,new Poe);te(this,$d,null);te(this,Jy,0);te(this,Sg,new Set);te(this,Wu,null);te(this,Ic,null);te(this,Eg,new Set);te(this,TS,!1);te(this,CS,!1);te(this,Zy,!1);te(this,wS,null);te(this,Ku,null);te(this,ep,null);te(this,Qy,null);te(this,tp,!1);te(this,Ju,null);te(this,jw,new Ioe);te(this,np,!1);te(this,RS,!1);te(this,ip,null);te(this,Mg,null);te(this,DS,null);te(this,BS,null);te(this,Or,Hn.NONE);te(this,Ni,new Set);te(this,af,null);te(this,Tg,null);te(this,LS,null);te(this,NS,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});te(this,sp,[0,0]);te(this,Zu,null);te(this,of,null);te(this,IS,null);te(this,Il,null);const v=this._signal=S(this,Yy).signal;Y(this,of,e),Y(this,IS,t),Y(this,Wy,n),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:v}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),s._on("setpreference",this.onSetPreference.bind(this),{signal:v}),s._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:v}),Z(this,Ht,_6).call(this),Z(this,Ht,S6).call(this),Z(this,Ht,tN).call(this),Y(this,rf,r.annotationStorage),Y(this,wS,r.filterFactory),Y(this,Tg,a),Y(this,Qy,o||null),Y(this,TS,c),Y(this,CS,h),Y(this,Zy,d),Y(this,BS,m||null),this.viewParameters={realScale:Op.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Ny.prototype,t=a=>S(a,of).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return oi(this,"_keyboardManager",new l1([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&S(a,of).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&S(a,of).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,n,s;(e=S(this,Il))==null||e.resolve(),Y(this,Il,null),(t=S(this,Yy))==null||t.abort(),Y(this,Yy,null),this._signal=null;for(const r of S(this,na).values())r.destroy();S(this,na).clear(),S(this,gr).clear(),S(this,Eg).clear(),Y(this,Ko,null),S(this,Ni).clear(),S(this,Nc).destroy(),(n=S(this,Wy))==null||n.destroy(),(s=S(this,Ju))==null||s.hide(),Y(this,Ju,null),S(this,Ku)&&(clearTimeout(S(this,Ku)),Y(this,Ku,null)),S(this,Zu)&&(clearTimeout(S(this,Zu)),Y(this,Zu,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return S(this,BS)}get useNewAltTextFlow(){return S(this,CS)}get useNewAltTextWhenAddingImage(){return S(this,Zy)}get hcmFilter(){return oi(this,"hcmFilter",S(this,Tg)?S(this,wS).addHCMFilter(S(this,Tg).foreground,S(this,Tg).background):"none")}get direction(){return oi(this,"direction",getComputedStyle(S(this,of)).direction)}get highlightColors(){return oi(this,"highlightColors",S(this,Qy)?new Map(S(this,Qy).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return oi(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){Y(this,DS,e)}editAltText(e,t=!1){var n;(n=S(this,Wy))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":Y(this,Zy,t);break}}onPageChanging({pageNumber:e}){Y(this,Jy,e-1)}focusMainContainer(){S(this,of).focus()}findParent(e,t){for(const n of S(this,na).values()){const{x:s,y:r,width:a,height:o}=n.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=r&&t<=r+o)return n}return null}disableUserSelect(e=!1){S(this,IS).classList.toggle("noUserSelect",e)}addShouldRescale(e){S(this,Eg).add(e)}removeShouldRescale(e){S(this,Eg).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Op.PDF_TO_CSS_UNITS;for(const t of S(this,Eg))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a}=t,o=t.toString(),h=Z(this,Ht,lC).call(this,t).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;t.empty();const m=Z(this,Ht,eN).call(this,h),v=S(this,Or)===Hn.NONE,y=()=>{m==null||m.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a,text:o}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(Hn.HIGHLIGHT,y);return}y()}addToAnnotationStorage(e){!e.isEmpty()&&S(this,rf)&&!S(this,rf).has(e.id)&&S(this,rf).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,S(this,tp)&&(Y(this,tp,!1),Z(this,Ht,cC).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of S(this,Ni))if(t.div.contains(e)){Y(this,Mg,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!S(this,Mg))return;const[e,t]=S(this,Mg);Y(this,Mg,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){Z(this,Ht,tN).call(this),Z(this,Ht,nN).call(this)}removeEditListeners(){Z(this,Ht,x6).call(this),Z(this,Ht,iN).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of S(this,Ic))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of S(this,Ic))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=S(this,Ko))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of S(this,Ni)){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of S(this,Ic))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){Vn(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of n){const h=await s.deserialize(c);if(!h)return;r.push(h)}const a=()=>{for(const c of r)Z(this,Ht,sN).call(this,c);Z(this,Ht,rN).call(this,r)},o=()=>{for(const c of r)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){Vn(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),S(this,Or)!==Hn.NONE&&!this.isEditorHandlingKeyboard&&Ny._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,S(this,tp)&&(Y(this,tp,!1),Z(this,Ht,cC).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(Z(this,Ht,A6).call(this),Z(this,Ht,nN).call(this),Z(this,Ht,Qa).call(this,{isEditing:S(this,Or)!==Hn.NONE,isEmpty:Z(this,Ht,mx).call(this),hasSomethingToUndo:S(this,Nc).hasSomethingToUndo(),hasSomethingToRedo:S(this,Nc).hasSomethingToRedo(),hasSelectedEditor:!1})):(Z(this,Ht,b6).call(this),Z(this,Ht,iN).call(this),Z(this,Ht,Qa).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!S(this,Ic)){Y(this,Ic,e);for(const t of S(this,Ic))Z(this,Ht,Yd).call(this,t.defaultPropertiesToUpdate)}}getId(){return S(this,jw).id}get currentLayer(){return S(this,na).get(S(this,Jy))}getLayer(e){return S(this,na).get(e)}get currentPageIndex(){return S(this,Jy)}addLayer(e){S(this,na).set(e.pageIndex,e),S(this,np)?e.enable():e.disable()}removeLayer(e){S(this,na).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){if(S(this,Or)!==e&&!(S(this,Il)&&(await S(this,Il).promise,!S(this,Il)))){if(Y(this,Il,Promise.withResolvers()),Y(this,Or,e),e===Hn.NONE){this.setEditingState(!1),Z(this,Ht,M6).call(this),S(this,Il).resolve();return}this.setEditingState(!0),await Z(this,Ht,E6).call(this),this.unselectAll();for(const s of S(this,na).values())s.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),S(this,Il).resolve();return}for(const s of S(this,gr).values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();S(this,Il).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==S(this,Or)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(S(this,Ic)){switch(e){case xn.CREATE:this.currentLayer.addNewEditor();return;case xn.HIGHLIGHT_DEFAULT_COLOR:(n=S(this,DS))==null||n.updateColor(t);break;case xn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(S(this,LS)||Y(this,LS,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of S(this,Ni))s.updateParams(e,t);for(const s of S(this,Ic))s.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var r;for(const a of S(this,gr).values())a.editorType===e&&a.show(t);(((r=S(this,LS))==null?void 0:r.get(xn.HIGHLIGHT_SHOW_ALL))??!0)!==t&&Z(this,Ht,Yd).call(this,[[xn.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(S(this,RS)!==e){Y(this,RS,e);for(const t of S(this,na).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of S(this,gr).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return S(this,gr).get(e)}addEditor(e){S(this,gr).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(S(this,Ku)&&clearTimeout(S(this,Ku)),Y(this,Ku,setTimeout(()=>{this.focusMainContainer(),Y(this,Ku,null)},0))),S(this,gr).delete(e.id),this.unselect(e),(!e.annotationElementId||!S(this,Sg).has(e.annotationElementId))&&((t=S(this,rf))==null||t.remove(e.id))}addDeletedAnnotationElement(e){S(this,Sg).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return S(this,Sg).has(e)}removeDeletedAnnotationElement(e){S(this,Sg).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){S(this,Ko)!==e&&(Y(this,Ko,e),e&&Z(this,Ht,Yd).call(this,e.propertiesToUpdate))}updateUI(e){S(this,Ht,T6)===e&&Z(this,Ht,Yd).call(this,e.propertiesToUpdate)}toggleSelected(e){if(S(this,Ni).has(e)){S(this,Ni).delete(e),e.unselect(),Z(this,Ht,Qa).call(this,{hasSelectedEditor:this.hasSelection});return}S(this,Ni).add(e),e.select(),Z(this,Ht,Yd).call(this,e.propertiesToUpdate),Z(this,Ht,Qa).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of S(this,Ni))t!==e&&t.unselect();S(this,Ni).clear(),S(this,Ni).add(e),e.select(),Z(this,Ht,Yd).call(this,e.propertiesToUpdate),Z(this,Ht,Qa).call(this,{hasSelectedEditor:!0})}isSelected(e){return S(this,Ni).has(e)}get firstSelectedEditor(){return S(this,Ni).values().next().value}unselect(e){e.unselect(),S(this,Ni).delete(e),Z(this,Ht,Qa).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return S(this,Ni).size!==0}get isEnterHandled(){return S(this,Ni).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){S(this,Nc).undo(),Z(this,Ht,Qa).call(this,{hasSomethingToUndo:S(this,Nc).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Z(this,Ht,mx).call(this)})}redo(){S(this,Nc).redo(),Z(this,Ht,Qa).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:S(this,Nc).hasSomethingToRedo(),isEmpty:Z(this,Ht,mx).call(this)})}addCommands(e){S(this,Nc).add(e),Z(this,Ht,Qa).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Z(this,Ht,mx).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...S(this,Ni)],t=()=>{for(const s of e)s.remove()},n=()=>{for(const s of e)Z(this,Ht,sN).call(this,s)};this.addCommands({cmd:t,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=S(this,Ko))==null||e.commitOrRemove()}hasSomethingToControl(){return S(this,Ko)||this.hasSelection}selectAll(){for(const e of S(this,Ni))e.commit();Z(this,Ht,rN).call(this,S(this,gr).values())}unselectAll(){if(!(S(this,Ko)&&(S(this,Ko).commitOrRemove(),S(this,Or)!==Hn.NONE))&&this.hasSelection){for(const e of S(this,Ni))e.unselect();S(this,Ni).clear(),Z(this,Ht,Qa).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;S(this,sp)[0]+=e,S(this,sp)[1]+=t;const[s,r]=S(this,sp),a=[...S(this,Ni)],o=1e3;S(this,Zu)&&clearTimeout(S(this,Zu)),Y(this,Zu,setTimeout(()=>{Y(this,Zu,null),S(this,sp)[0]=S(this,sp)[1]=0,this.addCommands({cmd:()=>{for(const c of a)S(this,gr).has(c.id)&&c.translateInPage(s,r)},undo:()=>{for(const c of a)S(this,gr).has(c.id)&&c.translateInPage(-s,-r)},mustExec:!1})},o));for(const c of a)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Y(this,Wu,new Map);for(const e of S(this,Ni))S(this,Wu).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!S(this,Wu))return!1;this.disableUserSelect(!1);const e=S(this,Wu);Y(this,Wu,null);let t=!1;for(const[{x:s,y:r,pageIndex:a},o]of e)o.newX=s,o.newY=r,o.newPageIndex=a,t||(t=s!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const n=(s,r,a,o)=>{if(S(this,gr).has(s.id)){const c=S(this,na).get(o);c?s._setParentAndPosition(c,r,a):(s.pageIndex=o,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:o}]of e)n(s,r,a,o)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:o}]of e)n(s,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(S(this,Wu))for(const n of S(this,Wu).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||S(this,Ni).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return S(this,Ko)===e}getActive(){return S(this,Ko)}getMode(){return S(this,Or)}get imageManager(){return oi(this,"imageManager",new QL)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,d=t.rangeCount;h<d;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(h,d,m,v)=>({x:(d-s)/a,y:1-(h+m-n)/r,width:v/a,height:m/r});break;case"180":o=(h,d,m,v)=>({x:1-(h+m-n)/r,y:1-(d+v-s)/a,width:m/r,height:v/a});break;case"270":o=(h,d,m,v)=>({x:1-(d+v-s)/a,y:(h-n)/r,width:v/a,height:m/r});break;default:o=(h,d,m,v)=>({x:(h-n)/r,y:(d-s)/a,width:m/r,height:v/a});break}const c=[];for(let h=0,d=t.rangeCount;h<d;h++){const m=t.getRangeAt(h);if(!m.collapsed)for(const{x:v,y,width:A,height:E}of m.getClientRects())A===0||E===0||c.push(o(v,y,A,E))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(S(this,Ky)||Y(this,Ky,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=S(this,Ky))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=S(this,Ky))==null?void 0:s.get(e.data.id);if(!t)return;const n=S(this,rf).getRawValue(t);n&&(S(this,Or)===Hn.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};Yy=new WeakMap,Ko=new WeakMap,gr=new WeakMap,na=new WeakMap,Wy=new WeakMap,rf=new WeakMap,Ky=new WeakMap,Nc=new WeakMap,$d=new WeakMap,Jy=new WeakMap,Sg=new WeakMap,Wu=new WeakMap,Ic=new WeakMap,Eg=new WeakMap,TS=new WeakMap,CS=new WeakMap,Zy=new WeakMap,wS=new WeakMap,Ku=new WeakMap,ep=new WeakMap,Qy=new WeakMap,tp=new WeakMap,Ju=new WeakMap,jw=new WeakMap,np=new WeakMap,RS=new WeakMap,ip=new WeakMap,Mg=new WeakMap,DS=new WeakMap,BS=new WeakMap,Or=new WeakMap,Ni=new WeakMap,af=new WeakMap,Tg=new WeakMap,LS=new WeakMap,NS=new WeakMap,sp=new WeakMap,Zu=new WeakMap,of=new WeakMap,IS=new WeakMap,Il=new WeakMap,Ht=new WeakSet,lC=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},eN=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of S(this,na).values())if(n.hasTextLayer(e))return n;return null},v6=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=Z(this,Ht,lC).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(S(this,Ju)||Y(this,Ju,new Loe(this)),S(this,Ju).show(n,s,this.direction==="ltr"))},y6=function(){var r,a,o;const e=document.getSelection();if(!e||e.isCollapsed){S(this,af)&&((r=S(this,Ju))==null||r.hide(),Y(this,af,null),Z(this,Ht,Qa).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===S(this,af))return;const s=Z(this,Ht,lC).call(this,e).closest(".textLayer");if(!s){S(this,af)&&((a=S(this,Ju))==null||a.hide(),Y(this,af,null),Z(this,Ht,Qa).call(this,{hasSelectedText:!1}));return}if((o=S(this,Ju))==null||o.hide(),Y(this,af,t),Z(this,Ht,Qa).call(this,{hasSelectedText:!0}),!(S(this,Or)!==Hn.HIGHLIGHT&&S(this,Or)!==Hn.NONE)&&(S(this,Or)===Hn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Y(this,tp,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=S(this,Or)===Hn.HIGHLIGHT?Z(this,Ht,eN).call(this,s):null;c==null||c.toggleDrawing();const h=new AbortController,d=this.combinedSignal(h),m=v=>{v.type==="pointerup"&&v.button!==0||(h.abort(),c==null||c.toggleDrawing(!0),v.type==="pointerup"&&Z(this,Ht,cC).call(this,"main_toolbar"))};window.addEventListener("pointerup",m,{signal:d}),window.addEventListener("blur",m,{signal:d})}},cC=function(e=""){S(this,Or)===Hn.HIGHLIGHT?this.highlightSelection(e):S(this,TS)&&Z(this,Ht,v6).call(this)},_6=function(){document.addEventListener("selectionchange",Z(this,Ht,y6).bind(this),{signal:this._signal})},A6=function(){if(S(this,ep))return;Y(this,ep,new AbortController);const e=this.combinedSignal(S(this,ep));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},b6=function(){var e;(e=S(this,ep))==null||e.abort(),Y(this,ep,null)},tN=function(){if(S(this,ip))return;Y(this,ip,new AbortController);const e=this.combinedSignal(S(this,ip));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},x6=function(){var e;(e=S(this,ip))==null||e.abort(),Y(this,ip,null)},nN=function(){if(S(this,$d))return;Y(this,$d,new AbortController);const e=this.combinedSignal(S(this,$d));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},iN=function(){var e;(e=S(this,$d))==null||e.abort(),Y(this,$d,null)},S6=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Qa=function(e){Object.entries(e).some(([n,s])=>S(this,NS)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(S(this,NS),e)}),S(this,Or)===Hn.HIGHLIGHT&&e.hasSelectedEditor===!1&&Z(this,Ht,Yd).call(this,[[xn.HIGHLIGHT_FREE,!0]]))},Yd=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},E6=async function(){if(!S(this,np)){Y(this,np,!0);const e=[];for(const t of S(this,na).values())e.push(t.enable());await Promise.all(e);for(const t of S(this,gr).values())t.enable()}},M6=function(){if(this.unselectAll(),S(this,np)){Y(this,np,!1);for(const e of S(this,na).values())e.disable();for(const e of S(this,gr).values())e.disable()}},sN=function(e){const t=S(this,na).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},T6=function(){let e=null;for(e of S(this,Ni));return e},mx=function(){if(S(this,gr).size===0)return!0;if(S(this,gr).size===1)for(const e of S(this,gr).values())return e.isEmpty();return!1},rN=function(e){for(const t of S(this,Ni))t.unselect();S(this,Ni).clear();for(const t of e)t.isEmpty()||(S(this,Ni).add(t),t.select());Z(this,Ht,Qa).call(this,{hasSelectedEditor:this.hasSelection})},bn(Ny,"TRANSLATE_SMALL",1),bn(Ny,"TRANSLATE_BIG",10);let Iv=Ny;var Ur,Qu,Pc,$y,$u,Jo,e_,eh,Mo,lf,Cg,th,rp,Qc,gx,uC;const eo=class eo{constructor(e){te(this,Qc);te(this,Ur,null);te(this,Qu,!1);te(this,Pc,null);te(this,$y,null);te(this,$u,null);te(this,Jo,null);te(this,e_,!1);te(this,eh,null);te(this,Mo,null);te(this,lf,null);te(this,Cg,null);te(this,th,!1);Y(this,Mo,e),Y(this,th,e._uiManager.useNewAltTextFlow),S(eo,rp)||Y(eo,rp,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){eo._l10n??(eo._l10n=e)}async render(){const e=Y(this,Pc,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=Y(this,$y,document.createElement("span"));e.append(t),S(this,th)?(e.classList.add("new"),e.setAttribute("data-l10n-id",S(eo,rp).missing),t.setAttribute("data-l10n-id",S(eo,rp)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=S(this,Mo)._uiManager._signal;e.addEventListener("contextmenu",Wl,{signal:n}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),S(this,Mo)._uiManager.editAltText(S(this,Mo)),S(this,th)&&S(this,Mo)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:S(this,Qc,gx)}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(Y(this,e_,!0),s(r))},{signal:n}),await Z(this,Qc,uC).call(this),e}finish(){S(this,Pc)&&(S(this,Pc).focus({focusVisible:S(this,e_)}),Y(this,e_,!1))}isEmpty(){return S(this,th)?S(this,Ur)===null:!S(this,Ur)&&!S(this,Qu)}hasData(){return S(this,th)?S(this,Ur)!==null||!!S(this,lf):this.isEmpty()}get guessedText(){return S(this,lf)}async setGuessedText(e){S(this,Ur)===null&&(Y(this,lf,e),Y(this,Cg,await eo._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),Z(this,Qc,uC).call(this))}toggleAltTextBadge(e=!1){var t;if(!S(this,th)||S(this,Ur)){(t=S(this,eh))==null||t.remove(),Y(this,eh,null);return}if(!S(this,eh)){const n=Y(this,eh,document.createElement("div"));n.className="noAltTextBadge",S(this,Mo).div.append(n)}S(this,eh).classList.toggle("hidden",!e)}serialize(e){let t=S(this,Ur);return!e&&S(this,lf)===t&&(t=S(this,Cg)),{altText:t,decorative:S(this,Qu),guessedText:S(this,lf),textWithDisclaimer:S(this,Cg)}}get data(){return{altText:S(this,Ur),decorative:S(this,Qu)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(Y(this,lf,n),Y(this,Cg,s)),!(S(this,Ur)===e&&S(this,Qu)===t)&&(r||(Y(this,Ur,e),Y(this,Qu,t)),Z(this,Qc,uC).call(this))}toggle(e=!1){S(this,Pc)&&(!e&&S(this,Jo)&&(clearTimeout(S(this,Jo)),Y(this,Jo,null)),S(this,Pc).disabled=!e)}shown(){S(this,Mo)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:S(this,Qc,gx)}})}destroy(){var e,t;(e=S(this,Pc))==null||e.remove(),Y(this,Pc,null),Y(this,$y,null),Y(this,$u,null),(t=S(this,eh))==null||t.remove(),Y(this,eh,null)}};Ur=new WeakMap,Qu=new WeakMap,Pc=new WeakMap,$y=new WeakMap,$u=new WeakMap,Jo=new WeakMap,e_=new WeakMap,eh=new WeakMap,Mo=new WeakMap,lf=new WeakMap,Cg=new WeakMap,th=new WeakMap,rp=new WeakMap,Qc=new WeakSet,gx=function(){return S(this,Ur)&&"added"||S(this,Ur)===null&&this.guessedText&&"review"||"missing"},uC=async function(){var s,r,a;const e=S(this,Pc);if(!e)return;if(S(this,th)){if(e.classList.toggle("done",!!S(this,Ur)),e.setAttribute("data-l10n-id",S(eo,rp)[S(this,Qc,gx)]),(s=S(this,$y))==null||s.setAttribute("data-l10n-id",S(eo,rp)[`${S(this,Qc,gx)}-label`]),!S(this,Ur)){(r=S(this,$u))==null||r.remove();return}}else{if(!S(this,Ur)&&!S(this,Qu)){e.classList.remove("done"),(a=S(this,$u))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=S(this,$u);if(!t){Y(this,$u,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${S(this,Mo).id}`;const o=100,c=S(this,Mo)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(S(this,Jo)),Y(this,Jo,null)},{once:!0}),e.addEventListener("mouseenter",()=>{Y(this,Jo,setTimeout(()=>{Y(this,Jo,null),S(this,$u).classList.add("show"),S(this,Mo)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),e.addEventListener("mouseleave",()=>{var h;S(this,Jo)&&(clearTimeout(S(this,Jo)),Y(this,Jo,null)),(h=S(this,$u))==null||h.classList.remove("show")},{signal:c})}S(this,Qu)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=S(this,Ur)),t.parentNode||e.append(t);const n=S(this,Mo).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},te(eo,rp,null),bn(eo,"_l10n",null);let Ow=eo;var wg,Oc,Ts,t_,Rg,ia,Dg,ap,PS,Bg,op,OS,Lg,cf,nh,n_,i_,Pl,US,Xw,Gn,aN,FS,oN,lN,C6,w6,cN,uN,hN,R6,fN,D6,B6,L6,dN,vx;const Mi=class Mi{constructor(e){te(this,Gn);te(this,wg,null);te(this,Oc,null);te(this,Ts,null);te(this,t_,!1);te(this,Rg,!1);te(this,ia,null);te(this,Dg,null);te(this,ap,null);te(this,PS,"");te(this,Bg,!1);te(this,op,null);te(this,OS,!1);te(this,Lg,!1);te(this,cf,!1);te(this,nh,null);te(this,n_,0);te(this,i_,0);te(this,Pl,null);bn(this,"_editToolbar",null);bn(this,"_initialOptions",Object.create(null));bn(this,"_initialData",null);bn(this,"_isVisible",!0);bn(this,"_uiManager",null);bn(this,"_focusEventsAllowed",!0);te(this,US,!1);te(this,Xw,Mi._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,a];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Mi.prototype._resizeWithKeyboard,t=Iv.TRANSLATE_SMALL,n=Iv.TRANSLATE_BIG;return oi(this,"_resizerKeyboardManager",new l1([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Mi.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return oi(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Ooe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Mi._l10n??(Mi._l10n=e),Mi._l10nResizer||(Mi._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Mi._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Mi._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){rs("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return S(this,US)}set _isDraggable(e){var t;Y(this,US,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=S(this,Xw)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):Z(this,Gn,vx).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(S(this,Bg)?Y(this,Bg,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[r,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/r,this.y=(t+s)/a,this.fixAndSetPosition()}translate(e,t){Z(this,Gn,aN).call(this,this.parentDimensions,e,t)}translateInPage(e,t){S(this,op)||Y(this,op,[this.x,this.y]),Z(this,Gn,aN).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){S(this,op)||Y(this,op,[this.x,this.y]);const[n,s]=this.parentDimensions;if(this.x+=e/n,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,c]=this.getBaseTranslation();r+=o,a+=c,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!S(this,op)&&(S(this,op)[0]!==this.x||S(this,op)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Mi,s=n/e,r=n/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,n]=this.pageDimensions;let{x:s,y:r,width:a,height:o}=this;if(a*=t,o*=n,s*=t,r*=n,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-a,s)),r=Math.max(0,Math.min(n-o,r));break;case 90:s=Math.max(0,Math.min(t-o,s)),r=Math.min(n,Math.max(a,r));break;case 180:s=Math.min(t,Math.max(a,s)),r=Math.min(n,Math.max(o,r));break;case 270:s=Math.min(t,Math.max(o,s)),r=Math.max(0,Math.min(n-a,r));break}this.x=s/=t,this.y=r/=n;const[c,h]=this.getBaseTranslation();s+=c,r+=h;const{style:d}=this.div;d.left=`${(100*s).toFixed(2)}%`,d.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return Z(n=Mi,FS,oN).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return Z(n=Mi,FS,oN).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,s]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,S(this,Rg)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,s=n.endsWith("%"),r=!S(this,Rg)&&t.endsWith("%");if(s&&r)return;const[a,o]=this.parentDimensions;s||(e.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!S(this,Rg)&&!r&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=S(this,Ts))==null||e.finish()}async addEditToolbar(){return this._editToolbar||S(this,Lg)?this._editToolbar:(this._editToolbar=new JL(this),this.div.append(this._editToolbar.render()),S(this,Ts)&&await this._editToolbar.addAltText(S(this,Ts)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=S(this,Ts))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){S(this,Ts)||(Ow.initialize(Mi._l10n),Y(this,Ts,new Ow(this)),S(this,wg)&&(S(this,Ts).data=S(this,wg),Y(this,wg,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=S(this,Ts))==null?void 0:e.data}set altTextData(e){S(this,Ts)&&(S(this,Ts).data=e)}get guessedAltText(){var e;return(e=S(this,Ts))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=S(this,Ts))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=S(this,Ts))==null?void 0:t.serialize(e)}hasAltText(){return!!S(this,Ts)&&!S(this,Ts).isEmpty()}hasAltTextData(){var e;return((e=S(this,Ts))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=S(this,t_)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),Z(this,Gn,fN).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),Pw(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=so.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(Y(this,Bg,!0),this._isDraggable){Z(this,Gn,R6).call(this,e);return}Z(this,Gn,hN).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){S(this,nh)&&clearTimeout(S(this,nh)),Y(this,nh,setTimeout(()=>{var e;Y(this,nh,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t,n=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[o,c]=this.pageTranslation,h=e/s,d=t/s,m=this.x*r,v=this.y*a,y=this.width*r,A=this.height*a;switch(n){case 0:return[m+h+o,a-v-d-A+c,m+h+y+o,a-v-d+c];case 90:return[m+d+o,a-v+h+c,m+d+A+o,a-v+h+y+c];case 180:return[m-h-y+o,a-v+d+c,m-h+o,a-v+d+A+c];case 270:return[m-d-A+o,a-v-h-y+c,m-d+o,a-v-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,r,a]=e,o=r-n,c=a-s;switch(this.rotation){case 0:return[n,t-a,o,c];case 90:return[n,t-s,c,o];case 180:return[r,t-s,o,c];case 270:return[r,t-a,c,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Y(this,Lg,!0)}disableEditMode(){Y(this,Lg,!1)}isInEditMode(){return S(this,Lg)}shouldGetKeyboardEvents(){return S(this,cf)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){Z(this,Gn,fN).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){rs("An editor must be serializable")}static async deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});s.rotation=e.rotation,Y(s,wg,e.accessibilityData);const[r,a]=s.pageDimensions,[o,c,h,d]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/r,s.y=c/a,s.width=h/r,s.height=d/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=S(this,ap))==null||e.abort(),Y(this,ap,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),S(this,nh)&&(clearTimeout(S(this,nh)),Y(this,nh,null)),Z(this,Gn,vx).call(this),this.removeEditToolbar(),S(this,Pl)){for(const t of S(this,Pl).values())clearTimeout(t);Y(this,Pl,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(Z(this,Gn,C6).call(this),S(this,ia).classList.remove("hidden"),Pw(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),Y(this,Dg,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=S(this,ia).children;if(!S(this,Oc)){Y(this,Oc,Array.from(t));const a=Z(this,Gn,D6).bind(this),o=Z(this,Gn,B6).bind(this),c=this._uiManager._signal;for(const h of S(this,Oc)){const d=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:c}),h.addEventListener("blur",o,{signal:c}),h.addEventListener("focus",Z(this,Gn,L6).bind(this,d),{signal:c}),h.setAttribute("data-l10n-id",Mi._l10nResizer[d])}}const n=S(this,Oc)[0];let s=0;for(const a of t){if(a===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(S(this,Oc).length/4);if(r!==s){if(r<s)for(let o=0;o<s-r;o++)S(this,ia).append(S(this,ia).firstChild);else if(r>s)for(let o=0;o<r-s;o++)S(this,ia).firstChild.before(S(this,ia).lastChild);let a=0;for(const o of t){const h=S(this,Oc)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Mi._l10nResizer[h])}}Z(this,Gn,dN).call(this,0),Y(this,cf,!0),S(this,ia).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){S(this,cf)&&Z(this,Gn,uN).call(this,S(this,PS),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){Z(this,Gn,vx).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(n=S(this,Ts))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,s,r;(e=S(this,ia))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=S(this,Ts))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return S(this,OS)}set isEditing(e){Y(this,OS,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){Y(this,Rg,!0);const n=e/t,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){S(this,Pl)||Y(this,Pl,new Map);const{action:n}=e;let s=S(this,Pl).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),S(this,Pl).delete(n),S(this,Pl).size===0&&Y(this,Pl,null)},Mi._telemetryTimeout),S(this,Pl).set(n,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),Y(this,t_,!1)}disable(){this.div&&(this.div.tabIndex=-1),Y(this,t_,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};wg=new WeakMap,Oc=new WeakMap,Ts=new WeakMap,t_=new WeakMap,Rg=new WeakMap,ia=new WeakMap,Dg=new WeakMap,ap=new WeakMap,PS=new WeakMap,Bg=new WeakMap,op=new WeakMap,OS=new WeakMap,Lg=new WeakMap,cf=new WeakMap,nh=new WeakMap,n_=new WeakMap,i_=new WeakMap,Pl=new WeakMap,US=new WeakMap,Xw=new WeakMap,Gn=new WeakSet,aN=function([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this.fixAndSetPosition()},FS=new WeakSet,oN=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},lN=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},C6=function(){if(S(this,ia))return;Y(this,ia,document.createElement("div")),S(this,ia).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const s=document.createElement("div");S(this,ia).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",Z(this,Gn,w6).bind(this,n),{signal:t}),s.addEventListener("contextmenu",Wl,{signal:t}),s.tabIndex=-1}this.div.prepend(S(this,ia))},w6=function(e,t){var A;t.preventDefault();const{isMac:n}=so.platform;if(t.button!==0||t.ctrlKey&&n)return;(A=S(this,Ts))==null||A.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",Z(this,Gn,uN).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",Wl,{signal:a});const o=this.x,c=this.y,h=this.width,d=this.height,m=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const y=()=>{var E;r.abort(),this.parent.togglePointerEvents(!0),(E=S(this,Ts))==null||E.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=m,this.div.style.cursor=v,Z(this,Gn,cN).call(this,o,c,h,d)};window.addEventListener("pointerup",y,{signal:a}),window.addEventListener("blur",y,{signal:a})},cN=function(e,t,n,s){const r=this.x,a=this.y,o=this.width,c=this.height;r===e&&a===t&&o===n&&c===s||this.addCommands({cmd:()=>{this.width=o,this.height=c,this.x=r,this.y=a;const[h,d]=this.parentDimensions;this.setDims(h*o,d*c),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=s,this.x=e,this.y=t;const[h,d]=this.parentDimensions;this.setDims(h*n,d*s),this.fixAndSetPosition()},mustExec:!0})},uN=function(e,t){const[n,s]=this.parentDimensions,r=this.x,a=this.y,o=this.width,c=this.height,h=Mi.MIN_SIZE/n,d=Mi.MIN_SIZE/s,m=K=>Math.round(K*1e4)/1e4,v=Z(this,Gn,lN).call(this,this.rotation),y=(K,Q)=>[v[0]*K+v[2]*Q,v[1]*K+v[3]*Q],A=Z(this,Gn,lN).call(this,360-this.rotation),E=(K,Q)=>[A[0]*K+A[2]*Q,A[1]*K+A[3]*Q];let M,x,w=!1,R=!1;switch(e){case"topLeft":w=!0,M=(K,Q)=>[0,0],x=(K,Q)=>[K,Q];break;case"topMiddle":M=(K,Q)=>[K/2,0],x=(K,Q)=>[K/2,Q];break;case"topRight":w=!0,M=(K,Q)=>[K,0],x=(K,Q)=>[0,Q];break;case"middleRight":R=!0,M=(K,Q)=>[K,Q/2],x=(K,Q)=>[0,Q/2];break;case"bottomRight":w=!0,M=(K,Q)=>[K,Q],x=(K,Q)=>[0,0];break;case"bottomMiddle":M=(K,Q)=>[K/2,Q],x=(K,Q)=>[K/2,0];break;case"bottomLeft":w=!0,M=(K,Q)=>[0,Q],x=(K,Q)=>[K,0];break;case"middleLeft":R=!0,M=(K,Q)=>[0,Q/2],x=(K,Q)=>[K,Q/2];break}const D=M(o,c),P=x(o,c);let I=y(...P);const H=m(r+I[0]),U=m(a+I[1]);let N=1,O=1,[G,oe]=this.screenToPageTranslation(t.movementX,t.movementY);if([G,oe]=E(G/n,oe/s),w){const K=Math.hypot(o,c);N=O=Math.max(Math.min(Math.hypot(P[0]-D[0]-G,P[1]-D[1]-oe)/K,1/o,1/c),h/o,d/c)}else R?N=Math.max(h,Math.min(1,Math.abs(P[0]-D[0]-G)))/o:O=Math.max(d,Math.min(1,Math.abs(P[1]-D[1]-oe)))/c;const se=m(o*N),le=m(c*O);I=y(...x(se,le));const ue=H-I[0],z=U-I[1];this.width=se,this.height=le,this.x=ue,this.y=z,this.setDims(n*se,s*le),this.fixAndSetPosition()},hN=function(e){const{isMac:t}=so.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},R6=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const n=new AbortController,s=this._uiManager.combinedSignal(n);if(t){this.div.classList.add("moving"),Y(this,n_,e.clientX),Y(this,i_,e.clientY);const a=o=>{const{clientX:c,clientY:h}=o,[d,m]=this.screenToPageTranslation(c-S(this,n_),h-S(this,i_));Y(this,n_,c),Y(this,i_,h),this._uiManager.dragSelectedEditors(d,m)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:s})}const r=()=>{n.abort(),t&&this.div.classList.remove("moving"),Y(this,Bg,!1),this._uiManager.endDragSession()||Z(this,Gn,hN).call(this,e)};window.addEventListener("pointerup",r,{signal:s}),window.addEventListener("blur",r,{signal:s})},fN=function(){if(S(this,ap)||!this.div)return;Y(this,ap,new AbortController);const e=this._uiManager.combinedSignal(S(this,ap));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},D6=function(e){Mi._resizerKeyboardManager.exec(this,e)},B6=function(e){var t;S(this,cf)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==S(this,ia)&&Z(this,Gn,vx).call(this)},L6=function(e){Y(this,PS,S(this,cf)?e:"")},dN=function(e){if(S(this,Oc))for(const t of S(this,Oc))t.tabIndex=e},vx=function(){if(Y(this,cf,!1),Z(this,Gn,dN).call(this,-1),S(this,Dg)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=S(this,Dg);Z(this,Gn,cN).call(this,e,t,n,s),Y(this,Dg,null)}},te(Mi,FS),bn(Mi,"_l10n",null),bn(Mi,"_l10nResizer",null),bn(Mi,"_borderLineWidth",-1),bn(Mi,"_colorManager",new $L),bn(Mi,"_zIndex",1),bn(Mi,"_telemetryTimeout",1e3);let Oi=Mi;class Ooe extends Oi{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const FH=3285377520,Ll=4294901760,Xu=65535;class N6{constructor(e){this.h1=e?e&4294967295:FH,this.h2=e?e&4294967295:FH}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let E=0,M=e.length;E<M;E++){const x=e.charCodeAt(E);x<=255?t[n++]=x:(t[n++]=x>>>8,t[n++]=x&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,c=0,h=this.h1,d=this.h2;const m=3432918353,v=461845907,y=m&Xu,A=v&Xu;for(let E=0;E<s;E++)E&1?(o=a[E],o=o*m&Ll|o*y&Xu,o=o<<15|o>>>17,o=o*v&Ll|o*A&Xu,h^=o,h=h<<13|h>>>19,h=h*5+3864292196):(c=a[E],c=c*m&Ll|c*y&Xu,c=c<<15|c>>>17,c=c*v&Ll|c*A&Xu,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,r){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*m&Ll|o*y&Xu,o=o<<15|o>>>17,o=o*v&Ll|o*A&Xu,s&1?h^=o:d^=o}this.h1=h,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ll|e*36045&Xu,t=t*4283543511&Ll|((t<<16|e>>>16)*2950163797&Ll)>>>16,e^=t>>>1,e=e*444984403&Ll|e*60499&Xu,t=t*3301882366&Ll|((t<<16|e>>>16)*3120437893&Ll)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const pN=Object.freeze({map:null,hash:"",transfer:void 0});var Ng,Ig,Fr,qw,I6;class mP{constructor(){te(this,qw);te(this,Ng,!1);te(this,Ig,null);te(this,Fr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=S(this,Fr).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return S(this,Fr).get(e)}remove(e){if(S(this,Fr).delete(e),S(this,Fr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of S(this,Fr).values())if(t instanceof Oi)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=S(this,Fr).get(e);let s=!1;if(n!==void 0)for(const[r,a]of Object.entries(t))n[r]!==a&&(s=!0,n[r]=a);else s=!0,S(this,Fr).set(e,t);s&&Z(this,qw,I6).call(this),t instanceof Oi&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return S(this,Fr).has(e)}getAll(){return S(this,Fr).size>0?cP(S(this,Fr)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return S(this,Fr).size}resetModified(){S(this,Ng)&&(Y(this,Ng,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new P6(this)}get serializable(){if(S(this,Fr).size===0)return pN;const e=new Map,t=new N6,n=[],s=Object.create(null);let r=!1;for(const[a,o]of S(this,Fr)){const c=o instanceof Oi?o.serialize(!1,s):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:pN}get editorStats(){let e=null;const t=new Map;for(const n of S(this,Fr).values()){if(!(n instanceof Oi))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:r}=s;t.has(r)||t.set(r,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const a=e[r]||(e[r]=new Map);for(const[o,c]of Object.entries(s)){if(o==="type")continue;let h=a.get(o);h||(h=new Map,a.set(o,h));const d=h.get(c)??0;h.set(c,d+1)}}for(const[n,s]of t)e[n]=s.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){Y(this,Ig,null)}get modifiedIds(){if(S(this,Ig))return S(this,Ig);const e=[];for(const t of S(this,Fr).values())!(t instanceof Oi)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return Y(this,Ig,{ids:new Set(e),hash:e.join(",")})}}Ng=new WeakMap,Ig=new WeakMap,Fr=new WeakMap,qw=new WeakSet,I6=function(){S(this,Ng)||(Y(this,Ng,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var HS;class P6 extends mP{constructor(t){super();te(this,HS);const{map:n,hash:s,transfer:r}=t.serializable,a=structuredClone(n,r?{transfer:r}:null);Y(this,HS,{map:a,hash:s,transfer:r})}get print(){rs("Should not call PrintAnnotationStorage.print")}get serializable(){return S(this,HS)}get modifiedIds(){return oi(this,"modifiedIds",{ids:new Set,hash:""})}}HS=new WeakMap;var s_;class Uoe{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){te(this,s_,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),S(this,s_).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||S(this,s_).has(e.loadedName))){if(_r(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:r}=e,a=new FontFace(n,s,r);this.addNativeFontFace(a);try{await a.load(),S(this,s_).add(n),t==null||t(e)}catch{Vn(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}rs("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Vn(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return oi(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Ba||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),oi(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(_r(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return oi(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(D,P){return D.charCodeAt(P)<<24|D.charCodeAt(P+1)<<16|D.charCodeAt(P+2)<<8|D.charCodeAt(P+3)&255}function s(D,P,I,H){const U=D.substring(0,P),N=D.substring(P+I);return U+H+N}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let h=0;function d(D,P){if(++h>30){Vn("Load test font never loaded."),P();return}if(c.font="30px "+D,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(d.bind(null,D,P))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,m.length,m);const A=16,E=1482184792;let M=n(v,A);for(r=0,a=m.length-3;r<a;r+=4)M=M-E+n(m,r)|0;r<m.length&&(M=M-E+n(m+"XXX",r)|0),v=s(v,A,4,boe(M));const x=`url(data:font/opentype;base64,${btoa(v)});`,w=`@font-face {font-family:"${m}";src:${x}}`;this.insertRule(w);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const D of[e.loadedName,m]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=D,R.append(P)}this._document.body.append(R),d(m,()=>{R.remove(),t.complete()})}}s_=new WeakMap;class Foe{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=n}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Coe(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(r){Vn(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[t]=function(r,a){};const s=[];for(let r=0,a=n.length;r<a;)switch(n[r++]){case Wh.BEZIER_CURVE_TO:{const[o,c,h,d,m,v]=n.slice(r,r+6);s.push(y=>y.bezierCurveTo(o,c,h,d,m,v)),r+=6}break;case Wh.MOVE_TO:{const[o,c]=n.slice(r,r+2);s.push(h=>h.moveTo(o,c)),r+=2}break;case Wh.LINE_TO:{const[o,c]=n.slice(r,r+2);s.push(h=>h.lineTo(o,c)),r+=2}break;case Wh.QUADRATIC_CURVE_TO:{const[o,c,h,d]=n.slice(r,r+4);s.push(m=>m.quadraticCurveTo(o,c,h,d)),r+=4}break;case Wh.RESTORE:s.push(o=>o.restore());break;case Wh.SAVE:s.push(o=>o.save());break;case Wh.SCALE:_r(s.length===2,"Scale command is only valid at the third position.");break;case Wh.TRANSFORM:{const[o,c,h,d,m,v]=n.slice(r,r+6);s.push(y=>y.transform(o,c,h,d,m,v)),r+=6}break;case Wh.TRANSLATE:{const[o,c]=n.slice(r,r+2);s.push(h=>h.translate(o,c)),r+=2}break}return this.compiledGlyphs[t]=function(a,o){s[0](a),s[1](a),a.scale(o,-o);for(let c=2,h=s.length;c<h;c++)s[c](a)}}}var zS;class O6{constructor({enableHWA:e=!1}){te(this,zS,!1);Y(this,zS,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!S(this,zS)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){rs("Abstract method `_createCanvas` called.")}}zS=new WeakMap;class Hoe extends O6{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class U6{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){rs("Abstract method `_fetch` called.")}}class F6 extends U6{async _fetch(e){const t=await v2(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):g2(t)}}class H6{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,r){return"none"}destroy(e=!1){}}var Pg,Og,ih,uf,Ca,Yw,Ug,Gt,Ea,Sy,Ey,hC,My,z6,mN,Ty,yx,_x,gN,Ax;class zoe extends H6{constructor({docId:t,ownerDocument:n=globalThis.document}){super();te(this,Gt);te(this,Pg);te(this,Og);te(this,ih);te(this,uf);te(this,Ca);te(this,Yw);te(this,Ug,0);Y(this,uf,t),Y(this,Ca,n)}addFilter(t){if(!t)return"none";let n=S(this,Gt,Ea).get(t);if(n)return n;const[s,r,a]=Z(this,Gt,hC).call(this,t),o=t.length===1?s:`${s}${r}${a}`;if(n=S(this,Gt,Ea).get(o),n)return S(this,Gt,Ea).set(t,n),n;const c=`g_${S(this,uf)}_transfer_map_${Ja(this,Ug)._++}`,h=Z(this,Gt,My).call(this,c);S(this,Gt,Ea).set(t,h),S(this,Gt,Ea).set(o,h);const d=Z(this,Gt,Ty).call(this,c);return Z(this,Gt,_x).call(this,s,r,a,d),h}addHCMFilter(t,n){var A;const s=`${t}-${n}`,r="base";let a=S(this,Gt,Sy).get(r);if((a==null?void 0:a.key)===s||(a?((A=a.filter)==null||A.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},S(this,Gt,Sy).set(r,a)),!t||!n))return a.url;const o=Z(this,Gt,Ax).call(this,t);t=Zt.makeHexColor(...o);const c=Z(this,Gt,Ax).call(this,n);if(n=Zt.makeHexColor(...c),S(this,Gt,Ey).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const h=new Array(256);for(let E=0;E<=255;E++){const M=E/255;h[E]=M<=.03928?M/12.92:((M+.055)/1.055)**2.4}const d=h.join(","),m=`g_${S(this,uf)}_hcm_filter`,v=a.filter=Z(this,Gt,Ty).call(this,m);Z(this,Gt,_x).call(this,d,d,d,v),Z(this,Gt,mN).call(this,v);const y=(E,M)=>{const x=o[E]/255,w=c[E]/255,R=new Array(M+1);for(let D=0;D<=M;D++)R[D]=x+D/M*(w-x);return R.join(",")};return Z(this,Gt,_x).call(this,y(0,5),y(1,5),y(2,5),v),a.url=Z(this,Gt,My).call(this,m),a.url}addAlphaFilter(t){let n=S(this,Gt,Ea).get(t);if(n)return n;const[s]=Z(this,Gt,hC).call(this,[t]),r=`alpha_${s}`;if(n=S(this,Gt,Ea).get(r),n)return S(this,Gt,Ea).set(t,n),n;const a=`g_${S(this,uf)}_alpha_map_${Ja(this,Ug)._++}`,o=Z(this,Gt,My).call(this,a);S(this,Gt,Ea).set(t,o),S(this,Gt,Ea).set(r,o);const c=Z(this,Gt,Ty).call(this,a);return Z(this,Gt,gN).call(this,s,c),o}addLuminosityFilter(t){let n=S(this,Gt,Ea).get(t||"luminosity");if(n)return n;let s,r;if(t?([s]=Z(this,Gt,hC).call(this,[t]),r=`luminosity_${s}`):r="luminosity",n=S(this,Gt,Ea).get(r),n)return S(this,Gt,Ea).set(t,n),n;const a=`g_${S(this,uf)}_luminosity_map_${Ja(this,Ug)._++}`,o=Z(this,Gt,My).call(this,a);S(this,Gt,Ea).set(t,o),S(this,Gt,Ea).set(r,o);const c=Z(this,Gt,Ty).call(this,a);return Z(this,Gt,z6).call(this,c),t&&Z(this,Gt,gN).call(this,s,c),o}addHighlightHCMFilter(t,n,s,r,a){var w;const o=`${n}-${s}-${r}-${a}`;let c=S(this,Gt,Sy).get(t);if((c==null?void 0:c.key)===o||(c?((w=c.filter)==null||w.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},S(this,Gt,Sy).set(t,c)),!n||!s))return c.url;const[h,d]=[n,s].map(Z(this,Gt,Ax).bind(this));let m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),v=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[y,A]=[r,a].map(Z(this,Gt,Ax).bind(this));v<m&&([m,v,y,A]=[v,m,A,y]),S(this,Gt,Ey).style.color="";const E=(R,D,P)=>{const I=new Array(256),H=(v-m)/P,U=R/255,N=(D-R)/(255*P);let O=0;for(let G=0;G<=P;G++){const oe=Math.round(m+G*H),se=U+G*N;for(let le=O;le<=oe;le++)I[le]=se;O=oe+1}for(let G=O;G<256;G++)I[G]=I[O-1];return I.join(",")},M=`g_${S(this,uf)}_hcm_${t}_filter`,x=c.filter=Z(this,Gt,Ty).call(this,M);return Z(this,Gt,mN).call(this,x),Z(this,Gt,_x).call(this,E(y[0],A[0],5),E(y[1],A[1],5),E(y[2],A[2],5),x),c.url=Z(this,Gt,My).call(this,M),c.url}destroy(t=!1){t&&S(this,Gt,Sy).size!==0||(S(this,ih)&&(S(this,ih).parentNode.parentNode.remove(),Y(this,ih,null)),S(this,Og)&&(S(this,Og).clear(),Y(this,Og,null)),Y(this,Ug,0))}}Pg=new WeakMap,Og=new WeakMap,ih=new WeakMap,uf=new WeakMap,Ca=new WeakMap,Yw=new WeakMap,Ug=new WeakMap,Gt=new WeakSet,Ea=function(){return S(this,Og)||Y(this,Og,new Map)},Sy=function(){return S(this,Yw)||Y(this,Yw,new Map)},Ey=function(){if(!S(this,ih)){const t=S(this,Ca).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=S(this,Ca).createElementNS(Jh,"svg");s.setAttribute("width",0),s.setAttribute("height",0),Y(this,ih,S(this,Ca).createElementNS(Jh,"defs")),t.append(s),s.append(S(this,ih)),S(this,Ca).body.append(t)}return S(this,ih)},hC=function(t){if(t.length===1){const h=t[0],d=new Array(256);for(let v=0;v<256;v++)d[v]=h[v]/255;const m=d.join(",");return[m,m,m]}const[n,s,r]=t,a=new Array(256),o=new Array(256),c=new Array(256);for(let h=0;h<256;h++)a[h]=n[h]/255,o[h]=s[h]/255,c[h]=r[h]/255;return[a.join(","),o.join(","),c.join(",")]},My=function(t){if(S(this,Pg)===void 0){Y(this,Pg,"");const n=S(this,Ca).URL;n!==S(this,Ca).baseURI&&(y2(n)?Vn('#createUrl: ignore "data:"-URL for performance reasons.'):Y(this,Pg,n.split("#",1)[0]))}return`url(${S(this,Pg)}#${t})`},z6=function(t){const n=S(this,Ca).createElementNS(Jh,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},mN=function(t){const n=S(this,Ca).createElementNS(Jh,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Ty=function(t){const n=S(this,Ca).createElementNS(Jh,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),S(this,Gt,Ey).append(n),n},yx=function(t,n,s){const r=S(this,Ca).createElementNS(Jh,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)},_x=function(t,n,s,r){const a=S(this,Ca).createElementNS(Jh,"feComponentTransfer");r.append(a),Z(this,Gt,yx).call(this,a,"feFuncR",t),Z(this,Gt,yx).call(this,a,"feFuncG",n),Z(this,Gt,yx).call(this,a,"feFuncB",s)},gN=function(t,n){const s=S(this,Ca).createElementNS(Jh,"feComponentTransfer");n.append(s),Z(this,Gt,yx).call(this,s,"feFuncA",t)},Ax=function(t){return S(this,Gt,Ey).style.color=t,pP(getComputedStyle(S(this,Gt,Ey)).getPropertyValue("color"))};class G6{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){rs("Abstract method `_fetch` called.")}}class k6 extends G6{async _fetch(e){const t=await v2(e,"arraybuffer");return new Uint8Array(t)}}if(Ba){var vN=Promise.withResolvers(),Yx=null;(async()=>{const e=await zT(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await zT(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await zT(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await zT(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,a;return new Map(Object.entries({fs:e,http:t,https:n,url:s,canvas:r,path2d:a}))})().then(e=>{Yx=e,vN.resolve()},e=>{Vn(`loadPackages: ${e}`),Yx=new Map,vN.resolve()})}class Up{static get promise(){return vN.promise}static get(e){return Yx==null?void 0:Yx.get(e)}}async function V6(i){const t=await Up.get("fs").promises.readFile(i);return new Uint8Array(t)}class Goe extends H6{}class koe extends O6{_createCanvas(e,t){return Up.get("canvas").createCanvas(e,t)}}class Voe extends U6{async _fetch(e){return V6(e)}}class joe extends G6{async _fetch(e){return V6(e)}}const no={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function yN(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),i.clip(s)}class gP{getPattern(){rs("Abstract method `getPattern` called.")}}class Xoe extends gP{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let r;if(s===no.STROKE||s===no.FILL){const a=t.current.getClippedPathBoundingBox(s,ws(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",o,c),d=h.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),n=Zt.transform(n,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),yN(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),r=e.createPattern(h.canvas,"no-repeat");const m=new DOMMatrix(n);r.setTransform(m)}else yN(e,this._bbox),r=this._createGradient(e);return r}}function qB(i,e,t,n,s,r,a,o){const c=e.coords,h=e.colors,d=i.data,m=i.width*4;let v;c[t+1]>c[n+1]&&(v=t,t=n,n=v,v=r,r=a,a=v),c[n+1]>c[s+1]&&(v=n,n=s,s=v,v=a,a=o,o=v),c[t+1]>c[n+1]&&(v=t,t=n,n=v,v=r,r=a,a=v);const y=(c[t]+e.offsetX)*e.scaleX,A=(c[t+1]+e.offsetY)*e.scaleY,E=(c[n]+e.offsetX)*e.scaleX,M=(c[n+1]+e.offsetY)*e.scaleY,x=(c[s]+e.offsetX)*e.scaleX,w=(c[s+1]+e.offsetY)*e.scaleY;if(A>=w)return;const R=h[r],D=h[r+1],P=h[r+2],I=h[a],H=h[a+1],U=h[a+2],N=h[o],O=h[o+1],G=h[o+2],oe=Math.round(A),se=Math.round(w);let le,ue,z,K,Q,de,W,he;for(let xe=oe;xe<=se;xe++){if(xe<M){const Ue=xe<A?0:(A-xe)/(A-M);le=y-(y-E)*Ue,ue=R-(R-I)*Ue,z=D-(D-H)*Ue,K=P-(P-U)*Ue}else{let Ue;xe>w?Ue=1:M===w?Ue=0:Ue=(M-xe)/(M-w),le=E-(E-x)*Ue,ue=I-(I-N)*Ue,z=H-(H-O)*Ue,K=U-(U-G)*Ue}let ye;xe<A?ye=0:xe>w?ye=1:ye=(A-xe)/(A-w),Q=y-(y-x)*ye,de=R-(R-N)*ye,W=D-(D-O)*ye,he=P-(P-G)*ye;const fe=Math.round(Math.min(le,Q)),De=Math.round(Math.max(le,Q));let Ce=m*xe+fe*4;for(let Ue=fe;Ue<=De;Ue++)ye=(le-Ue)/(le-Q),ye<0?ye=0:ye>1&&(ye=1),d[Ce++]=ue-(ue-de)*ye|0,d[Ce++]=z-(z-W)*ye|0,d[Ce++]=K-(K-he)*ye|0,d[Ce++]=255}}function qoe(i,e,t){const n=e.coords,s=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,c=Math.floor(n.length/o)-1,h=o-1;for(r=0;r<c;r++){let d=r*o;for(let m=0;m<h;m++,d++)qB(i,t,n[d],n[d+1],n[d+o],s[d],s[d+1],s[d+o]),qB(i,t,n[d+o+1],n[d+1],n[d+o],s[d+o+1],s[d+1],s[d+o])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)qB(i,t,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class Yoe extends gP{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-c,m=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),y=h/m,A=d/v,E={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/y,scaleY:1/A},M=m+2*2,x=v+2*2,w=n.getCanvas("mesh",M,x),R=w.context,D=R.createImageData(m,v);if(t){const I=D.data;for(let H=0,U=I.length;H<U;H+=4)I[H]=t[0],I[H+1]=t[1],I[H+2]=t[2],I[H+3]=255}for(const I of this._figures)qoe(D,I,E);return R.putImageData(D,2,2),{canvas:w.canvas,offsetX:o-2*y,offsetY:c-2*A,scaleX:y,scaleY:A}}getPattern(e,t,n,s){yN(e,this._bbox);let r;if(s===no.SHADING)r=Zt.singularValueDecompose2dScale(ws(e));else if(r=Zt.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=Zt.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,s===no.SHADING?null:this._background,t.cachedCanvases);return s!==no.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class Woe extends gP{getPattern(){return"hotpink"}}function Koe(i){switch(i[0]){case"RadialAxial":return new Xoe(i);case"Mesh":return new Yoe(i);case"Dummy":return new Woe}throw new Error(`Unknown IR type: ${i[0]}`)}const HH={COLORED:1,UNCOLORED:2},Ww=class Ww{constructor(e,t,n,s,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:s,tilingType:r,color:a,canvasGraphicsFactory:o}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),p2("TilingType: "+r);const d=t[0],m=t[1],v=t[2],y=t[3],A=v-d,E=y-m,M=Zt.singularValueDecompose2dScale(this.matrix),x=Zt.singularValueDecompose2dScale(this.baseTransform),w=M[0]*x[0],R=M[1]*x[1];let D=A,P=E,I=!1,H=!1;const U=Math.ceil(c*w),N=Math.ceil(h*R),O=Math.ceil(A*w),G=Math.ceil(E*R);U>=O?D=c:I=!0,N>=G?P=h:H=!0;const oe=this.getSizeAndScale(D,this.ctx.canvas.width,w),se=this.getSizeAndScale(P,this.ctx.canvas.height,R),le=e.cachedCanvases.getCanvas("pattern",oe.size,se.size),ue=le.context,z=o.createCanvasGraphics(ue);if(z.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(z,s,a),ue.translate(-oe.scale*d,-se.scale*m),z.transform(oe.scale,0,0,se.scale,0,0),ue.save(),this.clipBbox(z,d,m,v,y),z.baseTransform=ws(z.ctx),z.executeOperatorList(n),z.endDrawing(),ue.restore(),I||H){const K=le.canvas;I&&(D=c),H&&(P=h);const Q=this.getSizeAndScale(D,this.ctx.canvas.width,w),de=this.getSizeAndScale(P,this.ctx.canvas.height,R),W=Q.size,he=de.size,xe=e.cachedCanvases.getCanvas("pattern-workaround",W,he),ye=xe.context,fe=I?Math.floor(A/c):0,De=H?Math.floor(E/h):0;for(let Ce=0;Ce<=fe;Ce++)for(let Ue=0;Ue<=De;Ue++)ye.drawImage(K,W*Ce,he*Ue,W,he,0,0,W,he);return{canvas:xe.canvas,scaleX:Q.scale,scaleY:de.scale,offsetX:d,offsetY:m}}return{canvas:le.canvas,scaleX:oe.scale,scaleY:se.scale,offsetX:d,offsetY:m}}getSizeAndScale(e,t,n){const s=Math.max(Ww.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=s?r=s:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,s,r){const a=s-t,o=r-n;e.ctx.rect(t,n,a,o),e.current.updateRectMinMax(ws(e.ctx),[t,n,s,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,r=e.current;switch(t){case HH.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case HH.UNCOLORED:const o=Zt.makeHexColor(n[0],n[1],n[2]);s.fillStyle=o,s.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new Aoe(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,s){let r=n;s!==no.SHADING&&(r=Zt.transform(r,t.baseTransform),this.matrix&&(r=Zt.transform(r,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(o),c}};bn(Ww,"MAX_PATTERN_SIZE",3e3);let _N=Ww;function Joe({src:i,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=so.isLittleEndian?4278190080:255,[c,h]=a?[r,o]:[o,r],d=n>>3,m=n&7,v=i.length;t=new Uint32Array(t.buffer);let y=0;for(let A=0;A<s;A++){for(const M=e+d;e<M;e++){const x=e<v?i[e]:255;t[y++]=x&128?h:c,t[y++]=x&64?h:c,t[y++]=x&32?h:c,t[y++]=x&16?h:c,t[y++]=x&8?h:c,t[y++]=x&4?h:c,t[y++]=x&2?h:c,t[y++]=x&1?h:c}if(m===0)continue;const E=e<v?i[e++]:255;for(let M=0;M<m;M++)t[y++]=E&1<<7-M?h:c}return{srcPos:e,destPos:y}}const zH=16,GH=100,Zoe=15,kH=10,VH=1e3,wo=16;function Qoe(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(n,s){e.translate(n,s),this.__originalTranslate(n,s)},i.scale=function(n,s){e.scale(n,s),this.__originalScale(n,s)},i.transform=function(n,s,r,a,o,c){e.transform(n,s,r,a,o,c),this.__originalTransform(n,s,r,a,o,c)},i.setTransform=function(n,s,r,a,o,c){e.setTransform(n,s,r,a,o,c),this.__originalSetTransform(n,s,r,a,o,c)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){e.rotate(n),this.__originalRotate(n)},i.clip=function(n){e.clip(n),this.__originalClip(n)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,s,r,a,o){e.bezierCurveTo(t,n,s,r,a,o),this.__originalBezierCurveTo(t,n,s,r,a,o)},i.rect=function(t,n,s,r){e.rect(t,n,s,r),this.__originalRect(t,n,s,r)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class $oe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function jT(i,e,t,n,s,r,a,o,c,h){const[d,m,v,y,A,E]=ws(i);if(m===0&&v===0){const w=a*d+A,R=Math.round(w),D=o*y+E,P=Math.round(D),I=(a+c)*d+A,H=Math.abs(Math.round(I)-R)||1,U=(o+h)*y+E,N=Math.abs(Math.round(U)-P)||1;return i.setTransform(Math.sign(d),0,0,Math.sign(y),R,P),i.drawImage(e,t,n,s,r,0,0,H,N),i.setTransform(d,m,v,y,A,E),[H,N]}if(d===0&&y===0){const w=o*v+A,R=Math.round(w),D=a*m+E,P=Math.round(D),I=(o+h)*v+A,H=Math.abs(Math.round(I)-R)||1,U=(a+c)*m+E,N=Math.abs(Math.round(U)-P)||1;return i.setTransform(0,Math.sign(m),Math.sign(v),0,R,P),i.drawImage(e,t,n,s,r,0,0,N,H),i.setTransform(d,m,v,y,A,E),[N,H]}i.drawImage(e,t,n,s,r,a,o,c,h);const M=Math.hypot(d,m),x=Math.hypot(v,y);return[M*c,x*h]}function ele(i){const{width:e,height:t}=i;if(e>VH||t>VH)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let a=new Uint8Array(r*(t+1)),o,c,h;const d=e+7&-8;let m=new Uint8Array(d*t),v=0;for(const x of i.data){let w=128;for(;w>0;)m[v++]=x&w?0:255,w>>=1}let y=0;for(v=0,m[v]!==0&&(a[0]=1,++y),c=1;c<e;c++)m[v]!==m[v+1]&&(a[c]=m[v]?2:1,++y),v++;for(m[v]!==0&&(a[c]=2,++y),o=1;o<t;o++){v=o*d,h=o*r,m[v-d]!==m[v]&&(a[h]=m[v]?1:8,++y);let x=(m[v]?4:0)+(m[v-d]?8:0);for(c=1;c<e;c++)x=(x>>2)+(m[v+1]?4:0)+(m[v-d+1]?8:0),s[x]&&(a[h+c]=s[x],++y),v++;if(m[v-d]!==m[v]&&(a[h+c]=m[v]?2:4,++y),y>n)return null}for(v=d*(t-1),h=o*r,m[v]!==0&&(a[h]=8,++y),c=1;c<e;c++)m[v]!==m[v+1]&&(a[h+c]=m[v]?4:8,++y),v++;if(m[v]!==0&&(a[h+c]=4,++y),y>n)return null;const A=new Int32Array([0,r,-1,0,-r,0,0,0,1]),E=new Path2D;for(o=0;y&&o<=t;o++){let x=o*r;const w=x+e;for(;x<w&&!a[x];)x++;if(x===w)continue;E.moveTo(x%r,o);const R=x;let D=a[x];do{const P=A[D];do x+=P;while(!a[x]);const I=a[x];I!==5&&I!==10?(D=I,a[x]=0):(D=I&51*D>>4,a[x]&=D>>2|D<<2),E.lineTo(x%r,x/r|0),a[x]||--y}while(R!==x);--o}return m=null,a=null,function(x){x.save(),x.scale(1/e,-1/t),x.translate(0,-t),x.fill(E),x.beginPath(),x.restore()}}class jH{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a6,this.textMatrixScale=1,this.fontMatrix=XL,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Sa.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=Zt.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=Zt.applyTransform(t,e),s=Zt.applyTransform(t.slice(2),e),r=Zt.applyTransform([t[0],t[3]],e),a=Zt.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],s[0],r[0],a[0]),this.minY=Math.min(this.minY,n[1],s[1],r[1],a[1]),this.maxX=Math.max(this.maxX,n[0],s[0],r[0],a[0]),this.maxY=Math.max(this.maxY,n[1],s[1],r[1],a[1])}updateScalingPathMinMax(e,t){Zt.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,s,r,a,o,c,h,d){const m=Zt.bezierBoundingBox(t,n,s,r,a,o,c,h,d);d||this.updateRectMinMax(e,m)}getPathBoundingBox(e=no.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===no.STROKE){t||rs("Stroke bounding box must include transform.");const s=Zt.singularValueDecompose2dScale(t),r=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;n[0]-=r,n[1]-=a,n[2]+=r,n[3]+=a}return n}updateClipFromPath(){const e=Zt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=no.FILL,t=null){return Zt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function XH(i,e){if(typeof ImageData<"u"&&e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%wo,r=(t-s)/wo,a=s===0?r:r+1,o=i.createImageData(n,wo);let c=0,h;const d=e.data,m=o.data;let v,y,A,E;if(e.kind===sC.GRAYSCALE_1BPP){const M=d.byteLength,x=new Uint32Array(m.buffer,0,m.byteLength>>2),w=x.length,R=n+7>>3,D=4294967295,P=so.isLittleEndian?4278190080:255;for(v=0;v<a;v++){for(A=v<r?wo:s,h=0,y=0;y<A;y++){const I=M-c;let H=0;const U=I>R?n:I*8-7,N=U&-8;let O=0,G=0;for(;H<N;H+=8)G=d[c++],x[h++]=G&128?D:P,x[h++]=G&64?D:P,x[h++]=G&32?D:P,x[h++]=G&16?D:P,x[h++]=G&8?D:P,x[h++]=G&4?D:P,x[h++]=G&2?D:P,x[h++]=G&1?D:P;for(;H<U;H++)O===0&&(G=d[c++],O=128),x[h++]=G&O?D:P,O>>=1}for(;h<w;)x[h++]=0;i.putImageData(o,0,v*wo)}}else if(e.kind===sC.RGBA_32BPP){for(y=0,E=n*wo*4,v=0;v<r;v++)m.set(d.subarray(c,c+E)),c+=E,i.putImageData(o,0,y),y+=wo;v<a&&(E=n*s*4,m.set(d.subarray(c,c+E)),i.putImageData(o,0,y))}else if(e.kind===sC.RGB_24BPP)for(A=wo,E=n*A,v=0;v<a;v++){for(v>=r&&(A=s,E=n*A),h=0,y=E;y--;)m[h++]=d[c++],m[h++]=d[c++],m[h++]=d[c++],m[h++]=255;i.putImageData(o,0,v*wo)}else throw new Error(`bad image kind: ${e.kind}`)}function qH(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%wo,r=(t-s)/wo,a=s===0?r:r+1,o=i.createImageData(n,wo);let c=0;const h=e.data,d=o.data;for(let m=0;m<a;m++){const v=m<r?wo:s;({srcPos:c}=Joe({src:h,srcPos:c,dest:d,width:n,height:v,nonBlackColor:0})),i.putImageData(o,0,m*wo)}}function ox(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function XT(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Ba){const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}}function YH(i,e){if(e)return!0;const t=Zt.singularValueDecompose2dScale(i);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Op.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const tle=["butt","round","square"],nle=["miter","round","bevel"],ile={},WH={};var Hp,AN,bN;const EP=class EP{constructor(e,t,n,s,r,{optionalContentConfig:a,markedContentStack:o=null},c,h){te(this,Hp);this.ctx=e,this.current=new jH(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new $oe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,n){const c=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...ws(this.compositeCtx))}this.ctx.save(),XT(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ws(this.ctx)}executeOperatorList(e,t,n,s){const r=e.argsArray,a=e.fnArray;let o=t||0;const c=r.length;if(c===o)return o;const h=c-o>kH&&typeof n=="function",d=h?Date.now()+Zoe:0;let m=0;const v=this.commonObjs,y=this.objs;let A;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,n),o;if(A=a[o],A!==Bc.dependency)this[A].apply(this,r[o]);else for(const E of r[o]){const M=E.startsWith("g_")?v:y;if(!M.has(E))return M.get(E,n),o}if(o++,o===c)return o;if(h&&++m>kH){if(Date.now()>d)return n(),o;m=0}}}endDrawing(){Z(this,Hp,AN).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),Z(this,Hp,bN).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=n,c=s,h="prescale1",d,m;for(;r>2&&o>1||a>2&&c>1;){let v=o,y=c;r>2&&o>1&&(v=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/v),a>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/y),d=this.cachedCanvases.getCanvas(h,v,y),m=d.context,m.clearRect(0,0,v,y),m.drawImage(e,0,0,o,c,0,0,v,y),e=d.canvas,o=v,c=y,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:s}=e,r=this.current.fillColor,a=this.current.patternFill,o=ws(t);let c,h,d,m;if((e.bitmap||e.data)&&e.count>1){const U=e.bitmap||e.data.buffer;h=JSON.stringify(a?o:[o.slice(0,4),r]),c=this._cachedBitmapsMap.get(U),c||(c=new Map,this._cachedBitmapsMap.set(U,c));const N=c.get(h);if(N&&!a){const O=Math.round(Math.min(o[0],o[2])+o[4]),G=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:N,offsetX:O,offsetY:G}}d=N}d||(m=this.cachedCanvases.getCanvas("maskCanvas",n,s),qH(m.context,e));let v=Zt.transform(o,[1/n,0,0,-1/s,0,0]);v=Zt.transform(v,[1,0,0,1,0,-s]);const[y,A,E,M]=Zt.getAxialAlignedBoundingBox([0,0,n,s],v),x=Math.round(E-y)||1,w=Math.round(M-A)||1,R=this.cachedCanvases.getCanvas("fillCanvas",x,w),D=R.context,P=y,I=A;D.translate(-P,-I),D.transform(...v),d||(d=this._scaleImage(m.canvas,Kh(D)),d=d.img,c&&a&&c.set(h,d)),D.imageSmoothingEnabled=YH(ws(D),e.interpolate),jT(D,d,0,0,d.width,d.height,0,0,n,s),D.globalCompositeOperation="source-in";const H=Zt.transform(Kh(D),[1,0,0,1,-P,-I]);return D.fillStyle=a?r.getPattern(t,this,H,no.FILL):r,D.fillRect(0,0,n,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,R.canvas)),{canvas:R.canvas,offsetX:Math.round(P),offsetY:Math.round(I)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=tle[e]}setLineJoin(e){this.ctx.lineJoin=nle[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...ws(this.suspendedCtx)),ox(this.suspendedCtx,r),Qoe(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ox(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const r=s[0],a=s[1],o=s[2]-r,c=s[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,n,o,c,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,r,a,o,c,h,d,m){let v=e.canvas,y=c-d,A=h-m;if(a){const M=Zt.makeHexColor(...a);if(y<0||A<0||y+n>v.width||A+s>v.height){const x=this.cachedCanvases.getCanvas("maskExtension",n,s),w=x.context;w.drawImage(v,-y,-A),w.globalCompositeOperation="destination-atop",w.fillStyle=M,w.fillRect(0,0,n,s),w.globalCompositeOperation="source-over",v=x.canvas,y=A=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(y,A,n,s),e.clip(x),e.globalCompositeOperation="destination-atop",e.fillStyle=M,e.fillRect(y,A,n,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const E=new Path2D;E.rect(c,h,n,s),t.clip(E),t.globalCompositeOperation="destination-in",t.drawImage(v,y,A,n,s,c,h,n,s),t.restore()}save(){this.inSMaskMode?(ox(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ox(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,s,r,a){this.ctx.transform(e,t,n,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const s=this.ctx,r=this.current;let a=r.x,o=r.y,c,h;const d=ws(s),m=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,v=m?n.slice(0):null;for(let y=0,A=0,E=e.length;y<E;y++)switch(e[y]|0){case Bc.rectangle:a=t[A++],o=t[A++];const M=t[A++],x=t[A++],w=a+M,R=o+x;s.moveTo(a,o),M===0||x===0?s.lineTo(w,R):(s.lineTo(w,o),s.lineTo(w,R),s.lineTo(a,R)),m||r.updateRectMinMax(d,[a,o,w,R]),s.closePath();break;case Bc.moveTo:a=t[A++],o=t[A++],s.moveTo(a,o),m||r.updatePathMinMax(d,a,o);break;case Bc.lineTo:a=t[A++],o=t[A++],s.lineTo(a,o),m||r.updatePathMinMax(d,a,o);break;case Bc.curveTo:c=a,h=o,a=t[A+4],o=t[A+5],s.bezierCurveTo(t[A],t[A+1],t[A+2],t[A+3],a,o),r.updateCurvePathMinMax(d,c,h,t[A],t[A+1],t[A+2],t[A+3],a,o,v),A+=6;break;case Bc.curveTo2:c=a,h=o,s.bezierCurveTo(a,o,t[A],t[A+1],t[A+2],t[A+3]),r.updateCurvePathMinMax(d,c,h,a,o,t[A],t[A+1],t[A+2],t[A+3],v),a=t[A+2],o=t[A+3],A+=4;break;case Bc.curveTo3:c=a,h=o,a=t[A+2],o=t[A+3],s.bezierCurveTo(t[A],t[A+1],a,o,a,o),r.updateCurvePathMinMax(d,c,h,t[A],t[A+1],a,o,a,o,v),A+=4;break;case Bc.closePath:s.closePath();break}m&&r.updateScalingPathMinMax(d,v),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,Kh(t),no.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(t.save(),t.fillStyle=n.getPattern(t,this,Kh(t),no.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ile}eoClip(){this.pendingClip=WH}beginText(){this.current.textMatrix=a6,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var d;const n=this.commonObjs.get(e),s=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=n.fontMatrix||XL,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Vn("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const r=n.loadedName||"sans-serif",a=((d=n.systemFontInfo)==null?void 0:d.css)||`"${r}", ${n.fallbackName}`;let o="normal";n.black?o="900":n.bold&&(o="bold");const c=n.italic?"italic":"normal";let h=t;t<zH?h=zH:t>GH&&(h=GH),this.current.fontSizeScale=t/h,this.ctx.font=`${c} ${o} ${h}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,s,r,a){this.current.textMatrix=[e,t,n,s,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,s){const r=this.ctx,a=this.current,o=a.font,c=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,d=c&Sa.FILL_STROKE_MASK,m=!!(c&Sa.ADD_TO_PATH_FLAG),v=a.patternFill&&!o.missingFile;let y;(o.disableFontFace||m||v)&&(y=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||v?(r.save(),r.translate(t,n),r.beginPath(),y(r,h),s&&r.setTransform(...s),(d===Sa.FILL||d===Sa.FILL_STROKE)&&r.fill(),(d===Sa.STROKE||d===Sa.FILL_STROKE)&&r.stroke(),r.restore()):((d===Sa.FILL||d===Sa.FILL_STROKE)&&r.fillText(e,t,n),(d===Sa.STROKE||d===Sa.FILL_STROKE)&&r.strokeText(e,t,n)),m&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ws(r),x:t,y:n,fontSize:h,addToPath:y})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return oi(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const r=this.ctx,a=t.fontSizeScale,o=t.charSpacing,c=t.wordSpacing,h=t.fontDirection,d=t.textHScale*h,m=e.length,v=n.vertical,y=v?1:-1,A=n.defaultVMetrics,E=s*t.fontMatrix[0],M=t.textRenderingMode===Sa.FILL&&!n.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),h>0?r.scale(d,-1):r.scale(d,1);let x;if(t.patternFill){r.save();const I=t.fillColor.getPattern(r,this,Kh(r),no.FILL);x=ws(r),r.restore(),r.fillStyle=I}let w=t.lineWidth;const R=t.textMatrixScale;if(R===0||w===0){const I=t.textRenderingMode&Sa.FILL_STROKE_MASK;(I===Sa.STROKE||I===Sa.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=R;if(a!==1&&(r.scale(a,a),w/=a),r.lineWidth=w,n.isInvalidPDFjsFont){const I=[];let H=0;for(const U of e)I.push(U.unicode),H+=U.width;r.fillText(I.join(""),0,0),t.x+=H*E*d,r.restore(),this.compose();return}let D=0,P;for(P=0;P<m;++P){const I=e[P];if(typeof I=="number"){D+=y*I*s/1e3;continue}let H=!1;const U=(I.isSpace?c:0)+o,N=I.fontChar,O=I.accent;let G,oe,se=I.width;if(v){const ue=I.vmetric||A,z=-(I.vmetric?ue[1]:se*.5)*E,K=ue[2]*E;se=ue?-ue[0]:se,G=z/a,oe=(D+K)/a}else G=D/a,oe=0;if(n.remeasure&&se>0){const ue=r.measureText(N).width*1e3/s*a;if(se<ue&&this.isFontSubpixelAAEnabled){const z=se/ue;H=!0,r.save(),r.scale(z,1),G/=z}else se!==ue&&(G+=(se-ue)/2e3*s/a)}if(this.contentVisible&&(I.isInFont||n.missingFile)){if(M&&!O)r.fillText(N,G,oe);else if(this.paintChar(N,G,oe,x),O){const ue=G+s*O.offset.x/a,z=oe-s*O.offset.y/a;this.paintChar(O.fontChar,ue,z,x)}}const le=v?se*E-U*h:se*E+U*h;D+=le,H&&r.restore()}v?t.y-=D:t.x+=D*d,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,s=n.font,r=n.fontSize,a=n.fontDirection,o=s.vertical?1:-1,c=n.charSpacing,h=n.wordSpacing,d=n.textHScale*a,m=n.fontMatrix||XL,v=e.length,y=n.textRenderingMode===Sa.INVISIBLE;let A,E,M,x;if(!(y||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(d,a),A=0;A<v;++A){if(E=e[A],typeof E=="number"){x=o*E*r/1e3,this.ctx.translate(x,0),n.x+=x*d;continue}const w=(E.isSpace?h:0)+c,R=s.charProcOperatorList[E.operatorListId];if(!R){Vn(`Type3 character "${E.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=E,this.save(),t.scale(r,r),t.transform(...m),this.executeOperatorList(R),this.restore()),M=Zt.applyTransform([E.width,0],m)[0]*r+w,t.translate(M,0),n.x+=M*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,s,r,a){this.ctx.rect(n,s,r-n,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],s=this.baseTransform||ws(this.ctx),r={createCanvasGraphics:a=>new EP(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new _N(e,n,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=Zt.makeHexColor(e,t,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=Zt.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=Koe(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Kh(t),no.SHADING);const s=Kh(t);if(s){const{width:r,height:a}=t.canvas,[o,c,h,d]=Zt.getAxialAlignedBoundingBox([0,0,r,a],s);this.ctx.fillRect(o,c,h-o,d-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){rs("Should not call beginInlineImage")}beginImageData(){rs("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ws(this.ctx),t)){const n=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],n,s),this.current.updateRectMinMax(ws(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||p2("TODO: Support non-isolated groups."),e.knockout&&Vn("Knockout groups not supported.");const n=ws(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Zt.getAxialAlignedBoundingBox(e.bbox,ws(t));const r=[0,0,t.canvas.width,t.canvas.height];s=Zt.intersect(s,r)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-a,1),h=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,c,h]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(d,c,h),v=m.context;v.translate(-a,-o),v.transform(...n),e.smask?this.smaskStack.push({canvas:m.canvas,context:v,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),ox(t,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=ws(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=Zt.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,n,s,r){if(Z(this,Hp,AN).call(this),XT(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[c,h]=Zt.singularValueDecompose2dScale(ws(this.ctx)),{viewportScale:d}=this,m=Math.ceil(a*this.outputScaleX*d),v=Math.ceil(o*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(m,v);const{canvas:y,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(c,0,0,-h,0,o*h),XT(this.ctx)}else XT(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new jH(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Z(this,Hp,bN).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=ele(e)),s.compiled)){s.compiled(n);return}const r=this._createMaskCanvas(e),a=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,s=0,r,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const c=ws(o);o.transform(t,n,s,r,0,0);const h=this._createMaskCanvas(e);o.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let d=0,m=a.length;d<m;d+=2){const v=Zt.transform(c,[t,n,s,r,a[d],a[d+1]]),[y,A]=Zt.applyTransform([0,0],v);o.drawImage(h.canvas,y,A)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const r of e){const{data:a,width:o,height:c,transform:h}=r,d=this.cachedCanvases.getCanvas("maskCanvas",o,c),m=d.context;m.save();const v=this.getObject(a,r);qH(m,v),m.globalCompositeOperation="source-in",m.fillStyle=s?n.getPattern(m,this,Kh(t),no.FILL):n,m.fillRect(0,0,o,c),m.restore(),t.save(),t.transform(...h),t.scale(1,-1),jT(t,d.canvas,0,0,o,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Vn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,s){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){Vn("Dependent image isn't ready yet");return}const a=r.width,o=r.height,c=[];for(let h=0,d=s.length;h<d;h+=2)c.push({transform:[t,0,0,n,s[h],s[h+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,s=this.ctx;if(this.save(),!Ba){const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none")}s.scale(1/t,-1/n);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,n).context;XH(c,e),r=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(r,Kh(s));s.imageSmoothingEnabled=YH(ws(s),e.interpolate),jT(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const r=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",r,a).context;XH(c,e),s=this.applyTransferMapsToCanvas(c)}for(const r of t)n.save(),n.transform(...r.transform),n.scale(1,-1),jT(n,s,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===WH?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ws(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:r}=this.ctx.getTransform();let a,o;if(n===0&&s===0){const c=Math.abs(t),h=Math.abs(r);if(c===h)if(e===0)a=o=1/c;else{const d=c*e;a=o=d<1?1/d:1}else if(e===0)a=1/c,o=1/h;else{const d=c*e,m=h*e;a=d<1?1/d:1,o=m<1?1/m:1}}else{const c=Math.abs(t*r-n*s),h=Math.hypot(t,n),d=Math.hypot(s,r);if(e===0)a=d/c,o=h/c;else{const m=e*c;a=d>m?d/m:1,o=h>m?h/m:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[s,r]=this.getScaleForStroking();if(t.lineWidth=n||1,s===1&&r===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(s,r),a.length>0){const o=Math.max(s,r);t.setLineDash(a.map(c=>c/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Hp=new WeakSet,AN=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},bN=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Gy=EP;for(const i in Bc)Gy.prototype[i]!==void 0&&(Gy.prototype[Bc[i]]=Gy.prototype[i]);var GS,kS;class Df{static get workerPort(){return S(this,GS)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");Y(this,GS,e)}static get workerSrc(){return S(this,kS)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");Y(this,kS,e)}}GS=new WeakMap,kS=new WeakMap,te(Df,GS,null),te(Df,kS,"");const qT={DATA:1,ERROR:2},nr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Wo(i){switch(i instanceof Error||typeof i=="object"&&i!==null||rs('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new qv(i.message);case"MissingPDFException":return new Xv(i.message);case"PasswordException":return new qL(i.message,i.code);case"UnexpectedResponseException":return new m2(i.message,i.status);case"UnknownErrorException":return new YL(i.message,i.details);default:return new YL(i.message,i.toString())}}var r_,Yl,j6,X6,q6,fC;class bx{constructor(e,t,n){te(this,Yl);te(this,r_,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",Z(this,Yl,j6).bind(this),{signal:S(this,r_).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,n,s){const r=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const d=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:r,data:t,desiredSize:h.desiredSize},s),d.promise},pull:h=>{const d=Promise.withResolvers();return this.streamControllers[r].pullCall=d,c.postMessage({sourceName:a,targetName:o,stream:nr.PULL,streamId:r,desiredSize:h.desiredSize}),d.promise},cancel:h=>{_r(h instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[r].cancelCall=d,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:nr.CANCEL,streamId:r,reason:Wo(h)}),d.promise}},n)}destroy(){var e;(e=S(this,r_))==null||e.abort(),Y(this,r_,null)}}r_=new WeakMap,Yl=new WeakSet,j6=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){Z(this,Yl,q6).call(this,e);return}if(e.callback){const n=e.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===qT.DATA)s.resolve(e.data);else if(e.callback===qT.ERROR)s.reject(Wo(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,s=e.sourceName,r=this.comObj;new Promise(function(a){a(t(e.data))}).then(function(a){r.postMessage({sourceName:n,targetName:s,callback:qT.DATA,callbackId:e.callbackId,data:a})},function(a){r.postMessage({sourceName:n,targetName:s,callback:qT.ERROR,callbackId:e.callbackId,reason:Wo(a)})});return}if(e.streamId){Z(this,Yl,X6).call(this,e);return}t(e.data)},X6=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,r=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(h,d=1,m){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=d,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:nr.ENQUEUE,streamId:t,chunk:h},m)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:nr.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){_r(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:nr.ERROR,streamId:t,reason:Wo(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(h){h(o(e.data,c))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:nr.START_COMPLETE,streamId:t,success:!0})},function(h){r.postMessage({sourceName:n,targetName:s,stream:nr.START_COMPLETE,streamId:t,reason:Wo(h)})})},q6=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,r=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case nr.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Wo(e.reason));break;case nr.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Wo(e.reason));break;case nr.PULL:if(!o){r.postMessage({sourceName:n,targetName:s,stream:nr.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,new Promise(function(c){var h;c((h=o.onPull)==null?void 0:h.call(o))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:nr.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:n,targetName:s,stream:nr.PULL_COMPLETE,streamId:t,reason:Wo(c)})});break;case nr.ENQUEUE:if(_r(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case nr.CLOSE:if(_r(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),Z(this,Yl,fC).call(this,a,t);break;case nr.ERROR:_r(a,"error should have stream controller"),a.controller.error(Wo(e.reason)),Z(this,Yl,fC).call(this,a,t);break;case nr.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Wo(e.reason)),Z(this,Yl,fC).call(this,a,t);break;case nr.CANCEL:if(!o)break;new Promise(function(c){var h;c((h=o.onCancel)==null?void 0:h.call(o,Wo(e.reason)))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:nr.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:n,targetName:s,stream:nr.CANCEL_COMPLETE,streamId:t,reason:Wo(c)})}),o.sinkCapability.reject(Wo(e.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},fC=async function(e,t){var n,s,r;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(s=e.pullCall)==null?void 0:s.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var Fg,VS;class sle{constructor({parsedData:e,rawData:t}){te(this,Fg);te(this,VS);Y(this,Fg,e),Y(this,VS,t)}getRaw(){return S(this,VS)}get(e){return S(this,Fg).get(e)??null}getAll(){return cP(S(this,Fg))}has(e){return S(this,Fg).has(e)}}Fg=new WeakMap,VS=new WeakMap;const Cy=Symbol("INTERNAL");var jS,XS,qS,a_;class rle{constructor(e,{name:t,intent:n,usage:s,rbGroups:r}){te(this,jS,!1);te(this,XS,!1);te(this,qS,!1);te(this,a_,!0);Y(this,jS,!!(e&il.DISPLAY)),Y(this,XS,!!(e&il.PRINT)),this.name=t,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(S(this,qS))return S(this,a_);if(!S(this,a_))return!1;const{print:e,view:t}=this.usage;return S(this,jS)?(t==null?void 0:t.viewState)!=="OFF":S(this,XS)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Cy&&rs("Internal method `_setVisible` called."),Y(this,qS,n),Y(this,a_,t)}}jS=new WeakMap,XS=new WeakMap,qS=new WeakMap,a_=new WeakMap;var lp,Ii,o_,l_,YS,xN;class ale{constructor(e,t=il.DISPLAY){te(this,YS);te(this,lp,null);te(this,Ii,new Map);te(this,o_,null);te(this,l_,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,Y(this,l_,e.order);for(const n of e.groups)S(this,Ii).set(n.id,new rle(t,n));if(e.baseState==="OFF")for(const n of S(this,Ii).values())n._setVisible(Cy,!1);for(const n of e.on)S(this,Ii).get(n)._setVisible(Cy,!0);for(const n of e.off)S(this,Ii).get(n)._setVisible(Cy,!1);Y(this,o_,this.getHash())}}isVisible(e){if(S(this,Ii).size===0)return!0;if(!e)return p2("Optional content group not defined."),!0;if(e.type==="OCG")return S(this,Ii).has(e.id)?S(this,Ii).get(e.id).visible:(Vn(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return Z(this,YS,xN).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!S(this,Ii).has(t))return Vn(`Optional content group not found: ${t}`),!0;if(S(this,Ii).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!S(this,Ii).has(t))return Vn(`Optional content group not found: ${t}`),!0;if(!S(this,Ii).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!S(this,Ii).has(t))return Vn(`Optional content group not found: ${t}`),!0;if(!S(this,Ii).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!S(this,Ii).has(t))return Vn(`Optional content group not found: ${t}`),!0;if(S(this,Ii).get(t).visible)return!1}return!0}return Vn(`Unknown optional content policy ${e.policy}.`),!0}return Vn(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var r;const s=S(this,Ii).get(e);if(!s){Vn(`Optional content group not found: ${e}`);return}if(n&&t&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&((r=S(this,Ii).get(o))==null||r._setVisible(Cy,!1,!0));s._setVisible(Cy,!!t,!0),Y(this,lp,null)}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=S(this,Ii).get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}Y(this,lp,null)}get hasInitialVisibility(){return S(this,o_)===null||this.getHash()===S(this,o_)}getOrder(){return S(this,Ii).size?S(this,l_)?S(this,l_).slice():[...S(this,Ii).keys()]:null}getGroups(){return S(this,Ii).size>0?cP(S(this,Ii)):null}getGroup(e){return S(this,Ii).get(e)||null}getHash(){if(S(this,lp)!==null)return S(this,lp);const e=new N6;for(const[t,n]of S(this,Ii))e.update(`${t}:${n.visible}`);return Y(this,lp,e.hexdigest())}}lp=new WeakMap,Ii=new WeakMap,o_=new WeakMap,l_=new WeakMap,YS=new WeakSet,xN=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const r=e[s];let a;if(Array.isArray(r))a=Z(this,YS,xN).call(this,r);else if(S(this,Ii).has(r))a=S(this,Ii).get(r).visible;else return Vn(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class ole{constructor(e,{disableRange:t=!1,disableStream:n=!1}){_r(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),e.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(n),!0)});_r(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,s,r;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){_r(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new lle(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new cle(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class lle{constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=fP(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class cle{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ule(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let d=o(t);return d=unescape(d),d=c(d),d=h(d),r(d)}if(t=a(i),t){const d=h(t);return r(d)}if(t=n("filename","i").exec(i),t){t=t[1];let d=o(t);return d=h(d),r(d)}function n(d,m){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function s(d,m){if(d){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const v=new TextDecoder(d,{fatal:!0}),y=g2(m);m=v.decode(y),e=!1}catch{}}return m}function r(d){return e&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),e&&(d=s("iso-8859-1",d))),d}function a(d){const m=[];let v;const y=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=y.exec(d))!==null;){let[,E,M,x]=v;if(E=parseInt(E,10),E in m){if(E===0)break;continue}m[E]=[M,x]}const A=[];for(let E=0;E<m.length&&E in m;++E){let[M,x]=m[E];x=o(x),M&&(x=unescape(x),E===0&&(x=c(x))),A.push(x)}return A.join("")}function o(d){if(d.startsWith('"')){const m=d.slice(1).split('\\"');for(let v=0;v<m.length;++v){const y=m[v].indexOf('"');y!==-1&&(m[v]=m[v].slice(0,y),m.length=v+1),m[v]=m[v].replaceAll(/\\(.)/g,"$1")}d=m.join('"')}return d}function c(d){const m=d.indexOf("'");if(m===-1)return d;const v=d.slice(0,m),A=d.slice(m+1).replace(/^[^']*'/,"");return s(v,A)}function h(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,v,y,A){if(y==="q"||y==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,M){return String.fromCharCode(parseInt(M,16))}),s(v,A);try{A=atob(A)}catch{}return s(v,A)})}return""}function vP(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const n in e){const s=e[n];s!==void 0&&t.append(n,s)}return t}function yP({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function _P(i){const e=i.get("Content-Disposition");if(e){let t=ule(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(fP(t))return t}return null}function _2(i,e){return i===404||i===0&&e.startsWith("file:")?new Xv('Missing PDF "'+e+'".'):new m2(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i)}function Y6(i){return i===200||i===206}function W6(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function K6(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Vn(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class KH{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=vP(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return _r(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new hle(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new fle(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class hle{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),s=t.url;fetch(s,W6(n,this._withCredentials,this._abortController)).then(r=>{if(!Y6(r.status))throw _2(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:o,suggestedLength:c}=yP({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=_P(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new qv("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:K6(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class fle{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${n-1}`);const a=s.url;fetch(a,W6(r,this._withCredentials,this._abortController)).then(o=>{if(!Y6(o.status))throw _2(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:K6(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const YB=200,WB=206;function dle(i){const e=i.response;return typeof e!="string"?e:g2(e).buffer}class ple{constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=vP(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const s={begin:e,end:t};for(const r in n)s[r]=n[r];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,a]of this.headers)t.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=WB):s.expectedStatus=YB,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var s;const n=this.pendingRequests[e];n&&((s=n.onProgress)==null||s.call(n,t))}onStateChange(e,t){var c,h,d;const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(c=n.onError)==null||c.call(n,s.status);return}const r=s.status||YB;if(!(r===YB&&n.expectedStatus===WB)&&r!==n.expectedStatus){(h=n.onError)==null||h.call(n,s.status);return}const o=dle(s);if(r===WB){const m=s.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(m);n.onDone({begin:parseInt(v[1],10),chunk:o})}else o?n.onDone({begin:0,chunk:o}):(d=n.onError)==null||d.call(n,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class mle{constructor(e){this._source=e,this._manager=new ple(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return _r(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new gle(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new vle(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class gle{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[o,...c]=a.split(": ");return[o,c.join(": ")]})),{allowRangeRequests:s,suggestedLength:r}=yP({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=_P(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=_2(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class vle{constructor(e,t,n){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=_2(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const yle=/^[a-z][a-z0-9\-+.]+:/i;function _le(i){if(yle.test(i))return new URL(i);const e=Up.get("url");return new URL(e.pathToFileURL(i))}function J6(i,e,t){return i.protocol==="http:"?Up.get("http").request(i,{headers:e},t):Up.get("https").request(i,{headers:e},t)}class Ale{constructor(e){this.source=e,this.url=_le(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=vP(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return _r(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Sle(this):new ble(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new Ele(this,e,t):new xle(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Z6{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new qv("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Q6{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class ble extends Z6{constructor(e){super(e);const t=Object.fromEntries(e.headers),n=s=>{if(s.statusCode===404){const c=new Xv(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(s);const r=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:o}=yP({responseHeaders:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=_P(r)};this._request=J6(this._url,t,n),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class xle extends Q6{constructor(e,t,n){super(e);const s=Object.fromEntries(e.headers);s.Range=`bytes=${t}-${n-1}`;const r=a=>{if(a.statusCode===404){const o=new Xv(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(a)};this._request=J6(this._url,s,r),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class Sle extends Z6{constructor(e){super(e);const t=Up.get("fs");t.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new Xv(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class Ele extends Q6{constructor(e,t,n){super(e);const s=Up.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}}const Mle=1e5,xo=30,Tle=.8;var hz,cp,To,WS,KS,Hg,hf,JS,ZS,zg,c_,u_,up,h_,QS,f_,Gg,$S,eE,Os,kg,Vg,tE,hp,d_,zf,$6,e8,EN,ol,dC,MN,t8,n8;let SN=(Os=class{constructor({textContentSource:e,container:t,viewport:n}){te(this,zf);te(this,cp,Promise.withResolvers());te(this,To,null);te(this,WS,!1);te(this,KS,!!((hz=globalThis.FontInspector)!=null&&hz.enabled));te(this,Hg,null);te(this,hf,null);te(this,JS,0);te(this,ZS,0);te(this,zg,null);te(this,c_,null);te(this,u_,0);te(this,up,0);te(this,h_,Object.create(null));te(this,QS,[]);te(this,f_,null);te(this,Gg,[]);te(this,$S,new WeakMap);te(this,eE,null);var c;if(e instanceof ReadableStream)Y(this,f_,e);else if(typeof e=="object")Y(this,f_,new ReadableStream({start(h){h.enqueue(e),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');Y(this,To,Y(this,c_,t)),Y(this,up,n.scale*(globalThis.devicePixelRatio||1)),Y(this,u_,n.rotation),Y(this,hf,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:a,pageY:o}=n.rawDims;Y(this,eE,[1,0,0,-1,-a,o+r]),Y(this,ZS,s),Y(this,JS,r),Z(c=Os,ol,t8).call(c),Nv(t,n),S(this,cp).promise.finally(()=>{S(Os,d_).delete(this),Y(this,hf,null),Y(this,h_,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=so.platform;return oi(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{S(this,zg).read().then(({value:t,done:n})=>{if(n){S(this,cp).resolve();return}S(this,Hg)??Y(this,Hg,t.lang),Object.assign(S(this,h_),t.styles),Z(this,zf,$6).call(this,t.items),e()},S(this,cp).reject)};return Y(this,zg,S(this,f_).getReader()),S(Os,d_).add(this),e(),S(this,cp).promise}update({viewport:e,onBefore:t=null}){var r;const n=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==S(this,u_)&&(t==null||t(),Y(this,u_,s),Nv(S(this,c_),{rotation:s})),n!==S(this,up)){t==null||t(),Y(this,up,n);const a={div:null,properties:null,ctx:Z(r=Os,ol,dC).call(r,S(this,Hg))};for(const o of S(this,Gg))a.properties=S(this,$S).get(o),a.div=o,Z(this,zf,EN).call(this,a)}}cancel(){var t;const e=new qv("TextLayer task cancelled.");(t=S(this,zg))==null||t.cancel(e).catch(()=>{}),Y(this,zg,null),S(this,cp).reject(e)}get textDivs(){return S(this,Gg)}get textContentItemsStr(){return S(this,QS)}static cleanup(){if(!(S(this,d_).size>0)){S(this,kg).clear();for(const{canvas:e}of S(this,Vg).values())e.remove();S(this,Vg).clear()}}},cp=new WeakMap,To=new WeakMap,WS=new WeakMap,KS=new WeakMap,Hg=new WeakMap,hf=new WeakMap,JS=new WeakMap,ZS=new WeakMap,zg=new WeakMap,c_=new WeakMap,u_=new WeakMap,up=new WeakMap,h_=new WeakMap,QS=new WeakMap,f_=new WeakMap,Gg=new WeakMap,$S=new WeakMap,eE=new WeakMap,kg=new WeakMap,Vg=new WeakMap,tE=new WeakMap,hp=new WeakMap,d_=new WeakMap,zf=new WeakSet,$6=function(e){var s,r;if(S(this,WS))return;(r=S(this,hf)).ctx??(r.ctx=Z(s=Os,ol,dC).call(s,S(this,Hg)));const t=S(this,Gg),n=S(this,QS);for(const a of e){if(t.length>Mle){Vn("Ignoring additional textDivs for performance reasons."),Y(this,WS,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=S(this,To);Y(this,To,document.createElement("span")),S(this,To).classList.add("markedContent"),a.id!==null&&S(this,To).setAttribute("id",`${a.id}`),o.append(S(this,To))}else a.type==="endMarkedContent"&&Y(this,To,S(this,To).parentNode);continue}n.push(a.str),Z(this,zf,e8).call(this,a)}},e8=function(e){var E;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};S(this,Gg).push(t);const s=Zt.transform(S(this,eE),e.transform);let r=Math.atan2(s[1],s[0]);const a=S(this,h_)[e.fontName];a.vertical&&(r+=Math.PI/2);let o=S(this,KS)&&a.fontSubstitution||a.fontFamily;o=Os.fontFamilyMap.get(o)||o;const c=Math.hypot(s[2],s[3]),h=c*Z(E=Os,ol,n8).call(E,o,S(this,Hg));let d,m;r===0?(d=s[4],m=s[5]-h):(d=s[4]+h*Math.sin(r),m=s[5]-h*Math.cos(r));const v="calc(var(--scale-factor)*",y=t.style;S(this,To)===S(this,c_)?(y.left=`${(100*d/S(this,ZS)).toFixed(2)}%`,y.top=`${(100*m/S(this,JS)).toFixed(2)}%`):(y.left=`${v}${d.toFixed(2)}px)`,y.top=`${v}${m.toFixed(2)}px)`),y.fontSize=`${v}${(S(Os,hp)*c).toFixed(2)}px)`,y.fontFamily=o,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,S(this,KS)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(n.angle=r*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const M=Math.abs(e.transform[0]),x=Math.abs(e.transform[3]);M!==x&&Math.max(M,x)/Math.min(M,x)>1.5&&(A=!0)}if(A&&(n.canvasWidth=a.vertical?e.height:e.width),S(this,$S).set(t,n),S(this,hf).div=t,S(this,hf).properties=n,Z(this,zf,EN).call(this,S(this,hf)),n.hasText&&S(this,To).append(t),n.hasEOL){const M=document.createElement("br");M.setAttribute("role","presentation"),S(this,To).append(M)}},EN=function(e){var o;const{div:t,properties:n,ctx:s}=e,{style:r}=t;let a="";if(S(Os,hp)>1&&(a=`scale(${1/S(Os,hp)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=r,{canvasWidth:h,fontSize:d}=n;Z(o=Os,ol,MN).call(o,s,d*S(this,up),c);const{width:m}=s.measureText(t.textContent);m>0&&(a=`scaleX(${h*S(this,up)/m}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(r.transform=a)},ol=new WeakSet,dC=function(e=null){let t=S(this,Vg).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),S(this,Vg).set(e,t),S(this,tE).set(t,{size:0,family:""})}return t},MN=function(e,t,n){const s=S(this,tE).get(e);t===s.size&&n===s.family||(e.font=`${t}px ${n}`,s.size=t,s.family=n)},t8=function(){if(S(this,hp)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),Y(this,hp,e.getBoundingClientRect().height),e.remove()},n8=function(e,t){const n=S(this,kg).get(e);if(n)return n;const s=Z(this,ol,dC).call(this,t);s.canvas.width=s.canvas.height=xo,Z(this,ol,MN).call(this,s,xo,e);const r=s.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const d=a/(a+o);return S(this,kg).set(e,d),s.canvas.width=s.canvas.height=0,d}s.strokeStyle="red",s.clearRect(0,0,xo,xo),s.strokeText("g",0,0);let c=s.getImageData(0,0,xo,xo).data;o=0;for(let d=c.length-1-3;d>=0;d-=4)if(c[d]>0){o=Math.ceil(d/4/xo);break}s.clearRect(0,0,xo,xo),s.strokeText("A",0,xo),c=s.getImageData(0,0,xo,xo).data,a=0;for(let d=0,m=c.length;d<m;d+=4)if(c[d]>0){a=xo-Math.floor(d/4/xo);break}s.canvas.width=s.canvas.height=0;const h=a?a/(a+o):Tle;return S(this,kg).set(e,h),h},te(Os,ol),te(Os,kg,new Map),te(Os,Vg,new Map),te(Os,tE,new WeakMap),te(Os,hp,null),te(Os,d_,new Set),Os);class _S{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(r){var c;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(_S.shouldBuildText(o))(c=r==null?void 0:r.attributes)!=null&&c.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(const h of r.children)s(h)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const Cle=65536,wle=100,Rle=5e3,Dle=Ba?koe:Hoe,Ble=Ba?Voe:F6,Lle=Ba?Goe:zoe,Nle=Ba?joe:k6;function Ile(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new TN,{docId:t}=e,n=i.url?Ple(i.url):null,s=i.data?Ole(i.data):null,r=i.httpHeaders||null,a=i.withCredentials===!0,o=i.password??null,c=i.range instanceof i8?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:Cle;let d=i.worker instanceof ky?i.worker:null;const m=i.verbosity,v=typeof i.docBaseUrl=="string"&&!y2(i.docBaseUrl)?i.docBaseUrl:null,y=typeof i.cMapUrl=="string"?i.cMapUrl:null,A=i.cMapPacked!==!1,E=i.CMapReaderFactory||Ble,M=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,x=i.StandardFontDataFactory||Nle,w=i.stopAtErrors!==!0,R=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,D=i.isEvalSupported!==!1,P=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Ba,I=typeof i.isChrome=="boolean"?i.isChrome:!so.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),H=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,U=typeof i.disableFontFace=="boolean"?i.disableFontFace:Ba,N=i.fontExtraProperties===!0,O=i.enableXfa===!0,G=i.ownerDocument||globalThis.document,oe=i.disableRange===!0,se=i.disableStream===!0,le=i.disableAutoFetch===!0,ue=i.pdfBug===!0,z=i.CanvasFactory||Dle,K=i.FilterFactory||Lle,Q=i.enableHWA===!0,de=c?c.length:i.length??NaN,W=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Ba&&!U,he=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:E===F6&&x===k6&&y&&M&&px(y,document.baseURI)&&px(M,document.baseURI);i.canvasFactory&&UH("`canvasFactory`-instance option, please use `CanvasFactory` instead."),i.filterFactory&&UH("`filterFactory`-instance option, please use `FilterFactory` instead.");const xe=null;goe(m);const ye={canvasFactory:new z({ownerDocument:G,enableHWA:Q}),filterFactory:new K({docId:t,ownerDocument:G}),cMapReaderFactory:he?null:new E({baseUrl:y,isCompressed:A}),standardFontDataFactory:he?null:new x({baseUrl:M})};if(!d){const Ce={verbosity:m,port:Df.workerPort};d=Ce.port?ky.fromPort(Ce):new ky(Ce),e._worker=d}const fe={docId:t,apiVersion:"4.8.69",data:s,password:o,disableAutoFetch:le,rangeChunkSize:h,length:de,docBaseUrl:v,enableXfa:O,evaluatorOptions:{maxImageSize:R,disableFontFace:U,ignoreErrors:w,isEvalSupported:D,isOffscreenCanvasSupported:P,isChrome:I,canvasMaxAreaInBytes:H,fontExtraProperties:N,useSystemFonts:W,cMapUrl:he?y:null,standardFontDataUrl:he?M:null}},De={disableFontFace:U,fontExtraProperties:N,ownerDocument:G,pdfBug:ue,styleElement:xe,loadingParams:{disableAutoFetch:le,enableXfa:O}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Ce=d.messageHandler.sendWithPromise("GetDocRequest",fe,s?[s.buffer]:null);let Ue;if(c)Ue=new ole(c,{disableRange:oe,disableStream:se});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Qe;Ba?Qe=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&px(n)?KH:Ale:Qe=px(n)?KH:mle,Ue=new Qe({url:n,length:de,httpHeaders:r,withCredentials:a,rangeChunkSize:h,disableRange:oe,disableStream:se})}return Ce.then(Qe=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const xt=new bx(t,Qe,d.port),lt=new zle(xt,e,Ue,De,ye);e._transport=lt,xt.send("Ready",null)})}).catch(e._capability.reject),e}function Ple(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Ba&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Ole(i){if(Ba&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return g2(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function JH(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var Kw;const Jw=class Jw{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Ja(Jw,Kw)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Kw=new WeakMap,te(Jw,Kw,0);let TN=Jw,i8=class{constructor(e,t,n=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){rs("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class Ule{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return oi(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var fp,ff,kl,wy,pC;class Fle{constructor(e,t,n,s=!1){te(this,kl);te(this,fp,null);te(this,ff,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new OH:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new s8,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new o1({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return oi(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:s=Jd.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:m=!1}){var D,P;(D=this._stats)==null||D.time("Overall");const v=this._transport.getRenderingIntent(n,s,d,m),{renderingIntent:y,cacheKey:A}=v;Y(this,ff,!1),Z(this,kl,pC).call(this),o||(o=this._transport.getOptionalContentConfig(y));let E=this._intentStates.get(A);E||(E=Object.create(null),this._intentStates.set(A,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const M=!!(y&il.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(P=this._stats)==null||P.time("Page Request"),this._pumpOperatorList(v));const x=I=>{var H;E.renderTasks.delete(w),(this._maybeCleanupAfterRender||M)&&Y(this,ff,!0),Z(this,kl,wy).call(this,!M),I?(w.capability.reject(I),this._abortOperatorList({intentState:E,reason:I instanceof Error?I:new Error(I)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(H=globalThis.Stats)!=null&&H.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new wN({callback:x,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:h});(E.renderTasks||(E.renderTasks=new Set)).add(w);const R=w.task;return Promise.all([E.displayReadyCapability.promise,o]).then(([I,H])=>{var U;if(this.destroyed){x();return}if((U=this._stats)==null||U.time("Rendering"),!(H.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:I,optionalContentConfig:H}),w.operatorListChanged()}).catch(x),R}getOperatorList({intent:e="display",annotationMode:t=Jd.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var h;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,n,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>_S.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function r(){a.read().then(function({value:c,done:h}){if(h){n(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),r()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),Y(this,ff,!1),Z(this,kl,pC).call(this),Promise.all(e)}cleanup(e=!1){Y(this,ff,!0);const t=Z(this,kl,wy).call(this,!1);return e&&t&&this._stats&&(this._stats=new OH),t}_startRenderPage(e,t){var s,r;const n=this._intentStates.get(t);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&Z(this,kl,wy).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:a}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},a).getReader(),h=this._intentStates.get(t);h.streamReader=c;const d=()=>{c.read().then(({value:m,done:v})=>{if(v){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,h),d())},m=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const v of h.renderTasks)v.operatorListChanged();Z(this,kl,wy).call(this,!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(m);else if(h.opListReadCapability)h.opListReadCapability.reject(m);else throw m}})};d()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof hP){let s=wle;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new qv(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}fp=new WeakMap,ff=new WeakMap,kl=new WeakSet,wy=function(e=!1){if(Z(this,kl,pC).call(this),!S(this,ff)||this.destroyed)return!1;if(e)return Y(this,fp,setTimeout(()=>{Y(this,fp,null),Z(this,kl,wy).call(this,!1)},Rle)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Y(this,ff,!1),!0},pC=function(){S(this,fp)&&(clearTimeout(S(this,fp)),Y(this,fp,null))};var df,Zw;class Hle{constructor(){te(this,df,new Map);te(this,Zw,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};S(this,Zw).then(()=>{for(const[s]of S(this,df))s.call(this,n)})}addEventListener(e,t,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){Vn("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}S(this,df).set(t,s)}removeEventListener(e,t){const n=S(this,df).get(t);n==null||n(),S(this,df).delete(t)}terminate(){for(const[,e]of S(this,df))e==null||e();S(this,df).clear()}}df=new WeakMap,Zw=new WeakMap;var Qw,jg,Xg,p_,mC,m_,gC;const ds=class ds{constructor({name:e=null,port:t=null,verbosity:n=voe()}={}){te(this,p_);var s;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=S(ds,Xg))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(S(ds,Xg)||Y(ds,Xg,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Ba?Promise.all([Up.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new bx("main","worker",e),this._messageHandler.on("ready",function(){}),Z(this,p_,mC).call(this)}_initialize(){if(S(ds,jg)||S(ds,m_,gC)){this._setupFakeWorker();return}let{workerSrc:e}=ds;try{ds._isSameOrigin(window.location.href,e)||(e=ds._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new bx("main","worker",t),s=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),n.on("test",o=>{if(r.abort(),this.destroyed||!o){s();return}this._messageHandler=n,this._port=t,this._webWorker=t,Z(this,p_,mC).call(this)}),n.on("ready",o=>{if(r.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};a();return}catch{p2("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){S(ds,jg)||(Vn("Setting up fake worker."),Y(ds,jg,!0)),ds._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new Hle;this._port=t;const n=`fake${Ja(ds,Qw)._++}`,s=new bx(n+"_worker",n,t);e.setup(s,t),this._messageHandler=new bx(n,n+"_worker",t),Z(this,p_,mC).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=S(ds,Xg))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=S(this,Xg))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ds(e)}static get workerSrc(){if(Df.workerSrc)return Df.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return oi(this,"_setupFakeWorkerGlobal",(async()=>S(this,m_,gC)?S(this,m_,gC):(await import(this.workerSrc)).WorkerMessageHandler)())}};Qw=new WeakMap,jg=new WeakMap,Xg=new WeakMap,p_=new WeakSet,mC=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},m_=new WeakSet,gC=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},te(ds,m_),te(ds,Qw,0),te(ds,jg,!1),te(ds,Xg),Ba&&(Y(ds,jg,!0),Df.workerSrc||(Df.workerSrc="./pdf.worker.mjs")),ds._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(t,n);return n.origin===s.origin},ds._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let ky=ds;var pf,sh,g_,v_,rh,qg,xx;class zle{constructor(e,t,n,s,r){te(this,qg);te(this,pf,new Map);te(this,sh,new Map);te(this,g_,new Map);te(this,v_,new Map);te(this,rh,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new s8,this.fontLoader=new Uoe({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return oi(this,"annotationStorage",new mP)}getRenderingIntent(e,t=Jd.ENABLE,n=null,s=!1,r=!1){let a=il.DISPLAY,o=pN;switch(e){case"any":a=il.ANY;break;case"display":break;case"print":a=il.PRINT;break;default:Vn(`getRenderingIntent - invalid intent: ${e}`)}const c=a&il.PRINT&&n instanceof P6?n:this.annotationStorage;switch(t){case Jd.DISABLE:a+=il.ANNOTATIONS_DISABLE;break;case Jd.ENABLE:break;case Jd.ENABLE_FORMS:a+=il.ANNOTATIONS_FORMS;break;case Jd.ENABLE_STORAGE:a+=il.ANNOTATIONS_STORAGE,o=c.serializable;break;default:Vn(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=il.IS_EDITING),r&&(a+=il.OPLIST);const{ids:h,hash:d}=c.modifiedIds,m=[a,o.hash,d];return{renderingIntent:a,cacheKey:m.join("_"),annotationStorageSerializable:o,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=S(this,rh))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of S(this,sh).values())e.push(s._destroy());S(this,sh).clear(),S(this,g_).clear(),S(this,v_).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),S(this,pf).clear(),this.filterFactory.destroy(),SN.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new qv("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{_r(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){s.close();return}_r(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:a}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var h;(h=t.onProgress)==null||h.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:a}}),e.on("GetRangeReader",(n,s)=>{_r(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){s.close();return}_r(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new Ule(n,this))}),e.on("DocException",function(n){let s;switch(n.name){case"PasswordException":s=new qL(n.message,n.code);break;case"InvalidPDFException":s=new o6(n.message);break;case"MissingPDFException":s=new Xv(n.message);break;case"UnexpectedResponseException":s=new m2(n.message,n.status);break;case"UnknownErrorException":s=new YL(n.message,n.details);break;default:rs("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",n=>{if(Y(this,rh,Promise.withResolvers()),t.onPassword){const s=r=>{r instanceof Error?S(this,rh).reject(r):S(this,rh).resolve({password:r})};try{t.onPassword(s,n.code)}catch(r){S(this,rh).reject(r)}}else S(this,rh).reject(new qL(n.message,n.code));return S(this,rh).promise}),e.on("DataLoaded",n=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;S(this,sh).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,r])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:o,fontExtraProperties:c,pdfBug:h}=this._params;if("error"in r){const y=r.error;Vn(`Error during font loading: ${y}`),this.commonObjs.resolve(n,y);break}const d=h&&((a=globalThis.FontInspector)!=null&&a.enabled)?(y,A)=>globalThis.FontInspector.fontAdded(y,A):null,m=new Foe(r,{disableFontFace:o,inspectFont:d});this.fontLoader.bind(m).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c&&m.data&&(m.data=null),this.commonObjs.resolve(n,m)});break;case"CopyLocalImage":const{imageRef:v}=r;_r(v,"The imageRef must be defined.");for(const y of S(this,sh).values())for(const[,A]of y.objs)if((A==null?void 0:A.ref)===v)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,r,a])=>{var c;if(this.destroyed)return;const o=S(this,sh).get(s);if(!o.objs.has(n)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(r){case"Image":o.objs.resolve(n,a),(a==null?void 0:a.dataLen)>foe&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",n=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Vn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=S(this,g_).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&S(this,v_).set(r.refStr,e);const a=new Fle(t,r,this,this._params.pdfBug);return S(this,sh).set(t,a),a});return S(this,g_).set(t,s),s}getPageIndex(e){return JH(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return Z(this,qg,xx).call(this,"GetFieldObjects")}hasJSActions(){return Z(this,qg,xx).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Z(this,qg,xx).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return Z(this,qg,xx).call(this,"GetOptionalContentConfig").then(t=>new ale(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=S(this,pf).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,a;return{info:s[0],metadata:s[1]?new sle(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return S(this,pf).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of S(this,sh).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),S(this,pf).clear(),this.filterFactory.destroy(!0),SN.cleanup()}}cachedPageNumber(e){if(!JH(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return S(this,v_).get(t)??null}}pf=new WeakMap,sh=new WeakMap,g_=new WeakMap,v_=new WeakMap,rh=new WeakMap,qg=new WeakSet,xx=function(e,t=null){const n=S(this,pf).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return S(this,pf).set(e,s),s};const YT=Symbol("INITIAL_DATA");var Uc,nE,CN;class s8{constructor(){te(this,nE);te(this,Uc,Object.create(null))}get(e,t=null){if(t){const s=Z(this,nE,CN).call(this,e);return s.promise.then(()=>t(s.data)),null}const n=S(this,Uc)[e];if(!n||n.data===YT)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=S(this,Uc)[e];return!!t&&t.data!==YT}resolve(e,t=null){const n=Z(this,nE,CN).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in S(this,Uc)){const{data:n}=S(this,Uc)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}Y(this,Uc,Object.create(null))}*[Symbol.iterator](){for(const e in S(this,Uc)){const{data:t}=S(this,Uc)[e];t!==YT&&(yield[e,t])}}}Uc=new WeakMap,nE=new WeakSet,CN=function(e){var t;return(t=S(this,Uc))[e]||(t[e]={...Promise.withResolvers(),data:YT})};var dp;class Gle{constructor(e){te(this,dp,null);Y(this,dp,e),this.onContinue=null}get promise(){return S(this,dp).capability.promise}cancel(e=0){S(this,dp).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=S(this,dp).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=S(this,dp);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}dp=new WeakMap;var pp,Yg;const hg=class hg{constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:d=!1,pdfBug:m=!1,pageColors:v=null}){te(this,pp,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=m,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Gle(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,c;if(this.cancelled)return;if(this._canvas){if(S(hg,Yg).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");S(hg,Yg).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:r,background:a}=this.params;this.gfx=new Gy(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),S(this,pp)&&(window.cancelAnimationFrame(S(this,pp)),Y(this,pp,null)),S(hg,Yg).delete(this._canvas),this.callback(e||new hP(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?Y(this,pp,window.requestAnimationFrame(()=>{Y(this,pp,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),S(hg,Yg).delete(this._canvas),this.callback())))}};pp=new WeakMap,Yg=new WeakMap,te(hg,Yg,new WeakSet);let wN=hg;const kle="4.8.69",Vle="3634dab10";function ZH(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function lx(i){return Math.max(0,Math.min(255,255*i))}class QH{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=lx(e),[e,e,e]}static G_HTML([e]){const t=ZH(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(lx)}static RGB_HTML(e){return`#${e.map(ZH).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[lx(1-Math.min(1,e+s)),lx(1-Math.min(1,n+s)),lx(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,r=1-t,a=1-n,o=Math.min(s,r,a);return["CMYK",s,r,a,o]}}class jle{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){rs("Abstract method `_createSVG` called.")}}class AP extends jle{_createSVG(e){return document.createElementNS(Jh,e)}}class r8{static setupStorage(e,t,n,s,r){const a=s.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of n.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:r}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[c,h]of Object.entries(a))if(h!=null)switch(c){case"class":h.length&&e.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,h)}o&&r.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var m,v;const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,r=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:r,linkService:n});const o=r!=="richText",c=e.div;if(c.append(a),e.viewport){const y=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=y}o&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(s.children.length===0){if(s.value){const y=document.createTextNode(s.value);a.append(y),o&&_S.shouldBuildText(s.name)&&h.push(y)}return{textDivs:h}}const d=[[s,-1,a]];for(;d.length>0;){const[y,A,E]=d.at(-1);if(A+1===y.children.length){d.pop();continue}const M=y.children[++d.at(-1)[1]];if(M===null)continue;const{name:x}=M;if(x==="#text"){const R=document.createTextNode(M.value);h.push(R),E.append(R);continue}const w=(m=M==null?void 0:M.attributes)!=null&&m.xmlns?document.createElementNS(M.attributes.xmlns,x):document.createElement(x);if(E.append(w),M.attributes&&this.setAttributes({html:w,element:M,storage:t,intent:r,linkService:n}),((v=M.children)==null?void 0:v.length)>0)d.push([M,-1,w]);else if(M.value){const R=document.createTextNode(M.value);o&&_S.shouldBuildText(x)&&h.push(R),w.append(R)}}for(const y of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const c1=1e3,Xle=9,Pv=new WeakSet;function Pf(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class qle{static create(e){switch(e.data.annotationType){case mr.LINK:return new a8(e);case mr.TEXT:return new Yle(e);case mr.WIDGET:switch(e.data.fieldType){case"Tx":return new Wle(e);case"Btn":return e.data.radioButton?new c8(e):e.data.checkBox?new Jle(e):new Zle(e);case"Ch":return new Qle(e);case"Sig":return new Kle(e)}return new Yv(e);case mr.POPUP:return new DN(e);case mr.FREETEXT:return new p8(e);case mr.LINE:return new ece(e);case mr.SQUARE:return new tce(e);case mr.CIRCLE:return new nce(e);case mr.POLYLINE:return new m8(e);case mr.CARET:return new sce(e);case mr.INK:return new bP(e);case mr.POLYGON:return new ice(e);case mr.HIGHLIGHT:return new g8(e);case mr.UNDERLINE:return new rce(e);case mr.SQUIGGLY:return new ace(e);case mr.STRIKEOUT:return new oce(e);case mr.STAMP:return new v8(e);case mr.FILEATTACHMENT:return new lce(e);default:return new Ws(e)}}}var Wg,y_,__,iE,RN;const MP=class MP{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){te(this,iE);te(this,Wg,null);te(this,y_,!1);te(this,__,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return MP._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;S(this,Wg)||Y(this,Wg,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&Z(this,iE,RN).call(this,t),(n=S(this,__))==null||n.popup.updateEdited(e)}resetEdited(){var e;S(this,Wg)&&(Z(this,iE,RN).call(this,S(this,Wg).rect),(e=S(this,__))==null||e.popup.resetEdited(),Y(this,Wg,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Yv||(r.tabIndex=c1);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof DN){const{rotation:E}=t;return!t.hasOwnCanvas&&E!==0&&this.setRotation(E,r),r}const{width:o,height:c}=Pf(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const E=t.borderStyle.horizontalCornerRadius,M=t.borderStyle.verticalCornerRadius;if(E>0||M>0){const w=`calc(${E}px * var(--scale-factor)) / calc(${M}px * var(--scale-factor))`;a.borderRadius=w}else if(this instanceof c8){const w=`calc(${o}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=w}switch(t.borderStyle.style){case ax.SOLID:a.borderStyle="solid";break;case ax.DASHED:a.borderStyle="dashed";break;case ax.BEVELED:Vn("Unimplemented border style: beveled");break;case ax.INSET:Vn("Unimplemented border style: inset");break;case ax.UNDERLINE:a.borderBottomStyle="solid";break}const x=t.borderColor||null;x?(Y(this,y_,!0),a.borderColor=Zt.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):a.borderWidth=0}const h=Zt.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:d,pageHeight:m,pageX:v,pageY:y}=s.rawDims;a.left=`${100*(h[0]-v)/d}%`,a.top=`${100*(h[1]-y)/m}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(a.width=`${100*o/d}%`,a.height=`${100*c/m}%`):this.setRotation(A,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:a}=Pf(this.data.rect);let o,c;e%180===0?(o=100*r/n,c=100*a/s):(o=100*a/n,c=100*r/s),t.style.width=`${o}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const r=s.detail[t],a=r[0],o=r.slice(1);s.target.style[n]=QH[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:QH[`${a}_rgb`](o)})};return oi(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||n[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,r]of Object.entries(t)){const a=n[s];if(a){const o={detail:{[s]:r},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,r]=this.data.rect.map(E=>Math.fround(E));if(e.length===8){const[E,M,x,w]=e.subarray(2,6);if(s===E&&r===M&&t===x&&n===w)return}const{style:a}=this.container;let o;if(S(this,y_)){const{borderColor:E,borderWidth:M}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${M}">`],this.container.classList.add("hasBorder")}const c=s-t,h=r-n,{svgFactory:d}=this,m=d.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0);const v=d.createElement("defs");m.append(v);const y=d.createElement("clipPath"),A=`clippath_${this.data.id}`;y.setAttribute("id",A),y.setAttribute("clipPathUnits","objectBoundingBox"),v.append(y);for(let E=2,M=e.length;E<M;E+=8){const x=e[E],w=e[E+1],R=e[E+2],D=e[E+3],P=d.createElement("rect"),I=(R-t)/c,H=(r-w)/h,U=(x-R)/c,N=(w-D)/h;P.setAttribute("x",I),P.setAttribute("y",H),P.setAttribute("width",U),P.setAttribute("height",N),y.append(P),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${H}" width="${U}" height="${N}"/>`)}S(this,y_)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{data:e}=this,t=Y(this,__,new DN({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){rs("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:a,exportValues:o}of s){if(r===-1||a===t)continue;const c=typeof o=="string"?o:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!Pv.has(h)){Vn(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:c,domElement:h})}return n}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==t&&Pv.has(s)&&n.push({id:a,exportValue:r,domElement:s})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Wg=new WeakMap,y_=new WeakMap,__=new WeakMap,iE=new WeakSet,RN=function(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:c}}}}=this;n==null||n.splice(0,4,...e);const{width:h,height:d}=Pf(e);t.left=`${100*(e[0]-o)/r}%`,t.top=`${100*(a-e[3]+c)/a}%`,s===0?(t.width=`${100*h/r}%`,t.height=`${100*d/a}%`):this.setRotation(s)};let Ws=MP;var sl,ig,o8,l8;class a8 extends Ws{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});te(this,sl);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(Z(this,sl,o8).call(this,s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(Z(this,sl,l8).call(this,s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&Z(this,sl,ig).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),Z(this,sl,ig).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const a=s.get(r);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),Z(this,sl,ig).call(this)}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),Z(this,sl,ig).call(this),!this._fieldObjects){Vn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var m;s==null||s();const{fields:r,refs:a,include:o}=n,c=[];if(r.length!==0||a.length!==0){const v=new Set(a);for(const y of r){const A=this._fieldObjects[y]||[];for(const{id:E}of A)v.add(E)}for(const y of Object.values(this._fieldObjects))for(const A of y)v.has(A.id)===o&&c.push(A)}else for(const v of Object.values(this._fieldObjects))c.push(...v);const h=this.annotationStorage,d=[];for(const v of c){const{id:y}=v;switch(d.push(y),v.type){case"text":{const E=v.defaultValue||"";h.setValue(y,{value:E});break}case"checkbox":case"radiobutton":{const E=v.defaultValue===v.exportValues;h.setValue(y,{value:E});break}case"combobox":case"listbox":{const E=v.defaultValue||"";h.setValue(y,{value:E});break}default:continue}const A=document.querySelector(`[data-element-id="${y}"]`);if(A){if(!Pv.has(A)){Vn(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}sl=new WeakSet,ig=function(){this.container.setAttribute("data-internal-link","")},o8=function(t,n,s=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,s),!1},Z(this,sl,ig).call(this)},l8=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),Z(this,sl,ig).call(this)};class Yle extends Ws{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Yv extends Ws{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return so.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,r){n.includes("mouse")?e.addEventListener(n,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var o;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}}))})}_setEventListeners(e,t,n,s){var r,a,o;for(const[c,h]of n)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,h,s),h==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Zt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||Xle,r=e.style;let a;const o=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(h/(VB*s))||1,m=h/d;a=Math.min(s,c(m/VB))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,c(h/VB))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=Zt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Wle extends Yv{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),r.setValue(a.id,{[s]:n})}render(){var s,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let h=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",h??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Pv.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=c1,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",v=>{e.setValue(t,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",v=>{const y=this.data.defaultFieldValue??"";n.value=d.userValue=y,d.formattedValue=null});let m=v=>{const{formattedValue:y}=d;y!=null&&(v.target.value=y),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",y=>{var E;if(d.focused)return;const{target:A}=y;d.userValue&&(A.value=d.userValue),d.lastCommittedValue=A.value,d.commitKey=1,(E=this.data.actions)!=null&&E.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const A={value(E){d.userValue=E.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:M}=E.detail;d.formattedValue=M,M!=null&&E.target!==document.activeElement&&(E.target.value=M),e.setValue(t,{formattedValue:M})},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{var R;const{charLimit:M}=E.detail,{target:x}=E;if(M===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",M);let w=d.userValue;!w||w.length<=M||(w=w.slice(0,M),x.value=d.userValue=w,e.setValue(t,{value:w}),(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(A,y)}),n.addEventListener("keydown",y=>{var M;d.commitKey=1;let A=-1;if(y.key==="Escape"?A=0:y.key==="Enter"&&!this.data.multiLine?A=2:y.key==="Tab"&&(d.commitKey=3),A===-1)return;const{value:E}=y.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:A,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const v=m;m=null,n.addEventListener("blur",y=>{var E,M;if(!d.focused||!y.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(d.focused=!1);const{value:A}=y.target;d.userValue=A,d.lastCommittedValue!==A&&((M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:d.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}})),v(y)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",y=>{var P;d.lastCommittedValue=null;const{data:A,target:E}=y,{value:M,selectionStart:x,selectionEnd:w}=E;let R=x,D=w;switch(y.inputType){case"deleteWordBackward":{const I=M.substring(0,x).match(/\w*[^\w]*$/);I&&(R-=I[0].length);break}case"deleteWordForward":{const I=M.substring(x).match(/^[^\w]*\w*/);I&&(D+=I[0].length);break}case"deleteContentBackward":x===w&&(R-=1);break;case"deleteContentForward":x===w&&(D+=1);break}y.preventDefault(),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:M,change:A||"",willCommit:!1,selStart:R,selEnd:D}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(m&&n.addEventListener("blur",m),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${y}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Kle extends Yv{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Jle extends Yv{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Pv.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=c1,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const h of this._getElementsByName(o,n)){const d=c&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}e.setValue(n,{value:c})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class c8 extends Yv{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(Pv.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=c1,r.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const h of this._getElementsByName(o,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:c})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",o=>{const c={value:h=>{const d=a===h.detail.value;for(const m of this._getElementsByName(h.target.name)){const v=d&&m.id===n;m.domElement&&(m.domElement.checked=v),e.setValue(m.id,{value:v})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Zle extends a8{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class Qle extends Yv{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Pv.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=c1;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const m=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===m});for(const d of this.data.options){const m=document.createElement("option");m.textContent=d.displayValue,m.value=d.exportValue,n.value.includes(d.exportValue)&&(m.setAttribute("selected",!0),r=!1),s.append(m)}let a=null;if(r){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),a=()=>{d.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=d=>{const m=d?"value":"textContent",{options:v,multiple:y}=s;return y?Array.prototype.filter.call(v,A=>A.selected).map(A=>A[m]):v.selectedIndex===-1?null:v[v.selectedIndex][m]};let c=o(!1);const h=d=>{const m=d.target.options;return Array.prototype.map.call(m,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const m={value(v){a==null||a();const y=v.detail.value,A=new Set(Array.isArray(y)?y:[y]);for(const E of s.options)E.selected=A.has(E.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(v){s.multiple=!0},remove(v){const y=s.options,A=v.detail.remove;y[A].selected=!1,s.remove(A),y.length>0&&Array.prototype.findIndex.call(y,M=>M.selected)===-1&&(y[0].selected=!0),e.setValue(t,{value:o(!0),items:h(v)}),c=o(!1)},clear(v){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(v){const{index:y,displayValue:A,exportValue:E}=v.detail.insert,M=s.children[y],x=document.createElement("option");x.textContent=A,x.value=E,M?M.before(x):s.append(x),e.setValue(t,{value:o(!0),items:h(v)}),c=o(!1)},items(v){const{items:y}=v.detail;for(;s.length!==0;)s.remove(0);for(const A of y){const{displayValue:E,exportValue:M}=A,x=document.createElement("option");x.textContent=E,x.value=M,s.append(x)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:h(v)}),c=o(!1)},indices(v){const y=new Set(v.detail.indices);for(const A of v.target.options)A.selected=y.has(A.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(m,d)}),s.addEventListener("input",d=>{var y;const m=o(!0),v=o(!1);e.setValue(t,{value:m}),d.preventDefault(),(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:v,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class DN extends Ws{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Ws._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new $le({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${uP}${n}`).join(",")),this.container}}var A_,$w,eR,b_,Kg,Ps,mf,x_,sE,rE,S_,gf,Fc,vf,aE,yf,oE,Jg,Zg,ji,vC,BN,u8,h8,f8,d8,yC,_C,LN;class $le{constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:r,contentsObj:a,richText:o,parent:c,rect:h,parentRect:d,open:m}){te(this,ji);te(this,A_,Z(this,ji,f8).bind(this));te(this,$w,Z(this,ji,LN).bind(this));te(this,eR,Z(this,ji,_C).bind(this));te(this,b_,Z(this,ji,yC).bind(this));te(this,Kg,null);te(this,Ps,null);te(this,mf,null);te(this,x_,null);te(this,sE,null);te(this,rE,null);te(this,S_,null);te(this,gf,!1);te(this,Fc,null);te(this,vf,null);te(this,aE,null);te(this,yf,null);te(this,oE,null);te(this,Jg,null);te(this,Zg,!1);var v;Y(this,Ps,e),Y(this,oE,s),Y(this,mf,a),Y(this,yf,o),Y(this,rE,c),Y(this,Kg,t),Y(this,aE,h),Y(this,S_,d),Y(this,sE,n),Y(this,x_,dP.toDateObject(r)),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup());for(const y of this.trigger)y.addEventListener("click",S(this,b_)),y.addEventListener("mouseenter",S(this,eR)),y.addEventListener("mouseleave",S(this,$w)),y.classList.add("popupTriggerArea");for(const y of n)(v=y.container)==null||v.addEventListener("keydown",S(this,A_));S(this,Ps).hidden=!0,m&&Z(this,ji,yC).call(this)}render(){if(S(this,Fc))return;const e=Y(this,Fc,document.createElement("div"));if(e.className="popup",S(this,Kg)){const r=e.style.outlineColor=Zt.makeHexColor(...S(this,Kg));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=Zt.makeHexColor(...S(this,Kg).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=S(this,oE),e.append(t),S(this,x_)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:S(this,x_).valueOf()})),t.append(r)}const s=S(this,ji,vC);if(s)r8.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(S(this,mf));e.append(r)}S(this,Ps).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const o=s[r];n.append(document.createTextNode(o)),r<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;S(this,Jg)||Y(this,Jg,{contentsObj:S(this,mf),richText:S(this,yf)}),e&&Y(this,vf,null),t&&(Y(this,yf,Z(this,ji,h8).call(this,t)),Y(this,mf,null)),(n=S(this,Fc))==null||n.remove(),Y(this,Fc,null)}resetEdited(){var e;S(this,Jg)&&({contentsObj:Ja(this,mf)._,richText:Ja(this,yf)._}=S(this,Jg),Y(this,Jg,null),(e=S(this,Fc))==null||e.remove(),Y(this,Fc,null),Y(this,vf,null))}forceHide(){Y(this,Zg,this.isVisible),S(this,Zg)&&(S(this,Ps).hidden=!0)}maybeShow(){S(this,Zg)&&(S(this,Fc)||Z(this,ji,_C).call(this),Y(this,Zg,!1),S(this,Ps).hidden=!1)}get isVisible(){return S(this,Ps).hidden===!1}}A_=new WeakMap,$w=new WeakMap,eR=new WeakMap,b_=new WeakMap,Kg=new WeakMap,Ps=new WeakMap,mf=new WeakMap,x_=new WeakMap,sE=new WeakMap,rE=new WeakMap,S_=new WeakMap,gf=new WeakMap,Fc=new WeakMap,vf=new WeakMap,aE=new WeakMap,yf=new WeakMap,oE=new WeakMap,Jg=new WeakMap,Zg=new WeakMap,ji=new WeakSet,vC=function(){const e=S(this,yf),t=S(this,mf);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&S(this,yf).html||null},BN=function(){var e,t,n;return((n=(t=(e=S(this,ji,vC))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},u8=function(){var e,t,n;return((n=(t=(e=S(this,ji,vC))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},h8=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:S(this,ji,u8),fontSize:S(this,ji,BN)?`calc(${S(this,ji,BN)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return n},f8=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&S(this,gf))&&Z(this,ji,yC).call(this)},d8=function(){if(S(this,vf)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:r}}}=S(this,rE);let a=!!S(this,S_),o=a?S(this,S_):S(this,aE);for(const A of S(this,sE))if(!o||Zt.intersect(A.data.rect,o)!==null){o=A.data.rect,a=!0;break}const c=Zt.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),d=a?o[2]-o[0]+5:0,m=c[0]+d,v=c[1];Y(this,vf,[100*(m-s)/t,100*(v-r)/n]);const{style:y}=S(this,Ps);y.left=`${S(this,vf)[0]}%`,y.top=`${S(this,vf)[1]}%`},yC=function(){Y(this,gf,!S(this,gf)),S(this,gf)?(Z(this,ji,_C).call(this),S(this,Ps).addEventListener("click",S(this,b_)),S(this,Ps).addEventListener("keydown",S(this,A_))):(Z(this,ji,LN).call(this),S(this,Ps).removeEventListener("click",S(this,b_)),S(this,Ps).removeEventListener("keydown",S(this,A_)))},_C=function(){S(this,Fc)||this.render(),this.isVisible?S(this,gf)&&S(this,Ps).classList.add("focused"):(Z(this,ji,d8).call(this),S(this,Ps).hidden=!1,S(this,Ps).style.zIndex=parseInt(S(this,Ps).style.zIndex)+1e3)},LN=function(){S(this,Ps).classList.remove("focused"),!(S(this,gf)||!this.isVisible)&&(S(this,Ps).hidden=!0,S(this,Ps).style.zIndex=parseInt(S(this,Ps).style.zIndex)-1e3)};class p8 extends Ws{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Hn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var lE;class ece extends Ws{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});te(this,lE,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:s}=Pf(t.rect),r=this.svgFactory.create(n,s,!0),a=Y(this,lE,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return S(this,lE)}addHighlightArea(){this.container.classList.add("highlightArea")}}lE=new WeakMap;var cE;class tce extends Ws{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});te(this,cE,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:s}=Pf(t.rect),r=this.svgFactory.create(n,s,!0),a=t.borderStyle.width,o=Y(this,cE,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",n-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return S(this,cE)}addHighlightArea(){this.container.classList.add("highlightArea")}}cE=new WeakMap;var uE;class nce extends Ws{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});te(this,uE,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:s}=Pf(t.rect),r=this.svgFactory.create(n,s,!0),a=t.borderStyle.width,o=Y(this,uE,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",n/2),o.setAttribute("cy",s/2),o.setAttribute("rx",n/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return S(this,uE)}addHighlightArea(){this.container.classList.add("highlightArea")}}uE=new WeakMap;var hE;class m8 extends Ws{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});te(this,hE,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:r}}=this;if(!n)return this.container;const{width:a,height:o}=Pf(t),c=this.svgFactory.create(a,o,!0);let h=[];for(let m=0,v=n.length;m<v;m+=2){const y=n[m]-t[0],A=t[3]-n[m+1];h.push(`${y},${A}`)}h=h.join(" ");const d=Y(this,hE,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",h),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return S(this,hE)}addHighlightArea(){this.container.classList.add("highlightArea")}}hE=new WeakMap;class ice extends m8{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sce extends Ws{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var fE;class bP extends Ws{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});te(this,fE,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Hn.HIGHLIGHT:Hn.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:n,borderStyle:s,popupRef:r}}=this,{width:a,height:o}=Pf(t),c=this.svgFactory.create(a,o,!0);for(const h of n){let d=[];for(let v=0,y=h.length;v<y;v+=2){const A=h[v]-t[0],E=t[3]-h[v+1];d.push(`${A},${E}`)}d=d.join(" ");const m=this.svgFactory.createElement(this.svgElementName);S(this,fE).push(m),m.setAttribute("points",d),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),c.append(m)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return S(this,fE)}addHighlightArea(){this.container.classList.add("highlightArea")}}fE=new WeakMap;class g8 extends Ws{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Hn.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class rce extends Ws{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ace extends Ws{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class oce extends Ws{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class v8 extends Ws{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Hn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var dE,pE,NN;class lce extends Ws{constructor(t){var s;super(t,{isRenderable:!0});te(this,pE);te(this,dE,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",Z(this,pE,NN).bind(this)),Y(this,dE,s);const{isMac:r}=so.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&Z(this,pE,NN).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return S(this,dE)}addHighlightArea(){this.container.classList.add("highlightArea")}}dE=new WeakMap,pE=new WeakSet,NN=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var mE,Qg,$g,gE,Uv,y8,IN,fz;let cce=(fz=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:a,structTreeLayer:o}){te(this,Uv);te(this,mE,null);te(this,Qg,null);te(this,$g,new Map);te(this,gE,null);this.div=e,Y(this,mE,t),Y(this,Qg,n),Y(this,gE,o||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return S(this,$g).size>0}async render(e){var a;const{annotations:t}=e,n=this.div;Nv(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new AP,annotationStorage:e.annotationStorage||new mP,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===mr.POPUP;if(c){const m=s.get(o.id);if(!m)continue;r.elements=m}else{const{width:m,height:v}=Pf(o.rect);if(m<=0||v<=0)continue}r.data=o;const h=qle.create(r);if(!h.isRenderable)continue;if(!c&&o.popupRef){const m=s.get(o.popupRef);m?m.push(h):s.set(o.popupRef,[h])}const d=h.render();o.hidden&&(d.style.visibility="hidden"),await Z(this,Uv,y8).call(this,d,o.id),h._isEditable&&(S(this,$g).set(h.data.id,h),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(h))}Z(this,Uv,IN).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Nv(t,{rotation:e.rotation}),Z(this,Uv,IN).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(S(this,$g).values())}getEditableAnnotation(e){return S(this,$g).get(e)}},mE=new WeakMap,Qg=new WeakMap,$g=new WeakMap,gE=new WeakMap,Uv=new WeakSet,y8=async function(e,t){var a,o;const n=e.firstChild||e,s=n.id=`${uP}${t}`,r=await((a=S(this,gE))==null?void 0:a.getAriaAttributes(s));if(r)for(const[c,h]of r)n.setAttribute(c,h);this.div.append(e),(o=S(this,mE))==null||o.moveElementInDOM(this.div,e,n,!1)},IN=function(){if(!S(this,Qg))return;const e=this.div;for(const[t,n]of S(this,Qg)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):s.append(n)}S(this,Qg).clear()},fz);const WT=/\r\n?|\n/g;var Hc,Zo,vE,ev,Qo,rr,_8,A8,b8,AC,Uf,bC,xC,x8,ON,S8;const $i=class $i extends Oi{constructor(t){super({...t,name:"freeTextEditor"});te(this,rr);te(this,Hc);te(this,Zo,"");te(this,vE,`${this.id}-editor`);te(this,ev,null);te(this,Qo);Y(this,Hc,t.color||$i._defaultColor||Oi._defaultLineColor),Y(this,Qo,t.fontSize||$i._defaultFontSize)}static get _keyboardManager(){const t=$i.prototype,n=a=>a.isEmpty(),s=Iv.TRANSLATE_SMALL,r=Iv.TRANSLATE_BIG;return oi(this,"_keyboardManager",new l1([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(t,n){Oi.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case xn.FREETEXT_SIZE:$i._defaultFontSize=n;break;case xn.FREETEXT_COLOR:$i._defaultColor=n;break}}updateParams(t,n){switch(t){case xn.FREETEXT_SIZE:Z(this,rr,_8).call(this,n);break;case xn.FREETEXT_COLOR:Z(this,rr,A8).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[xn.FREETEXT_SIZE,$i._defaultFontSize],[xn.FREETEXT_COLOR,$i._defaultColor||Oi._defaultLineColor]]}get propertiesToUpdate(){return[[xn.FREETEXT_SIZE,S(this,Qo)],[xn.FREETEXT_COLOR,S(this,Hc)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-$i._internalPadding*t,-($i._internalPadding+S(this,Qo))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Hn.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),Y(this,ev,new AbortController);const t=this._uiManager.combinedSignal(S(this,ev));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",S(this,vE)),this._isDraggable=!0,(t=S(this,ev))==null||t.abort(),Y(this,ev,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=S(this,Zo),n=Y(this,Zo,Z(this,rr,b8).call(this).trimEnd());if(t===n)return;const s=r=>{if(Y(this,Zo,r),!r){this.remove();return}Z(this,rr,xC).call(this),this._uiManager.rebuild(this),Z(this,rr,AC).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),Z(this,rr,AC).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){$i._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",S(this,vE)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${S(this,Qo)}px * var(--scale-factor))`,s.color=S(this,Hc),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Pw(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[d,m]=this.pageDimensions,[v,y]=this.pageTranslation;let A,E;switch(this.rotation){case 0:A=t+(o[0]-v)/d,E=n+this.height-(o[1]-y)/m;break;case 90:A=t+(o[0]-v)/d,E=n-(o[1]-y)/m,[c,h]=[h,-c];break;case 180:A=t-this.width+(o[0]-v)/d,E=n-(o[1]-y)/m,[c,h]=[-c,-h];break;case 270:A=t+(o[0]-v-this.height*m)/d,E=n+(o[1]-y-this.width*d)/m,[c,h]=[-h,c];break}this.setAt(A*r,E*a,c,h)}else this.setAt(t*r,n*a,this.width*r,this.height*a);Z(this,rr,xC).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var A,E,M;const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=Z(A=$i,Uf,ON).call(A,n.getData("text")||"").replaceAll(WT,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:h}=o,d=[],m=[];if(c.nodeType===Node.TEXT_NODE){const x=c.parentElement;if(m.push(c.nodeValue.slice(h).replaceAll(WT,"")),x!==this.editorDiv){let w=d;for(const R of this.editorDiv.childNodes){if(R===x){w=m;continue}w.push(Z(E=$i,Uf,bC).call(E,R))}}d.push(c.nodeValue.slice(0,h).replaceAll(WT,""))}else if(c===this.editorDiv){let x=d,w=0;for(const R of this.editorDiv.childNodes)w++===h&&(x=m),x.push(Z(M=$i,Uf,bC).call(M,R))}Y(this,Zo,`${d.join(`
`)}${r}${m.join(`
`)}`),Z(this,rr,xC).call(this);const v=new Range;let y=d.reduce((x,w)=>x+w.length,0);for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const w=x.nodeValue.length;if(y<=w){v.setStart(x,y),v.setEnd(x,y);break}y-=w}a.removeAllRanges(),a.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,s){var o;let r=null;if(t instanceof p8){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:d,rotation:m,id:v,popupRef:y},textContent:A,textPosition:E,parent:{page:{pageNumber:M}}}=t;if(!A||A.length===0)return null;r=t={annotationType:Hn.FREETEXT,color:Array.from(h),fontSize:c,value:A.join(`
`),position:E,pageIndex:M-1,rect:d.slice(0),rotation:m,id:v,deleted:!1,popupRef:y}}const a=await super.deserialize(t,n,s);return Y(a,Qo,t.fontSize),Y(a,Hc,Zt.makeHexColor(...t.color)),Y(a,Zo,Z(o=$i,Uf,ON).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=r,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=$i._internalPadding*this.parentScale,s=this.getRect(n,n),r=Oi._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:S(this,Hc)),a={annotationType:Hn.FREETEXT,color:r,fontSize:S(this,Qo),value:Z(this,rr,x8).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!Z(this,rr,S8).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${S(this,Qo)}px * var(--scale-factor))`,s.color=S(this,Hc),n.replaceChildren();for(const a of S(this,Zo).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),n.append(o)}const r=$i._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:S(this,Zo)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Hc=new WeakMap,Zo=new WeakMap,vE=new WeakMap,ev=new WeakMap,Qo=new WeakMap,rr=new WeakSet,_8=function(t){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-S(this,Qo))*this.parentScale),Y(this,Qo,r),Z(this,rr,AC).call(this)},s=S(this,Qo);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},A8=function(t){const n=r=>{Y(this,Hc,this.editorDiv.style.color=r)},s=S(this,Hc);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},b8=function(){var s;const t=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(Z(s=$i,Uf,bC).call(s,r)),n=r);return t.join(`
`)},AC=function(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()},Uf=new WeakSet,bC=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(WT,"")},xC=function(){if(this.editorDiv.replaceChildren(),!!S(this,Zo))for(const t of S(this,Zo).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},x8=function(){return S(this,Zo).replaceAll(""," ")},ON=function(t){return t.replaceAll(" ","")},S8=function(t){const{value:n,fontSize:s,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((o,c)=>o!==r[c])||t.pageIndex!==a},te($i,Uf),bn($i,"_freeTextDefaultContent",""),bn($i,"_internalPadding",0),bn($i,"_defaultColor",null),bn($i,"_defaultFontSize",10),bn($i,"_type","freetext"),bn($i,"_editorType",Hn.FREETEXT);let PN=$i;class E8{toSVGPath(){rs("Abstract method `toSVGPath` must be implemented.")}get box(){rs("Abstract getter `box` must be implemented.")}serialize(e,t){rs("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){rs("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){rs("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var $o,zc,E_,M_,ah,qn,tv,nv,yE,_E,T_,C_,mp,AE,tR,nR,Sr,Sx,M8,T8,C8,w8,R8,D8;const nf=class nf{constructor({x:e,y:t},n,s,r,a,o=0){te(this,Sr);te(this,$o);te(this,zc,[]);te(this,E_);te(this,M_);te(this,ah,[]);te(this,qn,new Float64Array(18));te(this,tv);te(this,nv);te(this,yE);te(this,_E);te(this,T_);te(this,C_);te(this,mp,[]);Y(this,$o,n),Y(this,C_,r*s),Y(this,M_,a),S(this,qn).set([NaN,NaN,NaN,NaN,e,t],6),Y(this,E_,o),Y(this,_E,S(nf,AE)*s),Y(this,yE,S(nf,nR)*s),Y(this,T_,s),S(this,mp).push(e,t)}isEmpty(){return isNaN(S(this,qn)[8])}add({x:e,y:t}){var N;Y(this,tv,e),Y(this,nv,t);const[n,s,r,a]=S(this,$o);let[o,c,h,d]=S(this,qn).subarray(8,12);const m=e-h,v=t-d,y=Math.hypot(m,v);if(y<S(this,yE))return!1;const A=y-S(this,_E),E=A/y,M=E*m,x=E*v;let w=o,R=c;o=h,c=d,h+=M,d+=x,(N=S(this,mp))==null||N.push(e,t);const D=-x/A,P=M/A,I=D*S(this,C_),H=P*S(this,C_);return S(this,qn).set(S(this,qn).subarray(2,8),0),S(this,qn).set([h+I,d+H],4),S(this,qn).set(S(this,qn).subarray(14,18),12),S(this,qn).set([h-I,d-H],16),isNaN(S(this,qn)[6])?(S(this,ah).length===0&&(S(this,qn).set([o+I,c+H],2),S(this,ah).push(NaN,NaN,NaN,NaN,(o+I-n)/r,(c+H-s)/a),S(this,qn).set([o-I,c-H],14),S(this,zc).push(NaN,NaN,NaN,NaN,(o-I-n)/r,(c-H-s)/a)),S(this,qn).set([w,R,o,c,h,d],6),!this.isEmpty()):(S(this,qn).set([w,R,o,c,h,d],6),Math.abs(Math.atan2(R-c,w-o)-Math.atan2(x,M))<Math.PI/2?([o,c,h,d]=S(this,qn).subarray(2,6),S(this,ah).push(NaN,NaN,NaN,NaN,((o+h)/2-n)/r,((c+d)/2-s)/a),[o,c,w,R]=S(this,qn).subarray(14,18),S(this,zc).push(NaN,NaN,NaN,NaN,((w+o)/2-n)/r,((R+c)/2-s)/a),!0):([w,R,o,c,h,d]=S(this,qn).subarray(0,6),S(this,ah).push(((w+5*o)/6-n)/r,((R+5*c)/6-s)/a,((5*o+h)/6-n)/r,((5*c+d)/6-s)/a,((o+h)/2-n)/r,((c+d)/2-s)/a),[h,d,o,c,w,R]=S(this,qn).subarray(12,18),S(this,zc).push(((w+5*o)/6-n)/r,((R+5*c)/6-s)/a,((5*o+h)/6-n)/r,((5*c+d)/6-s)/a,((o+h)/2-n)/r,((c+d)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=S(this,ah),t=S(this,zc);if(isNaN(S(this,qn)[6])&&!this.isEmpty())return Z(this,Sr,M8).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);Z(this,Sr,C8).call(this,n);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return Z(this,Sr,T8).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,s,r,a){return new B8(e,t,n,s,r,a)}getOutlines(){var m;const e=S(this,ah),t=S(this,zc),n=S(this,qn),[s,r,a,o]=S(this,$o),c=new Float64Array((((m=S(this,mp))==null?void 0:m.length)??0)+2);for(let v=0,y=c.length-2;v<y;v+=2)c[v]=(S(this,mp)[v]-s)/a,c[v+1]=(S(this,mp)[v+1]-r)/o;if(c[c.length-2]=(S(this,tv)-s)/a,c[c.length-1]=(S(this,nv)-r)/o,isNaN(n[6])&&!this.isEmpty())return Z(this,Sr,w8).call(this,c);const h=new Float64Array(S(this,ah).length+24+S(this,zc).length);let d=e.length;for(let v=0;v<d;v+=2){if(isNaN(e[v])){h[v]=h[v+1]=NaN;continue}h[v]=e[v],h[v+1]=e[v+1]}d=Z(this,Sr,D8).call(this,h,d);for(let v=t.length-6;v>=6;v-=6)for(let y=0;y<6;y+=2){if(isNaN(t[v+y])){h[d]=h[d+1]=NaN,d+=2;continue}h[d]=t[v+y],h[d+1]=t[v+y+1],d+=2}return Z(this,Sr,R8).call(this,h,d),this.newFreeDrawOutline(h,c,S(this,$o),S(this,T_),S(this,E_),S(this,M_))}};$o=new WeakMap,zc=new WeakMap,E_=new WeakMap,M_=new WeakMap,ah=new WeakMap,qn=new WeakMap,tv=new WeakMap,nv=new WeakMap,yE=new WeakMap,_E=new WeakMap,T_=new WeakMap,C_=new WeakMap,mp=new WeakMap,AE=new WeakMap,tR=new WeakMap,nR=new WeakMap,Sr=new WeakSet,Sx=function(){const e=S(this,qn).subarray(4,6),t=S(this,qn).subarray(16,18),[n,s,r,a]=S(this,$o);return[(S(this,tv)+(e[0]-t[0])/2-n)/r,(S(this,nv)+(e[1]-t[1])/2-s)/a,(S(this,tv)+(t[0]-e[0])/2-n)/r,(S(this,nv)+(t[1]-e[1])/2-s)/a]},M8=function(){const[e,t,n,s]=S(this,$o),[r,a,o,c]=Z(this,Sr,Sx).call(this);return`M${(S(this,qn)[2]-e)/n} ${(S(this,qn)[3]-t)/s} L${(S(this,qn)[4]-e)/n} ${(S(this,qn)[5]-t)/s} L${r} ${a} L${o} ${c} L${(S(this,qn)[16]-e)/n} ${(S(this,qn)[17]-t)/s} L${(S(this,qn)[14]-e)/n} ${(S(this,qn)[15]-t)/s} Z`},T8=function(e){const t=S(this,zc);e.push(`L${t[4]} ${t[5]} Z`)},C8=function(e){const[t,n,s,r]=S(this,$o),a=S(this,qn).subarray(4,6),o=S(this,qn).subarray(16,18),[c,h,d,m]=Z(this,Sr,Sx).call(this);e.push(`L${(a[0]-t)/s} ${(a[1]-n)/r} L${c} ${h} L${d} ${m} L${(o[0]-t)/s} ${(o[1]-n)/r}`)},w8=function(e){const t=S(this,qn),[n,s,r,a]=S(this,$o),[o,c,h,d]=Z(this,Sr,Sx).call(this),m=new Float64Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-n)/r,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-n)/r,(t[5]-s)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(t[16]-n)/r,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-n)/r,(t[15]-s)/a],0),this.newFreeDrawOutline(m,e,S(this,$o),S(this,T_),S(this,E_),S(this,M_))},R8=function(e,t){const n=S(this,zc);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},D8=function(e,t){const n=S(this,qn).subarray(4,6),s=S(this,qn).subarray(16,18),[r,a,o,c]=S(this,$o),[h,d,m,v]=Z(this,Sr,Sx).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-r)/o,(n[1]-a)/c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,m,v,NaN,NaN,NaN,NaN,(s[0]-r)/o,(s[1]-a)/c],t),t+=24},te(nf,AE,8),te(nf,tR,2),te(nf,nR,S(nf,AE)+S(nf,tR));let Uw=nf;var w_,iv,_f,bE,el,xE,Vs,Bo,Ex,Mx,L8;class B8 extends E8{constructor(t,n,s,r,a,o){super();te(this,Bo);te(this,w_);te(this,iv,null);te(this,_f);te(this,bE);te(this,el);te(this,xE);te(this,Vs);Y(this,Vs,t),Y(this,el,n),Y(this,w_,s),Y(this,xE,r),Y(this,_f,a),Y(this,bE,o),Z(this,Bo,L8).call(this,o);const{x:c,y:h,width:d,height:m}=S(this,iv);for(let v=0,y=t.length;v<y;v+=2)t[v]=(t[v]-c)/d,t[v+1]=(t[v+1]-h)/m;for(let v=0,y=n.length;v<y;v+=2)n[v]=(n[v]-c)/d,n[v+1]=(n[v+1]-h)/m}toSVGPath(){const t=[`M${S(this,Vs)[4]} ${S(this,Vs)[5]}`];for(let n=6,s=S(this,Vs).length;n<s;n+=6){if(isNaN(S(this,Vs)[n])){t.push(`L${S(this,Vs)[n+4]} ${S(this,Vs)[n+5]}`);continue}t.push(`C${S(this,Vs)[n]} ${S(this,Vs)[n+1]} ${S(this,Vs)[n+2]} ${S(this,Vs)[n+3]} ${S(this,Vs)[n+4]} ${S(this,Vs)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,r],a){const o=s-t,c=r-n;let h,d;switch(a){case 0:h=Z(this,Bo,Ex).call(this,S(this,Vs),t,r,o,-c),d=Z(this,Bo,Ex).call(this,S(this,el),t,r,o,-c);break;case 90:h=Z(this,Bo,Mx).call(this,S(this,Vs),t,n,o,c),d=Z(this,Bo,Mx).call(this,S(this,el),t,n,o,c);break;case 180:h=Z(this,Bo,Ex).call(this,S(this,Vs),s,n,-o,c),d=Z(this,Bo,Ex).call(this,S(this,el),s,n,-o,c);break;case 270:h=Z(this,Bo,Mx).call(this,S(this,Vs),s,r,-o,-c),d=Z(this,Bo,Mx).call(this,S(this,el),s,r,-o,-c);break}return{outline:Array.from(h),points:[Array.from(d)]}}get box(){return S(this,iv)}newOutliner(t,n,s,r,a,o=0){return new Uw(t,n,s,r,a,o)}getNewOutline(t,n){const{x:s,y:r,width:a,height:o}=S(this,iv),[c,h,d,m]=S(this,w_),v=a*d,y=o*m,A=s*d+c,E=r*m+h,M=this.newOutliner({x:S(this,el)[0]*v+A,y:S(this,el)[1]*y+E},S(this,w_),S(this,xE),t,S(this,bE),n??S(this,_f));for(let x=2;x<S(this,el).length;x+=2)M.add({x:S(this,el)[x]*v+A,y:S(this,el)[x+1]*y+E});return M.getOutlines()}get mustRemoveSelfIntersections(){return!0}}w_=new WeakMap,iv=new WeakMap,_f=new WeakMap,bE=new WeakMap,el=new WeakMap,xE=new WeakMap,Vs=new WeakMap,Bo=new WeakSet,Ex=function(t,n,s,r,a){const o=new Float64Array(t.length);for(let c=0,h=t.length;c<h;c+=2)o[c]=n+t[c]*r,o[c+1]=s+t[c+1]*a;return o},Mx=function(t,n,s,r,a){const o=new Float64Array(t.length);for(let c=0,h=t.length;c<h;c+=2)o[c]=n+t[c+1]*r,o[c+1]=s+t[c]*a;return o},L8=function(t){const n=S(this,Vs);let s=n[4],r=n[5],a=s,o=r,c=s,h=r,d=s,m=r;const v=t?Math.max:Math.min;for(let x=6,w=n.length;x<w;x+=6){if(isNaN(n[x]))a=Math.min(a,n[x+4]),o=Math.min(o,n[x+5]),c=Math.max(c,n[x+4]),h=Math.max(h,n[x+5]),m<n[x+5]?(d=n[x+4],m=n[x+5]):m===n[x+5]&&(d=v(d,n[x+4]));else{const R=Zt.bezierBoundingBox(s,r,...n.slice(x,x+6));a=Math.min(a,R[0]),o=Math.min(o,R[1]),c=Math.max(c,R[2]),h=Math.max(h,R[3]),m<R[3]?(d=R[2],m=R[3]):m===R[3]&&(d=v(d,R[2]))}s=n[x+4],r=n[x+5]}const y=a-S(this,_f),A=o-S(this,_f),E=c-a+2*S(this,_f),M=h-o+2*S(this,_f);Y(this,iv,{x:y,y:A,width:E,height:M,lastPoint:[d,m]})};var SE,gp,Gc,ao,N8,SC,I8,P8,UN;class $H{constructor(e,t=0,n=0,s=!0){te(this,ao);te(this,SE);te(this,gp,[]);te(this,Gc,[]);let r=1/0,a=-1/0,o=1/0,c=-1/0;const h=10**-4;for(const{x:M,y:x,width:w,height:R}of e){const D=Math.floor((M-t)/h)*h,P=Math.ceil((M+w+t)/h)*h,I=Math.floor((x-t)/h)*h,H=Math.ceil((x+R+t)/h)*h,U=[D,I,H,!0],N=[P,I,H,!1];S(this,gp).push(U,N),r=Math.min(r,D),a=Math.max(a,P),o=Math.min(o,I),c=Math.max(c,H)}const d=a-r+2*n,m=c-o+2*n,v=r-n,y=o-n,A=S(this,gp).at(s?-1:-2),E=[A[0],A[2]];for(const M of S(this,gp)){const[x,w,R]=M;M[0]=(x-v)/d,M[1]=(w-y)/m,M[2]=(R-y)/m}Y(this,SE,{x:v,y,width:d,height:m,lastPoint:E})}getOutlines(){S(this,gp).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of S(this,gp))t[3]?(e.push(...Z(this,ao,UN).call(this,t)),Z(this,ao,I8).call(this,t)):(Z(this,ao,P8).call(this,t),e.push(...Z(this,ao,UN).call(this,t)));return Z(this,ao,N8).call(this,e)}}SE=new WeakMap,gp=new WeakMap,Gc=new WeakMap,ao=new WeakSet,N8=function(e){const t=[],n=new Set;for(const a of e){const[o,c,h]=a;t.push([o,c,a],[o,h,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const c=t[a][2],h=t[a+1][2];c.push(h),h.push(c),n.add(c),n.add(h)}const s=[];let r;for(;n.size>0;){const a=n.values().next().value;let[o,c,h,d,m]=a;n.delete(a);let v=o,y=c;for(r=[o,h],s.push(r);;){let A;if(n.has(d))A=d;else if(n.has(m))A=m;else break;n.delete(A),[o,c,h,d,m]=A,v!==o&&(r.push(v,y,o,y===c?c:h),v=o),y=y===c?h:c}r.push(v,y)}return new uce(s,S(this,SE))},SC=function(e){const t=S(this,Gc);let n=0,s=t.length-1;for(;n<=s;){const r=n+s>>1,a=t[r][0];if(a===e)return r;a<e?n=r+1:s=r-1}return s+1},I8=function([,e,t]){const n=Z(this,ao,SC).call(this,e);S(this,Gc).splice(n,0,[e,t])},P8=function([,e,t]){const n=Z(this,ao,SC).call(this,e);for(let s=n;s<S(this,Gc).length;s++){const[r,a]=S(this,Gc)[s];if(r!==e)break;if(r===e&&a===t){S(this,Gc).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,a]=S(this,Gc)[s];if(r!==e)break;if(r===e&&a===t){S(this,Gc).splice(s,1);return}}},UN=function(e){const[t,n,s]=e,r=[[t,n,s]],a=Z(this,ao,SC).call(this,s);for(let o=0;o<a;o++){const[c,h]=S(this,Gc)[o];for(let d=0,m=r.length;d<m;d++){const[,v,y]=r[d];if(!(h<=v||y<=c)){if(v>=c){if(y>h)r[d][1]=h;else{if(m===1)return[];r.splice(d,1),d--,m--}continue}r[d][2]=c,y>h&&r.push([t,h,y])}}}return r};var EE,R_;class uce extends E8{constructor(t,n){super();te(this,EE);te(this,R_);Y(this,R_,t),Y(this,EE,n)}toSVGPath(){const t=[];for(const n of S(this,R_)){let[s,r]=n;t.push(`M${s} ${r}`);for(let a=2;a<n.length;a+=2){const o=n[a],c=n[a+1];o===s?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,n,s,r],a){const o=[],c=s-t,h=r-n;for(const d of S(this,R_)){const m=new Array(d.length);for(let v=0;v<d.length;v+=2)m[v]=t+d[v]*c,m[v+1]=r-d[v+1]*h;o.push(m)}return o}get box(){return S(this,EE)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}EE=new WeakMap,R_=new WeakMap;class FN extends Uw{newFreeDrawOutline(e,t,n,s,r,a){return new hce(e,t,n,s,r,a)}get classNamesForDrawing(){return["highlight","free"]}}class hce extends B8{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,n,s,r,a=0){return new FN(e,t,n,s,r,a)}}var kc,sv,D_,vr,ME,B_,TE,CE,vp,Vc,L_,wE,Vi,HN,zN,GN,sg,O8,Wd;const Eo=class Eo{constructor({editor:e=null,uiManager:t=null}){te(this,Vi);te(this,kc,null);te(this,sv,null);te(this,D_);te(this,vr,null);te(this,ME,!1);te(this,B_,!1);te(this,TE,null);te(this,CE);te(this,vp,null);te(this,Vc,null);te(this,L_);var n;e?(Y(this,B_,!1),Y(this,L_,xn.HIGHLIGHT_COLOR),Y(this,TE,e)):(Y(this,B_,!0),Y(this,L_,xn.HIGHLIGHT_DEFAULT_COLOR)),Y(this,Vc,(e==null?void 0:e._uiManager)||t),Y(this,CE,S(this,Vc)._eventBus),Y(this,D_,(e==null?void 0:e.color)||((n=S(this,Vc))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),S(Eo,wE)||Y(Eo,wE,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return oi(this,"_keyboardManager",new l1([[["Escape","mac+Escape"],Eo.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Eo.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Eo.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Eo.prototype._moveToPrevious],[["Home","mac+Home"],Eo.prototype._moveToBeginning],[["End","mac+End"],Eo.prototype._moveToEnd]]))}renderButton(){const e=Y(this,kc,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=S(this,Vc)._signal;e.addEventListener("click",Z(this,Vi,sg).bind(this),{signal:t}),e.addEventListener("keydown",Z(this,Vi,GN).bind(this),{signal:t});const n=Y(this,sv,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=S(this,D_),e.append(n),e}renderMainDropdown(){const e=Y(this,vr,Z(this,Vi,HN).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===S(this,kc)){Z(this,Vi,sg).call(this,e);return}const t=e.target.getAttribute("data-color");t&&Z(this,Vi,zN).call(this,t,e)}_moveToNext(e){var t,n;if(!S(this,Vi,Wd)){Z(this,Vi,sg).call(this,e);return}if(e.target===S(this,kc)){(t=S(this,vr).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=S(this,vr))==null?void 0:t.firstChild)||e.target===S(this,kc)){S(this,Vi,Wd)&&this._hideDropdownFromKeyboard();return}S(this,Vi,Wd)||Z(this,Vi,sg).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!S(this,Vi,Wd)){Z(this,Vi,sg).call(this,e);return}(t=S(this,vr).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!S(this,Vi,Wd)){Z(this,Vi,sg).call(this,e);return}(t=S(this,vr).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=S(this,vr))==null||e.classList.add("hidden"),(t=S(this,vp))==null||t.abort(),Y(this,vp,null)}_hideDropdownFromKeyboard(){var e;if(!S(this,B_)){if(!S(this,Vi,Wd)){(e=S(this,TE))==null||e.unselect();return}this.hideDropdown(),S(this,kc).focus({preventScroll:!0,focusVisible:S(this,ME)})}}updateColor(e){if(S(this,sv)&&(S(this,sv).style.backgroundColor=e),!S(this,vr))return;const t=S(this,Vc).highlightColors.values();for(const n of S(this,vr).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=S(this,kc))==null||e.remove(),Y(this,kc,null),Y(this,sv,null),(t=S(this,vr))==null||t.remove(),Y(this,vr,null)}};kc=new WeakMap,sv=new WeakMap,D_=new WeakMap,vr=new WeakMap,ME=new WeakMap,B_=new WeakMap,TE=new WeakMap,CE=new WeakMap,vp=new WeakMap,Vc=new WeakMap,L_=new WeakMap,wE=new WeakMap,Vi=new WeakSet,HN=function(){const e=document.createElement("div"),t=S(this,Vc)._signal;e.addEventListener("contextmenu",Wl,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of S(this,Vc).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",S(Eo,wE)[n]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=s,r.setAttribute("aria-selected",s===S(this,D_)),r.addEventListener("click",Z(this,Vi,zN).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",Z(this,Vi,GN).bind(this),{signal:t}),e},zN=function(e,t){t.stopPropagation(),S(this,CE).dispatch("switchannotationeditorparams",{source:this,type:S(this,L_),value:e})},GN=function(e){Eo._keyboardManager.exec(this,e)},sg=function(e){if(S(this,Vi,Wd)){this.hideDropdown();return}if(Y(this,ME,e.detail===0),S(this,vp)||(Y(this,vp,new AbortController),window.addEventListener("pointerdown",Z(this,Vi,O8).bind(this),{signal:S(this,Vc).combinedSignal(S(this,vp))})),S(this,vr)){S(this,vr).classList.remove("hidden");return}const t=Y(this,vr,Z(this,Vi,HN).call(this));S(this,kc).append(t)},O8=function(e){var t;(t=S(this,vr))!=null&&t.contains(e.target)||this.hideDropdown()},Wd=function(){return S(this,vr)&&!S(this,vr).classList.contains("hidden")},te(Eo,wE,null);let Fw=Eo;var N_,RE,Af,rv,I_,Ol,DE,BE,av,jc,wa,Co,P_,bf,yr,O_,Ul,LE,On,kN,EC,U8,F8,H8,VN,rg,Vl,Ry,z8,MC,Tx,G8,k8,V8,j8,X8;const Si=class Si extends Oi{constructor(t){super({...t,name:"highlightEditor"});te(this,On);te(this,N_,null);te(this,RE,0);te(this,Af);te(this,rv,null);te(this,I_,null);te(this,Ol,null);te(this,DE,null);te(this,BE,0);te(this,av,null);te(this,jc,null);te(this,wa,null);te(this,Co,!1);te(this,P_,null);te(this,bf);te(this,yr,null);te(this,O_,"");te(this,Ul);te(this,LE,"");this.color=t.color||Si._defaultColor,Y(this,Ul,t.thickness||Si._defaultThickness),Y(this,bf,t.opacity||Si._defaultOpacity),Y(this,Af,t.boxes||null),Y(this,LE,t.methodOfCreation||""),Y(this,O_,t.text||""),this._isDraggable=!1,t.highlightId>-1?(Y(this,Co,!0),Z(this,On,EC).call(this,t),Z(this,On,rg).call(this)):S(this,Af)&&(Y(this,N_,t.anchorNode),Y(this,RE,t.anchorOffset),Y(this,DE,t.focusNode),Y(this,BE,t.focusOffset),Z(this,On,kN).call(this),Z(this,On,rg).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Si.prototype;return oi(this,"_keyboardManager",new l1([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:S(this,Co)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:S(this,Ul),methodOfCreation:S(this,LE)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var s;Oi.initialize(t,n),Si._defaultColor||(Si._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case xn.HIGHLIGHT_DEFAULT_COLOR:Si._defaultColor=n;break;case xn.HIGHLIGHT_THICKNESS:Si._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return S(this,P_)}updateParams(t,n){switch(t){case xn.HIGHLIGHT_COLOR:Z(this,On,U8).call(this,n);break;case xn.HIGHLIGHT_THICKNESS:Z(this,On,F8).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[xn.HIGHLIGHT_DEFAULT_COLOR,Si._defaultColor],[xn.HIGHLIGHT_THICKNESS,Si._defaultThickness]]}get propertiesToUpdate(){return[[xn.HIGHLIGHT_COLOR,this.color||Si._defaultColor],[xn.HIGHLIGHT_THICKNESS,S(this,Ul)||Si._defaultThickness],[xn.HIGHLIGHT_FREE,S(this,Co)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(Y(this,I_,new Fw({editor:this})),t.addColorPicker(S(this,I_))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Z(this,On,Tx).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,Z(this,On,Tx).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){Z(this,On,VN).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(Z(this,On,rg).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?Z(this,On,VN).call(this):t&&(Z(this,On,rg).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var r,a,o;const{drawLayer:n}=this.parent;let s;S(this,Co)?(t=(t-this.rotation+360)%360,s=Z(r=Si,Vl,Ry).call(r,S(this,jc).box,t)):s=Z(a=Si,Vl,Ry).call(a,this,t),n.rotate(S(this,wa),t),n.rotate(S(this,yr),t),n.updateBox(S(this,wa),s),n.updateBox(S(this,yr),Z(o=Si,Vl,Ry).call(o,S(this,Ol).box,t))}render(){if(this.div)return this.div;const t=super.render();S(this,O_)&&(t.setAttribute("aria-label",S(this,O_)),t.setAttribute("role","mark")),S(this,Co)?t.classList.add("free"):this.div.addEventListener("keydown",Z(this,On,z8).bind(this),{signal:this._uiManager._signal});const n=Y(this,av,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=S(this,rv);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),Pw(this,S(this,av),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(S(this,yr),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(S(this,yr),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:Z(this,On,MC).call(this,!0);break;case 1:case 3:Z(this,On,MC).call(this,!1);break}}select(){var t,n;super.select(),S(this,yr)&&((t=this.parent)==null||t.drawLayer.removeClass(S(this,yr),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(S(this,yr),"selected"))}unselect(){var t;super.unselect(),S(this,yr)&&((t=this.parent)==null||t.drawLayer.removeClass(S(this,yr),"selected"),S(this,Co)||Z(this,On,MC).call(this,!1))}get _mustFixPosition(){return!S(this,Co)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(S(this,wa),t),this.parent.drawLayer.show(S(this,yr),t))}static startHighlighting(t,n,{target:s,x:r,y:a}){const{x:o,y:c,width:h,height:d}=s.getBoundingClientRect(),m=new AbortController,v=t.combinedSignal(m),y=E=>{E.preventDefault(),E.stopPropagation()},A=E=>{m.abort(),Z(this,Vl,j8).call(this,t,E)};window.addEventListener("blur",A,{signal:v}),window.addEventListener("pointerup",A,{signal:v}),window.addEventListener("pointerdown",y,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Wl,{signal:v}),s.addEventListener("pointermove",Z(this,Vl,V8).bind(this,t),{signal:v}),this._freeHighlight=new FN({x:r,y:a},[o,c,h,d],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,n,s){var E,M,x,w;let r=null;if(t instanceof g8){const{data:{quadPoints:R,rect:D,rotation:P,id:I,color:H,opacity:U,popupRef:N},parent:{page:{pageNumber:O}}}=t;r=t={annotationType:Hn.HIGHLIGHT,color:Array.from(H),opacity:U,quadPoints:R,boxes:null,pageIndex:O-1,rect:D.slice(0),rotation:P,id:I,deleted:!1,popupRef:N}}else if(t instanceof bP){const{data:{inkLists:R,rect:D,rotation:P,id:I,color:H,borderStyle:{rawWidth:U},popupRef:N},parent:{page:{pageNumber:O}}}=t;r=t={annotationType:Hn.HIGHLIGHT,color:Array.from(H),thickness:U,inkLists:R,boxes:null,pageIndex:O-1,rect:D.slice(0),rotation:P,id:I,deleted:!1,popupRef:N}}const{color:a,quadPoints:o,inkLists:c,opacity:h}=t,d=await super.deserialize(t,n,s);d.color=Zt.makeHexColor(...a),Y(d,bf,h||1),c&&Y(d,Ul,t.thickness),d.annotationElementId=t.id||null,d._initialData=r;const[m,v]=d.pageDimensions,[y,A]=d.pageTranslation;if(o){const R=Y(d,Af,[]);for(let D=0;D<o.length;D+=8)R.push({x:(o[D]-y)/m,y:1-(o[D+1]-A)/v,width:(o[D+2]-o[D])/m,height:(o[D+1]-o[D+5])/v});Z(E=d,On,kN).call(E),Z(M=d,On,rg).call(M),d.rotate(d.rotation)}else if(c){Y(d,Co,!0);const R=c[0],D={x:R[0]-y,y:v-(R[1]-A)},P=new FN(D,[0,0,m,v],1,S(d,Ul)/2,!0,.001);for(let U=0,N=R.length;U<N;U+=2)D.x=R[U]-y,D.y=v-(R[U+1]-A),P.add(D);const{id:I,clipPathId:H}=n.drawLayer.draw(P,d.color,d._defaultOpacity,!0);Z(x=d,On,EC).call(x,{highlightOutlines:P.getOutlines(),highlightId:I,clipPathId:H}),Z(w=d,On,rg).call(w)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=Oi._colorManager.convert(this.color),r={annotationType:Hn.HIGHLIGHT,color:s,opacity:S(this,bf),thickness:S(this,Ul),quadPoints:Z(this,On,G8).call(this),outlines:Z(this,On,k8).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:Z(this,On,Tx).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!Z(this,On,X8).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};N_=new WeakMap,RE=new WeakMap,Af=new WeakMap,rv=new WeakMap,I_=new WeakMap,Ol=new WeakMap,DE=new WeakMap,BE=new WeakMap,av=new WeakMap,jc=new WeakMap,wa=new WeakMap,Co=new WeakMap,P_=new WeakMap,bf=new WeakMap,yr=new WeakMap,O_=new WeakMap,Ul=new WeakMap,LE=new WeakMap,On=new WeakSet,kN=function(){const t=new $H(S(this,Af),.001);Y(this,jc,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=S(this,jc).box;const n=new $H(S(this,Af),.0025,.001,this._uiManager.direction==="ltr");Y(this,Ol,n.getOutlines());const{lastPoint:s}=S(this,Ol).box;Y(this,P_,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},EC=function({highlightOutlines:t,highlightId:n,clipPathId:s}){var m,v;if(Y(this,jc,t),Y(this,Ol,t.getNewOutline(S(this,Ul)/2+1.5,.0025)),n>=0)Y(this,wa,n),Y(this,rv,s),this.parent.drawLayer.finalizeLine(n,t),Y(this,yr,this.parent.drawLayer.drawOutline(S(this,Ol)));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(S(this,wa),t),this.parent.drawLayer.updateBox(S(this,wa),Z(m=Si,Vl,Ry).call(m,S(this,jc).box,(y-this.rotation+360)%360)),this.parent.drawLayer.updateLine(S(this,yr),S(this,Ol)),this.parent.drawLayer.updateBox(S(this,yr),Z(v=Si,Vl,Ry).call(v,S(this,Ol).box,y))}const{x:a,y:o,width:c,height:h}=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=h;break;case 90:{const[y,A]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*A/y,this.height=h*y/A;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=h;break;case 270:{const[y,A]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*A/y,this.height=h*y/A;break}}const{lastPoint:d}=S(this,Ol).box;Y(this,P_,[(d[0]-a)/c,(d[1]-o)/h])},U8=function(t){const n=(a,o)=>{var c,h,d;this.color=a,(c=this.parent)==null||c.drawLayer.changeColor(S(this,wa),a),(h=S(this,I_))==null||h.updateColor(a),Y(this,bf,o),(d=this.parent)==null||d.drawLayer.changeOpacity(S(this,wa),o)},s=this.color,r=S(this,bf);this.addCommands({cmd:n.bind(this,t,Si._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},F8=function(t){const n=S(this,Ul),s=r=>{Y(this,Ul,r),Z(this,On,H8).call(this,r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},H8=function(t){if(!S(this,Co))return;Z(this,On,EC).call(this,{highlightOutlines:S(this,jc).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},VN=function(){S(this,wa)===null||!this.parent||(this.parent.drawLayer.remove(S(this,wa)),Y(this,wa,null),this.parent.drawLayer.remove(S(this,yr)),Y(this,yr,null))},rg=function(t=this.parent){S(this,wa)===null&&({id:Ja(this,wa)._,clipPathId:Ja(this,rv)._}=t.drawLayer.draw(S(this,jc),this.color,S(this,bf)),Y(this,yr,t.drawLayer.drawOutline(S(this,Ol))),S(this,av)&&(S(this,av).style.clipPath=S(this,rv)))},Vl=new WeakSet,Ry=function({x:t,y:n,width:s,height:r},a){switch(a){case 90:return{x:1-n-r,y:t,width:r,height:s};case 180:return{x:1-t-s,y:1-n-r,width:s,height:r};case 270:return{x:n,y:1-t-s,width:r,height:s}}return{x:t,y:n,width:s,height:r}},z8=function(t){Si._keyboardManager.exec(this,t)},MC=function(t){if(!S(this,N_))return;const n=window.getSelection();t?n.setPosition(S(this,N_),S(this,RE)):n.setPosition(S(this,DE),S(this,BE))},Tx=function(){return S(this,Co)?this.rotation:0},G8=function(){if(S(this,Co))return null;const[t,n]=this.pageDimensions,[s,r]=this.pageTranslation,a=S(this,Af),o=new Float32Array(a.length*8);let c=0;for(const{x:h,y:d,width:m,height:v}of a){const y=h*t+s,A=(1-d-v)*n+r;o[c]=o[c+4]=y,o[c+1]=o[c+3]=A,o[c+2]=o[c+6]=y+m*t,o[c+5]=o[c+7]=A+v*n,c+=8}return o},k8=function(t){return S(this,jc).serialize(t,Z(this,On,Tx).call(this))},V8=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},j8=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},X8=function(t){const{color:n}=this._initialData;return t.color.some((s,r)=>s!==n[r])},te(Si,Vl),bn(Si,"_defaultColor",null),bn(Si,"_defaultOpacity",1),bn(Si,"_defaultThickness",12),bn(Si,"_type","highlight"),bn(Si,"_editorType",Hn.HIGHLIGHT),bn(Si,"_freeHighlightId",-1),bn(Si,"_freeHighlight",null),bn(Si,"_freeHighlightClipId","");let Hw=Si;var ov,lv,oh,xf,Fl,cv,uv,hv,Sf,U_,fv,dv,yp,Pt,q8,Y8,W8,K8,XN,J8,qN,Z8,Q8,$8,e9,t9,ag,YN,WN,KN,TC,CC,Dy,JN,wC,Gf,n9,ZN,i9,s9,QN,RC,Cx;const Ms=class Ms extends Oi{constructor(t){super({...t,name:"inkEditor"});te(this,Pt);te(this,ov,0);te(this,lv,0);te(this,oh,null);te(this,xf,new Path2D);te(this,Fl,!1);te(this,cv,null);te(this,uv,!1);te(this,hv,!1);te(this,Sf,null);te(this,U_,null);te(this,fv,0);te(this,dv,0);te(this,yp,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,n){Oi.initialize(t,n)}static updateDefaultParams(t,n){switch(t){case xn.INK_THICKNESS:Ms._defaultThickness=n;break;case xn.INK_COLOR:Ms._defaultColor=n;break;case xn.INK_OPACITY:Ms._defaultOpacity=n/100;break}}updateParams(t,n){switch(t){case xn.INK_THICKNESS:Z(this,Pt,q8).call(this,n);break;case xn.INK_COLOR:Z(this,Pt,Y8).call(this,n);break;case xn.INK_OPACITY:Z(this,Pt,W8).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[xn.INK_THICKNESS,Ms._defaultThickness],[xn.INK_COLOR,Ms._defaultColor||Oi._defaultLineColor],[xn.INK_OPACITY,Math.round(Ms._defaultOpacity*100)]]}get propertiesToUpdate(){return[[xn.INK_THICKNESS,this.thickness||Ms._defaultThickness],[xn.INK_COLOR,this.color||Ms._defaultColor||Oi._defaultLineColor],[xn.INK_OPACITY,Math.round(100*(this.opacity??Ms._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Z(this,Pt,TC).call(this),Z(this,Pt,CC).call(this)),this.isAttachedToDOM||(this.parent.add(this),Z(this,Pt,Dy).call(this)),Z(this,Pt,Cx).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,S(this,oh)&&(clearTimeout(S(this,oh)),Y(this,oh,null)),(t=S(this,Sf))==null||t.disconnect(),Y(this,Sf,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions,s=this.width*t,r=this.height*n;this.setDimensions(s,r)}enableEditMode(){S(this,Fl)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,Z(this,Pt,YN).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),Z(this,Pt,WN).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){S(this,Fl)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Y(this,Fl,!0),this.div.classList.add("disabled"),Z(this,Pt,Cx).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||S(this,Fl)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),Z(this,Pt,J8).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),Z(this,Pt,qN).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),Z(this,Pt,KN).call(this,t)}canvasPointerleave(t){Z(this,Pt,KN).call(this,t)}get isResizable(){return!this.isEmpty()&&S(this,Fl)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,a,o]=Z(this,Pt,K8).call(this);if(this.setAt(s,r,0,0),this.setDims(a,o),Z(this,Pt,TC).call(this),this.width){const[c,h]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*h),this.setAt(t*c,n*h,this.width*c,this.height*h),Y(this,hv,!0),Z(this,Pt,Dy).call(this),this.setDims(this.width*c,this.height*h),Z(this,Pt,ag).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Z(this,Pt,CC).call(this),this.div}setDimensions(t,n){const s=Math.round(t),r=Math.round(n);if(S(this,fv)===s&&S(this,dv)===r)return;Y(this,fv,s),Y(this,dv,r),this.canvas.style.visibility="hidden";const[a,o]=this.parentDimensions;this.width=t/a,this.height=n/o,this.fixAndSetPosition(),S(this,Fl)&&Z(this,Pt,JN).call(this,t,n),Z(this,Pt,Dy).call(this),Z(this,Pt,ag).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,n,s){var M,x,w;if(t instanceof bP)return null;const r=await super.deserialize(t,n,s);r.thickness=t.thickness,r.color=Zt.makeHexColor(...t.color),r.opacity=t.opacity;const[a,o]=r.pageDimensions,c=r.width*a,h=r.height*o,d=r.parentScale,m=t.thickness/2;Y(r,Fl,!0),Y(r,fv,Math.round(c)),Y(r,dv,Math.round(h));const{paths:v,rect:y,rotation:A}=t;for(let{bezier:R}of v){R=Z(M=Ms,Gf,i9).call(M,R,y,A);const D=[];r.paths.push(D);let P=d*(R[0]-m),I=d*(R[1]-m);for(let U=2,N=R.length;U<N;U+=6){const O=d*(R[U]-m),G=d*(R[U+1]-m),oe=d*(R[U+2]-m),se=d*(R[U+3]-m),le=d*(R[U+4]-m),ue=d*(R[U+5]-m);D.push([[P,I],[O,G],[oe,se],[le,ue]]),P=le,I=ue}const H=Z(this,Gf,n9).call(this,D);r.bezierPath2D.push(H)}const E=Z(x=r,Pt,QN).call(x);return Y(r,lv,Math.max(Oi.MIN_SIZE,E[2]-E[0])),Y(r,ov,Math.max(Oi.MIN_SIZE,E[3]-E[1])),Z(w=r,Pt,JN).call(w,c,h),r}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=Oi._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Hn.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:Z(this,Pt,s9).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ov=new WeakMap,lv=new WeakMap,oh=new WeakMap,xf=new WeakMap,Fl=new WeakMap,cv=new WeakMap,uv=new WeakMap,hv=new WeakMap,Sf=new WeakMap,U_=new WeakMap,fv=new WeakMap,dv=new WeakMap,yp=new WeakMap,Pt=new WeakSet,q8=function(t){const n=r=>{this.thickness=r,Z(this,Pt,Cx).call(this)},s=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Y8=function(t){const n=r=>{this.color=r,Z(this,Pt,ag).call(this)},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xn.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},W8=function(t){const n=r=>{this.opacity=r,Z(this,Pt,ag).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:xn.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},K8=function(){const{parentRotation:t,parentDimensions:[n,s]}=this;switch(t){case 90:return[0,s,s,n];case 180:return[n,s,n,s];case 270:return[n,0,s,n];default:return[0,0,n,s]}},XN=function(){const{ctx:t,color:n,opacity:s,thickness:r,parentScale:a,scaleFactor:o}=this;t.lineWidth=r*a/o,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${Noe(s)}`},J8=function(t,n){this.canvas.addEventListener("contextmenu",Wl,{signal:this._uiManager._signal}),Z(this,Pt,WN).call(this),Y(this,cv,new AbortController);const s=this._uiManager.combinedSignal(S(this,cv));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,S(this,hv)||(Y(this,hv,!0),Z(this,Pt,Dy).call(this),this.thickness||(this.thickness=Ms._defaultThickness),this.color||(this.color=Ms._defaultColor||Oi._defaultLineColor),this.opacity??(this.opacity=Ms._defaultOpacity)),this.currentPath.push([t,n]),Y(this,uv,!1),Z(this,Pt,XN).call(this),Y(this,yp,()=>{Z(this,Pt,$8).call(this),S(this,yp)&&window.requestAnimationFrame(S(this,yp))}),window.requestAnimationFrame(S(this,yp))},qN=function(t,n){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&n===r)return;const a=this.currentPath;let o=S(this,xf);if(a.push([t,n]),Y(this,uv,!0),a.length<=2){o.moveTo(...a[0]),o.lineTo(t,n);return}a.length===3&&(Y(this,xf,o=new Path2D),o.moveTo(...a[0])),Z(this,Pt,e9).call(this,o,...a.at(-3),...a.at(-2),t,n)},Z8=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);S(this,xf).lineTo(...t)},Q8=function(t,n){Y(this,yp,null),t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),Z(this,Pt,qN).call(this,t,n),Z(this,Pt,Z8).call(this);let s;if(this.currentPath.length!==1)s=Z(this,Pt,t9).call(this);else{const h=[t,n];s=[[h,h.slice(),h.slice(),h]]}const r=S(this,xf),a=this.currentPath;this.currentPath=[],Y(this,xf,new Path2D);const o=()=>{this.allRawPaths.push(a),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Z(this,Pt,TC).call(this),Z(this,Pt,CC).call(this)),Z(this,Pt,Cx).call(this))};this.addCommands({cmd:o,undo:c,mustExec:!0})},$8=function(){if(!S(this,uv))return;Y(this,uv,!1);const t=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),s=n.map(o=>o[0]),r=n.map(o=>o[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...r)-t,Math.max(...r)+t;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const o of this.bezierPath2D)a.stroke(o);a.stroke(S(this,xf)),a.restore()},e9=function(t,n,s,r,a,o,c){const h=(n+r)/2,d=(s+a)/2,m=(r+o)/2,v=(a+c)/2;t.bezierCurveTo(h+2*(r-h)/3,d+2*(a-d)/3,m+2*(r-m)/3,v+2*(a-v)/3,m,v)},t9=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let s,[r,a]=t[0];for(s=1;s<t.length-2;s++){const[y,A]=t[s],[E,M]=t[s+1],x=(y+E)/2,w=(A+M)/2,R=[r+2*(y-r)/3,a+2*(A-a)/3],D=[x+2*(y-x)/3,w+2*(A-w)/3];n.push([[r,a],R,D,[x,w]]),[r,a]=[x,w]}const[o,c]=t[s],[h,d]=t[s+1],m=[r+2*(o-r)/3,a+2*(c-a)/3],v=[h+2*(o-h)/3,d+2*(c-d)/3];return n.push([[r,a],m,v,[h,d]]),n},ag=function(){if(this.isEmpty()){Z(this,Pt,wC).call(this);return}Z(this,Pt,XN).call(this);const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),Z(this,Pt,wC).call(this);for(const s of this.bezierPath2D)n.stroke(s)},YN=function(){if(S(this,U_))return;Y(this,U_,new AbortController);const t=this._uiManager.combinedSignal(S(this,U_));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},WN=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},KN=function(t){var n;(n=S(this,cv))==null||n.abort(),Y(this,cv,null),Z(this,Pt,YN).call(this),S(this,oh)&&clearTimeout(S(this,oh)),Y(this,oh,setTimeout(()=>{Y(this,oh,null),this.canvas.removeEventListener("contextmenu",Wl)},10)),Z(this,Pt,Q8).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},TC=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},CC=function(){Y(this,Sf,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),S(this,Sf).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=S(this,Sf))==null||t.disconnect(),Y(this,Sf,null)},{once:!0})},Dy=function(){if(!S(this,hv))return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),Z(this,Pt,wC).call(this)},JN=function(t,n){const s=Z(this,Pt,RC).call(this),r=(t-s)/S(this,lv),a=(n-s)/S(this,ov);this.scaleFactor=Math.min(r,a)},wC=function(){const t=Z(this,Pt,RC).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Gf=new WeakSet,n9=function(t){const n=new Path2D;for(let s=0,r=t.length;s<r;s++){const[a,o,c,h]=t[s];s===0&&n.moveTo(...a),n.bezierCurveTo(o[0],o[1],c[0],c[1],h[0],h[1])}return n},ZN=function(t,n,s){const[r,a,o,c]=n;switch(s){case 0:for(let h=0,d=t.length;h<d;h+=2)t[h]+=r,t[h+1]=c-t[h+1];break;case 90:for(let h=0,d=t.length;h<d;h+=2){const m=t[h];t[h]=t[h+1]+r,t[h+1]=m+a}break;case 180:for(let h=0,d=t.length;h<d;h+=2)t[h]=o-t[h],t[h+1]+=a;break;case 270:for(let h=0,d=t.length;h<d;h+=2){const m=t[h];t[h]=o-t[h+1],t[h+1]=c-m}break;default:throw new Error("Invalid rotation")}return t},i9=function(t,n,s){const[r,a,o,c]=n;switch(s){case 0:for(let h=0,d=t.length;h<d;h+=2)t[h]-=r,t[h+1]=c-t[h+1];break;case 90:for(let h=0,d=t.length;h<d;h+=2){const m=t[h];t[h]=t[h+1]-a,t[h+1]=m-r}break;case 180:for(let h=0,d=t.length;h<d;h+=2)t[h]=o-t[h],t[h+1]-=a;break;case 270:for(let h=0,d=t.length;h<d;h+=2){const m=t[h];t[h]=c-t[h+1],t[h+1]=o-m}break;default:throw new Error("Invalid rotation")}return t},s9=function(t,n,s,r){var d,m;const a=[],o=this.thickness/2,c=t*n+o,h=t*s+o;for(const v of this.paths){const y=[],A=[];for(let E=0,M=v.length;E<M;E++){const[x,w,R,D]=v[E];if(x[0]===D[0]&&x[1]===D[1]&&M===1){const se=t*x[0]+c,le=t*x[1]+h;y.push(se,le),A.push(se,le);break}const P=t*x[0]+c,I=t*x[1]+h,H=t*w[0]+c,U=t*w[1]+h,N=t*R[0]+c,O=t*R[1]+h,G=t*D[0]+c,oe=t*D[1]+h;E===0&&(y.push(P,I),A.push(P,I)),y.push(H,U,N,O,G,oe),A.push(H,U),E===M-1&&A.push(G,oe)}a.push({bezier:Z(d=Ms,Gf,ZN).call(d,y,r,this.rotation),points:Z(m=Ms,Gf,ZN).call(m,A,r,this.rotation)})}return a},QN=function(){let t=1/0,n=-1/0,s=1/0,r=-1/0;for(const a of this.paths)for(const[o,c,h,d]of a){const m=Zt.bezierBoundingBox(...o,...c,...h,...d);t=Math.min(t,m[0]),s=Math.min(s,m[1]),n=Math.max(n,m[2]),r=Math.max(r,m[3])}return[t,s,n,r]},RC=function(){return S(this,Fl)?Math.ceil(this.thickness*this.parentScale):0},Cx=function(t=!1){if(this.isEmpty())return;if(!S(this,Fl)){Z(this,Pt,ag).call(this);return}const n=Z(this,Pt,QN).call(this),s=Z(this,Pt,RC).call(this);Y(this,lv,Math.max(Oi.MIN_SIZE,n[2]-n[0])),Y(this,ov,Math.max(Oi.MIN_SIZE,n[3]-n[1]));const r=Math.ceil(s+S(this,lv)*this.scaleFactor),a=Math.ceil(s+S(this,ov)*this.scaleFactor),[o,c]=this.parentDimensions;this.width=r/o,this.height=a/c,this.setAspectRatio(r,a);const h=this.translationX,d=this.translationY;this.translationX=-n[0],this.translationY=-n[1],Z(this,Pt,Dy).call(this),Z(this,Pt,ag).call(this),Y(this,fv,r),Y(this,dv,a),this.setDims(r,a);const m=t?s/this.scaleFactor/2:0;this.translate(h-this.translationX-m,d-this.translationY-m)},te(Ms,Gf),bn(Ms,"_defaultColor",null),bn(Ms,"_defaultOpacity",1),bn(Ms,"_defaultThickness",1),bn(Ms,"_type","ink"),bn(Ms,"_editorType",Hn.INK);let jN=Ms;var Cs,sa,_p,Ef,Ap,F_,lh,Mf,ch,tl,H_,ni,wx,Rx,DC,eI,r9,BC,tI,LC,a9,o9;const Wx=class Wx extends Oi{constructor(t){super({...t,name:"stampEditor"});te(this,ni);te(this,Cs,null);te(this,sa,null);te(this,_p,null);te(this,Ef,null);te(this,Ap,null);te(this,F_,"");te(this,lh,null);te(this,Mf,null);te(this,ch,null);te(this,tl,!1);te(this,H_,!1);Y(this,Ef,t.bitmapUrl),Y(this,Ap,t.bitmapFile)}static initialize(t,n){Oi.initialize(t,n)}static get supportedTypes(){return oi(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return oi(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(Hn.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var t,n;S(this,sa)&&(Y(this,Cs,null),this._uiManager.imageManager.deleteId(S(this,sa)),(t=S(this,lh))==null||t.remove(),Y(this,lh,null),(n=S(this,Mf))==null||n.disconnect(),Y(this,Mf,null),S(this,ch)&&(clearTimeout(S(this,ch)),Y(this,ch,null))),super.remove()}rebuild(){if(!this.parent){S(this,sa)&&Z(this,ni,DC).call(this);return}super.rebuild(),this.div!==null&&(S(this,sa)&&S(this,lh)===null&&Z(this,ni,DC).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(S(this,_p)||S(this,Cs)||S(this,Ef)||S(this,Ap)||S(this,sa))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),S(this,Cs)?Z(this,ni,eI).call(this):Z(this,ni,DC).call(this),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(t*s,n*r,this.width*s,this.height*r)}return this.div}copyCanvas(t,n,s=!1){var y;t||(t=224);const{width:r,height:a}=S(this,Cs),o=new KL;let c=S(this,Cs),h=r,d=a,m=null;if(n){if(r>n||a>n){const U=Math.min(n/r,n/a);h=Math.floor(r*U),d=Math.floor(a*U)}m=document.createElement("canvas");const A=m.width=Math.ceil(h*o.sx),E=m.height=Math.ceil(d*o.sy);S(this,tl)||(c=Z(this,ni,BC).call(this,A,E));const M=m.getContext("2d");M.filter=this._uiManager.hcmFilter;let x="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":(y=window.matchMedia)!=null&&y.call(window,"(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",w="#42414d");const R=15,D=R*o.sx,P=R*o.sy,I=new OffscreenCanvas(D*2,P*2),H=I.getContext("2d");H.fillStyle=x,H.fillRect(0,0,D*2,P*2),H.fillStyle=w,H.fillRect(0,0,D,P),H.fillRect(D,P,D,P),M.fillStyle=M.createPattern(I,"repeat"),M.fillRect(0,0,A,E),M.drawImage(c,0,0,c.width,c.height,0,0,A,E)}let v=null;if(s){let A,E;if(o.symmetric&&c.width<t&&c.height<t)A=c.width,E=c.height;else if(c=S(this,Cs),r>t||a>t){const w=Math.min(t/r,t/a);A=Math.floor(r*w),E=Math.floor(a*w),S(this,tl)||(c=Z(this,ni,BC).call(this,A,E))}const x=new OffscreenCanvas(A,E).getContext("2d",{willReadFrequently:!0});x.drawImage(c,0,0,c.width,c.height,0,0,A,E),v={width:A,height:E,data:x.getImageData(0,0,A,E).data}}return{canvas:m,width:h,height:d,imageData:v}}getImageForAltText(){return S(this,lh)}static async deserialize(t,n,s){var E;let r=null;if(t instanceof v8){const{data:{rect:M,rotation:x,id:w,structParent:R,popupRef:D},container:P,parent:{page:{pageNumber:I}}}=t,H=P.querySelector("canvas"),U=s.imageManager.getFromCanvas(P.id,H);H.remove();const N=((E=await n._structTree.getAriaAttributes(`${uP}${w}`))==null?void 0:E.get("aria-label"))||"";r=t={annotationType:Hn.STAMP,bitmapId:U.id,bitmap:U.bitmap,pageIndex:I-1,rect:M.slice(0),rotation:x,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:N},isSvg:!1,structParent:R,popupRef:D}}const a=await super.deserialize(t,n,s),{rect:o,bitmap:c,bitmapUrl:h,bitmapId:d,isSvg:m,accessibilityData:v}=t;d&&s.imageManager.isValidId(d)?(Y(a,sa,d),c&&Y(a,Cs,c)):Y(a,Ef,h),Y(a,tl,m);const[y,A]=a.pageDimensions;return a.width=(o[2]-o[0])/y,a.height=(o[3]-o[1])/A,a.annotationElementId=t.id||null,v&&(a.altTextData=v),a._initialData=r,Y(a,H_,!!r),a}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Hn.STAMP,bitmapId:S(this,sa),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:S(this,tl),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=Z(this,ni,LC).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=Z(this,ni,o9).call(this,s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const o=S(this,tl)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(S(this,sa)))n.stamps.set(S(this,sa),{area:o,serialized:s}),s.bitmap=Z(this,ni,LC).call(this,!1);else if(S(this,tl)){const c=n.stamps.get(S(this,sa));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=Z(this,ni,LC).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Cs=new WeakMap,sa=new WeakMap,_p=new WeakMap,Ef=new WeakMap,Ap=new WeakMap,F_=new WeakMap,lh=new WeakMap,Mf=new WeakMap,ch=new WeakMap,tl=new WeakMap,H_=new WeakMap,ni=new WeakSet,wx=function(t,n=!1){if(!t){this.remove();return}Y(this,Cs,t.bitmap),n||(Y(this,sa,t.id),Y(this,tl,t.isSvg)),t.file&&Y(this,F_,t.file.name),Z(this,ni,eI).call(this)},Rx=function(){if(Y(this,_p,null),this._uiManager.enableWaiting(!1),!!S(this,lh)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&S(this,Cs)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&S(this,Cs)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},DC=function(){if(S(this,sa)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(S(this,sa)).then(s=>Z(this,ni,wx).call(this,s,!0)).finally(()=>Z(this,ni,Rx).call(this));return}if(S(this,Ef)){const s=S(this,Ef);Y(this,Ef,null),this._uiManager.enableWaiting(!0),Y(this,_p,this._uiManager.imageManager.getFromUrl(s).then(r=>Z(this,ni,wx).call(this,r)).finally(()=>Z(this,ni,Rx).call(this)));return}if(S(this,Ap)){const s=S(this,Ap);Y(this,Ap,null),this._uiManager.enableWaiting(!0),Y(this,_p,this._uiManager.imageManager.getFromFile(s).then(r=>Z(this,ni,wx).call(this,r)).finally(()=>Z(this,ni,Rx).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Wx.supportedTypesStr;const n=this._uiManager._signal;Y(this,_p,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),Z(this,ni,wx).call(this,r)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>Z(this,ni,Rx).call(this))),t.click()},eI=function(){const{div:t}=this;let{width:n,height:s}=S(this,Cs);const[r,a]=this.pageDimensions,o=.75;if(this.width)n=this.width*r,s=this.height*a;else if(n>o*r||s>o*a){const m=Math.min(o*r/n,o*a/s);n*=m,s*=m}const[c,h]=this.parentDimensions;this.setDims(n*c/r,s*h/a),this._uiManager.enableWaiting(!1);const d=Y(this,lh,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),Z(this,ni,tI).call(this,n,s),Z(this,ni,a9).call(this),S(this,H_)||(this.parent.addUndoableEditor(this),Y(this,H_,!0)),this._reportTelemetry({action:"inserted_image"}),S(this,F_)&&d.setAttribute("aria-label",S(this,F_))},r9=function(t,n){var o;const[s,r]=this.parentDimensions;this.width=t/s,this.height=n/r,(o=this._initialOptions)!=null&&o.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,S(this,ch)!==null&&clearTimeout(S(this,ch)),Y(this,ch,setTimeout(()=>{Y(this,ch,null),Z(this,ni,tI).call(this,t,n)},200))},BC=function(t,n){const{width:s,height:r}=S(this,Cs);let a=s,o=r,c=S(this,Cs);for(;a>2*t||o>2*n;){const h=a,d=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const m=new OffscreenCanvas(a,o);m.getContext("2d").drawImage(c,0,0,h,d,0,0,a,o),c=m.transferToImageBitmap()}return c},tI=function(t,n){const s=new KL,r=Math.ceil(t*s.sx),a=Math.ceil(n*s.sy),o=S(this,lh);if(!o||o.width===r&&o.height===a)return;o.width=r,o.height=a;const c=S(this,tl)?S(this,Cs):Z(this,ni,BC).call(this,r,a),h=o.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(c,0,0,c.width,c.height,0,0,r,a)},LC=function(t){if(t){if(S(this,tl)){const r=this._uiManager.imageManager.getSvgUrl(S(this,sa));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=S(this,Cs),n.getContext("2d").drawImage(S(this,Cs),0,0),n.toDataURL()}if(S(this,tl)){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*Op.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*Op.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(S(this,Cs),0,0,S(this,Cs).width,S(this,Cs).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(S(this,Cs))},a9=function(){this._uiManager._signal&&(Y(this,Mf,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&Z(this,ni,r9).call(this,n.width,n.height)})),S(this,Mf).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=S(this,Mf))==null||t.disconnect(),Y(this,Mf,null)},{once:!0}))},o9=function(t){var h;const{rect:n,pageIndex:s,accessibilityData:{altText:r}}=this._initialData,a=t.rect.every((d,m)=>Math.abs(d-n[m])<1),o=t.pageIndex===s,c=(((h=t.accessibilityData)==null?void 0:h.alt)||"")===r;return{isSame:a&&o&&c,isSameAltText:c}},bn(Wx,"_type","stamp"),bn(Wx,"_editorType",Hn.STAMP);let $N=Wx;var pv,z_,uh,bp,Tf,nl,xp,G_,k_,Ra,Cf,sn,Sp,la,l9,iI,sI,rI,NC;const wc=class wc{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:c,viewport:h,l10n:d}){te(this,la);te(this,pv);te(this,z_,!1);te(this,uh,null);te(this,bp,null);te(this,Tf,null);te(this,nl,new Map);te(this,xp,!1);te(this,G_,!1);te(this,k_,!1);te(this,Ra,null);te(this,Cf,null);te(this,sn);const m=[...S(wc,Sp).values()];if(!wc._initialized){wc._initialized=!0;for(const v of m)v.initialize(d,e)}e.registerEditorTypes(m),Y(this,sn,e),this.pageIndex=t,this.div=n,Y(this,pv,r),Y(this,uh,a),this.viewport=h,Y(this,Ra,c),this.drawLayer=o,this._structTree=s,S(this,sn).addLayer(this)}get isEmpty(){return S(this,nl).size===0}get isInvisible(){return this.isEmpty&&S(this,sn).getMode()===Hn.NONE}updateToolbar(e){S(this,sn).updateToolbar(e)}updateMode(e=S(this,sn).getMode()){switch(Z(this,la,NC).call(this),e){case Hn.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Hn.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Hn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of S(wc,Sp).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=S(this,Ra))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(S(this,sn).getMode()!==Hn.INK)return;if(!e){for(const n of S(this,nl).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){S(this,sn).setEditingState(e)}addCommands(e){S(this,sn).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=S(this,uh))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of S(this,nl).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(S(this,sn).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!S(this,uh))return;const t=S(this,uh).getEditableAnnotations();for(const n of t){if(n.hide(),S(this,sn).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;Y(this,k_,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of S(this,nl).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(S(this,uh)){const r=S(this,uh).getEditableAnnotations();for(const a of r){const{id:o}=a.data;if(S(this,sn).isDeletedAnnotationElement(o))continue;let c=t.get(o);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(o),c&&(S(this,sn).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}Z(this,la,NC).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of S(wc,Sp).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),Y(this,k_,!1)}getEditableAnnotation(e){var t;return((t=S(this,uh))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){S(this,sn).getActive()!==e&&S(this,sn).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=S(this,Ra))!=null&&e.div&&!S(this,Cf)){Y(this,Cf,new AbortController);const t=S(this,sn).combinedSignal(S(this,Cf));S(this,Ra).div.addEventListener("pointerdown",Z(this,la,l9).bind(this),{signal:t}),S(this,Ra).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=S(this,Ra))!=null&&e.div&&S(this,Cf)&&(S(this,Cf).abort(),Y(this,Cf,null),S(this,Ra).div.classList.remove("highlighting"))}enableClick(){if(S(this,bp))return;Y(this,bp,new AbortController);const e=S(this,sn).combinedSignal(S(this,bp));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=S(this,bp))==null||e.abort(),Y(this,bp,null)}attach(e){S(this,nl).set(e.id,e);const{annotationElementId:t}=e;t&&S(this,sn).isDeletedAnnotationElement(t)&&S(this,sn).removeDeletedAnnotationElement(e)}detach(e){var t;S(this,nl).delete(e.id),(t=S(this,pv))==null||t.removePointerInTextLayer(e.contentDiv),!S(this,k_)&&e.annotationElementId&&S(this,sn).addDeletedAnnotationElement(e)}remove(e){this.detach(e),S(this,sn).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,S(this,G_)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(S(this,sn).addDeletedAnnotationElement(e.annotationElementId),Oi.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),S(this,sn).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),S(this,sn).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!S(this,Tf)&&(e._focusEventsAllowed=!1,Y(this,Tf,setTimeout(()=>{Y(this,Tf,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:S(this,sn)._signal}),t.focus())},0))),e._structTreeParentId=(n=S(this,pv))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return S(this,sn).getId()}combinedSignal(e){return S(this,sn).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=S(this,la,iI))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){S(this,sn).updateToolbar(e),S(this,sn).updateMode(e);const{offsetX:n,offsetY:s}=Z(this,la,rI).call(this),r=this.getNextId(),a=Z(this,la,sI).call(this,{parent:this,id:r,x:n,y:s,uiManager:S(this,sn),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=S(wc,Sp).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,S(this,sn)))||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),r=Z(this,la,sI).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:S(this,sn),isCentered:t,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(Z(this,la,rI).call(this),!0)}setSelected(e){S(this,sn).setSelected(e)}toggleSelected(e){S(this,sn).toggleSelected(e)}unselect(e){S(this,sn).unselect(e)}pointerup(e){const{isMac:t}=so.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&S(this,xp)){if(Y(this,xp,!1),!S(this,z_)){Y(this,z_,!0);return}if(S(this,sn).getMode()===Hn.STAMP){S(this,sn).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(S(this,sn).getMode()===Hn.HIGHLIGHT&&this.enableTextSelection(),S(this,xp)){Y(this,xp,!1);return}const{isMac:t}=so.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;Y(this,xp,!0);const n=S(this,sn).getActive();Y(this,z_,!n||n.isEmpty())}findNewParent(e,t,n){const s=S(this,sn).findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=S(this,sn).getActive())==null?void 0:e.parent)===this&&(S(this,sn).commitOrRemove(),S(this,sn).setActiveEditor(null)),S(this,Tf)&&(clearTimeout(S(this,Tf)),Y(this,Tf,null));for(const n of S(this,nl).values())(t=S(this,pv))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,S(this,nl).clear(),S(this,sn).removeLayer(this)}render({viewport:e}){this.viewport=e,Nv(this.div,e);for(const t of S(this,sn).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){S(this,sn).commitOrRemove(),Z(this,la,NC).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Nv(this.div,{rotation:n}),t!==n)for(const s of S(this,nl).values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return S(this,sn).viewParameters.realScale}};pv=new WeakMap,z_=new WeakMap,uh=new WeakMap,bp=new WeakMap,Tf=new WeakMap,nl=new WeakMap,xp=new WeakMap,G_=new WeakMap,k_=new WeakMap,Ra=new WeakMap,Cf=new WeakMap,sn=new WeakMap,Sp=new WeakMap,la=new WeakSet,l9=function(e){S(this,sn).unselectAll();const{target:t}=e;if(t===S(this,Ra).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&S(this,Ra).div.contains(t)){const{isMac:n}=so.platform;if(e.button!==0||e.ctrlKey&&n)return;S(this,sn).showAllEditors("highlight",!0,!0),S(this,Ra).div.classList.add("free"),this.toggleDrawing(),Hw.startHighlighting(this,S(this,sn).direction==="ltr",{target:S(this,Ra).div,x:e.x,y:e.y}),S(this,Ra).div.addEventListener("pointerup",()=>{S(this,Ra).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:S(this,sn)._signal}),e.preventDefault()}},iI=function(){return S(wc,Sp).get(S(this,sn).getMode())},sI=function(e){const t=S(this,la,iI);return t?new t.prototype.constructor(e):null},rI=function(){const{x:e,y:t,width:n,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,t+s),h=(r+o)/2-e,d=(a+c)/2-t,[m,v]=this.viewport.rotation%180===0?[h,d]:[d,h];return{offsetX:m,offsetY:v}},NC=function(){Y(this,G_,!0);for(const e of S(this,nl).values())e.isEmpty()&&e.remove();Y(this,G_,!1)},bn(wc,"_initialized",!1),te(wc,Sp,new Map([PN,jN,$N,Hw].map(e=>[e._editorType,e])));let nI=wc;var hh,NE,ir,wf,IE,oI,Fv,lI,c9;const ea=class ea{constructor({pageIndex:e}){te(this,Fv);te(this,hh,null);te(this,NE,0);te(this,ir,new Map);te(this,wf,new Map);this.pageIndex=e}setParent(e){if(!S(this,hh)){Y(this,hh,e);return}if(S(this,hh)!==e){if(S(this,ir).size>0)for(const t of S(this,ir).values())t.remove(),e.append(t);Y(this,hh,e)}}static get _svgFactory(){return oi(this,"_svgFactory",new AP)}draw(e,t,n,s=!1){const r=Ja(this,NE)._++,a=Z(this,Fv,lI).call(this,e.box);a.classList.add(...e.classNamesForDrawing);const o=ea._svgFactory.createElement("defs");a.append(o);const c=ea._svgFactory.createElement("path");o.append(c);const h=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",h),c.setAttribute("d",e.toSVGPath()),s&&S(this,wf).set(r,c);const d=Z(this,Fv,c9).call(this,o,h),m=ea._svgFactory.createElement("use");return a.append(m),a.setAttribute("fill",t),a.setAttribute("fill-opacity",n),m.setAttribute("href",`#${h}`),S(this,ir).set(r,a),{id:r,clipPathId:`url(#${d})`}}drawOutline(e){const t=Ja(this,NE)._++,n=Z(this,Fv,lI).call(this,e.box);n.classList.add(...e.classNamesForOutlining);const s=ea._svgFactory.createElement("defs");n.append(s);const r=ea._svgFactory.createElement("path");s.append(r);const a=`path_p${this.pageIndex}_${t}`;r.setAttribute("id",a),r.setAttribute("d",e.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let o;if(e.mustRemoveSelfIntersections){const d=ea._svgFactory.createElement("mask");s.append(d),o=`mask_p${this.pageIndex}_${t}`,d.setAttribute("id",o),d.setAttribute("maskUnits","objectBoundingBox");const m=ea._svgFactory.createElement("rect");d.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const v=ea._svgFactory.createElement("use");d.append(v),v.setAttribute("href",`#${a}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const c=ea._svgFactory.createElement("use");n.append(c),c.setAttribute("href",`#${a}`),o&&c.setAttribute("mask",`url(#${o})`);const h=c.cloneNode();return n.append(h),c.classList.add("mainOutline"),h.classList.add("secondaryOutline"),S(this,ir).set(t,n),t}finalizeLine(e,t){const n=S(this,wf).get(e);S(this,wf).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){S(this,ir).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){S(this,wf).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var n;Z(n=ea,IE,oI).call(n,S(this,ir).get(e),t)}show(e,t){S(this,ir).get(e).classList.toggle("hidden",!t)}rotate(e,t){S(this,ir).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){S(this,ir).get(e).setAttribute("fill",t)}changeOpacity(e,t){S(this,ir).get(e).setAttribute("fill-opacity",t)}addClass(e,t){S(this,ir).get(e).classList.add(t)}removeClass(e,t){S(this,ir).get(e).classList.remove(t)}getSVGRoot(e){return S(this,ir).get(e)}remove(e){S(this,wf).delete(e),S(this,hh)!==null&&(S(this,ir).get(e).remove(),S(this,ir).delete(e))}destroy(){Y(this,hh,null);for(const e of S(this,ir).values())e.remove();S(this,ir).clear(),S(this,wf).clear()}};hh=new WeakMap,NE=new WeakMap,ir=new WeakMap,wf=new WeakMap,IE=new WeakSet,oI=function(e,{x:t=0,y:n=0,width:s=1,height:r=1}={}){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*r}%`},Fv=new WeakSet,lI=function(e){var n;const t=ea._svgFactory.create(1,1,!0);return S(this,hh).append(t),t.setAttribute("aria-hidden",!0),Z(n=ea,IE,oI).call(n,t,e),t},c9=function(e,t){const n=ea._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=ea._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s},te(ea,IE);let aI=ea;var fce=Rn.AbortException,dce=Rn.AnnotationEditorLayer,pce=Rn.AnnotationEditorParamsType,mce=Rn.AnnotationEditorType,gce=Rn.AnnotationEditorUIManager,u9=Rn.AnnotationLayer,h9=Rn.AnnotationMode,vce=Rn.ColorPicker,yce=Rn.DOMSVGFactory,_ce=Rn.DrawLayer,Ace=Rn.FeatureTest,xP=Rn.GlobalWorkerOptions,bce=Rn.ImageKind,xce=Rn.InvalidPDFException,Sce=Rn.MissingPDFException,Ece=Rn.OPS,Mce=Rn.OutputScale,Tce=Rn.PDFDataRangeTransport,Cce=Rn.PDFDateString,wce=Rn.PDFWorker,Rce=Rn.PasswordResponses,Dce=Rn.PermissionFlag,Bce=Rn.PixelsPerInch,Lce=Rn.RenderingCancelledException,f9=Rn.TextLayer,Nce=Rn.UnexpectedResponseException,Ice=Rn.Util,Pce=Rn.VerbosityLevel,Oce=Rn.XfaLayer,Uce=Rn.build,Fce=Rn.createValidAbsoluteUrl,Hce=Rn.fetchData,d9=Rn.getDocument,zce=Rn.getFilenameFromUrl,Gce=Rn.getPdfFilenameFromUrl,kce=Rn.getXfaPageViewport,Vce=Rn.isDataScheme,jce=Rn.isPdfFile,Xce=Rn.noContextMenu,qce=Rn.normalizeUnicode,Yce=Rn.setLayerDimensions,Wce=Rn.shadow,Kce=Rn.version;const Jce=Object.freeze(Object.defineProperty({__proto__:null,AbortException:fce,AnnotationEditorLayer:dce,AnnotationEditorParamsType:pce,AnnotationEditorType:mce,AnnotationEditorUIManager:gce,AnnotationLayer:u9,AnnotationMode:h9,ColorPicker:vce,DOMSVGFactory:yce,DrawLayer:_ce,FeatureTest:Ace,GlobalWorkerOptions:xP,ImageKind:bce,InvalidPDFException:xce,MissingPDFException:Sce,OPS:Ece,OutputScale:Mce,PDFDataRangeTransport:Tce,PDFDateString:Cce,PDFWorker:wce,PasswordResponses:Rce,PermissionFlag:Dce,PixelsPerInch:Bce,RenderingCancelledException:Lce,TextLayer:f9,UnexpectedResponseException:Nce,Util:Ice,VerbosityLevel:Pce,XfaLayer:Oce,build:Uce,createValidAbsoluteUrl:Fce,fetchData:Hce,getDocument:d9,getFilenameFromUrl:zce,getPdfFilenameFromUrl:Gce,getXfaPageViewport:kce,isDataScheme:Vce,isPdfFile:jce,noContextMenu:Xce,normalizeUnicode:qce,setLayerDimensions:Yce,shadow:Wce,version:Kce},Symbol.toStringTag,{value:"Module"}));var Nr=function(i,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,r;n<s;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return i.concat(r||Array.prototype.slice.call(e))},Zce=["onCopy","onCut","onPaste"],Qce=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],$ce=["onFocus","onBlur"],eue=["onInput","onInvalid","onReset","onSubmit"],tue=["onLoad","onError"],nue=["onKeyDown","onKeyPress","onKeyUp"],iue=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],sue=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],rue=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],aue=["onSelect"],oue=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],lue=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],cue=["onScroll"],uue=["onWheel"],hue=["onAnimationStart","onAnimationEnd","onAnimationIteration"],fue=["onTransitionEnd"],due=["onToggle"],pue=["onChange"],mue=Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr([],Zce,!0),Qce,!0),$ce,!0),eue,!0),tue,!0),nue,!0),iue,!0),sue,!0),rue,!0),aue,!0),oue,!0),lue,!0),cue,!0),uue,!0),hue,!0),fue,!0),pue,!0),due,!0);function p9(i,e){var t={};return mue.forEach(function(n){var s=i[n];s&&(e?t[n]=function(r){return s(r,e(n))}:t[n]=s)}),t}function u1(i){var e=!1,t=new Promise(function(n,s){i.then(function(r){return!e&&n(r)}).catch(function(r){return!e&&s(r)})});return{promise:t,cancel:function(){e=!0}}}var gue="Invariant failed";function Ji(i,e){if(!i)throw new Error(gue)}var KB,ez;function vue(){if(ez)return KB;ez=1;var i=function(){};return KB=i,KB}var yue=vue();const Da=PE(yue);var tz=Object.prototype.hasOwnProperty;function nz(i,e,t){for(t of i.keys())if(Vy(t,e))return t}function Vy(i,e){var t,n,s;if(i===e)return!0;if(i&&e&&(t=i.constructor)===e.constructor){if(t===Date)return i.getTime()===e.getTime();if(t===RegExp)return i.toString()===e.toString();if(t===Array){if((n=i.length)===e.length)for(;n--&&Vy(i[n],e[n]););return n===-1}if(t===Set){if(i.size!==e.size)return!1;for(n of i)if(s=n,s&&typeof s=="object"&&(s=nz(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(i.size!==e.size)return!1;for(n of i)if(s=n[0],s&&typeof s=="object"&&(s=nz(e,s),!s)||!Vy(n[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(t===DataView){if((n=i.byteLength)===e.byteLength)for(;n--&&i.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===e.byteLength)for(;n--&&i[n]===e[n];);return n===-1}if(!t||typeof i=="object"){n=0;for(t in i)if(tz.call(i,t)&&++n&&!tz.call(e,t)||!(t in e)||!Vy(i[t],e[t]))return!1;return Object.keys(e).length===n}}return i!==i&&e!==e}const m9=V.createContext(null);function jy({children:i,type:e}){return q.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:i})}const _ue="noopener noreferrer nofollow";class Aue{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ji(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Ji(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Ji(this.pdfDocument),Ji(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Ji(Array.isArray(t));const n=t[0];new Promise(s=>{Ji(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{s(r)}).catch(()=>{Ji(!1)}):typeof n=="number"?s(n):Ji(!1)}).then(s=>{const r=s+1;Ji(this.pdfViewer),Ji(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:r})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Ji(this.pdfViewer),Ji(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||_ue,e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const iz={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},A2=typeof window<"u",g9=A2&&window.location.protocol==="file:";function bue(i){return typeof i<"u"}function Qm(i){return bue(i)&&i!==null}function xue(i){return typeof i=="string"}function Sue(i){return i instanceof ArrayBuffer}function Eue(i){return Ji(A2),i instanceof Blob}function cI(i){return xue(i)&&/^data:/.test(i)}function sz(i){Ji(cI(i));const[e="",t=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function Mue(){return A2&&window.devicePixelRatio||1}const v9="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function rz(){Da(!g9,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${v9}`)}function Tue(){Da(!g9,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${v9}`)}function Ov(i){i!=null&&i.cancel&&i.cancel()}function uI(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function Cue(i){return i.name==="RenderingCancelledException"}function wue(i){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}function Rue(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function oA(){return V.useReducer(Rue,{value:void 0,error:void 0})}var Due=function(i,e,t,n){function s(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function o(d){try{h(n.next(d))}catch(m){a(m)}}function c(d){try{h(n.throw(d))}catch(m){a(m)}}function h(d){d.done?r(d.value):s(d.value).then(o,c)}h((n=n.apply(i,e||[])).next())})},az=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const{PDFDataRangeTransport:Bue}=Jce,Lue=(i,e)=>{switch(e){case iz.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");i(t);break}case iz.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");i(t);break}}};function oz(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const Nue=V.forwardRef(function(e,t){var{children:n,className:s,error:r="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:c,inputRef:h,imageResourcesPath:d,loading:m="Loading PDF",noData:v="No PDF file specified.",onItemClick:y,onLoadError:A,onLoadProgress:E,onLoadSuccess:M,onPassword:x=Lue,onSourceError:w,onSourceSuccess:R,options:D,renderMode:P,rotate:I}=e,H=az(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[U,N]=oA(),{value:O,error:G}=U,[oe,se]=oA(),{value:le,error:ue}=oe,z=V.useRef(new Aue),K=V.useRef([]),Q=V.useRef(void 0),de=V.useRef(void 0);c&&c!==Q.current&&oz(c)&&(Da(!Vy(c,Q.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Q.current=c),D&&D!==de.current&&(Da(!Vy(D,de.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),de.current=D);const W=V.useRef({scrollPageIntoView:et=>{const{dest:$,pageNumber:$e,pageIndex:Ie=$e-1}=et;if(y){y({dest:$,pageIndex:Ie,pageNumber:$e});return}const ke=K.current[Ie];if(ke){ke.scrollIntoView();return}Da(!1,`An internal link leading to page ${$e} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});V.useImperativeHandle(t,()=>({linkService:z,pages:K,viewer:W}),[]);function he(){R&&R()}function xe(){G&&(Da(!1,G.toString()),w&&w(G))}function ye(){N({type:"RESET"})}V.useEffect(ye,[c,N]);const fe=V.useCallback(()=>Due(this,void 0,void 0,function*(){if(!c)return null;if(typeof c=="string")return cI(c)?{data:sz(c)}:(rz(),{url:c});if(c instanceof Bue)return{range:c};if(Sue(c))return{data:c};if(A2&&Eue(c))return{data:yield wue(c)};if(Ji(typeof c=="object"),Ji(oz(c)),"url"in c&&typeof c.url=="string"){if(cI(c.url)){const{url:et}=c,$=az(c,["url"]),$e=sz(et);return Object.assign({data:$e},$)}rz()}return c}),[c]);V.useEffect(()=>{const et=u1(fe());return et.promise.then($=>{N({type:"RESOLVE",value:$})}).catch($=>{N({type:"REJECT",error:$})}),()=>{Ov(et)}},[fe,N]),V.useEffect(()=>{if(!(typeof O>"u")){if(O===!1){xe();return}he()}},[O]);function De(){le&&(M&&M(le),K.current=new Array(le.numPages),z.current.setDocument(le))}function Ce(){ue&&(Da(!1,ue.toString()),A&&A(ue))}V.useEffect(function(){se({type:"RESET"})},[se,O]),V.useEffect(function(){if(!O)return;const $=D?Object.assign(Object.assign({},O),D):O,$e=d9($);E&&($e.onProgress=E),x&&($e.onPassword=x);const Ie=$e,ke=Ie.promise.then(We=>{se({type:"RESOLVE",value:We})}).catch(We=>{Ie.destroyed||se({type:"REJECT",error:We})});return()=>{ke.finally(()=>Ie.destroy())}},[D,se,O]),V.useEffect(()=>{if(!(typeof le>"u")){if(le===!1){Ce();return}De()}},[le]),V.useEffect(function(){z.current.setViewer(W.current),z.current.setExternalLinkRel(a),z.current.setExternalLinkTarget(o)},[a,o]);const Ue=V.useCallback((et,$)=>{K.current[et]=$},[]),Qe=V.useCallback(et=>{delete K.current[et]},[]),xt=V.useMemo(()=>({imageResourcesPath:d,linkService:z.current,onItemClick:y,pdf:le,registerPage:Ue,renderMode:P,rotate:I,unregisterPage:Qe}),[d,y,le,Ue,P,I,Qe]),lt=V.useMemo(()=>p9(H,()=>le),[H,le]);function mt(){return q.jsx(m9.Provider,{value:xt,children:n})}function it(){return c?le==null?q.jsx(jy,{type:"loading",children:typeof m=="function"?m():m}):le===!1?q.jsx(jy,{type:"error",children:typeof r=="function"?r():r}):mt():q.jsx(jy,{type:"no-data",children:typeof v=="function"?v():v})}return q.jsx("div",Object.assign({className:Vr("react-pdf__Document",s),ref:h,style:{"--scale-factor":"1"}},lt,{children:it()}))});function y9(){return V.useContext(m9)}function _9(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=i.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(r){t.forEach(function(a){typeof a=="function"?a(r):a&&(a.current=r)})}}const A9=V.createContext(null),b9={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Iue=/^H(\d+)$/;function Pue(i){return i in b9}function b2(i){return"children"in i}function x9(i){return b2(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function Oue(i){const e={};if(b2(i)){const{role:t}=i,n=t.match(Iue);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(Pue(t)){const s=b9[t];s&&(e.role=s)}}return e}function S9(i){const e={};if(b2(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),x9(i)){const[t]=i.children;if(t){const n=S9(t);return Object.assign(Object.assign({},e),n)}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function Uue(i){return i?Object.assign(Object.assign({},Oue(i)),S9(i)):null}function E9({className:i,node:e}){const t=V.useMemo(()=>Uue(e),[e]),n=V.useMemo(()=>!b2(e)||x9(e)?null:e.children.map((s,r)=>q.jsx(E9,{node:s},r)),[e]);return q.jsx("span",Object.assign({className:i},t,{children:n}))}function x2(){return V.useContext(A9)}function Fue(){const i=x2();Ji(i);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=i,[n,s]=oA(),{value:r,error:a}=n,{customTextRenderer:o,page:c}=i;function h(){r&&t&&t(r)}function d(){a&&(Da(!1,a.toString()),e&&e(a))}return V.useEffect(function(){s({type:"RESET"})},[s,c]),V.useEffect(function(){if(o||!c)return;const v=u1(c.getStructTree()),y=v;return v.promise.then(A=>{s({type:"RESOLVE",value:A})}).catch(A=>{s({type:"REJECT",error:A})}),()=>Ov(y)},[o,c,s]),V.useEffect(()=>{if(r!==void 0){if(r===!1){d();return}h()}},[r]),r?q.jsx(E9,{className:"react-pdf__Page__structTree structTree",node:r}):null}const lz=h9;function Hue(i){const e=x2();Ji(e);const t=Object.assign(Object.assign({},e),i),{_className:n,canvasBackground:s,devicePixelRatio:r=Mue(),onRenderError:a,onRenderSuccess:o,page:c,renderForms:h,renderTextLayer:d,rotate:m,scale:v}=t,{canvasRef:y}=i;Ji(c);const A=V.useRef(null);function E(){c&&o&&o(uI(c,v))}function M(D){Cue(D)||(Da(!1,D.toString()),a&&a(D))}const x=V.useMemo(()=>c.getViewport({scale:v*r,rotation:m}),[r,c,m,v]),w=V.useMemo(()=>c.getViewport({scale:v,rotation:m}),[c,m,v]);V.useEffect(function(){if(!c)return;c.cleanup();const{current:P}=A;if(!P)return;P.width=x.width,P.height=x.height,P.style.width=`${Math.floor(w.width)}px`,P.style.height=`${Math.floor(w.height)}px`,P.style.visibility="hidden";const I={annotationMode:h?lz.ENABLE_FORMS:lz.ENABLE,canvasContext:P.getContext("2d",{alpha:!1}),viewport:x};s&&(I.background=s);const H=c.render(I),U=H;return H.promise.then(()=>{P.style.visibility="",E()}).catch(M),()=>Ov(U)},[s,c,h,x,w]);const R=V.useCallback(()=>{const{current:D}=A;D&&(D.width=0,D.height=0)},[]);return V.useEffect(()=>R,[R]),q.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:_9(y,A),style:{display:"block",userSelect:"none"},children:d?q.jsx(Fue,{}):null})}function zue(i){return"str"in i}function Gue(){const i=x2();Ji(i);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:a,pageIndex:o,pageNumber:c,rotate:h,scale:d}=i;Ji(a);const[m,v]=oA(),{value:y,error:A}=m,E=V.useRef(null);Da(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function M(){y&&n&&n(y)}function x(){A&&(Da(!1,A.toString()),t&&t(A))}V.useEffect(function(){v({type:"RESET"})},[a,v]),V.useEffect(function(){if(!a)return;const U=u1(a.getTextContent()),N=U;return U.promise.then(O=>{v({type:"RESOLVE",value:O})}).catch(O=>{v({type:"REJECT",error:O})}),()=>Ov(N)},[a,v]),V.useEffect(()=>{if(y!==void 0){if(y===!1){x();return}M()}},[y]);const w=V.useCallback(()=>{r&&r()},[r]),R=V.useCallback(H=>{Da(!1,H.toString()),s&&s(H)},[s]);function D(){const H=E.current;H&&H.classList.add("selecting")}function P(){const H=E.current;H&&H.classList.remove("selecting")}const I=V.useMemo(()=>a.getViewport({scale:d,rotation:h}),[a,h,d]);return V.useLayoutEffect(function(){if(!a||!y)return;const{current:U}=E;if(!U)return;U.innerHTML="";const N=a.streamTextContent({includeMarkedContent:!0}),O={container:U,textContentSource:N,viewport:I},G=new f9(O),oe=G;return G.render().then(()=>{const se=document.createElement("div");se.className="endOfContent",U.append(se);const le=U.querySelectorAll('[role="presentation"]');if(e){let ue=0;y.items.forEach((z,K)=>{if(!zue(z))return;const Q=le[ue];if(!Q)return;const de=e(Object.assign({pageIndex:o,pageNumber:c,itemIndex:K},z));Q.innerHTML=de,ue+=z.str&&z.hasEOL?2:1})}w()}).catch(R),()=>Ov(oe)},[e,R,w,a,o,c,y,I]),q.jsx("div",{className:Vr("react-pdf__Page__textContent","textLayer"),onMouseUp:P,onMouseDown:D,ref:E})}function kue(){const i=y9(),e=x2();Ji(e);const t=Object.assign(Object.assign({},i),e),{imageResourcesPath:n,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:o,onRenderAnnotationLayerSuccess:c,page:h,pdf:d,renderForms:m,rotate:v,scale:y=1}=t;Ji(d),Ji(h),Ji(s);const[A,E]=oA(),{value:M,error:x}=A,w=V.useRef(null);Da(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function R(){M&&a&&a(M)}function D(){x&&(Da(!1,x.toString()),r&&r(x))}V.useEffect(function(){E({type:"RESET"})},[E,h]),V.useEffect(function(){if(!h)return;const N=u1(h.getAnnotations()),O=N;return N.promise.then(G=>{E({type:"RESOLVE",value:G})}).catch(G=>{E({type:"REJECT",error:G})}),()=>{Ov(O)}},[E,h]),V.useEffect(()=>{if(M!==void 0){if(M===!1){D();return}R()}},[M]);function P(){c&&c()}function I(U){Da(!1,`${U}`),o&&o(U)}const H=V.useMemo(()=>h.getViewport({scale:y,rotation:v}),[h,v,y]);return V.useEffect(function(){if(!d||!h||!s||!M)return;const{current:N}=w;if(!N)return;const O=H.clone({dontFlip:!0}),G={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:N,l10n:null,page:h,structTreeLayer:null,viewport:O},oe={annotations:M,annotationStorage:d.annotationStorage,div:N,imageResourcesPath:n,linkService:s,page:h,renderForms:m,viewport:O};N.innerHTML="";try{new u9(G).render(oe),P()}catch(se){I(se)}return()=>{}},[M,n,s,h,d,m,H]),q.jsx("div",{className:Vr("react-pdf__Page__annotations","annotationLayer"),ref:w})}var Vue=function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t};const cz=1;function jue(i){const e=y9(),t=Object.assign(Object.assign({},e),i),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:a,children:o,className:c,customRenderer:h,customTextRenderer:d,devicePixelRatio:m,error:v="Failed to load the page.",height:y,inputRef:A,loading:E="Loading page",noData:M="No page specified.",onGetAnnotationsError:x,onGetAnnotationsSuccess:w,onGetStructTreeError:R,onGetStructTreeSuccess:D,onGetTextError:P,onGetTextSuccess:I,onLoadError:H,onLoadSuccess:U,onRenderAnnotationLayerError:N,onRenderAnnotationLayerSuccess:O,onRenderError:G,onRenderSuccess:oe,onRenderTextLayerError:se,onRenderTextLayerSuccess:le,pageIndex:ue,pageNumber:z,pdf:K,registerPage:Q,renderAnnotationLayer:de=!0,renderForms:W=!1,renderMode:he="canvas",renderTextLayer:xe=!0,rotate:ye,scale:fe=cz,unregisterPage:De,width:Ce}=t,Ue=Vue(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Qe,xt]=oA(),{value:lt,error:mt}=Qe,it=V.useRef(null);Ji(K);const et=Qm(z)?z-1:ue??null,$=z??(Qm(ue)?ue+1:null),$e=ye??(lt?lt.rotate:null),Ie=V.useMemo(()=>{if(!lt)return null;let pt=1;const vt=fe??cz;if(Ce||y){const Mt=lt.getViewport({scale:1,rotation:$e});Ce?pt=Ce/Mt.width:y&&(pt=y/Mt.height)}return vt*pt},[y,lt,$e,fe,Ce]);V.useEffect(function(){return()=>{Qm(et)&&s&&De&&De(et)}},[s,K,et,De]);function ke(){if(U){if(!lt||!Ie)return;U(uI(lt,Ie))}if(s&&Q){if(!Qm(et)||!it.current)return;Q(et,it.current)}}function We(){mt&&(Da(!1,mt.toString()),H&&H(mt))}V.useEffect(function(){xt({type:"RESET"})},[xt,K,et]),V.useEffect(function(){if(!K||!$)return;const vt=u1(K.getPage($)),Mt=vt;return vt.promise.then(kt=>{xt({type:"RESOLVE",value:kt})}).catch(kt=>{xt({type:"REJECT",error:kt})}),()=>Ov(Mt)},[xt,K,$]),V.useEffect(()=>{if(lt!==void 0){if(lt===!1){We();return}ke()}},[lt,Ie]);const St=V.useMemo(()=>lt&&Qm(et)&&$&&Qm($e)&&Qm(Ie)?{_className:n,canvasBackground:r,customTextRenderer:d,devicePixelRatio:m,onGetAnnotationsError:x,onGetAnnotationsSuccess:w,onGetStructTreeError:R,onGetStructTreeSuccess:D,onGetTextError:P,onGetTextSuccess:I,onRenderAnnotationLayerError:N,onRenderAnnotationLayerSuccess:O,onRenderError:G,onRenderSuccess:oe,onRenderTextLayerError:se,onRenderTextLayerSuccess:le,page:lt,pageIndex:et,pageNumber:$,renderForms:W,renderTextLayer:xe,rotate:$e,scale:Ie}:null,[n,r,d,m,x,w,R,D,P,I,N,O,G,oe,se,le,lt,et,$,W,xe,$e,Ie]),nt=V.useMemo(()=>p9(Ue,()=>lt&&(Ie?uI(lt,Ie):void 0)),[Ue,lt,Ie]),re=`${et}@${Ie}/${$e}`;function J(){switch(he){case"custom":return Ji(h),q.jsx(h,{},`${re}_custom`);case"none":return null;case"canvas":default:return q.jsx(Hue,{canvasRef:a},`${re}_canvas`)}}function Te(){return xe?q.jsx(Gue,{},`${re}_text`):null}function Ye(){return de?q.jsx(kue,{},`${re}_annotations`):null}function st(){return q.jsxs(A9.Provider,{value:St,children:[J(),Te(),Ye(),o]})}function je(){return $?K===null||lt===void 0||lt===null?q.jsx(jy,{type:"loading",children:typeof E=="function"?E():E}):K===!1||lt===!1?q.jsx(jy,{type:"error",children:typeof v=="function"?v():v}):st():q.jsx(jy,{type:"no-data",children:typeof M=="function"?M():M})}return q.jsx("div",Object.assign({className:Vr(n,c),"data-page-number":$,ref:_9(A,it),style:{"--scale-factor":`${Ie}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},nt,{children:je()}))}Tue();xP.workerSrc="pdf.worker.mjs";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xue=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),que=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),uz=i=>{const e=que(i);return e.charAt(0).toUpperCase()+e.slice(1)},M9=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),Yue=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wue={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kue=V.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:r,iconNode:a,...o},c)=>V.createElement("svg",{ref:c,...Wue,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:M9("lucide",s),...!r&&!Yue(o)&&{"aria-hidden":"true"},...o},[...a.map(([h,d])=>V.createElement(h,d)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=(i,e)=>{const t=V.forwardRef(({className:n,...s},r)=>V.createElement(Kue,{ref:r,iconNode:e,className:M9(`lucide-${Xue(uz(i))}`,`lucide-${i}`,n),...s}));return t.displayName=uz(i),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jue=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Zue=S2("github",Jue);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Que=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],$ue=S2("linkedin",Que);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ehe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],the=S2("mail",ehe);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nhe=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ihe=S2("phone",nhe),she="/a-collection-of-cool-things/assets/the-universe-DpZ2gw8h.png",rhe="/a-collection-of-cool-things/assets/world-staraunts-Qmambaon.png",ahe="/a-collection-of-cool-things/assets/devpost-1wnKfgQ7.png",ohe="/a-collection-of-cool-things/assets/i-hate-paywalls-U_In8Mu7.png",lhe="/a-collection-of-cool-things/assets/word-search-Du9quMk2.png",che="/a-collection-of-cool-things/assets/exo-query-mXHGjq1d.png",uhe="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAIsA4QMBIgACEQEDEQH/xAAaAAEAAwEBAQAAAAAAAAAAAAAABAUGBwID/8QAOhAAAQMDAwIEBAIGCwAAAAAAAAECAwQFBhESIQcxE0FRYRQycYEVYhdSkaHR8AgWIiM1N0JDg5TT/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AOGgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJtstFyu0ix2u31VY9O7aeFz9PronBY1OK1lAj/xest1vc3TWOaqa+T7xx7nJ90QChBPnp7bCmjbhJO7T/ap9G6/Vyov7iE/ZuXw923y3dwPIAAAAAAAAAAF/gePx5Rllvs007oIqlzt8jE1ciNY5y6e67dPuUBc4itQ3IaN9Hd4LRUscroqyocrWMdp5qiLoi9uU055A3V4xrArPdKm3T0mZzy0z1jdLBFC5jlTzReOPsUGQUOFQ22R9thyulq9P7p1fTxeE53ouioqa+qfsU6QlZnmn+ZeJr/yQ/8AmT23malxPIYs4y2w3ds9KraWKkkjV27a7jajWqqqu3Tvpp5Ac36QYPbM1qbnFdZqqNKVkbmfDva3XcrtddUX0I+vSz9XL/2U/wDE0v8AR3udBba29rca6mpUkihRizzNZu0V3bVeSj/TLlf6tt/6ifxA95HhNgdgLcvxeruXw7Zkjkp7g1m75tvG3jvp6mJx2hpbnfaChr6xKOlqJ2xyVCprsRV/lNV4Tz4LvKeoeRZTQMoLlUxNo2uRywwRIxrlTtr5rp6diZb7n06gooYqzHrtVVDWIkk61eze7zXai6InsB8ep+ETYXfVijR8lsqdX0kzuV082O/Mn700X6eOl2I0+aZK621lTLT08VO6d7okTc5EVrdEVeE5cnkvY6fQ5Rh/ULG6jGK58ls+Gha6knuM7Vcjk4RyPVeVThFRV1VFX3Mf0arKLFeodZBeq6lhatLJTNnSVFic/exU0f20VGrooEW5UnTC23GqoZ0yxZaWZ8L1Z8OrVc1younPbgpr2mBOt8n4C/I465OY0rI4XRu9l2u1T68mmvvTlLlfLjXxZfi7I6qqlmY11w5Rrnqqa8d9FKC/4G2yWyWtlynH6nZ8sFJVLJJIvoiI0DzhFmstzpKl92tWUVsjJERjrLTtkY1NOzteymgnxrDaaCSepx/qHDDG1XPkkoomtYid1VV7IXfQq5UVJi1/pqi60lBUzyaQunqGxKiqxURyarrwvmhBqMbyiqppKaq6oWiaCViskjkvcjmvavdFRU5QDA5OuJqym/qol4R2rvH/ABHw9NONu3Z99dfY0fT6xYPk6Nt11rbjbbu5NsarMzwZneW3VvC/lVefJfTP5biq40lLrebVcviN/wDh9R4nh7dPm4TTXXj6KbTpvhuMRUaX7NbvbtjW+LFbvimKuic6yNRdVX8iff0Aq6XpJe66+T0duqaSot0DlR10RypDwvKe7k05RNUReFUk1v6P8LVYaeJ2V3eP5pJXbKSN30T5vp/aT3QvZerlnu2QNorrb54sVY3wo4Il03eSOlYnzNRP9CLono5dNM51BwazUDHXXEb3QVlvc3e6kWsYs0Sfl51cnt8ye/cDP3zOsgvMfw8tZ8JQpw2ioWpBC1PTa3un11M0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB//2Q==",hhe="/a-collection-of-cool-things/assets/phone-5QBHXCAg.glb",fhe="/a-collection-of-cool-things/assets/book-BhOgVnfO.glb",dhe="/a-collection-of-cool-things/assets/pileofpapers-YRG9DT4t.glb";xP.workerSrc="node_modules/pdfjs-dist/build/pdf.worker.min.mjs";function phe({initialPosition:i,selectedPosition:e,isSelected:t,onClick:n,title:s,...r}){const{scene:a}=bA(hhe);a.traverse(h=>{h.isMesh&&(h.castShadow=!0,h.receiveShadow=!0)});const o=a.clone(),c=Q3({position:t?e:i,config:{mass:1,tension:200,friction:20}});return q.jsxs($3.group,{position:c.position,onClick:n,castShadow:!0,receiveShadow:!0,...r,children:[q.jsx("primitive",{object:o}),t&&q.jsx(C3,{position:[0,.15,.1],center:!0,children:q.jsx("div",{style:{background:"rgba(0,0,0,0.7)",padding:"8px 12px",borderRadius:"8px",color:"white",whiteSpace:"nowrap",fontSize:"1.2em"},children:s})})]})}const mhe=({initialPosition:i,selectedPosition:e,rotation:t,scale:n,onClick:s,isSelected:r,title:a})=>{const o=V.useRef(),{scene:c}=bA(fhe);c.traverse(m=>{m.isMesh&&(m.castShadow=!0,m.receiveShadow=!0)});const h=c.clone(),d=Q3({position:r?e:i,config:{mass:1,tension:200,friction:20}});return q.jsxs($3.group,{ref:o,position:d.position,rotation:t,scale:n,onClick:s,castShadow:!0,receiveShadow:!0,children:[q.jsx("primitive",{object:h}),r&&q.jsx(C3,{position:[0,.3,.1],center:!0,children:q.jsx("div",{style:{background:"rgba(0,0,0,0.7)",padding:"8px 12px",borderRadius:"8px",color:"white",whiteSpace:"nowrap",fontSize:"1.2em"},children:a})})]})};function ghe({initialPosition:i,selectedPosition:e,isSelected:t,onClick:n,title:s,...r}){const{scene:a}=bA(dhe);a.traverse(h=>{h.isMesh&&(h.castShadow=!0,h.receiveShadow=!0)});const o=a.clone(),c=Q3({position:t?e:i,config:{mass:1,tension:200,friction:20}});return q.jsxs($3.group,{position:c.position,onClick:n,castShadow:!0,receiveShadow:!0,...r,children:[q.jsx("primitive",{object:o}),t&&q.jsx(C3,{position:[0,.1,.1],center:!0,children:q.jsx("div",{style:{background:"rgba(0,0,0,0.7)",padding:"8px 12px",borderRadius:"8px",color:"white",whiteSpace:"nowrap",fontSize:"1.2em"},children:s})})]})}const vhe=({woodColor:i="#8B4513"})=>{const e=V.useRef(),t=new gA({color:i,metalness:0,roughness:.8}),n=2,s=1.5,r=.5,a=.05;return q.jsxs("group",{ref:e,position:[0,-.7,0],castShadow:!0,receiveShadow:!0,children:[q.jsx("mesh",{position:[0,0,-.5/2+a/2],material:t,castShadow:!0,receiveShadow:!0,children:q.jsx("boxGeometry",{args:[n,s,a]})}),q.jsx("mesh",{position:[0,-1.5/2+a/2,0],material:t,castShadow:!0,receiveShadow:!0,children:q.jsx("boxGeometry",{args:[n,a,r]})}),q.jsx("mesh",{position:[0,s/2-a/2,0],material:t,castShadow:!0,receiveShadow:!0,children:q.jsx("boxGeometry",{args:[n,a,r]})}),q.jsx("mesh",{position:[0,0,0],material:t,castShadow:!0,receiveShadow:!0,children:q.jsx("boxGeometry",{args:[n,a,r]})}),q.jsx("mesh",{position:[-2/2+a/2,0,0],material:t,castShadow:!0,receiveShadow:!0,children:q.jsx("boxGeometry",{args:[a,s,r]})}),q.jsx("mesh",{position:[n/2-a/2,0,0],material:t,castShadow:!0,receiveShadow:!0,children:q.jsx("boxGeometry",{args:[a,s,r]})})]})};function yhe({secureMode:i}){const[e,t]=V.useState(null),[n,{open:s,close:r}]=C7(!1),[a,o]=V.useState(null),[c,h]=V.useState(null),[d,m]=V.useState(1),v=({numPages:w})=>{h(w),m(1)},y={id:"book-1",title:"Projects of varying coolness",description:q.jsxs(Dc,{withIndicators:!0,height:400,slideSize:"100%",slideGap:"md",loop:!0,align:"start",className:"mt-4",children:[q.jsx(Dc.Slide,{children:q.jsxs(ta,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[q.jsx(ta.Section,{children:q.jsx(Qh,{src:uhe,height:160,alt:"Project 1"})}),q.jsxs(Ma,{justify:"space-between",mt:"md",mb:"xs",children:[q.jsx(Ki,{fw:500,children:"SWE @ SpaceX"}),q.jsx(Zh,{color:"yellow",variant:"light",children:"Work Experience"})]}),q.jsxs(Sn,{children:[q.jsx(Ki,{size:"sm",c:"dimmed",mb:"xs",children:"Worked on Starlink GNC, and then pivoted to F9 & Starship ground and optical software (some information has been redacted to comply with NDA requirements)."}),i?"Please login for more information.":q.jsxs("ul",{className:"list-disc list-inside text-gray-700 text-sm space-y-1",children:[q.jsx("li",{children:"Hardware data pipeline: built an end-to-end telemetry stream using Kafka, InfluxDB, and various SpaceX internal tools (responsible for tens of millions in cost-savings)."}),q.jsx("li",{children:"Tracking gimbal reverse engineering: built a custom library to control a vendor gimbal to track launch vehicles."}),q.jsx("li",{children:"Capacity planning tool: created a full-stack React/Node/Tornado web application to model future trends in global ground asset planning for Starlink."}),q.jsx("li",{children:"Backhaul algorithm development: built limit-of-physics downlink prioritization algorithms for Starlink satellite connections to minimize latency through fiber paths."})]})]})]})}),q.jsx(Dc.Slide,{children:q.jsxs(ta,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[q.jsx(ta.Section,{children:q.jsx(Qh,{src:she,height:160,alt:"Project 1"})}),q.jsxs(Ma,{justify:"space-between",mt:"md",mb:"xs",children:[q.jsx(Ki,{fw:500,children:"The Universe"}),q.jsx(Zh,{color:"green",variant:"light",children:"NASA"})]}),q.jsx(Ki,{size:"sm",c:"dimmed",children:"Used NASA 8k texture mappings for exoplanets and the sun. Implemented performance enhancements for mobile usage. Zoom in!"}),q.jsx(Cc,{href:"https://kamranmajid41.github.io/the-universe",target:"_blank",mt:"md",className:"block text-blue-600 hover:underline",children:"Link"})]})}),q.jsx(Dc.Slide,{children:q.jsxs(ta,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[q.jsx(ta.Section,{children:q.jsx(Qh,{src:rhe,height:160,alt:"Project 2"})}),q.jsxs(Ma,{justify:"space-between",mt:"md",mb:"xs",children:[q.jsx(Ki,{fw:500,children:"world-staraunts"}),q.jsx(Zh,{color:"blue",variant:"light",children:"React"})]}),q.jsx(Ki,{size:"sm",c:"dimmed",children:"React app to plot global cuisines you've tried."}),q.jsx(Cc,{href:"https://kamranmajid41.github.io/world-staraunts",target:"_blank",mt:"md",className:"block text-blue-600 hover:underline",children:"Link"})]})}),q.jsx(Dc.Slide,{children:q.jsxs(ta,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[q.jsx(ta.Section,{children:q.jsx(Qh,{src:lhe,height:160,alt:"Project 3"})}),q.jsxs(Ma,{justify:"space-between",mt:"md",mb:"xs",children:[q.jsx(Ki,{fw:500,children:"Word Search Generator"}),q.jsx(Zh,{color:"yellow",variant:"light",children:"AI"})]}),q.jsx(Ki,{size:"sm",c:"dimmed",children:"Put in your OpenAPI key, give it any prompt, and a word search puzzle will be automatically generated and downloaded (e.g. flora in south america)."}),q.jsx(Cc,{href:"https://kamranmajid41.github.io/word-search-generator",target:"_blank",mt:"md",className:"block text-blue-600 hover:underline",children:"Link"})]})}),q.jsx(Dc.Slide,{children:q.jsxs(ta,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[q.jsx(ta.Section,{children:q.jsx(Qh,{src:ohe,height:160,alt:"Project 3"})}),q.jsxs(Ma,{justify:"space-between",mt:"md",mb:"xs",children:[q.jsx(Ki,{fw:500,children:"i-hate-paywalls"}),q.jsx(Zh,{color:"yellow",variant:"light",children:"Node"})]}),q.jsx(Ki,{size:"sm",c:"dimmed",children:"Text-to-speech & PDF-to-text with no paywalls."}),q.jsx(Cc,{href:"https://kamranmajid41.github.io/i-hate-paywalls",target:"_blank",mt:"md",className:"block text-blue-600 hover:underline",children:"Link"})]})}),q.jsx(Dc.Slide,{children:q.jsxs(ta,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[q.jsx(ta.Section,{children:q.jsx(Qh,{src:ahe,height:160,alt:"Project 3"})}),q.jsxs(Ma,{justify:"space-between",mt:"md",mb:"xs",children:[q.jsx(Ki,{fw:500,children:"Hackathon Projects (1st Place /700 at Yale, etc.)"}),q.jsx(Zh,{color:"yellow",variant:"light",children:"Hackathons"})]}),q.jsx(Ki,{size:"sm",c:"dimmed",children:"Projects include: a collaborative learning platform, a ventilator splitter, and an AR decoration app."}),q.jsx(Cc,{href:"https://devpost.com/kamranmajid41",target:"_blank",mt:"md",className:"block text-blue-600 hover:underline",children:"Link"})]})}),q.jsx(Dc.Slide,{children:q.jsxs(ta,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[q.jsx(ta.Section,{children:q.jsx(Qh,{src:che,height:160,alt:"Project 3"})}),q.jsxs(Ma,{justify:"space-between",mt:"md",mb:"xs",children:[q.jsx(Ki,{fw:500,children:"exo-query"}),q.jsx(Zh,{color:"yellow",variant:"light",children:"NASA"})]}),q.jsx(Ki,{size:"sm",c:"dimmed",children:"Detailed information about all currently recognized exoplanets and automated texture generation using noise algorithms."}),q.jsx(Cc,{href:"https://kamranmajid41.github.io/exo-query",target:"_blank",mt:"md",className:"block text-blue-600 hover:underline",children:"Link"})]})})]}),initialPosition:[.8,-.7+.05/2+0,.05],selectedPosition:[.8,-.7+.05/2+0,.5],rotation:[0,Math.PI/2,0],scale:[.0275,.0275,.0275]},A={id:"phone-1",title:"Contact Information",description:q.jsxs(j_,{shadow:"sm",p:"lg",radius:"md",withBorder:!0,className:"mt-4",children:[q.jsx(AR,{order:3,className:"mb-4 text-center text-gray-800",children:"Get in Touch!"}),q.jsxs(BI,{cols:{base:1,sm:2},spacing:"lg",children:[q.jsxs(Ma,{wrap:"nowrap",align:"center",children:[q.jsx(the,{size:24,className:"text-blue-600"}),q.jsxs(Sn,{children:[q.jsx(Ki,{fw:500,children:"Email"}),q.jsx(Cc,{href:"mailto:kamranmajid41@gmail.com",target:"_blank",size:"sm",className:"text-blue-600 hover:underline",children:"kamranmajid41@gmail.com"})]})]}),q.jsxs(Ma,{wrap:"nowrap",align:"center",children:[q.jsx($ue,{size:24,className:"text-blue-600"}),q.jsxs(Sn,{children:[q.jsx(Ki,{fw:500,children:"LinkedIn"}),q.jsx(Cc,{href:"https://www.linkedin.com/in/kamran-majid-0571121b0/",target:"_blank",size:"sm",className:"text-blue-600 hover:underline",children:"linkedin.com/in/kamran-majid"})]})]}),q.jsxs(Ma,{wrap:"nowrap",align:"center",children:[q.jsx(Zue,{size:24,className:"text-blue-600"}),q.jsxs(Sn,{children:[q.jsx(Ki,{fw:500,children:"GitHub"}),q.jsx(Cc,{href:"https://github.com/kamranmajid41?tab=repositories",target:"_blank",size:"sm",className:"text-blue-600 hover:underline",children:"github.com/kamranmajid41"})]})]}),q.jsxs(Ma,{wrap:"nowrap",align:"center",children:[q.jsx(ihe,{size:24,className:"text-blue-600"}),q.jsxs(Sn,{children:[q.jsx(Ki,{fw:500,children:"Phone"}),q.jsx(Ki,{size:"sm",className:"text-gray-700",children:i?"Please sign in for phone #.":"+1 (703) 345-8427"})]})]})]})]}),initialPosition:[-.6,-.3+.05/2+.325,.05],selectedPosition:[-.6,-.3+.05/2+.325,.5],scale:[.015,.015,.015],rotation:[Math.PI,2*Math.PI,0]},E={id:"papers-1",title:"Resume/CV",description:q.jsxs(Sn,{className:"mt-4 flex flex-col items-center",children:[q.jsxs(j_,{shadow:"sm",p:"md",radius:"md",withBorder:!0,className:"w-full max-w-xl",children:[q.jsxs(Nue,{file:"src/assets/Res_Kam.pdf",onLoadSuccess:v,onLoadError:console.error,className:"w-full h-full",children:[q.jsx(jue,{pageNumber:d,width:Math.min(window.innerWidth*.7,600)})," "]}),q.jsxs(Ma,{justify:"center",mt:"md",children:[q.jsxs(Ki,{size:"sm",className:"text-gray-700",children:["Page ",d," of ",c]}),q.jsxs(Ma,{children:[q.jsx(Bp,{onClick:()=>m(w=>Math.max(w-1,1)),disabled:d<=1,children:"Previous"}),q.jsx(Bp,{onClick:()=>m(w=>Math.min(w+1,c)),disabled:d>=c,children:"Next"})]})]})]}),q.jsx(Ki,{size:"sm",c:"dimmed",className:"mt-4 text-center",children:"For a downloadable version, please contact me."})]}),initialPosition:[-.1,-.7+.05/2+0,.05],selectedPosition:[-.1,-.7+.05/2+0,.5],scale:[.7,.7,.7],rotation:[0,-.2,0]},M=[y,A,E],x=w=>{if(e===w)t(null),r(),o(null);else{t(w);const R=M.find(D=>D.id===w);o(R),s()}};return q.jsxs(q.Fragment,{children:[q.jsx(au,{opened:n,onClose:r,title:a?a.title:"",position:"right",size:"lg",padding:"md",overlayProps:{backgroundOpacity:.5,blur:4},zIndex:1e3,children:a?q.jsxs(Sn,{children:[a.description," "]}):q.jsx("p",{className:"text-gray-500",children:"Select an object to see its details."})}),q.jsxs(Kk,{shadows:!0,camera:{position:[0,.5,3],fov:60},gl:{antialias:!0,toneMapping:xR},dpr:[1,2],style:{width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:-1,background:"#1a1a1a"},children:[q.jsxs(V.Suspense,{fallback:null,children:[q.jsx(Tie,{preset:"sunset",background:!0,blur:.5}),q.jsx("directionalLight",{position:[5,10,5],intensity:1.5,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-near":.5,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10}),q.jsx("pointLight",{position:[-3,2,2],intensity:.8}),q.jsx("ambientLight",{intensity:.3}),q.jsx(vhe,{woodColor:"#5C4033"}),q.jsx(phe,{initialPosition:A.initialPosition,selectedPosition:A.selectedPosition,scale:A.scale,rotation:A.rotation,onClick:()=>x(A.id),isSelected:e===A.id,title:A.title}),q.jsx(mhe,{initialPosition:y.initialPosition,selectedPosition:y.selectedPosition,rotation:y.rotation,scale:y.scale,onClick:()=>x(y.id),isSelected:e===y.id,title:y.title}),q.jsx(ghe,{initialPosition:E.initialPosition,selectedPosition:E.selectedPosition,scale:E.scale,rotation:E.rotation,onClick:()=>x(E.id),isSelected:e===E.id,title:E.title})]}),q.jsx(Cie,{position:[0,-.75,0],scale:10,far:1,blur:2,opacity:.75,rotation:[Math.PI/2,0,0]}),q.jsx(o5,{makeDefault:!0}),q.jsxs(gae,{children:[q.jsx(_ae,{luminanceThreshold:.9,luminanceSmoothing:.9,height:300}),q.jsx(yae,{focusDistance:0,focalLength:.02,bokehScale:2,height:480}),q.jsx(bae,{eskil:!1,offset:.1,darkness:.8}),q.jsx(Aae,{adaptive:!0})]})]})]})}function _he({user:i,onLogout:e}){return q.jsxs(q.Fragment,{children:[q.jsx(yhe,{secureMode:i.name.toLowerCase()=="guest"}),q.jsx("img",{src:i.picture,alt:"Profile",style:{borderRadius:"50%",width:38,height:38,objectFit:"cover",position:"fixed",top:20,right:20,zIndex:1e3}}),q.jsx(Bp,{color:"red",onClick:e,variant:"light",style:{position:"fixed",top:20,right:75,zIndex:1e3},children:"Log Out"}),q.jsx(hR,{size:"sm",my:"xl",style:{marginTop:20,position:"fixed",left:10,zIndex:1e3},children:q.jsx(_R,{spacing:"sm",align:"flex-start",children:q.jsxs(Ki,{variant:"gradient",gradient:{from:"indigo",to:"cyan",deg:45},size:"xl",weight:700,style:{fontFamily:"Poppins, sans-serif"},children:["Welcome, ",i.name.toLowerCase()]})})})]})}function Ahe(){const[i,e]=V.useState(null);function t(s){e(s)}function n(){e(null)}return q.jsxs(q.Fragment,{children:[i&&q.jsx(_he,{user:i,onLogout:n}),!i&&q.jsx(hR,{size:"xl",my:"xl",children:q.jsxs(CI,{justify:"space-between",align:"center",direction:"row",gap:"xl",children:[q.jsxs(_R,{spacing:"sm",style:{flex:1},children:[q.jsx(AR,{order:2,c:"white",children:"a-collection-of-cool-creations"}),q.jsx(Ki,{size:"md",children:"by kamran majid"}),q.jsx(L4,{h:"30pt"}),q.jsxs(Ma,{spacing:"md",children:[q.jsx(HO,{onLoginSuccess:t,buttonType:"google"}),q.jsx(Ki,{children:"or"}),q.jsx(HO,{onLoginSuccess:t,buttonType:"guest"})]})]}),q.jsx("div",{style:{width:700,height:700,flexShrink:0},children:q.jsxs(Kk,{children:[q.jsx("ambientLight",{intensity:10}),q.jsx("pointLight",{position:[10,10,10]}),q.jsx(Vte,{}),q.jsx(o5,{enableZoom:!1})]})})]})})]})}pz.createRoot(document.getElementById("root")).render(q.jsx(Fz,{defaultColorScheme:"dark",children:q.jsx(V.StrictMode,{children:q.jsx(Ahe,{})})}));
